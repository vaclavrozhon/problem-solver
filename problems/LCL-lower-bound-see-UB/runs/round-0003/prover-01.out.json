{
  "progress_md": "Round goal\n- Deliver a clean, radius-1, per-bit boundary-probe Type-Separation Lemma (Option A) that yields 2^B distinct \u201cvertex\u201d context types \u03c4_u, with a concrete deterministic pointer gadget and explicit gating against error-escapes under reserved probes.\n- State the canonical vertex-context lemma (existence of L(u), R(v) types adjacent to S only) with a pumping-based padding argument to hit lengths \u2113_pump or \u2113_pump+1 without disturbing the port zone.\n- Formalize the seam gadget lemma that simulates D(u,v) across the bridge and gates acceptance by \u201cif EDGE=1 then colors differ, else vacuous,\u201d while keeping error-chains disabled in the active bridge mode. Provide alphabet/radius bookkeeping and a B=2 sanity check blueprint.\n\nContext recap and constraints we must respect\n- \u03b2-normalized, radius-1: Cin\u2013out ties outputs to input bits locally; Cout\u2013out is the only adjacency checker. All gadgets must be nearest-neighbor.\n- Types are defined over fixed interior inputs (clarified in output.md remarks). Distinguishing types only requires showing E_w(a\u22c6) differs for some fixed boundary-input tuple a\u22c6.\n- Feasible-function existence (F1) is the only property we reduce to (we neutralize (F2) later by \u22a5-filler). We must ensure that colored S is only legal on canonical vertex contexts, so f is only \u201cfree\u201d on \u03c4_u and is forced to \u22a5 elsewhere.\n\nLemma TS (Per-bit probe type separation, radius 1)\nStatement. Fix parameters B = s^{c0}, \u03b2 = s^{c1} with c1 \u2265 c0. There exist global Cin\u2013out, Cout\u2013out and a family of \u03b2\u2032 \u2265 B reserved boundary-output 4-tuples {Q_j: j \u2208 [B]} and a fixed boundary-input assignment a\u22c6 \u2208 \u03a3_in^4 such that the following holds. For any word W_L(u) that contains a well-formed left-vertex block (defined below) positioned O(1) from S and encoding u \u2208 {0,1}^B adjacent to S, and has no errors:\n- E_{W_L(u)}(a\u22c6)[Q_j] = 1 iff u_j = 1.\nConsequently, for u \u2260 u\u2032, Type(W_L(u)) \u2260 Type(W_L(u\u2032)) (they differ on E(\u00b7)(a\u22c6) for some Q_j), so there are at least 2^B distinct left-vertex types. Symmetrically for right-vertex types.\n\nDesign (radius-1 with uniform global rules)\n- Tracks in \u03a3_out (constant multiplicity; folded into single symbols):\n  1) Role/phase \u2208 {HEAD, PORT, BRIDGE, PAD, ERR} \u00d7 {phase mod c}.\n  2) RID data bit (output track) required to equal the input bit when Role=PORT (Cin\u2013out enforces copy).\n  3) Address track Addr \u2208 {1,2,\u2026,B} present only when Role=PORT. Each Addr=j is a distinct output symbol component; total O(B).\n  4) Probe corridor states Probe_j,Move and Probe_j,Test (two local phases) for each j \u2208 [B]. These travel inside W_L(u) when a probe is active. Total O(B) many \u201cprobe-id\u201d states, permitted since \u03b2 = poly(s).\n  5) Neutral \u22a5 and error-chain alphabet (ERR_x) as in \u00a73 of the reference, but these are disabled in probe-active mode (see below).\n- Reserved boundary outputs Q_j (two-node boundary on the far-left and the two nodes just inside it) place a start-token that forces the unique corridor Role=BRIDGE with state Probe_j,Move to appear immediately to the right of the left boundary, propagating deterministically rightward cell-by-cell.\n- Corridor-path and uniqueness: Cout\u2013out enumerates exactly one successor for each Probe_j,Move, forcing the head to march right until it meets a cell whose Role=PORT. If no PORT appears within the allowed window, no outgoing pair is allowed: the DP dies (reject). Error-chain and \u22a5 are disallowed adjacent to Probe_j,* by omitting such pairs from Cout\u2013out.\n- Address match and test: At a PORT cell, Cout\u2013out allows Probe_j,Move to step to Probe_j,Test iff the PORT cell carries Addr=j; otherwise it must continue moving (still Probe_j,Move). In Probe_j,Test, Cout\u2013out further requires the PORT cell\u2019s RID bit be 1; only then does it allow a local acceptor \u201csink\u201d (a short fixed BRIDGE\u2192PAD termination sequence). If RID=0, there is simply no legal outgoing pair for Probe_j,Test at this site (reject). Again, no error-escape pairs exist in these states.\n- Disabling probes when not selected: For any boundary-output 4-tuple not in {Q_j}, Cout\u2013out never enables Probe_* states at the boundary; instead it allows generic PAD/\u22a5-plumbing, so these assignments do not influence separation.\n\nWhy E_{W_L(u)}(a\u22c6)[Q_j] = u_j\n- \u201c\u21d2\u201d: If Q_j is used and the interior is a well-formed vertex block, the corridor deterministically reaches the PORT zone adjacent to S (see vertex blocks below), then walks along PORT cells until encountering Addr=j; at that cell, Probe_j,Test checks RID=1. If u_j=1, Cin\u2013out forces the PORT symbol\u2019s RID=1 (copy of input), so the test passes and the sink terminator exists, so the DP has a path.\n- \u201c\u21d0\u201d: If u_j=0, then at the unique cell with Addr=j the RID bit is 0, so Probe_j,Test has no legal continuation; there are no alternative continuations (no error, no \u22a5 permitted in probe mode), and the unique path dies. Therefore E=0.\n- Type-invariance: E_{W_L(u)}(a\u22c6)[Q_j] depends only on the fixed boundary inputs a\u22c6 and the presence/contents of the PORT zone (encodes u). Any two representatives with the same u and no errors admit the same probe behavior. Thus the bitvector over {Q_j} is the same across all words of that type.\n\nVertex blocks and canonical contexts\n- Canonical left-context L(u) and right-context R(v): A well-formed left block W_L(u) begins O(1) to the left of S and is laid out as HEAD \u00b7 RIDPORT \u00b7 SPACER \u00b7 PAD, with:\n  \u2022 HEAD: a self-delimiting header containing enc(D) (copied from \u03a3_in via Cin\u2013out) and marks the start of the block (constant size overhead, independent of B).\n  \u2022 RIDPORT: a contiguous port zone of exactly B cells adjacent to S, each with Role=PORT, the address track Addr=1..B in increasing order left-to-right, and the RID bit track which Cin\u2013out ties to the node\u2019s input bit so that the zone encodes u verbatim.\n  \u2022 SPACER and PAD: a constant-length SPACER followed by a long padding segment PAD with Role=PAD (any filler pattern consistent with Cout\u2013out). Right blocks W_R(v) are symmetric to the right of S.\n- Color-at-S gating: The two S nodes have access to color symbols {RED, GRN, BLU} only if their immediate neighbors on the inside are special handshake boundary symbols that must be adjacent (in Cout\u2013out) to Role=PORT with the correct phase for a vertex block. If these adjacencies fail (i.e., the block is absent/malformed), then any attempt to place a non-\u22a5 color at S cannot be extended (no legal Cout\u2013out pair), hence non-vertex contexts cannot carry colors. Conversely, if the block is well-formed, the handshake permits a colored S, activating the seam gadget (below). This implements \u201conly canonical contexts permit colors,\u201d using radius-1 adjacencies.\n- Length normalization at \u2113_pump or \u2113_pump+1: For any fixed u, we construct a seed left word U_left(u) = P^z \u00b7 HEAD \u00b7 RIDPORT \u00b7 SPACER, where P is a constant PAD primitive whose repetitions are allowed by Cout\u2013out. Choose z so that |U_left(u)| equals \u2113_pump or \u2113_pump+1. This is always possible by taking z = \u2308(\u2113_pump \u2212 c)/|P|\u2309 or z+1. The right side is a \nneutral filler F_R of the required length. By Lemma 12 (composition) and Lemma 11 (replacement), any further padding on the far sides preserves the type near S; the port zone stays adjacent to S because we do not insert repeats inside RIDPORT. Thus for each u there exists at least one left-context of the required lengths with the port zone at S; symmetrically for R(v).\n\nLemma SG (Seam gadget for succinct adjacency and color inequality)\nStatement. There is a fixed radius-1 bridge schema such that for any ordered pair of canonical vertex contexts (L(u), R(v)), if both S windows are colored, the concatenation wa S1 wb wc S2 wd admits a completion iff either D(u,v)=0 or (D(u,v)=1 and the two colors differ). If either side is not a canonical vertex context, colors are forbidden by the handshake; if a side is malformed but S was colored regardless, the bridge offers no completion (no error-escape in active mode).\nDesign details (radius-1)\n- Activation: The color-at-S handshake (above) also puts the inner neighbors of S into a special BRIDGE-Start phase. Cout\u2013out allows entering a BRIDGE corridor across wb \u25e6 wc only from this phase.\n- Inputs to the run: The two B-bit port zones are immediately adjacent to S. The bridge corridor accesses these bits by simple \u201cread heads\u201d that move one step into wb or wc and copy the bit into the first row of a RUN tableau (implemented in the bridge). The circuit D is present in HEAD on both sides (since enc(D) is copied from \u03a3_in to \u03a3_out under HEAD), or, alternatively, we can duplicate enc(D) in the bridge header as constant local data\u2014both are radius-1 local.\n- Tableau: A fixed universal TM U is simulated row-by-row across the bridge to compute d := D(u,v) in poly(s) steps. Cout\u2013out enforces per-row local transitions; malformed rows admit no accepting continuation in the active mode (no ERR allowed adjacent to BRIDGE states). After the last row, a dedicated cell adjacent to the S2 side outputs EDGE \u2208 {0,1}.\n- Local acceptance: Cout\u2013out encodes the rule that across S1 and S2 and the adjacent EDGE cell:\n  \u2022 If EDGE=0 (non-edge), all three color-equality pairs at S are allowed.\n  \u2022 If EDGE=1 (edge), the two S outputs must be unequal; the three equal-color pairs are disallowed, blocking all completions in those cases.\n- Robustness: All ERR_x error-chain symbols are globally available for inactive modes (e.g., malformed vertex blocks when S is \u22a5), but in bridge-active mode (colors present at S) the BRIDGE corridor allows no ERR transitions. Thus a malformed attempt in active mode rejects rather than escaping to ERR.\n\nAlphabet and radius bookkeeping\n- \u03a3_out size: roles/phases O(1); color tokens + \u22a5 (4); error alphabet O(1) (global); PORT addresses (B); probe-id states per j (O(B)); RUN work alphabet for U (constant). Total |\u03a3_out| = \u03b2 can be chosen s^{c1} with c1 \u2265 c0 large enough so \u03b2 \u2265 C\u00b7B for a fixed constant C (absorbing all constants).\n- Radius-1: Every constraint is between a node and its predecessor: Cin\u2013out ties PORT.RID to the input bit; Cout\u2013out enumerates the only legal neighbor pairs for PROBE movement, RUN row steps, BRIDGE activation, and color/EDGE gates.\n\nSoundness/completeness sketches (Succinct 3-Coloring \u2192 FFE(F1))\n- Type separation: By Lemma TS, for each u there is at least one canonical left (resp. right) vertex type \u03c4^L_u (resp. \u03c4^R_u), and \u03c4^L_u \u2260 \u03c4^L_{u\u2032} for u\u2260u\u2032. All non-vertex contexts are inactive (color-at-S cannot be extended), so f must map them to \u22a5.\n- Completeness: Given a proper 3-coloring \u03c7: {0,1}^B \u2192 {R,G,B}, define f(\u03c4^L_u) = \u03c7(u) and f(\u03c4^R_v) = \u03c7(v), f(\u03c4)=\u22a5 for others. For any pair (\u03c4^L_u, \u03c4^R_v), the bridge simulates D(u,v); if D=0, acceptance is unconditional; if D=1, the inequality holds by \u03c7, so the bridge accepts. All other pairings are vacuous by gating.\n- Soundness: If f satisfies (F1), define \u03c7(u) = f(\u03c4^L_u). For any (u,v) with D(u,v)=1, the pair (\u03c4^L_u, \u03c4^R_v) must pass the (F1) DP; by Lemma SG\u2019s gate, that forces \u03c7(u)\u2260\u03c7(v). Hence \u03c7 is a proper 3-coloring. Note the \u201csame-u consistency\u201d issue is avoided by construction: only the canonical \u03c4^L_u and \u03c4^R_v can carry colors, so f is single-valued on u.\n\nNeutralizing (F2)\n- Add global \u22a5-plumbing on repeats: for any w and z\u22651, the repetition wz can be filled entirely with \u22a5 consistent with Cout\u2013out (and respecting the handshake that forbids colors unless a vertex block is present). Then (F2) is vacuous for all contexts, so the three-way classifier reduces to deciding (F1)\u2014hence NEXPTIME-hard.\n\nToy sanity check (B=2)\n- Let \u03b2\u22658. Port zone has two PORT cells with Addr=1,2 and RID matching input bits (u_1,u_2). Q_1, Q_2 probes: under Q_1 the corridor moves to Addr=1 and accepts iff u_1=1; similarly for Q_2. The 4 left-types \u03c4^L_{00}, \u03c4^L_{01}, \u03c4^L_{10}, \u03c4^L_{11} differ on the two probe bits. For a small D encoding (e.g., 4-cycle), the BRIDGE tableau reads u,v and emits EDGE=1 on edges; local gate forbids equal colors only then. A brute-force DP on the combined path verifies that all (F1) instances accept iff colors define a proper 3-coloring.\n\nObstacles and how addressed\n- Unique continuation under reserved probes: We explicitly disallow ERR/\u22a5 adjacencies when any Probe_j,* state appears; the only permitted successor is the deterministic path, ensuring E(Q_j) reflects u_j.\n- Keeping the port zone adjacent to S after length normalization: We choose padding only in PAD, outside RIDPORT, so the port stays adjacent to S; we do not rely on pumping to preserve the internal structure of RIDPORT.\n- Same-u consistency: Avoided by gating colors at S exclusively to canonical vertex contexts; alternative contexts cannot carry colors, so f cannot assign contradictory colors to the same u across multiple types.\n\nGaps or clarifications for output.md (minor)\n- Clarify explicitly (already noted in Remarks) that types E_w(a) are computed with respect to the fixed interior input string of w. Our reductions rely on Cin\u2013out copying input bits into PORT.RID.\n- Optional: Note that while Corollary 4 uses Z \u2264 \u2113^2, for a fixed context one can compute smaller Z from the per-side type DFA cycles; not required for our hardness but may tighten constants.\n\nNext steps (auditable deliverables)\n1) Write the local Cout\u2013out transitions for the probe gadget: list states {Probe_j,Move/Test}, allowed pairs with PORT cells (Addr\u2260j \u21d2 Move; Addr=j and RID=1 \u21d2 acceptor; disallow ERR/\u22a5 near probes). Provide a finite table parametrized by j with size O(B) to confirm \u03b2 budget.\n2) Give the exact HEAD and RIDPORT layouts with Cin\u2013out masks: specify that when Role=PORT, only two output symbols (RID=0/1) are allowed and must match the input bit; when Role=HEAD, output must match the input encoding of D.\n3) Specify the BRIDGE tableau alphabet and the final EDGE cell\u2019s interface to S: define the three forbidden adjacent pairs across S when EDGE=1 (RR, GG, BB) and allow all when EDGE=0; verify radius-1 locality.\n4) Provide a fully worked B=2 instance (explicit symbols) and run the O(k\u03b2^2) DP to validate both Type-Separation and Seam Gadget behavior; we can submit this as a regression test to the verifier.\n5) Integrate the global \u22a5-filler rules for repetitions and restate the corollary: on our instances, the classifier\u2019s O(1) vs. \u03a9(log* n) vs. \u0398(n) reduces to (F1), hence NEXPTIME-hard.\n\nWhy useful here\n- The per-bit probe lemma squarely addresses the verifier\u2019s major issue: we do not \u201cprogram\u201d per-type tables; instead we use uniform global rules and reserved probes whose acceptance depends on the interior u via Cin\u2013out, yielding exponentially many types. The seam gadget aligns exactly with (F1)\u2019s universal pairwise check for 3-coloring. Both gadgets are radius-1 and fit the \u03b2 budget, and they can be verified independently by the DP on small instances.\n"
}