{
  "progress_md": "Status and focus\n- Objective: firm up the NEXPTIME-hardness reduction by fully specifying two auditable gadgets: (i) a per-bit boundary probe that separates 2^B vertex indices into distinct context types; (ii) a seam gadget that simulates D(u,v) across the bridge and enforces color-inequality iff D(u,v)=1. Also enforce \u201ccolor gating\u201d so only canonical vertex contexts may carry colors, making all non-canonical types inactive and mapped to \u22a5.\n- This round delivers precise lemmas with radius-1 local behavior, alphabet budgeting, and proof sketches that can be checked by the O(k \u03b2^2) DP on toy instances (e.g., B=2).\n\nGaps in output.md (minor clarifications)\n- Types vs. fixed inputs: output.md\u2019s Definitions allow \u201cinterior inputs may be arbitrary.\u201d Our reductions assume the interior inputs are fixed to the instance string; E_w(a) is computed w.r.t. that fixed string. Suggest adding a parenthetical: \u201cif the model fixes interior inputs, E_w(a) is computed with respect to those fixed inputs,\u201d to avoid ambiguity when we later rely on interior-encoded indices.\n- Context set C: it is useful to note explicitly that C consists of types realized by words of the form w_1 S w_2 with |w_i| \u2208 {\u2113_pump, \u2113_pump+1}. This plays a role in gating colors and in counting how many \u201cactive\u201d types we can realize.\n\nLemma TS (Type Separation via per-bit boundary probes)\n- Parameters: B = s^{c0}, \u03b2 = s^{c1} with c1 \u2265 c0 so \u03b2 \u2265 B. Fix one boundary-input pattern a\u22c6 \u2208 \u03a3_in^4.\n- Port zone layout (left contexts): In every canonical left vertex block W_L(u), immediately to the right of S there is a port zone of length B with two read-only subtracks: Addr \u2208 {1,\u2026,B} (hardwired per position) and RID \u2208 {0,1} (copied from input via Cin\u2013out). Outside the port zone and a short header, the block is neutral PAD/error-plumbed.\n- Reserved boundary outputs: For each j \u2208 [B], define a distinct reserved 4-tuple Q_j of boundary outputs (the four symbols on the two leftmost and two rightmost boundary nodes of w_1). Under Q_j, Cout\u2013out allows only a deterministic \u201cprobe-j\u201d pipeline that flows from the left boundary across w_1, enters the port zone, and stops at the unique cell where Addr=j. This pipeline is implemented by a pointer head state P_j carried on a dedicated track; adjacency rules enforce P_j \u2192 P_j deterministically, moving one step per edge. At the target cell, the only legal successor enforces RID=1 at that cell; if RID=0, the pipeline has no legal continuation (dead end). Upon RID=1, the pipeline transitions to a local ACCEPT sink that splices into a neutral filler for the remaining interior, enabling completion.\n- No error escape under probes: Under boundary outputs Q_j the error-chain alphabet is disabled (no error transition is permitted from P_j states). For all non-reserved boundary outputs, standard error-chains and PAD are enabled.\n- Claim (formal). For any canonical left vertex word L(u) and fixed boundary inputs a\u22c6, E_{L(u)}(a\u22c6)[Q_j] = 1 if and only if u_j = 1. Moreover, for j \u2260 j\u2032, Q_j \u2260 Q_{j\u2032}, and under any other 4-tuple, E behaves as generic PAD/error-plumbing.\n- Why type separation holds: Let Sig(u) \u2208 {0,1}^B be (E_{L(u)}(a\u22c6)[Q_j])_{j=1..B}. Then Sig(u)=u, so u\u2260u\u2032 \u21d2 Sig(u)\u2260Sig(u\u2032). Hence Type(L(u))\u2260Type(L(u\u2032)). This uses only global Cin\u2013out/Cout\u2013out and is radius-1.\n- Alphabet budget: the pointer heads P_j and reserved Q_j consume O(B) symbols; permitted since \u03b2 \u2265 B and \u03a3_out size is \u03b2 = poly(s). The rest of the tracks (roles/phases, PAD, error, etc.) are O(1).\n- Why useful: Gives \u2265 2^B distinct left-context types \u03c4^L_u. A symmetric construction gives \u2265 2^B right-context types \u03c4^R_v.\n\nLemma CG (Color gating for canonical vertex contexts)\n- Statement. There is a role/phase track and Cin\u2013out/Cout\u2013out rules such that: the two S nodes may carry non-\u22a5 colors {RED,GRN,BLU} if and only if the adjacent side is a well-formed canonical vertex block (W_L(u) on the left of S, W_R(v) on the right of S). In all other contexts, any non-\u22a5 symbol at S has no legal continuation (dead end), whereas \u22a5 at S always admits a completion via PAD/error plumbing.\n- Implementation at radius 1: Gate the color tokens by an \u201cACT\u201d flag emitted by a short handshake subtrack that is present only when the port-and-header structure near S is well-formed. Cin\u2013out forbids colors unless ACT=true. Cout\u2013out disables the error alphabet on transitions emanating from colored S unless ACT=true, so colors on inactive types cannot be extended.\n- Why useful: Ensures f can assign colors only to \u03c4^L_u and \u03c4^R_v; all other types must be mapped to \u22a5 to satisfy (F1).\n\nLemma Seam (Seam gadget for succinct adjacency and inequality)\n- Statement. There is a fixed radius-1 seam gadget such that for any ordered pair (\u03c4^L_u, \u03c4^R_v): the bridge segment wb\u2218wc between S_1 and S_2 hosts a 1D tableau of a universal TM U that, in poly(s) steps, reads the B-bit ports u and v and computes d := D(u,v). A final verdict bit EDGE=d is exposed near S_2 together with a forwarded copy of Color(S_1). Local rules at S_2 enforce: if EDGE=0, accept regardless of colors; if EDGE=1, accept iff Color(S_2) \u2260 ForwardedColor(S_1). All checks are nearest-neighbor.\n- I/O wiring details:\n  - Inputs to U: The header encodes C; adjacent to S_1 (resp. S_2) the port zone exposes u (resp. v). A seam handshake opens a corridor across wb\u2218wc for the tableau. Each tableau row is a constant-width word; Cout\u2013out enforces per-row transitions of U.\n  - Verdict wiring: The last row writes EDGE\u2208{0,1} and copies Color(S_1) into a \u201cforwarded color\u201d register next to S_2. Cout\u2013out contains pairs that check (EDGE=1) \u21d2 neighbor-to-S_2 carries a color different from S_2; if equal, no legal transition. If EDGE=0, both equal and unequal are allowed.\n- Robustness:\n  - Malformed runs or headers: standard error-chain refutations are allowed when ACT=false or when S is \u22a5; these make such contexts inactive. Under ACT=true with colors at S, malformed rows have no accepting continuation (no error escape), so (F1) cannot be satisfied by cheating.\n- Why useful: Aligns (F1)\u2019s universal pair constraint with 3-coloring: feasibility of f is equivalent to the existence of a proper 3-coloring \u03c7 with \u03c7(u)\u2260\u03c7(v) whenever D(u,v)=1.\n\nSoundness/completeness of the S3Col \u2192 FFE(F1) reduction (recap with the new lemmas)\n- Active types: For each u, pick canonical L(u) and R(u) shapes; by Lemma TS they yield distinct types \u03c4^L_u and \u03c4^R_u. By Lemma CG, only these may carry colors.\n- Completeness: Given a proper 3-coloring \u03c7, set f(\u03c4^L_u)=\u03c7(u), f(\u03c4^R_v)=\u03c7(v), and f(\u03c4)=\u22a5 for all other \u03c4. For any pair (\u03c4_left, \u03c4_right), if both are active, Lemma Seam computes d=D(u,v) and enforces inequality iff d=1; satisfied by \u03c7. If one or both are inactive, \u22a5-plumbing admits completion. Hence (F1) holds.\n- Soundness: If f satisfies (F1), read \u03c7(u):=f(\u03c4^L_u). For any edge (u,v) (i.e., D(u,v)=1), Lemma Seam forces f(\u03c4^L_u)\u2260f(\u03c4^R_v), so \u03c7 is a proper 3-coloring. Inactive types cannot be colored by f (or some pair would violate Lemma CG\u2019s gating), hence f(\u03c4)=\u22a5 there.\n\nNeutralizing (F2)\n- Add global \u22a5-filler: allow wz to be labeled entirely \u22a5 for all z \u2265 1, consistent with any boundary assignments and regardless of interior; S remains untouched; ACT gating remains enforced. Then (F2) holds trivially for any f, reducing the tri-class decision to (F1)-feasibility on our family.\n\nAlphabet and radius-1 bookkeeping (explicit)\n- \u03a3_out tracks (constant unless noted): roles/phases O(1), colors {RED,GRN,BLU,\u22a5} (4), error alphabet O(1), U\u2019s work alphabet O(1), PAD O(1). Additional O(B) symbols for {Q_j} and {P_j} suffice for Lemma TS. Choose \u03b2 \u2265 c\u00b7B for a suitable constant c, which holds for c1 \u2265 c0 in \u03b2 = s^{c1}, B = s^{c0}.\n- All constraints are radius-1: probes and pointer moves are enforced by nearest-neighbor pairs; tableau rows by local step relations; color inequality is a single adjacency near S_2.\n\nSanity check plan (B=2)\n- Build a toy instance with \u03b2\u22658, reserve Q_1,Q_2 and P_1,P_2, port zone of length 2 adjacent to S. Verify by brute DP: E_{L(00)}(a\u22c6)[Q_1,Q_2]=(0,0), E_{L(01)}=(0,1), E_{L(10)}=(1,0), E_{L(11)}=(1,1). Instantiate a tiny D (e.g., a 4-cycle) and check the bridge DP accepts iff colors differ on edges.\n\nWhy this is progress\n- We have replaced informal sketches with concrete, radius-1 gadgets and clean lemmas (TS, CG, Seam) that are directly checkable via the DP. The per-bit probe avoids the flawed \u201csingle probe\u201d idea and uses only O(B) extra symbols, admissible within \u03b2=poly(s). Color gating resolves the earlier consistency issue on multiple types per u. The seam gadget specifies exactly how to locally enforce inequality conditioned on D(u,v).\n\nNext steps (auditable deliverables)\n1) Write the small adjacency tables for the probe pipeline: list states {PROBE_L, P_j, ACCEPT, PAD} and allowed successors, and the Cin\u2013out masks that gate colors by ACT. Provide a concrete symbol count to confirm \u03b2 \u2265 B+O(1) suffices.\n2) Specify the tableau alphabet for U and the local transition rules that output EDGE and forward Color(S_1); include the exact pair checks near S_2 used to enforce inequality.\n3) Produce a B=2 machine-readable instance (inputs and tables) and have the verifier\u2019s O(k\u03b2^2) DP validate: (i) separation under Q_1,Q_2; (ii) seam acceptance iff inequality on edges.\n4) Integrate a short note into output.md clarifying fixed interior inputs in E_w(a), and (optionally) the explicit definition of C to avoid ambiguity when we later reference \u201cinactive\u201d types.\n"
}