{
  "progress_md": "Round 0004 \u2014 Filling in local rules for probes and seam; mixed-pair gating and a B=2 skeleton\n\nContext recap and objective\n- Goal: finalize a NEXPTIME-hardness reduction from Succinct 3-Coloring (S3Col) to Feasible-Function Existence (F1) for \u03b2-normalized, radius-1 LCLs on oriented paths, with (F2) neutralized by a global \u22a5-plumbing. We now pin down explicit, radius-1 Cout\u2013out rule schemas for (i) per-bit boundary probes that separate 2^B vertex indices; (ii) per-side color gating and seam activation with correct mixed-pair behavior; (iii) a seam verdict interface enforcing simultaneously EDGE=1 \u21d2 color-inequality and Eq=1 \u21d2 color-equality, while keeping error-escape disabled in active modes. We also provide a B=2 (toy) instance blueprint and a symbol budget check.\n\nCorrections/clarifications to output.md (gaps)\n- Types with fixed interior inputs: Please add to Definitions: \u201cIf the model fixes interior inputs, E_w(a) is computed with respect to those fixed inputs.\u201d Our reduction relies on Cin\u2013out copying input bits to outputs in PORT cells; extendibility is type-invariant under the fixed interior input string.\n- Context set size: It helps to note explicitly that context types are a subset of the global type space realized by words w_1 S w_2 with |w_i| \u2208 {\u2113_pump, \u2113_pump+1}, hence |C| \u2264 \u2113_pump.\n\nSymbols/tracks used (\u03a3_out components folded into symbols)\n- Colors at the two S nodes: Scol \u2208 {RED, GRN, BLU, \u22a5}.\n- Roles/phases (constant): {HEAD, PORT, RUN, PAD, ERR, GATE_L, GATE_R, BRIDGE, VERD} \u00d7 {phase \u2208 [c]}.\n- Port subtracks at Role=PORT: Addr \u2208 [B] (unary, i.e., distinct symbol per j) and RIDbit \u2208 {0,1} with Cin\u2013out tie RIDbit = input bit.\n- Probe states (left side) per j \u2208 [B]: Start_j, Head_j, Test_j, Accept_j.\n- Reserved boundary outputs per j \u2208 [B]: 4-tuples Q_j \u2261 (Q^L1_j, Q^L2_j, Q^R2_j, Q^R1_j) used only on the four boundary nodes.\n- Seam verdict neighbor (right of S2): VERD(FwdColor \u2208 {R,G,B}, EDGE \u2208 {0,1}, Eq \u2208 {0,1}). We also use a one-cell \u201cforwarder\u201d just left of S2 inside the RUN corridor to carry FwdColor.\n- Error/plumbing: a constant ERR alphabet (as in the PSPACE ref.) and PAD; these are disabled in active probe/seam modes (see discipline below).\n\nA. Per-bit probe gadget (Type-Separation, radius-1)\nParameters: B = s^{c0}, \u03b2 = s^{c1}, c1 \u2265 c0 so \u03b2 \u2265 c\u00b7B for a fixed constant c.\n\nLayout of a canonical left vertex block W_L(u)\n- Immediately to the right of S, a contiguous PORT zone of length B: the j-th cell carries Role=PORT, Addr=j, and RIDbit = u_j, with Cin\u2013out enforcing RIDbit equals the input bit at that node. Outside PORT, a short HEAD and long PAD. Right of S this is the only active structure; elsewhere PAD (neutral).\n\nProbe discipline (no error-escape / unique continuation)\n- Under the boundary outputs Q_j on the left boundary (and a fixed boundary-input 4-tuple a\u22c6), we force a deterministic \u201cprobe mode\u201d corridor from the boundary into the interior. While any Probe state appears on an edge, no Cout\u2013out pair involving ERR or \u22a5 is listed; the only legal successors are those below. Outside reserved probes, error/\u22a5-plumbing is available as usual.\n\nRadius-1 Cout\u2013out rule schema (parametrized by j)\n- Boundary injection: allow (Q^L2_j \u2192 Start_j) on the left-boundary-to-interior edge; forbid any other successor from Q^L2_j.\n- Movement: for any interior x, allow (Start_j \u2192 Head_j) on the next edge; for any non-PORT cell y (Role\u2208{HEAD,RUN,PAD}), allow (Head_j at predecessor \u2192 Head_j at y). Disallow any (Head_j \u2192 ERR/*) or (* \u2192 Start_j) except the specified ones.\n- Port scan: at a PORT cell with Addr=k \u2260 j, allow (Head_j(prev) \u2192 Head_j(curr)), continuing the march. At a PORT cell with Addr=j and RIDbit=b, allow exactly one of:\n  \u2022 If b=1: (Head_j(prev) \u2192 Test_j(curr)) and (Test_j(curr) \u2192 Accept_j(next)), where Accept_j transitions (deterministically in O(1) steps) to PAD.\n  \u2022 If b=0: (Head_j(prev) \u2192 [no successor]); i.e., no pair listed; the DP dies.\n- Addr enforcement: between consecutive PORT cells, only pairs that increment Addr by 1 are allowed (e.g., (PORT@Addr=k, PORT@Addr=k+1)); Addr monotonicity before reaching the PORT zone is enforced by disallowing (Head_j \u2192 PORT@Addr\u22601) at the very first PORT and by requiring contiguous PORT cells.\n\nClaim TS (Type-Separation; precise)\nFor any canonical W_L(u) and fixed boundary inputs a\u22c6, we have E_{W_L(u)}(a\u22c6)[Q_j] = u_j. Proof sketch: Under Q_j, the only legal continuation is the above deterministic probe; it reaches the unique PORT cell with Addr=j, where continuation exists iff RIDbit=1. Cin\u2013out ties RIDbit to the input bit, so acceptance depends only on u_j. No error/\u22a5 escape is possible in probe mode. Hence the B-bit vector (E(a\u22c6)[Q_1],\u2026,E(a\u22c6)[Q_B]) equals u; distinct u give distinct vectors, i.e., distinct left types. Symmetrically, we obtain 2^B right types with a mirrored probe.\n\nAlphabet budget for probes\n- PORT symbols: 2\u00b7B (RIDbit\u00d7Addr) distinct symbols.\n- Probes: 4\u00b7B symbols (Start_j,Head_j,Test_j,Accept_j) across j.\n- Reserved boundary symbols: \u22644\u00b7B tokens for the four boundary positions (Q^L1_j,\u2026), re-used across instances.\n- Add O(1) roles/phases, PAD, ERR, RUN alphabet: total |\u03a3_out| = O(B) + O(1) = \u0398(B) \u2264 \u03b2.\n\nB. Per-side color gating and mixed pairs\nPer-side handshake\n- The cell immediately adjacent to S1 on the left interior uses role GATE_L if and only if a well-formed canonical left vertex block is present; otherwise that cell uses PAD/HEAD/RUN. Similarly, on the right interior adjacent to S2 we use role GATE_R iff a canonical right block is present. These are enforced by local HEAD/PORT placement and phases.\n- The allowed Cout\u2013out pairs between a GATE_* cell and its adjacent S node restrict the S symbol\u2019s handshake flags: the S symbol includes two read-only bits HL, HR. At S1, adjacency with GATE_L forces HL=1 (else no pair allowed); if not GATE_L, adjacency forces HL=0. Similarly, at S2, adjacency with GATE_R forces HR=1 else HR=0. These flags are forced by neighbors; f cannot change them.\nColor permission\n- Pairs between a GATE_* cell and S permit Scol \u2208 {RED,GRN,BLU,\u22a5}. When not GATE_* (i.e., PAD/HEAD), only Scol=\u22a5 is permitted. Thus colors are permitted per-side based on the adjacent interior only; this is independent across sides.\nMixed pairs accept unconditionally\n- If exactly one side is canonical (say HL=1, HR=0), we do not activate the seam tableau. The S1\u2013S2 pair allows any (Scol1 \u2208 {R,G,B}, Scol2=\u22a5) combination; the two interior halves are filled with PAD/\u22a5 plumbing. No must-color constraint is enforced here.\n\nC. Seam activation and verdict wiring (active-active pairs)\nActivation and must-color locality\n- The seam is active only when both sides are canonical; locally this is encoded by HL=1 at S1 and HR=1 at S2 (both forced by the adjacent GATE_* cells). Only in this case do we enforce \u201cmust-color\u201d: the S1\u2013S2 adjacency forbids any pair with Scol1=\u22a5 or Scol2=\u22a5 when (HL=1 and HR=1). When either HL=0 or HR=0, \u22a5 is allowed on the corresponding S and the seam is inactive.\nRUN_B tableau and verdict cell\n- Across wb\u2218wc (a corridor spanning into both sides right next to S), Cout\u2013out enforces a row-by-row simulation of a fixed TM U on input (enc(D), u, v). The RUN corridor is enabled only when HL=HR=1 and both S nodes are non-\u22a5. The last row writes into the neighbor immediately to the right of S2 a symbol VERD(FwdColor, EDGE, Eq), where FwdColor\u2208{R,G,B} is a copy of Scol1, EDGE = D(u,v), and Eq = [u=v]. ERR is disallowed adjacent to RUN/VERD in this active mode (no escape).\nLocal verdict check (pure radius-1)\n- Pairs S2 \u2194 VERD are allowed exactly when both constraints hold:\n  (A) if EDGE=1 then FwdColor \u2260 Scol2; if EDGE=0 then no restriction.\n  (B) if Eq=1 then FwdColor = Scol2; if Eq=0 then no restriction.\n- The edge S1 \u2194 S2 additionally forbids \u22a5 when HL=HR=1 (must-color) and otherwise imposes no restriction. No other global signal is used.\nCorrectness: On active-active pairs, acceptance iff (EDGE=0 or colors differ) and (Eq=0 or colors equal). This enforces 3-coloring on edges and consistency on (u,u) pairs.\n\nD. Soundness/completeness (recap) and role of mixed pairs\n- Completeness: Given a proper 3-coloring \u03c7 of the succinct graph, define f on canonical types by f(\u03c4^L_u)=\u03c7(u), f(\u03c4^R_v)=\u03c7(v), all other types map to \u22a5. On active-active pairs (u,v): RUN_B computes (EDGE,Eq); (A)(B) hold by \u03c7. On mixed pairs: seam inactive; pairs accept with plumbing. Hence (F1) holds. (F2) is neutralized by \u22a5-filling (see F below).\n- Soundness: If f passes (F1), then each canonical \u03c4^L_u must be colored (or some active-active seam would violate must-color), and the values on \u03c4^L_u and \u03c4^R_u must coincide (pair (u,u) has Eq=1). For any edge (u,v) with D(u,v)=1, the pair (\u03c4^L_u, \u03c4^R_v) must satisfy (A), forcing \u03c7(u)\u2260\u03c7(v). Thus \u03c7 is a proper 3-coloring.\n\nE. B=2 DP-checkable skeleton (auditable)\nSymbols (sample)\n- Colors at S: S_R, S_G, S_B, S_\u22a5 (each encodes HL,HR bits as forced by neighbors).\n- PORT cells: P1^0,P1^1 and P2^0,P2^1 (Addr=1 or 2 and RIDbit=b). Cin\u2013out allows Pj^b only on input b.\n- Probes: Start_1,Head_1,Test_1,Accept_1 and Start_2,Head_2,Test_2,Accept_2.\n- Boundary: Q^L1_1,Q^L2_1 (and similarly for j=2), mirrored on the right.\n- Gating: GATE_L, GATE_R on the interior cells adjacent to S, else PAD.\n- Verdict: VERD(c\u2208{R,G,B}, EDGE\u2208{0,1}, Eq\u2208{0,1}).\nKey Cout\u2013out pairs (non-exhaustive but complete by schema)\n- Probe injection and march: (Q^L2_j \u2192 Start_j), (Start_j \u2192 Head_j), (Head_j \u2192 Head_j) on non-PORT, (Head_j \u2192 Head_j) on PORT@Addr\u2260j, (Head_j \u2192 Test_j) on PORT@Addr=j, then (Test_j \u2192 Accept_j) iff RIDbit=1, then Accept_j \u2192 PAD.\n- PORT adjacency: (P1^b \u2192 P2^{b\u2032}) allowed; (Addr monotonicity) require that between consecutive PORT cells, Addr increases by 1 (here 1\u21922). No other PORT transitions.\n- Per-side color gating: (GATE_L \u2192 S_x with HL=1) and (non-GATE_L \u2192 S_\u22a5 with HL=0) only; symmetrically for S2 and HR.\n- Seam activation/must-color: edge (S1 \u2194 S2) forbids S_\u22a5 on either side when HL=HR=1; allows any pair otherwise.\n- Verdict check: (S2=R \u2194 VERD(FwdColor=R,EDGE=1,Eq=0)) is forbidden; (S2=R \u2194 VERD(FwdColor=G,EDGE=1,Eq=0)) allowed; similarly for other colors; and (Eq=1) forces equality by allowing only pairs with FwdColor=Scol2; when EDGE=0 both equal/unequal are allowed. No VERD neighbors occur unless HL=HR=1 (RUN active); otherwise the neighbor is PAD.\nAudit plan\n- Verify TS: run the O(k\u03b2^2) DP on L(00),L(01),L(10),L(11) under Q_1,Q_2 with the above probe rules; acceptance matches u_j.\n- Verify seam: choose a small D (e.g., 4-cycle) and implement U as a constant table that writes EDGE,Eq deterministically from u,v (for B=2, D can be tabulated directly). Check that all active-active pairs accept iff inequality on edges and equality when u=v. Mixed pairs accept regardless.\n\nF. Neutralizing (F2)\nAdd to Cout\u2013out a neutral self-looping \u22a5-language: for any repetition w^z, z\u22651, and any boundary outputs/inputs, the interiors can be labeled entirely with PAD/\u22a5 without touching S or the handshake flags. Then for every context (w1,S,w2) and any z\u22651, f(Type(w1Sw2)) on S extends trivially: (F2) holds for all f.\n\nG. Existence of canonical contexts at lengths \u2113_pump/\u2113_pump+1\nWe rely on the standard replacement/pumping lemmas for path types (ref. Lemmas 10\u201315, 11, 12 in the attached paper): HEAD+PORT+RUN have length poly(s) \u226a \u2113_pump = 2^{\u0398(\u03b2^4)}. We place W_L(u) and W_R(v) adjacent to S and pad only outside the PORT zone to achieve total side lengths in {\u2113_pump,\u2113_pump+1}. Replacement preserves type near S, so each u (and v) has at least one canonical left (right) context in C. This item should be added explicitly to output.md or cited as such; until then, treat it as an assumption backed by the cited lemmas.\n\nH. Determinism and locality checks (addressing reviewer points)\n- Probe determinism: In probe mode (presence of Start_j/Head_j/Test_j), Cout\u2013out lists no ERR/\u22a5 pairs; only the deterministic march/test/accept transitions exist. Thus E(a\u22c6)[Q_j] is a single-bit function of RIDbit[j].\n- Seam wiring locality: The final check uses only the pair S2 \u2194 VERD; the must-color trigger uses only S1 \u2194 S2 with locally stored HL,HR flags.\n- S symbol control by f: The only component of S chosen by f is the color field; HL,HR are forced by neighbors via adjacency constraints.\n- Budget: \u03a3_out has O(B) reserved symbols and O(1) others; choose \u03b2 \u2265 c\u00b7B. Tables Cin\u2013out (2\u00d7\u03b2) and Cout\u2013out (\u03b2\u00d7\u03b2) remain poly(\u03b2).\n\nI. Why this is incremental progress\n- We have converted the earlier sketches into explicit, radius-1 rule schemas that the verifier can instantiate for B=2 and check with the O(k\u03b2^2) DP. We addressed mixed pairs (seam inactive; unconditional acceptance), must-color locality (only when both handshakes present), S-symbol control (only color is free), probe-mode determinism (no error-escape), and seam wiring locality. We provided a concrete symbol budget and a B=2 audit plan.\n\nNext steps (auditable deliverables)\n1) Write the parameterized Cout\u2013out tables for probes explicitly (as a list of allowed pairs for Start_j,Head_j,Test_j,Accept_j, PORT adjacency), and the Cin\u2013out mask tying PORT.RIDbit to \u03a3_in.\n2) Enumerate the S-adjacent pairs that gate colors per side, enforce must-color only when HL=HR=1, and list the S2\u2194VERD pairs that implement (A)(B).\n3) For B=2, produce a machine-readable instance (\u03a3_out symbol list, Cin\u2013out, Cout\u2013out) and run the DP to validate TS and seam behavior on all 16 ordered pairs (L(u),R(v)).\n4) Incorporate (or cite) the pumping/replacement lemmas into output.md to justify existence of canonical contexts at the required lengths. If preferred, give an explicit padding construction that never touches the PORT zone.\n5) Package the reduction D \u21a6 P_D, state the equivalence \u201cG 3-colorable \u21d4 (F1) feasible f,\u201d and add the \u22a5-filler to neutralize (F2), yielding the NEXPTIME-hardness of the 3-way classifier under the explicit \u03b2-normalized, r=1 model.\n"
}