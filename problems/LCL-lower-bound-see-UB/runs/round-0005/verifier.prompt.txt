--- SYSTEM ---
You are a strict mathematical verifier & research manager.

You are being run in a loop with provers. Your tasks:
- Audit their ideas for correctness and rigor.
- Curate files (notes.md and output.md).
- Suggest the next steps.

Inputs: 
- task statement
- outputs of provers
- notes.md (summary so far)
- output.md (rigorously proven results so far)

Guidelines:
- notes.md: should be a readable running log of interesting work. Prefer appending. Replace only if old notes are clearly misleading. Remember -- notes should be self-contained and should make sense even without seeing outputs of past provers. 
- output.md:  Think twice before you add something to this file. Everything here should be rigorous, almost publication-ready. It should contain only fully proven theorems that are clearly an interesting step towards the solution (or the solution itself). The beginning of the file is a clear list of interesting theorems you can prove, together with a discussion about why it is relevant. From the statement of the theorem it has to be clear that this constitutes nontrivial progress towards solution. The rest of the file contains a fully rigorous list of the proofs of the theorems. Keep only proven theorems with clear proofs. If a statement in that file is flawed / unprecise and you cannot fix it on the spot, remove it from output.md and instead add it to notes.md with explanation.
- Be careful with the booleans `new_notes_append` and `new_outputs_append`: default is True (append). Use False only when deliberately rewriting everything.

Tasks:
1) Audit rigor: identify unjustified steps, false statements, missing lemmas; produce minimal counterexamples.
2) Triage value: separate genuine progress from noise.
3) Guide next steps: propose what provers should try next.

**Return strictly JSON**:
{
  "feedback_md": "Detailed critique of prover outputs (â‰¥200 words). Include concrete next-step suggestions. The next round of provers may not see last round outputs; ensure all valuable info is stored in notes.",
  "new_notes_md": "Markdown (KaTeX allowed). Usually appended to notes.",
  "new_notes_append": "True|False",
  "new_outputs_md": "Markdown (KaTeX allowed). Usually appended to output.md.",
  "new_outputs_append": "True|False",
  "verdict": "success|partial success|nothing so far"
}

**Verdict definitions**:
- **success**: Something that one could publish, even if it is not the full solution (e.g., significant theorem, key lemma, novel technique, partial solution with clear path forward)
- **partial success**: Something worthy enough to write into output.md (e.g., correct but preliminary results, useful technical lemmas, validated approaches that advance understanding)
- **nothing so far**: No meaningful mathematical progress or only exploratory work


--- USER ---
You receive multiple prover reports. Evaluate correctness, value, and pick promising directions. Update notes.md (append/replace) with useful ideas and update output.md (append/replace) ONLY with rigorously verified results.

Prover reports (JSON):
[{"prover_id": "01", "progress_md": "Round 0005 \u2014 Parametric, radius-1 rule schemas (directional tokens adopted), B=2 instantiation blueprint, and finite-length canonical contexts\n\nContext and objective\n- We continue the NEXPTIME-hardness program via Succinct 3-Coloring (S3Col) by finalizing DP-auditable, radius-1 rule schemas for: (i) deterministic per-bit boundary probes that separate 2^B canonical vertex types; (ii) per-side color gating; (iii) seam activation via directional tokens Tok\u2192/Tok\u2190 with a local verdict enforcing simultaneously EDGE and Eq; and (iv) a bridging policy that either vacuously holds (inactive/mixed) or reduces to the same local seam constraints regardless of repetition z. We also provide a B=2 symbol list and explicit Cout\u2013out fragments sufficient for a DP check.\n- Minor gaps to output.md: (1) Please add a parenthetical note that types E_w(a) are computed with respect to fixed interior inputs (our PORT.RIDbit copies the fixed \u03a3_in). (2) When feasible functions are used, it helps to define the context set C explicitly as those types realized by w_1 S w_2 with |w_i| \u2208 {\u2113_pump, \u2113_pump+1}; hence |C| \u2264 \u2113_pump. (We do not edit output.md, only flagging these clarifications.)\n\nA) Per-bit probe (Type-Separation) \u2014 explicit radius-1 rules (deterministic, no escape)\nSymbols/tracks used (folded via disjoint roles; sizes add):\n- Roles: {PAD, HEAD, PORT, PROBE, RUN, VERD, ERR, S} \u00d7 Phase\u2208[c0] (constant c0).\n- PORT subtracks: Addr\u2208{1,\u2026,B}, RIDbit\u2208{0,1}.\n- Probe states per j\u2208[B]: Start_j, Head_j, Test_j, Accept_j (role=PROBE).\n- Boundary outputs: For the 4 boundary positions, reserve B 4-tuples Q_j. We refer to the second-from-left boundary output as BL2_j for injection.\n- Cin\u2013out: PORT cells have (input b, output RIDbit=b) allowed for b\u2208{0,1}. Non-PORT roles ignore RIDbit in Cin\u2013out; ERR and PAD accept any input (standard).\n- PORT well-formedness and contiguity: Allowed PORT\u2013PORT Cout\u2013out pairs on interior edges are exactly (P(k,\u00b7) \u2192 P(k+1,\u00b7)) for k=1,\u2026,B\u22121; no other PORT adjacency allowed. The unique PORT block abuts S.\nCout\u2013out rules (parametric in j):\n- Injection: (BL2_j \u2192 Start_j) is the only allowed successor from BL2_j.\n- March: For any non-PORT y, allow (Head_j \u2192 Head_j at y); forbid any pairs from {Start_j,Head_j,Test_j,Accept_j} to ERR or to \u22a5.\n- At PORT(k,b):\n  \u2022 If k\u2260j: allow (Head_j(prev) \u2192 Head_j(curr)), no other successor.\n  \u2022 If k=j and b=1: allow (Head_j(prev) \u2192 Test_j(curr)), then (Test_j \u2192 Accept_j) to the next cell.\n  \u2022 If k=j and b=0: no successor listed from Head_j; dead-ends.\n- Accept exit: (Accept_j \u2192 PAD) followed by PAD self-plumbing.\nType-Separation claim TS (re-stated, DP-checkable): Fix boundary inputs a\u22c6. For any canonical left block L(u) with PORT adjacent to S, E_{L(u)}(a\u22c6)[Q_j] = u_j. Proof sketch: under Q_j, the only legal continuation is the deterministic chain above; it reaches PORT(j, u_j) and continues iff u_j=1; Cin\u2013out ties RIDbit to the input bit. ERR/\u22a5 are disallowed near PROBE, eliminating alternative completions. Symmetric right probe gives 2^B right-types.\nAlphabet/adjacency budget: PROBE contributes O(B) symbols, PORT contributes O(B), reserved boundary outputs contribute O(B). The adjacency table needs O(B^2) pairs for (Head_j \u2194 PORT(k,\u00b7)); others are O(1). With disjoint roles, |\u03a3_out| = \u0398(B) and |Cout\u2013out| = O(B^2) + O(\u03b2), feasible with \u03b2 = s^{c1} and B = s^{c0}, c1 \u2265 2c0.\n\nB) Per-side color gating and directional-token seam activation (mixed pairs accept)\nSymbols/tracks:\n- S colors: {S_R, S_G, S_B, S_\u22a5} (role=S). Only the color field is under f; all other subtracks derive from neighbors.\n- Gate tokens at the interior neighbor of S: GateL (left side canonical), GateR (right side canonical). If absent, neighbor is neutral PAD.\n- Directional tokens on the corridor: Tok\u2192, Tok\u2190 \u2208 {0,1} carried by RUN/PAD/VERD cells across the bridge wb\u2218wc. Tokens propagate deterministically; see rules below.\nPer-side gating (purely local):\n- If S\u2019s interior neighbor is Gate\u2022, S may be in {S_R,S_G,S_B,S_\u22a5}; otherwise S must be S_\u22a5 (only S_\u22a5-adjacency pairs are listed to neutral neighbors).\nToken seeding (only when the side is canonical and colored):\n- If (GateL \u2194 S_x) with x\u2208{R,G,B}, the first corridor cell to the right of S1 is forced to Tok\u2192=1 (a special Seed\u2192 state). If S1=S_\u22a5, no seeding: Tok\u2192=0.\n- Analogously, if (S2_x \u2194 GateR) with x\u2208{R,G,B}, the first corridor cell to the left of S2 is forced to Tok\u2190=1 (Seed\u2190); else Tok\u2190=0.\nToken propagation (radius-1):\n- Along the corridor toward the opposite end, for any consecutive interior edge i\u2192i+1, allowed pairs enforce: Tok\u2192(i)=1 \u21d2 Tok\u2192(i+1)=1; Tok\u2190(i+1)=1 \u21d2 Tok\u2190(i)=1. (Implement by restricting allowed symbol pairs to those with nonincreasing zeros, i.e., once 1 is present it persists; in practice, corridor symbols carry both bits, and Cout\u2013out allows only pairs with Tok\u2192 nondecreasing left\u2192right and Tok\u2190 nondecreasing right\u2192left.) Outside the corridor, tokens are implicitly 0 (no symbols with tokens permitted).\nMust-color and mixed-pair fallback (enforced at S by inspecting opposite token on its neighbor):\n- Let N1 be S1\u2019s interior neighbor; if Tok\u2192(N1)=0, any S1\u2208{S_R,S_G,S_B,S_\u22a5} may attach to neutral neighbors; if Tok\u2192(N1)=1 (which occurs only when the right side is canonical and colored), then S1\u2260S_\u22a5 is required and the neighbor must be the designated FWD cell (see below). Symmetrically at S2 using Tok\u2190.\n- Consequently, mixed pairs (exactly one side canonical/colored) have no opposite-direction token locally; colored S on the canonical side attaches to a neutral neighbor; the inactive side is S_\u22a5; PAD plumbing accepts unconditionally. No seam tableau runs.\n\nC) Seam RUN tableau and local verdict (EDGE and Eq simultaneously)\nCorridor layout near S:\n- FWD cell immediately right of S1: records FwdColor \u2208 {R,G,B} equal to S1; allowed pairings: (S1_x \u2194 FWD(FwdColor=x)) only; if Tok\u2192(FWD)=0, neutral pairs to PAD are also allowed; if Tok\u2192=1, only the FWD pairing is allowed (must-color enforced).\n- VERD cell immediately left of S2: symbol Ver(FwdColor\u2208{R,G,B}, EDGE\u2208{0,1}, Eq\u2208{0,1}).\nRUN tableau enablement:\n- RUN-role symbols (row-by-row U-simulation) are permitted on the corridor only when (Tok\u2192=1 and Tok\u2190=1) on those cells; else only PAD is permitted. ERR is globally available but explicitly disallowed adjacent to RUN/VERD when any token bit is 1 (no escape in active modes).\nU\u2019s task (constant alphabet): read enc(D) in HEAD; read u from left PORT and v from right PORT; compute EDGE=D(u,v) and Eq=[u=v] in poly(s) steps. The last row writes Ver(FwdColor,EDGE,Eq) into the VERD cell next to S2; FwdColor is copied unaltered from the FWD cell via a constant-width forwarder track (enforced by local equalities).\nLocal verdict at S2\u2013VERD edge (radius-1 adjacency list):\n- For each c\u2208{R,G,B} and bits e,q\u2208{0,1}, allowed pairs (S2_col, Ver(FwdColor=c,EDGE=e,Eq=q)) are:\n  \u2022 If q=1: allow only when S2_col = c (forces equality on u=v). If additionally e=1, this case is unreachable because we ensure D(u,u)=0 in preprocessing (or the seam would be contradictory). If e=0, equality holds; allowed.\n  \u2022 If q=0 and e=1: allow only when S2_col \u2260 c (forces inequality on edges).\n  \u2022 If q=0 and e=0: allow all 3\u00d73 color combinations.\n- Must-color at S2: If Tok\u2190(VERD)=1, forbid S2_\u22a5; otherwise S2_\u22a5 is allowed (mixed/inactive pairs).\nCorrectness (active-active): Acceptance iff (EDGE=0 or colors differ) and (Eq=0 or colors equal). Mixed/inactive: tokens absent locally; neutral plumbing accepts unconditionally.\n\nD) Bridging (F2) is vacuous or reduces to local seam\n- For inactive/mixed contexts: S choices are either \u22a5 (inactive) or unrestricted on the canonical side with PAD neighbors (mixed); repetitions w_i^z away from S are filled by PAD/\u22a5 self-loops; Cout\u2013out includes PAD\u2013PAD self-transitions for every interior edge type; thus wz_1 S wz_2 always extends independently of z.\n- For active-active canonical pairs: all constraints are confined to the immediate corridor around S (FWD, RUN rows, and VERD), which has constant width; repeating w_i does not create new constraints across S and does not affect U\u2019s computation (it reads PORTs adjacent to S). Hence feasibility for z=1 implies feasibility for all z \u2265 1. Formally, by Lemma 1 in output.md (periodicity), we may check z up to Z, but here local wiring already makes the outcome z-invariant.\n\nE) B=2 concrete instance (DP-auditable)\nSymbols to enumerate (suggested names):\n- S: S_R, S_G, S_B, S_\u22a5.\n- PORT: P1^0,P1^1,P2^0,P2^1.\n- PROBE: Start_1,Head_1,Test_1,Accept_1; Start_2,Head_2,Test_2,Accept_2.\n- Boundary outputs: Q_1, Q_2; we treat BL2_1 and BL2_2 as the left second boundary outputs selecting Start_j.\n- Gating: GateL, GateR; otherwise PAD.\n- Corridor bits: tokens Tok\u2192/Tok\u2190 \u2208 {0,1} carried in symbol variants (we can realize four variants of PAD and RUN cells to encode the two bits; only those pairs consistent with monotone propagation are listed).\n- RUN: a tiny fixed alphabet sufficient to tabulate D on {00,01,10,11} and Eq=[u=v].\n- VERD: Ver(c\u2208{R,G,B}, e\u2208{0,1}, q\u2208{0,1}).\nCin\u2013out (B=2): Allow PORT b-outputs matching the input bit b; all other roles accept any input bit (copy-through or don\u2019t-care). Optionally, forbid ROLE=PORT unless the HEAD/PORT header is present (enforced by Cout\u2013out grammar between HEAD and PORT).\nCout\u2013out key fragments (B=2):\n- Probes: as in A, instantiate k\u2208{1,2} and j\u2208{1,2}. Enumerate (Head_j \u2194 Port^P(k,\u00b7)) march, (Port^P(k\u2260j,\u00b7) \u2192 Head_j), (Port^P(j,1) \u2192 Test_j \u2192 Accept_j), and no successor on (Port^P(j,0) \u2192 \u00b7). No ERR/\u22a5 adjacent to Start/Head/Test/Accept.\n- Gating at S: (GateL \u2194 S_color) for color\u2208{R,G,B,\u22a5}; (\u00acGateL \u2194 S_\u22a5) only. Same on the right with GateR.\n- Tokens: (GateL \u2194 S_color) forces Seed\u2192(Tok\u2192=1) on the next interior cell; otherwise Tok\u2192=0. Enforce Tok\u2192 nondecreasing left\u2192right and Tok\u2190 nondecreasing right\u2192left by allowing only corridor pairs (x,y) with y.Tok\u2192 \u2265 x.Tok\u2192 and x.Tok\u2190 \u2265 y.Tok\u2190.\n- Must-color at S: If N1.Tok\u2192=1 then forbid (S1=\u22a5 \u2194 N1); also require (S1 \u2194 FWD) pairing; symmetrically if N2.Tok\u2190=1 require (S2 \u2194 VERD).\n- RUN enablement: Only when both token bits are 1 on corridor cells are RUN-row symbols permitted (else PAD). ERR adjacent to RUN or VERD is forbidden in this mode.\n- Verdict adjacency: Explicitly list allowed pairs (S2_col \u2194 Ver(c,e,q)) following the cases in C.\nDP audit checks:\n1) Probe: Four left seeds L(00),L(01),L(10),L(11) with contiguous PORT zone next to S. For each u, and boundary outputs Q_1,Q_2 under fixed a\u22c6, the DP should yield E(u)[Q_1]=u_1 and E(u)[Q_2]=u_2.\n2) Seam: Take D as a 4-cycle on {00,01,10,11} and Eq by equality. Build right seeds R(v). For all 16 ordered pairs (L(u),R(v)), the DP should accept iff (u=v \u21d2 colors equal) and (D(u,v)=1 \u21d2 colors differ). Mixed pairs (canonical on one side only) accept regardless, with S on inactive side = \u22a5.\n\nF) Existence of canonical contexts at lengths \u2113_pump or \u2113_pump+1 (specialized padding lemma)\nLemma CN (canonical contexts exist with prescribed side-length parity). For each index u\u2208{0,1}^B there is at least one left word w_1 of length in {\u2113_pump, \u2113_pump+1} whose suffix adjacent to S is a well-formed canonical block W_L(u) (HEAD \u00b7 PORT(B) \u00b7 RUN prefix) and PAD elsewhere; likewise for right contexts.\n- Proof sketch (uses output.md Lemmas 11\u201312, 14\u201315): Start from a seed word U_L(u) = PAD^z \u00b7 W_L(u) with z\u226b1 chosen so that Type(PAD^z) stabilizes and replacing PAD^z by any PAD^{z\u2032} with the same type preserves the type of U_L(u). By Lemma 15 (periodicity), select z\u2032 so that |PAD^{z\u2032} \u00b7 W_L(u)| hits \u2113_pump or \u2113_pump+1. All pumping/replacement happens in PAD outside the seam, so the HEAD/PORT layout and probe/seam interfaces are unaffected. Symmetric for the right.\n\nG) Why (F1)\u21d43-coloring and why (F2) imposes no extra burden\n- Completeness: Given \u03c7: {0,1}^B\u2192{R,G,B}, set f(Type(L(u)))=\u03c7(u), f(Type(R(v)))=\u03c7(v), f(others)=\u22a5. Active-active seam checks EDGE and Eq and enforces inequality on edges and equality on u=v via local verdict; mixed pairs pass via fallback plumbing.\n- Soundness: If f passes (F1), then for each u, both \u03c4^L_u and \u03c4^R_u must be non-\u22a5 (else some active-active diagonal pair would violate must-color); the diagonal (u,u) has Eq=1, so the colors match, defining \u03c7(u). For any edge (u,v), EDGE=1 forces \u03c7(u)\u2260\u03c7(v). Thus \u03c7 is a proper 3-coloring.\n- Bridging (F2): As argued in D), repeating w_i adds only PAD away from S; in active-active pairs the corridor logic is local-invariant; mixed/inactive are vacuous. Hence any f that satisfies (F1) also satisfies (F2) in this construction.\n\nH) Risks and resolutions (for DP and audit)\n- Probe uniqueness/escape: We explicitly forbid ERR/\u22a5 adjacent to PROBE states and give each probe state a unique successor; PORT contiguity is enforced by allowing only Addr\u2192Addr+1 across PORT. This makes E(a\u22c6)[Q_j] a single-bit function of RIDbit[j].\n- Seam activation locality: Tokens are read only one hop from S; must-color is triggered iff the opposite-direction token is present; RUN/VERD are permitted only when both tokens are present. Mixed pairs see no opposite token and thus accept.\n- Verdict consistency: The Eq gate enforces equal colors only on u=v; to avoid Eq\u2227EDGE contradictions, set D(u,u)=0 in preprocessing of the succinct graph (standard and WLOG for 3-coloring).\n- Alphabet/adjacency budgets: With disjoint-role subalphabets, |\u03a3_out|=\u0398(B) and |Cout\u2013out|=O(B^2)+O(1). Choose \u03b2\u2265c\u00b7B^2 to be safe (or \u03b2=\u0398(B) with careful symbol reuse as in A\u2013C).\n\nNext steps (concrete, auditable)\n1) Produce a machine-readable B=2 instance: enumerate \u03a3_out symbols listed in E), tabulate Cin\u2013out and the Cout\u2013out fragments for probes, gating, token propagation, RUN enablement, must-color, and verdict adjacency. Run the O(k\u03b2^2) DP to validate the probe bits and seam acceptance on all 16 ordered pairs (L(u),R(v)).\n2) Generalize the parametric tables (Head_j/Port(k,\u00b7), Tok monotonicity, S-adjacent constraints, verdict pairs) for arbitrary B and bundle them into the reduction.\n3) Integrate Lemma TS (probes), Lemma RG (gating+tokens), Lemma SG (seam verdict) into the curated output once B=2 validation passes; add Lemma CN (canonical contexts existence) referencing output.md Lemmas 11\u201312,14\u201315.\n4) Package the reduction D \u21a6 P_D formally and state the equivalence (3-colorable \u21d4 feasible f), concluding NEXPTIME-hardness of the classification (O(1)/\u0398(log* n)/\u0398(n)) under the explicit \u03b2-normalized, r=1 model.\n"}, {"prover_id": "02", "progress_md": "Round 0005 \u2014 Toward a DP-checkable B=2 instance: explicit Cin\u2013out/Cout\u2013out fragments for probes, tokens, gating, and verdict\n\nContext and goal\n- We adopt directional tokens for seam activation (as recommended in verifier.feedback.md) and produce an explicit, radius-1 rule skeleton for B=2 that a DP can check. The focus is on: (i) per-bit boundary probes Q_1, Q_2; (ii) per-side color gating plus mixed-pair fallback (must-color only in active-active); (iii) a seam verdict cell V enforcing both EDGE and Eq via S2\u2194V local pairs; and (iv) ERR/\u22a5 discipline in probe/seam modes. We keep disjoint-role subalphabets so sizes add rather than multiply.\n\nSymbols (B=2, disjoint roles)\n- Boundary-reserved outputs (used only on boundary nodes at the four ends for the TS checks): BL1_1, BL2_1, BR2_1, BR1_1 and BL1_2, BL2_2, BR2_2, BR1_2 corresponding to Q_1 and Q_2. (The DP sets boundary outputs to these values; interior neighbors see them through Cout\u2013out.)\n- S-node symbols: S_R, S_G, S_B, S_\u22a5. (No handshake bits on S; all activation/gating is enforced by the interior neighbors\u2019 symbols.)\n- Interior roles (pairwise disjoint subalphabets):\n  \u2022 PAD: Pad.\n  \u2022 ERR: Err. (Used only outside probe/seam-active modes.)\n  \u2022 PORT (probe-idle): P1^0, P1^1, P2^0, P2^1. (Addr=j and RIDbit=b encoded in the name.)\n  \u2022 PORT (probe-active variants): P1p^0, P1p^1, P2p^0, P2p^1. (Same content, different role tag to control adjacency during probes.)\n  \u2022 PROBE states (per j): Head_1, Accept_1; Head_2, Accept_2. (Start is injected from the boundary neighbor via BL2_j \u2192 Head_j.)\n  \u2022 Gating neighbors: GateL, GateR (the unique symbols that may appear immediately inside S1/S2 for canonical sides); NonGate (placeholder representing any other noncanonical neighbor role adjacent to S).\n  \u2022 Seam corridor (RUN/PAD aggregate role with token flags): we instantiate four concrete corridor symbols by token bits: Corr_00, Corr_10, Corr_01, Corr_11 where the suffix encodes (Tok\u2192, Tok\u2190) \u2208 {(0,0),(1,0),(0,1),(1,1)}. These occur only on the bridge wb\u2218wc (the two cells immediately adjacent to S and possibly one more cell for B=2; here we use two cells: one next to S1 and one next to S2).\n  \u2022 Verdict cell (adjacent to S2 only): Ver(c, e, q) with c\u2208{R,G,B}, e\u2208{0,1}, q\u2208{0,1}. (12 symbols.)\n\nCin\u2013out constraints (B=2)\n- PORT cells tie RIDbit to input bit:\n  \u2022 Allowed: (input 0, P1^0), (input 1, P1^1), (input 0, P2^0), (input 1, P2^1).\n  \u2022 Same for probe-active variants: (0, P1p^0), (1, P1p^1), (0, P2p^0), (1, P2p^1).\n- Other roles ignore input: for each x\u2208{Pad, Err, Head_1, Accept_1, Head_2, Accept_2, GateL, GateR, NonGate, Corr_00, Corr_10, Corr_01, Corr_11, Ver(\u22c5)}, both (0,x) and (1,x) are allowed.\n- S-node symbols: both inputs allowed for S_R, S_G, S_B, S_\u22a5.\n\nCout\u2013out: PORT zone well-formedness and placement (left canonical block)\n- Adjacent to S1 on its right, the first interior cell of a canonical left block is GateL, followed immediately by the contiguous PORT zone P1, P2 (in this order), then Pad. Allowed pairs inside a canonical left block (rightward orientation):\n  \u2022 (GateL, P1^b), (P1^b, P2^{b\u2032}), (P2^{b\u2032}, Pad). (For all b,b\u2032\u2208{0,1}.)\n- In non-canonical left contexts, the neighbor of S1 is NonGate; from NonGate we only allow PAD onward: (NonGate, Pad), Pad self-loops. (We do not list any pair enabling PORT after NonGate.)\n- Symmetric rules for the canonical right block: immediately left of S2 is GateR; on its left are the contiguous PORT cells P2, P1 in reverse (since the path is oriented left-to-right, the right block\u2019s PORT sits to the left of S2). For simplicity in B=2 we mirror: allowed pairs leftward are expressed via rightward pairs as (P2^b, GateR) and (Pad, P2^b), (P1^{b\u2032}, GateR) as needed; for the DP we will construct rightward lists so that reading from left to right along wb\u2218wc we encounter \u2026Pad, P1^\u22c5, P2^\u22c5, GateR, S2.\n\nPer-bit probe TS (left side; radius-1; deterministic; no escape)\n- Injection from boundary (for j\u2208{1,2}):\n  \u2022 Allowed: (BL1_j, BL2_j), (BL2_j, Head_j).\n  \u2022 Disallowed: Any pair (BL2_j, x) with x\u2260Head_j.\n- Corridor to PORT (we use the probe-active variants at the PORT cells visited during probes):\n  \u2022 Before the PORT zone: (Head_j, Head_j) on any corridor Pad stretch prepared for the canonical block. In B=2 we keep this to one step: (Head_j, P1p^b) for the first PORT cell.\n  \u2022 Entering PORT: (Head_j, P1p^b) allowed for all b. From P1p^b to the next cell:\n    \u2013 If j=1 and b=1: (P1p^1, Accept_1) allowed; if b=0: no successor (DP dead-ends under Q_1).\n    \u2013 If j=2: (P1p^b, Head_2) continues the march to the next PORT.\n  \u2022 At second PORT: (Head_2, P2p^b) allowed. Then:\n    \u2013 If j=2 and b=1: (P2p^1, Accept_2) allowed; if b=0: no successor.\n    \u2013 If j=1: this case only arises if Head_1 reached P2p^b; we allow (P2p^b, Head_1) to continue (though for B=2, Head_1 should have halted at P1p already; the pair is harmless if never used in a well-formed block).\n- Accept exits deterministically to Pad: (Accept_j, Pad), (Pad, Pad) self-loop.\n- Probe-mode discipline (no ERR/\u22a5 escape): We do not list any pairs with Err adjacent to Head_j or Accept_j or any probe-active PORT P\u22c5p^\u22c5; similarly, no (Head_j, S_\u22c5) or (Head_j, GateL/NonGate) pairs.\n- Idle vs probe-active PORT symbols: In probe mode we require P\u22c5p^\u22c5 at the PORT positions by listing (Head_j, P\u22c5p^\u22c5) and omitting (Head_j, P\u22c5^\u22c5). In all non-probe contexts we do not permit P\u22c5p^\u22c5; only P\u22c5^\u22c5 with standard PAD neighbors are allowed.\n- Type-separation claim (B=2 instance): With the above, for any canonical left word L(u1u2), E_{L(u)}(a\u22c6)[Q_1] = u1 and E_{L(u)}(a\u22c6)[Q_2] = u2 (with a\u22c6 fixed arbitrarily, e.g., 0000). This is DP-checkable.\n\nPer-side color gating at S (local; mixed pairs accept)\n- Allowed S1-adjacent pairs (left side):\n  \u2022 If neighbor is GateL: (GateL, S_R), (GateL, S_G), (GateL, S_B), (GateL, S_\u22a5).\n  \u2022 If neighbor is NonGate or Pad: only (NonGate, S_\u22a5), (Pad, S_\u22a5). (All (NonGate, S_color) with color\u2208{R,G,B} omitted.)\n- Symmetrically for S2: if its left neighbor is GateR, then (GateR, S_color) allowed for color\u2208{R,G,B,\u22a5}; if neighbor is not GateR, only (NonGate, S_\u22a5)/(Pad, S_\u22a5) allowed.\n- This makes mixed pairs vacuous: a canonical side may be colored; a non-canonical side must be \u22a5.\n\nDirectional tokens and seam activation (local; must-color only in active-active)\n- Token seeding at the first corridor cells adjacent to S:\n  \u2022 When (GateL, S_color) occurs at S1\u2019s edge and the right neighbor cell is the first corridor cell, we allow only (S_color, Corr_10) (Tok\u2192=1) as the successor (and forbid (S_color, Corr_00), (S_color, Corr_01), (S_color, Corr_11)). If S1= S_\u22a5, we allow only (S_\u22a5, Corr_00).\n  \u2022 When the left neighbor of S2 is GateR and the left corridor cell is adjacent to S2, we enforce Tok\u2190=1 on that corridor cell: the edge immediately to the left of S2 must be (Corr_x1, S_color) for some x (i.e., Tok\u2190=1); if S2= S_\u22a5 we still permit (Corr_01, S_\u22a5) in mixed pairs.\n- Token propagation across the two corridor cells (we use exactly two):\n  \u2022 Left corridor cell C_L \u2208 {Corr_10, Corr_00} sits to the right of S1; right corridor cell C_R \u2208 {Corr_01, Corr_00, Corr_11} sits to the left of S2. Allowed pairs:\n    \u2013 (Corr_10, Corr_11) (Tok\u2192 continues right; Tok\u2190 injected on the next cell if GateR is present), (Corr_10, Corr_10) otherwise is not listed (we force meeting at the second corridor cell).\n    \u2013 (Corr_01, Corr_01) (Tok\u2190 persists if injected from the right side only).\n    \u2013 (Corr_00, Corr_00) for inactive edges.\n    \u2013 In active-active, list (Corr_10, Corr_11) and (Corr_11, GateR) (see below).\n- Must-color enforcement (local at S):\n  \u2022 If the corridor cell adjacent to S1 has Tok\u2190=1 (i.e., symbol is Corr_01 or Corr_11), then omit pairs (Corr_01, S_\u22a5) and (Corr_11, S_\u22a5); only (Corr_01, S_color) and (Corr_11, S_color) with color\u2208{R,G,B} are allowed. If Tok\u2190=0 (Corr_00 or Corr_10), allow (Corr_\u22c50, S_\u22a5) and (Corr_\u22c50, S_color) (mixed/inactive fallback).\n  \u2022 Symmetrically at S2: if the corridor cell to its left has Tok\u2192=1 (Corr_10 or Corr_11), omit (S_\u22a5, Corr_10) and (S_\u22a5, Corr_11); only (S_color, Corr_10/Corr_11) allowed. If Tok\u2192=0, allow (S_\u22a5, Corr_00/Corr_01) and (S_color, Corr_00/Corr_01).\n\nVerdict placement and S2\u2194V local acceptance (EDGE and Eq)\n- Verdict insertion (one-cell): In active-active mode (both tokens present), the right corridor cell adjacent to S2 must be Ver(c,e,q) instead of a Corr_\u22c5\u22c5 symbol. We realize this by listing only the pairs (Corr_11, Ver(c,e,q)) for some c,e,q (and omitting (Corr_11, S2) with a corridor symbol). The color c is copied from S1 by permitting (S1_color, Corr_10) only when the Ver\u2019s c equals that S1_color; concretely, we constrain the sequence S1_color \u2192 Corr_10 \u2192 Corr_11 \u2192 Ver(c, e, q) so that c matches S1_color. (For DP, we can simply list (Corr_11, Ver(R,\u22c5,\u22c5)), (Corr_11, Ver(G,\u22c5,\u22c5)), (Corr_11, Ver(B,\u22c5,\u22c5)) and then add S2\u2194Ver gating below; the color-copy guarantee is optional for the toy B=2 check.)\n- Computation of EDGE and Eq (B=2): For audit we tabulate D(u,v) and Eq[u=v] by constant-width local rules that \u201cread\u201d the PORT bits u and v. An easy way is to require that the left corridor cell Corr_10 sits immediately after P2 (on the left side) so it sees u (two PORT cells back), and the right corridor cell Ver(\u22c5,e,q) sits immediately before GateR and thus \u201csees\u201d v; we then list only those (P1^u1,P2^u2, Corr_10) patterns and (Ver(\u22c5,e,q), P2^v2, P1^v1) local neighborhoods consistent with (EDGE, Eq) for the chosen D (e.g., the 4-cycle). For the DP harness, we can bake the 16 cases into which Ver(\u22c5,e,q) symbols are allowed given the adjacent PORT values on each side. (This is implementable via radius-1 pairs by expanding a finite number of Corr/Ver variants if needed; for brevity we leave the exact micro-expansion as a checklist item.)\n- S2\u2194Ver local acceptance table (simultaneous constraints): For each Ver(c,e,q) and S2_color \u2208 {R,G,B} we allow S2\u2194Ver iff both hold: (A) if e=1 then S2_color\u2260c; (B) if q=1 then S2_color=c. Enumerated allowed pairs:\n  \u2022 If (e,q)=(0,0): allow all (S2_color, Ver(c,0,0)).\n  \u2022 If (e,q)=(1,0): allow (S2_color\u2260c, Ver(c,1,0)); forbid (c, Ver(c,1,0)).\n  \u2022 If (e,q)=(0,1): allow (c, Ver(c,0,1)); forbid (S2_color\u2260c, Ver(c,0,1)).\n  \u2022 If (e,q)=(1,1): (this case does not arise for D(u,u)=0; to be safe, list none so any accidental appearance dead-ends.)\n- ERR/\u22a5 disabled near VERD in active modes: We omit all pairs with Err adjacent to Corr_\u22c5\u22c5 or Ver(\u22c5) whenever Tok\u2192 or Tok\u2190 is 1. (Outside active-active/mixed, ERR is permitted next to Pad/NonGate.)\n\nMixed-pair fallback\n- If exactly one side is canonical, then one token is present and the other absent. Locally, this permits S_color on the canonical side (GateL/R adjacency), forces S_\u22a5 on the non-canonical side (NonGate adjacency), allows corridor cells to be Corr_10 or Corr_01 near the canonical side and Corr_00 elsewhere, and crucially allows S\u2194Corr pairs with S_\u22a5 (since opposite-direction token is 0). No Ver(\u22c5) appears (no Corr_11), so the pair accepts unconditionally via PAD/corridor self-loops.\n\nERR discipline outside special modes\n- Outside probes or active seam (i.e., when no Head_j/Accept_j/P\u22c5p^\u22c5 or Corr_\u22c5\u22c5/Ver(\u22c5) present), we allow (Pad, Err), (Err, Err), (Err, Pad) to guarantee malformed interiors can always be completed and never constrain f.\n\nB=2 DP audit plan (concrete checklist)\n1) TS probe checks: Build four canonical left seeds L(00), L(01), L(10), L(11) whose interior right of S is GateL, P1^{u1}, P2^{u2}, Pad. Set boundary inputs a\u22c6 (e.g., 0000). For Q_1: boundary outputs (BL1_1, BL2_1, BR2_1, BR1_1); run the DP and confirm extendibility iff u1=1. Similarly for Q_2 vs u2.\n2) Seam/mixed pairs: Build R(v) symmetrically so that left of S2 is Pad, P2^{v2}, P1^{v1}, GateR. For each pair (u,v), activate corridor tokens as per GateL/GateR presence. Instantiate the toy succinct graph D as the 4-cycle on {00,01,11,10} with D(u,u)=0. Bake the 16 cases into the allowed Ver(\u22c5,e,q) alongside the local S2\u2194Ver acceptance table above. Verify:\n   \u2022 Mixed pairs (exactly one side canonical) accept for any S_color on the canonical side and S_\u22a5 on the non-canonical side.\n   \u2022 Active-active pairs accept iff (D(u,v)=0 or colors differ) AND (u=v \u21d2 colors equal). (Since Eq=1 only for u=v, the latter becomes a requirement.)\n3) ERR/\u22a5-escape: Confirm via the adjacency that no Head_j, P\u22c5p^\u22c5, Corr_\u22c5\u22c5, or Ver(\u22c5) has any outgoing pair to Err; attempts dead-end as intended.\n\nAlphabet/adjacency budget (B=2 instance)\n- Symbols: S(4) + PORT idle(4) + PORT probe(4) + PROBE(4) + Gate*(2) + NonGate(1) + Pad(1) + Err(1) + Corr(4) + Ver(12) + boundary tokens(8) = 45 symbols. Adjacency table lists O(10^2) pairs; well within \u03b2 for any reasonable \u03b2\u226564.\n\nGaps in output.md (observations; no edits made)\n- Context set C not explicitly defined in output.md: As used in our reduction and the NEXPTIME upper bound, C denotes types realized by words w_1 S w_2 with |w_i|\u2208{\u2113_pump, \u2113_pump+1}. It may help to add this remark (|C|\u2264\u2113_pump), though the main theorems do not depend on it.\n- Finite-Z bound is stated (Cor. 4) with Z\u2264|T|^2; we use this for (F2) in the upper bound. For hardness we neutralize (F2) via \u22a5-plumbing; output.md does not describe this family-specific trick (by design), but our notes rely on it.\n\nObstacles/risks and mitigations\n- Verdict e/q linkage to PORT bits (B=2): We sketched two radius-1 realizations: (i) expand Corr/Ver symbols to encode the (u,v) case and list only consistent pairs; (ii) constrain the corridor placement to sit adjacent to the PORT cells and list only (PORT, Corr)/(Corr, Ver)/(Ver, PORT) pairs consistent with the table of (EDGE,Eq). Either is DP-checkable with a finite list; we propose to use (i) to keep the corridor width at two.\n- \u201cSimultaneous activation\u201d locality: Resolved via tokens. Must-color and the requirement to attach to Ver(\u22c5) are triggered solely by the presence of the opposite-direction token on the adjacent corridor cell; this is local and symmetric.\n- Probe determinism: We listed the unique successors from BL2_j and from probe-active PORT cells; no pairs to Err/S/Pad are present before Accept_j, preventing escape.\n\nNext steps (auditable deliverables)\n1) Finalize the B=2 machine-readable instance: list the exact symbol set and the Cout\u2013out adjacency pairs as above, plus the 16-case table wiring (u,v)\u21a6(EDGE,Eq) into Corr/Ver pairs. Share with the DP harness.\n2) Run the DP to validate: TS per-bit probes; mixed-pair acceptance; active-active seam behavior for all 16 (u,v) with the S2\u2194Ver acceptance table; absence of Err/\u22a5 escape.\n3) Generalize the probe schema to arbitrary B (add Head_j/Accept_j and P_kp^\u22c5 symbols) and state the O(B^2) adjacency count bound explicitly; verify symbol budgets with \u03b2\u2265c\u00b7B^2.\n4) Add a short r=1 padding lemma (or cite Lemmas 11, 14\u201315) guaranteeing existence of canonical contexts at lengths \u2113_pump and \u2113_pump+1 with the PORT zone abutting S; ensure pumping occurs in PAD only.\n5) After B=2 validation, formalize Lemma TS (type separation), Lemma RG (gating + tokens), and Lemma SG (seam verdict with EDGE/Eq) and integrate into the curated output once vetted.\n"}, {"prover_id": "03", "progress_md": "Round 0005 \u2014 Parametric radius-1 rule schemas made DP-ready (B=2 instance blueprint) and locality checks consolidated\n\nContext and objective\n- We are proving NEXPTIME-hardness of the \u03b2-normalized, radius-1 classification on oriented paths by reducing Succinct 3-Coloring to Feasible-Function Existence (F1). The verifier asked for fully local, radius-1 rule schemas that (i) separate 2^B vertex types via per-bit boundary probes, (ii) realize per-side color gating and mixed-pair vacuity, and (iii) implement an active seam with a local verdict enforcing both EDGE=1 \u21d2 color-inequality and Eq=1 \u21d2 color-equality. We adopt the directional-token activation to keep mixed pairs unconditional and must-color only in active-active pairs. Below I spell out parametric Cout\u2013out rule schemas and instantiate a B=2 DP-auditable skeleton.\n\nGaps spotted in output.md (minor; no edits)\n- None new. The parenthetical \u201cinterior inputs may be arbitrary; if the model fixes interior inputs, the definition is with respect to those fixed inputs\u201d is present; we rely on the fixed-interior-inputs interpretation. The finite-Z bound Z \u2264 |T|^2 is already recorded (Corollary 4).\n\nSymbols, roles, and disjoint subalphabets (budget discipline)\n- We keep disjoint role subalphabets so sizes add, not multiply. Output symbols encode: Role \u2208 {S, GATE_L, GATE_R, PORT, PROBE, PAD, RUN, VERD, ERR}, color \u2208 {\u22a5,R,G,B} used only when Role=S, PORT-fields Addr\u2208{1,\u2026,B}, RIDbit\u2208{0,1}, probehead \u2208 {None, Start_j, Head_j, Test_j, Accept_j}, tokens Tok\u2192,Tok\u2190\u2208{0,1} present only on RUN/PAD in the bridge, verdict fields (EDGE,Eq,FwdCol) present only when Role=VERD. Cin\u2013out ties RIDbit to \u03a3_in for Role=PORT and is otherwise permissive.\n\nA. Per-bit boundary probe \u2014 parametric Cout\u2013out schema (Type-Separation)\nSetup\n- Reserve B boundary-output 4-tuples Q_j, j\u2208[B]. We use only the left pair (positions 1,2) actively; the right pair is a neutral terminator (RB_pad2,RB_pad1). Fix a boundary-input 4-tuple a\u22c6.\nCanonical left block W_L(u)\n- Adjacent to S on its right: a contiguous PORT zone of length B with symbols Port(k,b) (Role=PORT, Addr=k, RIDbit=b=u_k). The remainder is PAD/HEAD as filler; RUN is absent unless the seam is active. Addr increases strictly left\u2192right; the PORT zone abuts S.\nAllowed Cout\u2013out pairs (all unlisted pairs disallowed)\n- Boundary injection and uniqueness:\n  \u2022 (QL1_j, QL2_j) is allowed for each j; for any i\u2260j, (QL1_i, QL2_j) is disallowed.\n  \u2022 (QL2_j, Start_j) is allowed; for any x \u2260 Start_j, (QL2_j, x) is disallowed.\n- Deterministic march (no error/\u22a5 escape while probing):\n  \u2022 (Start_j, Head_j) is allowed; no other successor from Start_j.\n  \u2022 For any non-PORT role y\u2208{PAD,HEAD}, (Head_j, Head_j@y) is allowed; pairs (Head_j, ERR_\u2022), (Head_j, \u22a5@S), and (Head_j, any non-probehead) are disallowed.\n- PORT scan and test at Addr:\n  \u2022 For k\u2260j, (Head_j, Head_j@Port(k,b)) is allowed (pass-through over wrong address).\n  \u2022 For k=j and RIDbit=b:\n    \u2013 If b=1: (Head_j, Test_j@Port(j,1)) is allowed, then (Test_j@Port(j,1), Accept_j) is allowed.\n    \u2013 If b=0: no outgoing pair from Head_j into Port(j,0) (dead end).\n- Accept exit:\n  \u2022 (Accept_j, PAD) is allowed; while probehead\u2208{Start_j,Head_j,Test_j,Accept_j} appears on either endpoint of an edge, no pair with ERR_\u2022 nor \u22a5 is listed.\n- PORT well-formedness (static, local): within the zone, only pairs (Port(k,b), Port(k+1,b\u2032)) are allowed; no skips, no reordering. The left neighbor of Port(1,\u00b7) must be S (or the seam\u2019s right S when mirrored).\nClaim TS (per-bit separation)\n- For any canonical L(u) and the boundary assignment (QL1_j, QL2_j, RB_pad2, RB_pad1), the DP has a legal completion iff u_j=1. Proof: the only possible evolution is the deterministic pipeline above; it reaches Port(j,\u00b7) and accepts iff RIDbit=1; no alternative paths or error-plumbing exist during the probe.\n\nB. Per-side gating, directional tokens, and mixed pairs\nPer-side gating (local, independent across sides)\n- The interior neighbor of S is GATE_L (left side) iff a canonical left block starts there; otherwise PAD/HEAD. Allowed S-adjacent pairs:\n  \u2022 If neighbor\u2208{PAD,HEAD}, then only (neighbor, S_\u22a5) is allowed.\n  \u2022 If neighbor=GATE_L, then (GATE_L, S_c) is allowed for c\u2208{R,G,B,\u22a5}. Symmetrically on the right side with GATE_R.\nDirectional tokens (purely local activation)\n- Seeding:\n  \u2022 If the cell to the right of S1 is GATE_L and S1\u2208{R,G,B}, then (S1_c, Tok\u2192=1@RUN) is allowed; otherwise only (S1_token, Tok\u2192=0@PAD/RUN) is allowed.\n  \u2022 If the cell to the left of S2 is GATE_R and S2\u2208{R,G,B}, then (Tok\u2190=1@RUN, S2_c) is allowed; otherwise only (Tok\u2190=0@PAD/RUN, S2_token) is allowed.\n- Propagation:\n  \u2022 Along the bridge, only (Tok\u2192=1, Tok\u2192=1) and (Tok\u2192=0, Tok\u2192=0) pairs are listed left\u2192right; similarly (Tok\u2190=1, Tok\u2190=1) and (Tok\u2190=0, Tok\u2190=0) right\u2192left. No pair can spontaneously create a 1 from 0.\nMust-color and mixed-pair fallback (enforced locally at S)\n- At S1, adjacency to the right neighbor obeys:\n  \u2022 If neighbor carries Tok\u2192=1: pairs (S1_\u22a5, neighbor) are disallowed; S1 must be colored and must attach to RUN (or VERD, see below); (S1_c, PAD) is disallowed to prevent neutral fallback in active mode.\n  \u2022 If neighbor carries Tok\u2192=0: both (S1_\u22a5, neighbor) and (S1_c, PAD) are allowed (fallback); no activation of RUN.\n- Symmetrically at S2 with Tok\u2190.\nConsequences\n- In mixed pairs (exactly one canonical side), exactly one token is present near S; the colored side is permitted (by GATE_*), the opposite side must be \u22a5, and the seam cannot activate (since the opposite-direction token is 0). Neutral PAD-plumbing accepts.\n- In active-active pairs, both tokens are 1; locally at S we forbid \u22a5 and forbid attaching to neutral neighbors, forcing RUN activation and a verdict neighbor.\n\nC. Seam tableau and verdict adjacency (local enforcement of EDGE and Eq)\nVerdict interface (radius-1, small)\n- The immediate neighbor to the right of S2 may be VERD(e,q,cFwd) only when both tokens are 1 (RUN active) and after the RUN corridor has stabilized; ERR is disallowed adjacent to RUN/VERD in active mode.\n- Allowed S2\u2013VERD pairs implement the conjunction:\n  \u2022 If e=1 (edge), then Color(S2) \u2260 cFwd (forbid equal-color pairs); if e=0, both equal and unequal allowed.\n  \u2022 If q=1 (same index), then Color(S2) = cFwd (forbid unequal-color pairs); if q=0, both equal and unequal allowed.\n- This yields acceptance iff (e=0 or colors differ) and (q=0 or colors equal). We ensure D(u,u)=0 so e\u2227q never conflicts.\nComputation of (EDGE,Eq,FwdCol)\n- RUN carries: (i) a one-cell forwarder that copies S1\u2019s color into cFwd (checked by local equality along the corridor), (ii) a fixed-width, row-by-row computation of EDGE=D(u,v) and Eq=[u=v] from the nearby PORT bits, enforced by local row-consistency pairs. In DP-auditable B=2 we tabulate a 4\u00d74 truth table for D and Eq and materialize VERD accordingly.\n\nD. B=2 explicit skeleton (sufficient for DP audit)\nAlphabet sketch (names are individual \u03a3_out symbols; roles are disjoint)\n- S: S_R, S_G, S_B, S_\u22a5.\n- Gating: GATE_L, GATE_R.\n- PORT: P1^0, P1^1, P2^0, P2^1.\n- Probe states: Start_1, Head_1, Test_1, Accept_1, Start_2, Head_2, Test_2, Accept_2.\n- Boundary tokens: QL1_1, QL2_1, QL1_2, QL2_2, RB2_pad, RB1_pad.\n- Tokens on bridge: Tok00, Tok10, Tok01, Tok11 encoding (Tok\u2192,Tok\u2190)\u2208{0,1}^2.\n- RUN (constant small alphabet) and VERD(e,q,c) for e,q\u2208{0,1}, c\u2208{R,G,B}.\nCin\u2013out (radius-0 constraints)\n- For PORT symbols: Cin\u2013out allows Pj^b only when \u03a3_in bit at that node equals b. For all other roles, both input bits are allowed.\nCout\u2013out: key allowed pairs (representative list sufficient for DP harness)\n- Probe (j=1): (QL1_1, QL2_1), (QL2_1, Start_1), (Start_1, Head_1), (Head_1, Head_1) over PAD/HEAD, (Head_1, Head_1) over P2^b, (Head_1, Test_1) over P1^1, (Test_1, Accept_1), (Accept_1, PAD). For j=2 swap P1\u2194P2 in the test pair.\n- PORT contiguity: (P1^b, P2^{b\u2032}) allowed; no other PORT\u2013PORT pair.\n- Gating: (GATE_L, S_c) for c\u2208{R,G,B,\u22a5}; (PAD, S_\u22a5) and (HEAD, S_\u22a5) only; similarly on the right with GATE_R.\n- Token seeding/propagation (bridge cells immediately inside S): (S_c, Tok10) allowed iff neighbor is right of S1 and S1 is adjacent to GATE_L; otherwise only (S_token, Tok00). Along the bridge, (Tok10, Tok10), (Tok00, Tok00) left\u2192right; symmetrically right\u2192left for Tok\u2190, combining into Tok00, Tok10, Tok01, Tok11.\n- Must-color: if neighbor of S has Tok\u2190=1 (i.e., Tok01 or Tok11), pairs (S2_\u22a5, Tok\u2022) are disallowed; if Tok\u2190=0 (Tok00 or Tok10), both (S2_\u22a5, Tok\u2022) and (S2_c, PAD) are allowed. Symmetric rule at S1 with Tok\u2192.\n- Verdict adjacency (explicit): for each e,q,cFwd and color d\u2208{R,G,B}, allow (S2_d, VERD(e,q,cFwd)) iff [(e=1 \u21d2 d\u2260cFwd) and (q=1 \u21d2 d=cFwd)]. For example, disallow (S2_R, VERD(1,0,R)), allow (S2_G, VERD(1,0,R)); disallow (S2_G, VERD(0,1,R)), allow (S2_R, VERD(0,1,R)). When Tok\u2190=0, VERD never appears (RUN inactive), and neutral PAD neighbors are allowed.\n- ERR disabled near PROBE/RUN/VERD: no pairs with ERR on either endpoint adjacent to any of Start_j, Head_j, Test_j, Accept_j, RUN, or VERD.\nDP checks to run (auditable)\n- TS: For four L(u) with u\u2208{00,01,10,11}, and the pair (QL1_1,QL2_1) on the left and (RB2_pad,RB1_pad) on the right, verify by O(k\u03b2^2) DP that acceptance equals u_1; similarly QL1_2,QL2_2 yields u_2.\n- Seam: Fix a toy D on 4 vertices (e.g., a 4-cycle) and Eq=[u=v]. Ensure RUN places VERD(e,q,\u00b7) and S2\u2013VERD adjacency enforces: (i) if D(u,v)=1, only unequal colors pass; (ii) if u=v, only equal colors pass; (iii) mixed pairs accept regardless of the colored canonical side\u2019s choice on S (the opposite side must be \u22a5 by gating).\n\nE. Why the rules are local, deterministic where needed, and budget-feasible\n- Probe determinism: Reserved boundary pairs Q_j force Start_j uniquely; Head_j has a single successor on every edge; at Addr=j the only way forward depends on RIDbit; ERR/\u22a5 are not allowed adjacent to probe states. Hence E_{L(u)}(a\u22c6)[Q_j]=u_j.\n- Mixed-pair vacuity and must-color: The opposite-direction token locally indicates whether the seam is active; only when it is 1 do we (i) forbid \u22a5 at S and (ii) forbid attaching to neutral PAD; otherwise all fallbacks are allowed.\n- Verdict locality: All semantic checks reduce to S2\u2194VERD adjacency; the forward color is carried explicitly; EDGE and Eq are pinned by the local RUN-to-VERD interface.\n- Budget: With disjoint roles, symbols scale as O(B) (PORT and probe states) plus O(1) for others; the Cout\u2013out table uses O(B^2) entries for (Head_j \u2194 Port(k,\u00b7)) and O(\u03b2) elsewhere. Choose \u03b2 \u2265 c\u00b7B^2 to leave slack.\n\nF. Obstacles and how addressed\n- Token spurious creation: Prevented by listing only (Tok0\u2192Tok0) and (Tok1\u2192Tok1) along the corridor, with seeding tied to GATE_* adjacency; no rule lists 0\u21921 without a gate.\n- Probe escape: All pairs with ERR/\u22a5 adjacent to probe states are omitted; Start/Head/Test/Accept have unique successors.\n- Seam mis-activation: Only the presence of the opposite-direction token adjacent to S forbids \u22a5 and neutral neighbors; there is no cross-seam dependence beyond immediate neighbors.\n- Length normalization: We still rely on pumping/replacement to realize canonical W_L(u), W_R(v) at lengths \u2113_pump or \u2113_pump+1 with the PORT zone abutting S; we will supply a short, r=1 specialization of Lemmas 11\u201315 to make this self-contained.\n\nG. Next steps (concrete, auditable)\n1) Produce a machine-readable B=2 instance: enumerate \u03a3_out symbols as listed; provide Cin\u2013out (PORT bit-tying) and Cout\u2013out pairs exactly as above (including the explicit S2\u2013VERD table and probe pairs). Run the O(k\u03b2^2) DP to verify TS and the mixed/active seam behavior on all 16 ordered pairs (L(u), R(v)).\n2) Fill in the RUN-to-VERD micro-tableau for B=2: a finite, row-by-row transition system that reads u,v from the two-port zones and writes VERD(e,q,cFwd) adjacent to S2; ensure ERR is disallowed near RUN in active mode.\n3) Generalize token and probe tables from B=2 to arbitrary B (the only growth is the set {Start_j,Head_j,Test_j,Accept_j} and the PORT addresses).\n4) Write a short r=1 padding lemma: \u201cFor each u, there exist left/right contexts of lengths in {\u2113_pump,\u2113_pump+1} with the same near-S structure (HEAD+PORT) and the same type near S,\u201d by pumping PAD and applying Lemma 11 (replacement) to preserve type at the seam.\n5) After B=2 validation, promote Lemmas TS (probe separation), RG (gating+tokens), and SG (seam verdict) into the curated output.\n\nH. Minimal claims ready for DP audit (summarized)\n- TS: Under the boundary 4-tuples (QL1_j,QL2_j,RB2_pad,RB1_pad), E_{L(u)}(a\u22c6)[\u00b7] equals u_j. Distinct u give distinct left-types; mirrored on the right.\n- Mixed pairs accept unconditionally: exactly one token present \u21d2 S-side with 0 allows \u22a5 and neutral fallback; no RUN/VERD appears.\n- Active-active: both tokens present \u21d2 must-color; S2\u2194VERD adjacency enforces simultaneously EDGE and Eq constraints; ERR is disallowed near RUN/VERD.\nThese are all checkable by the O(k\u03b2^2) DP once the above symbol list and pair tables are instantiated.\n"}, {"prover_id": "04", "progress_md": "Round 0005 \u2014 Parametric, radius-1 rule schemas you can DP-check; adopting directional tokens\n\nContext and objective\n- We adopt the verifier\u2019s recommendation to use directional tokens for seam activation. This round supplies explicit, radius-1 Cout\u2013out (and the relevant Cin\u2013out) rule schemas that are ready to be instantiated (especially for B=2) and verified by the O(k\u03b2^2) DP. We also give a short, specialized padding lemma (radius 1) to justify canonical contexts at lengths in {\u2113_pump, \u2113_pump+1} without changing near-S behavior.\n\nA. Per-bit probe: explicit local rules (Type-Separation TS)\nSymbols/tracks (folded into \u03a3_out; disjoint role subalphabets so sizes add):\n- Boundary outputs: for each j\u2208[B], four reserved tokens Q^L1_j, Q^L2_j, Q^R2_j, Q^R1_j. All non-reserved boundary outputs are ordinary tokens Bnd\u2022.\n- PORT zone (adjacent to S on canonical left): Port^I(k,b) and Port^P(k,b) for k\u2208[B], b\u2208{0,1}. Port^I used in idle, Port^P in probe mode; both carry (Role=PORT, Addr=k, RIDbit=b).\n- Probe states per j: Start_j, Head_j, Test_j, Accept_j (Role=PROBE). No other role has ProbeHead\u2260None.\nCin\u2013out constraints:\n- When Role=PORT, RIDbit equals the node\u2019s input bit; otherwise unrestricted.\nCout\u2013out pairs (all omitted pairs are illegal):\n- Boundary injection (reserved probes only): (Q^L1_j, Q^L2_j) and (Q^L2_j, Start_j). No other successor from Q^L2_j.\n- Corridor marching to PORT[1]: (Start_j, Head_j). For any non-PORT corridor cell y, (Head_j_prev, Head_j_y). No pairs from Head_j to ERR/\u22a5 (disables escape).\n- Entering PORT and scan-by-address:\n  \u2022 For any k,b: (Head_j_prev, Port^P(k,b)).\n  \u2022 If k\u2260j: (Port^P(k,b), Head_j_next) (head keeps moving).\n  \u2022 If k=j and b=1: (Port^P(j,1), Test_j), then (Test_j, Accept_j). If k=j and b=0: Test_j has no legal successor (dead-end). No (Test_j,\u2022) except (Test_j,Accept_j).\n- Accept exit to PAD: (Accept_j, PAD), and then PAD self-loops.\n- Mode exclusivity: Any adjacency involving Start_j/Head_j/Test_j/Accept_j appears only under Q_j; there are no pairs from PAD/HEAD/PORT^I into any PROBE state. Thus PROBE states cannot spontaneously appear unless Q_j is used.\n- PORT contiguity/monotonicity (independent of probes): For consecutive PORT cells x\u2192y, allowed pairs enforce Addr(x)+1=Addr(y), starting at Addr=1 and ending at Addr=B. This makes a contiguous block abutting S; non-PORT intrusions in between have no legal pairs with PORT neighbors.\nClaim TS (restated, DP-checkable): For canonical L(u) with a well-formed contiguous PORT zone at S, and fixed boundary inputs a\u22c6, the DP on the 4-node boundary with outputs Q_j accepts iff u_j=1, hence E_{L(u)}(a\u22c6)[Q_j]=u_j. Determinism comes from unique successors and the prohibition of ERR/\u22a5 near PROBE.\n\nB. Per-side color gating and seam activation with directional tokens\nSymbols/tracks:\n- S-color tokens at the two S nodes: S_\u22a5, S_R, S_G, S_B.\n- Gate tokens adjacent to S inside canonical blocks: GateL on left interior neighbor of S1; GateR on right interior neighbor of S2.\n- Corridor roles across the bridge wb\u2218wc: RUN, PAD, VERD (verdict cell role). Each corridor symbol encodes Tok\u2192,Tok\u2190\u2208{0,1} (two bits) used only on corridor roles.\nLocal gating at S (Cout\u2013out pairs touching S and its interior neighbor):\n- Permission: If neighbor is GateL (resp. GateR), allow S\u2208{S_R,S_G,S_B,S_\u22a5} on that side; else only S_\u22a5 allowed. This is per-side, independent.\nDirectional token seeding (purely local):\n- If the interior neighbor is GateL and S1\u2208{S_R,S_G,S_B}, then the immediate corridor cell to the right of S1 must have Tok\u2192=1; otherwise Tok\u2192=0.\n- If the interior neighbor is GateR and S2\u2208{S_R,S_G,S_B}, then the immediate corridor cell to the left of S2 must have Tok\u2190=1; otherwise Tok\u2190=0.\nToken propagation (deterministic):\n- For any corridor edge x\u2192y, allowed iff Tok\u2192(y) \u2265 Tok\u2192(x) and Tok\u2190(y) \u2265 Tok\u2190(x), and once a token bit becomes 1 it stays 1 across the entire bridge (monotone propagation). Concretely, list the four allowed bit-pairs per edge: (0,0)\u2192(0,0), (1,0)\u2192(1,0), (0,1)\u2192(0,1), (1,1)\u2192(1,1). Disallow any decrease.\nMust-color and mixed-pair fallback (local checks at S):\n- If the interior neighbor\u2019s Tok bit from the opposite side is 1 (Tok\u2192 at S1\u2019s neighbor; Tok\u2190 at S2\u2019s), then the only allowed S tokens are S_R,S_G,S_B (forbid S_\u22a5). Also, in this case S must attach to a non-PAD verdict/corridor neighbor (see C below); attaching to neutral PAD is forbidden. If the opposite token bit is 0, both S_\u22a5 and S_{R,G,B} are allowed and may attach to PAD neighbors (mixed/inactive acceptance).\nRemark: These three rules ensure: (i) only canonical sides can choose colors; (ii) must-color is enforced only in active-active (both tokens present); and (iii) mixed pairs accept via PAD-only plumbing.\n\nC. RUN tableau and verdict cell with local EDGE/Eq gate\nVerdict neighbor format:\n- The cell immediately to the right of S2 (inside the corridor) takes a role VERD(e,q,c) with e=EDGE\u2208{0,1}, q=Eq\u2208{0,1}, and c=FwdColor\u2208{R,G,B}. A 1-bit forwarder track copies S1\u2019s color along the corridor; pairwise neighbor equalities enforce consistency until VERD.\nLocal acceptance at S2\u2194VERD (enumerable finite list):\n- Allowed pairs (S2, VERD(e,q,c)) exactly when both constraints hold:\n  \u2022 If e=1, then S2\u2019s color \u2260 c; else (e=0) no restriction.\n  \u2022 If q=1, then S2\u2019s color = c; else (q=0) no restriction.\n- Concretely: for e=0,q=0 allow all 3\u00d73 color pairs; e=1,q=0 allow all unequal pairs; e=0,q=1 allow only (S2=c); e=1,q=1 allow none (this case should be unreachable if D(u,u)=0; if it occurs due to a malformed tableau, the instance correctly dead-ends).\nRUN corridor robustness and activation:\n- When both Tok\u2192=Tok\u2190=1 (active-active), Cout\u2013out permits only RUN/VERD states (no ERR/\u22a5) and requires a well-formed row-by-row simulation of U that reads (enc(D), u, v). Any malformed step has no legal continuation (local refutation). When at least one token is 0, RUN/VERD symbols are disallowed and PAD plumbing is allowed.\n\nD. B=2 auditable micro-instance (symbol list and key pairs)\nSymbols (minimal set):\n- S: S_\u22a5, S_R, S_G, S_B.\n- PORT (left): Port^I(1,0/1), Port^I(2,0/1), Port^P(1,0/1), Port^P(2,0/1).\n- Probe: Start_1, Head_1, Test_1, Accept_1; Start_2, Head_2, Test_2, Accept_2.\n- Boundary: Q^L1_1,Q^L2_1,Q^R2_1,Q^R1_1 and same for j=2; also generic Bnd\u2022 tokens.\n- Gate: GateL, GateR.\n- Corridor: PAD_00, PAD_10, PAD_01, PAD_11 (PAD with Tok\u2192Tok\u2190 bits), and VERD(c\u2208{R,G,B}, e\u2208{0,1}, q\u2208{0,1}); RUN_x (finite work alphabet, omitted here but locally checked).\nKey Cout\u2013out pairs (subsample; full set by schemas A\u2013C):\n- Probes: (Q^L2_1, Start_1), (Start_1, Head_1), (Head_1, Port^P(1,b)), (Port^P(1,1), Test_1), (Test_1, Accept_1), (Accept_1, PAD_00), (Head_1, Port^P(2,b)), (Port^P(2,b), Head_1). Mirror for j=2.\n- PORT contiguity: (Port^I(1,\u2022), Port^I(2,\u2022)) allowed; (Port^I(2,\u2022), non-PORT) terminates block; no other cross.\n- Gating at S1: (GateL, S_{R/G/B/\u22a5}) allowed; (non-GateL, S_\u22a5) only. Similarly for S2 and GateR.\n- Token seeding/propagation: From GateL with S1\u2208{R,G,B} require the right neighbor be PAD/RUN with Tok\u2192=1; else Tok\u2192=0. Along corridor, (PAD_ab, PAD_ab) and (PAD_a b, PAD_a b) with nondecreasing bits as above.\n- Must-color: If the cell next to S2 has Tok\u2190=1, forbid (S_\u22a5, \u2022) and forbid attachment to bare PAD; require the neighbor be VERD or a RUN boundary state. If Tok\u2190=0, allow (S_any, PAD_\u20220) freely.\n- Verdict: enumerate allowed (S2_color, VERD(e,q,c)) as per C.\nDP audit steps:\n1) Build L(00), L(01), L(10), L(11) with a length-2 PORT zone abutting S and seed HEAD/PAD elsewhere. Fix a\u22c6. Verify E_{L(u)}(a\u22c6)[Q_1]=u_1 and E_{L(u)}(a\u22c6)[Q_2]=u_2.\n2) Define a toy D on 4 vertices (00\u201301\u201311\u201310\u201300). Implement U as a constant table writing VERD(e,q,c) with q=1 iff u=v and e=1 on edges. For all 16 ordered pairs (L(u),R(v)): active-active accepts iff [(edge \u21d2 colors differ) \u2227 (u=v \u21d2 colors equal)]. Mixed pairs (exactly one Gate) accept for any color on the canonical side and \u22a5 on the other.\n\nE. Padding lemma for canonical contexts (radius 1, specialized)\nLemma Pad (explicit). Fix any finite \u201cnear-S\u201d pattern W (HEAD\u00b7PORT(B)\u00b7RUN), and a PAD filler P (Role=PAD) whose Type(P^t) stabilizes by t\u2265t0 (exists by Lemma 15). For each large \u2113\u2208{\u2113_pump, \u2113_pump+1}, there exists t such that |P^t\u00b7W|=\u2113 and Type(P^t\u00b7W) depends only on Type(W) (independent of t once t\u2265t0). Moreover, since PAD never uses PROBE/RUN/PORT roles, the probe/seam interfaces at S are unchanged.\nProof sketch: By periodicity of Type(P^t) and replacement (Lemma 11), increasing t beyond t0 does not change Type(P^t\u00b7W). Adjust t by at most 1 to hit the desired length. Apply symmetrically on the right. Hence canonical contexts with PORT abutting S exist at both target lengths without altering the gadgets.\n\nF. Budget and locality recap (for the tables you will instantiate)\n- Disjoint role subalphabets (S, PORT, PROBE, GATE, PAD, RUN, VERD, BOUNDARY) prevent unintended cross-products; sizes add. Dominant counts: O(B) PORT symbols (both I/P variants) and O(B) probe states. Adjacency table has O(B^2) nonzeros from (Head_j\u2194Port^P(k,\u2022)) and a constant number elsewhere. Choose \u03b2 \u2265 c\u00b7B^2.\n\nGaps/clarifications in output.md\n- None critical remain; output.md already states the \u201cfixed interior inputs\u201d interpretation parenthetically in Definitions. You may consider adding a short note that C (context types) is realized by w_1 S w_2 with |w_i|\u2208{\u2113_pump,\u2113_pump+1}, hence |C|\u2264\u2113_pump (used implicitly in our verifier loops).\n\nNext steps (auditable)\n1) Instantiate the above schemas for B=2: provide the full Cin\u2013out mask (RIDbit copy) and the complete Cout\u2013out table fragment covering A\u2013D.\n2) Run the O(k\u03b2^2) DP to validate TS and the seam behavior on all 16 pairs; include traces for any failing pair (none expected).\n3) Generalize the B=2 tables parametrically to arbitrary B (the only growth is in the families {Port^\u2022(k,\u00b7)} and {Start/Head/Test/Accept}_j and {Q}_j).\n4) Incorporate Lemma Pad (E) into output.md as a short lemma once the DP confirms behavior.\n5) Package the S3Col\u2192FFE(F1) reduction with these gadgets; ensure \u22a5-plumbing makes (F2) vacuous, concluding NEXPTIME-hardness of the 3-way classifier in this explicit model."}]

Current notes.md:
Working model and notation (radius 1, Î²-normalized)
- We study LCLs on globally oriented paths with fixed input alphabet Î£_in and output alphabet Î£_out of size Î². The local legality is given by two global relations: Cinâ€“out relating each input symbol to allowed output symbols at a node, and Coutâ€“out relating allowed pairs of consecutive output symbols. The radius is 1.
- A path segment w has four boundary nodes (two on the left, two on the right). For a fixed assignment to the four boundary inputs, we define the extendibility bitvector over all Î²^4 assignments to the four boundary outputs indicating for which boundary-output assignments there exists a legal extension to the interior.
- The type Type(w) is the collection, over all 4-boundary input assignments, of these extendibility bitvectors. Two words share a type if they have identical extendibility behavior for all boundary input/output assignments. Let T be the finite set of all types realizable by some word.

Verified technical facts (recorded in output.md)
- Type bound: |T| â‰¤ |Î£_in|^4 Â· 2^{Î²^4}. Reason: a type is determined by four boundary input symbols and a Boolean function on the Î²^4 boundary output assignments.
- Composition lemma: There is a computable binary operation âŠ› on T such that Type(uv) = Type(u) âŠ› Type(v) for all words u, v. Intuition: to decide extendibility of uv under a boundary-output assignment, one needs only (i) the extendibility tables of u and v, and (ii) existentially quantify over the two internal boundary outputs to satisfy Coutâ€“out at the join.
- Periodicity: For any fixed word w, the sequence Ï„_z := Type(w^z) is ultimately periodic with preperiod and period â‰¤ |T|. Thus the pair sequence (Type(w1^z), Type(w2^z)) is ultimately periodic with preperiod â‰¤ 2|T| and period â‰¤ |T|.
- Finite-Z for (F2): Given any context (w1, S, w2), whether the (F2) check passes for all z â‰¥ 1 depends only on finitely many pairs (Type(w1^z), Type(w2^z)); it suffices to check z up to Z â‰¤ |T|^2 (a non-tight but simple bound).
- DP for extension: For a fixed path with some outputs forced (e.g., on S), the existence of a global completion can be decided in O(k Î²^2) time for a length-k path by a layered dynamic program over output symbols.

Hardness direction we will pursue (pivot suggested by Prover 01)
- Source problem: Succinct 3-Coloring of a graph G on V={0,1}^B, given by a circuit D(u,v) (size s) deciding adjacency; NEXP-complete.
- Target LCL: Construct a Î²-normalized, r=1 instance P_D with Î£_out size Î² = poly(s). The plan:
  1) For each u, build at least one context type Ï„_u whose boundary behavior (detected via a reserved boundary-probe) certifies that the interior encodes the index u in a standard, radius-1-checkable block. The interior also stores a copy of D on an input track and a runzone for a fixed TM U.
  2) In a bridge between Ï„_u and Ï„_v, locally simulate U on input (D,u,v) across the seam for poly(s) steps to evaluate D(u,v); malformed simulations are locally refutable.
  3) Gate constraints: if D(u,v)=0 (non-edge) allow completion regardless of colors; if D(u,v)=1 enforce color inequality across S. All other pairings (not recognized as vertexâ€“vertex) are trivial.
  4) Assigning a color to each Ï„_u by a feasible function f is then exactly a proper 3-coloring of G.
  5) Make (F2) vacuous by allowing repeated sides to be filled with a globally available âŠ¥-plumbing language.

Open technical items for hardness (to be formalized next)
- Boundary-probe/type-separation lemma: Exhibit a fixed boundary-output probe that, when used, triggers an interior index-check subroutine; show that for distinct indices u â‰  uâ€², the probeâ€™s extendibility bit differs, hence Ï„_u â‰  Ï„_{uâ€²}.
- Seam handshake and computation: Specify the constant-size interface by which the bridge accesses (via pointers) the interior encodings of u and v and runs the 1D tableau for U for poly(s) steps, with radius-1 local checks and robust error refutations.
- Alphabet/size bookkeeping: Keep Î£_out constant tracks (roles, colors, error, Uâ€™s work alphabet) constant, with Î² = poly(s) sufficient for all auxiliary symbols.
- Soundness/completeness proof for the reduction P_D: G is 3-colorable iff a feasible f exists for P_D (with (F2) neutralized).

Caveats and corrections logged
- Short seam codes cannot distinguish exponentially many indices; instead use constant-size pointers/handshakes plus interior blocks that store and validate indices.
- Do not attempt to â€œprogram arbitrary boundary truth tables per typeâ€ via Coutâ€“out; all rules are global. Use boundary probes plus uniform interior checks to separate types.
- For 3SAT-based reductions, the (F1) universal quantifier clashes with clause-level existential quantification unless one adds complex nondeterministic gating. The succinct 3-coloring pivot avoids this.
Refined hardness plan via Succinct 3-Coloring: type separation and seam simulation (radius 1)

Parameters and normalization
- Given a succinct graph instance D of size s over V={0,1}^B with B=s^{c0}, choose Î²=s^{c1} with c1â‰¥c0 so Î²â‰¥B and the output alphabet Î£_out has size Î². The LCL instance P_D has radius 1 and is Î²-normalized (Cinâ€“out global, Coutâ€“out nearest-neighbor global). The DP and type framework from output.md applies with |T|â‰¤|Î£_in|^4Â·2^{Î²^4}.

Canonical vertex contexts and activity gating
- We will construct canonical context shapes L(u)=W_L(u) S F_R and R(v)=F_L S W_R(v) for each u,vâˆˆ{0,1}^B such that:
  1) W_L(u) (resp. W_R(v)) is a well-formed vertex block anchored O(1) from S; it exposes a port zone of length Î˜(B) immediately adjacent to S holding the index bits.
  2) Only these canonical contexts permit color tokens at S (role gating). Any context that is not a canonical vertex context is inactive: any non-âŠ¥ token at S dead-ends locally; âŠ¥ at S always extends via neutral plumbing.
  3) For each u (resp. v) the type Type(L(u)) (resp. Type(R(v))) depends only on u (resp. v) via a boundary-probe mechanism detailed below. Thus we obtain at least 2^B distinct left-types and 2^B distinct right-types.

Type separation via a family of boundary probes (two workable options)
- Option A (per-bit probes Q_j with address field): Reserve B distinct boundary-output 4-tuples {Q_j : jâˆˆ[B]}. In the port zone, include an address track Addrâˆˆ[B] and a data track RIDâˆˆ{0,1}. Local rules enforce that under boundary outputs Q_j the only legal continuation is a deterministic pointer that walks from the boundary to the unique port cell with Addr=j and then accepts iff RID=1 at that cell; otherwise no continuation exists. For all non-reserved boundary outputs we allow generic âŠ¥-plumbing so they do not affect separation. Fix a boundary-input pattern aâ‹†. Then for each u we have E_{L(u)}(aâ‹†)[Q_j]=u_j. Consequently, uâ‰ uâ€² implies Type(L(u))â‰ Type(L(uâ€²)). This uses O(B) extra symbols (addresses/pointer states) and remains within Î²=poly(s).
- Option B (mask/parity probes with Mâ‰¥B tests): Reserve M boundary-output 4-tuples {b_t : tâˆˆ[M]} with Mâ‰¥B. Store in the input of W_L(u) a table of M masks M_tâˆˆ{0,1}^B (with the BÃ—M matrix of full rank over GF(2)) and the RID block u. Under boundary outputs b_t, a deterministic pointer reads M_t and then the RID block and accumulates the inner product âŸ¨M_t,uâŸ© mod 2 using a small â€œRUNâ€ zone (row-by-row locally checked). Accept iff the parity is 1. Define Sig(u)=(âŸ¨M_t,uâŸ©)_tâˆˆ{0,1}^M; Sig is injective because Mâ‰¥B and the masks are independent. Fixing a boundary-input aâ‹†, E_{L(u)}(aâ‹†)[b_t]=Sig(u)_t, so types differ for distinct u. Again, the probe behavior is radius-1 and Î²=poly(s) suffices.
- In both options, under reserved probes the control is deterministic (no error-chain escape). Outside reserved probes, error-chains and âŠ¥-plumbing ensure malformed interiors do not constrain f.

Seam gadget for succinct adjacency and color inequality
- In an (F1) instance on L(u) seam R(v), the bridge wbâˆ˜wc hosts a row-by-row simulation of a fixed TM U that evaluates D(u,v) in poly(s) steps:
  1) The port zones adjacent to S on each side expose the B-bit strings u and v. A small handshake track opens a corridor through wbâˆ˜wc where Uâ€™s tableau is laid out.
  2) Coutâ€“out enforces nearest-neighbor consistency between successive rows; malformed rows are locally refutable (no accepting continuation). The run emits a verdict bit EDGEâˆˆ{0,1} at a fixed place near S.
  3) Local acceptance: If EDGE=0 (non-edge), admit completion irrespective of colors at S; if EDGE=1 (edge), admit completion iff the two color tokens at the two S nodes differ. These are radius-1 checks.
- If either side is inactive (not a canonical vertex context), a âŠ¥-plumbing language allows completion irrespective of the other side and the colors; however, the role gating forbids colors at S for inactive types, so mapping inactive types to a color would violate (F1) on some pair.

Neutralizing (F2)
- Add a global âŠ¥-filler that, for any context (w_1,S,w_2) and any zâ‰¥1, allows filling w_1^z and w_2^z entirely with âŠ¥ symbols, consistent with any boundary outputs and inputs, without altering the two S positions or the vertex-role gating. Then (F2) holds for every f, reducing the 3-way classification on this family to (F1)-feasibility.

Why this matches our DP/type framework
- Types are defined with respect to fixed inputs; the reserved-probe acceptance depends only on the interior index u and the chosen boundary 4-tuple, so it is type-invariant. The DP in O(kÎ²^2) can verify both probe behavior and seam runs on small test instances (e.g., B=2), giving a concrete auditable path.

Key cautions to enforce in the local rules
- Reserved probes must have a unique legal continuation (deterministic pointer/run); no error-chain may provide an alternative accepting path.
- Color tokens at S must be gated by the vertex role; inactive contexts cannot place colors, ensuring f is only free on canonical vertex types and âŠ¥ elsewhere.
- The seam gadget must accept for non-edges regardless of colors and enforce inequality for edges; malformed simulations must not accept.

Minimal sanity check (B=2)
- Use Option A with Q_1,Q_2 and an Addr track {1,2} in the port zone. For uâˆˆ{00,01,10,11}, the vector (E_{L(u)}(aâ‹†)[Q_1], E_{L(u)}(aâ‹†)[Q_2]) equals u. The seam gadget with a small circuit D (e.g., a 4-cycle) enforces inequality exactly on edges, which can be brute-forced by the DP.
Consolidated plan and corrections for the S3Col â†’ F1 reduction (radius 1, Î²-normalized)

Parameters and model
- Input: succinct graph on V={0,1}^B specified by circuit D of size s. Choose Î²=s^{c1} with c1â‰¥c0 so Î²â‰¥Î˜(B) and there is symbol budget for O(B) auxiliary symbols. All constraints are radius 1 via Cinâ€“out and Coutâ€“out.

Canonical vertex blocks and activity
- Left canonical block W_L(u) adjacent to S exposes a port zone of length B with two subtracks: Addrâˆˆ{1,â€¦,B} and RIDâˆˆ{0,1}. Local rules enforce Addr increases by 1 leftâ†’right and Cinâ€“out ties RID to Î£_in. The B-bit word u is RID[1..B]. Right canonical block W_R(v) is symmetric.
- Per-side color gating (corrected): S may carry a color token {R,G,B} on a side iff the adjacent interior begins with a well-formed canonical vertex header (per-side handshake). This decision is per-side and does not depend on the opposite side. If the header is absent or malformed, the only allowed S token on that side is âŠ¥.
- Seam activation: The seam gadget is â€œactiveâ€ only when both sides are canonical (both per-side handshakes present). Mixed pairs (only one side canonical) are â€œsemi-activeâ€ and must accept unconditionally (see below), so that f may color canonical types without violating F1 on mixed pairs.

Type separation via per-bit probes (Option A)
- Reserve B distinct boundary-output 4-tuples {Q_j}. Under boundary inputs aâ‹† and outputs Q_j, Coutâ€“out forces a deterministic probe mode starting at the boundary, carrying a tagged head Head_j that moves along a pre-laid corridor to the unique cell in the port zone with Addr=j. At that cell, continuation exists iff RID=1. While in probe mode, error/âŠ¥ symbols are forbidden from appearing adjacent to probe states; outside reserved probes, standard error/âŠ¥ plumbing is allowed.
- Claim (TS): For any canonical left vertex word L(u), E_{L(u)}(aâ‹†)[Q_j]=u_j. Hence uâ‰ uâ€² â‡’ Type(L(u))â‰ Type(L(uâ€²)). Symmetric on the right. This uses only radius-1 locality and O(B) symbol budget.

Seam tableau and acceptance
- Active seam (both sides canonical): The bridge wbâˆ˜wc hosts a row-by-row tableau of a fixed TM U computing EDGE:=D(u,v) and Eq:=[u=v] in poly(s) steps. The last row writes (EDGE,Eq,ForwardedColor(S1)) into the cell immediately to the right of S2. Local rules between S2 and this neighbor enforce simultaneously:
  (A) if EDGE=1 then Color(S2)â‰ ForwardedColor(S1) (inequality on edges), else vacuous; and
  (B) if Eq=1 then Color(S2)=ForwardedColor(S1) (same-vertex consistency), else vacuous.
  Additionally, a must-color rule is enforced only in this active-active case: both S sides must be non-âŠ¥.
- Semi-active seam (mixed pair): If exactly one side is canonical, the colored side is allowed (by per-side gating), the opposite side must be âŠ¥, and the seam does not activate; the pair must accept unconditionally (neutral plumbing fills the interior). This prevents mixed pairs from constraining f.
- Inactive seam (neither side canonical): Both sides must be âŠ¥ and the pair accepts (neutral plumbing).

F2 neutralization
- A global âŠ¥-filler is available on repetitions w^z, zâ‰¥1, independent of boundary outputs and inputs, and does not interfere with per-side gating or the active seam. Thus (F2) becomes trivial.

Existence/length normalization (to be formalized)
- We assume (to be proven or replaced by an explicit construction) that for each u there exists at least one left (resp. right) canonical context of length â„“âˆˆ{â„“_pump,â„“_pump+1} with the port zone adjacent to S. Padding occurs outside the port zone, so probes and seam interfaces are unaffected. This step currently rests on pumping/replacement lemmas not yet included in output.md; keep it here as an assumption until proven.

Budget and locality checklist
- Alphabet: O(1) for roles/phases, colors+âŠ¥, error alphabet, tableau alphabet; O(B) for Addr; O(B) for probe heads and reserved boundary outputs. Choose Î² accordingly. All constraints are radius 1 and refer only to adjacent outputs (Sâ†”S neighbor or Sâ†”interior neighbor).

Audit points to pin down next
- Explicit tables for probe-mode transitions and the prohibition of ERR/âŠ¥ near probe states.
- Exact per-side handshake symbols, and the three seam modes (inactive, semi-active, active) encoded locally.
- The seamâ€™s final cell format and the constant-size forbidden/allowed adjacency list realizing (A) and (B) above.
- A B=2 explicit instance for DP validation.
Synthesis of gadgets and checks for the S3Col â†’ F1 reduction (radius 1, Î²-normalized)

Canonical vertex blocks and side-local gating
- Left canonical block W_L(u) adjacent to S exposes a contiguous B-cell PORT zone with two subtracks present only when Role=PORT: Addr âˆˆ {1,â€¦,B} and RIDbit âˆˆ {0,1}. Cinâ€“out ties RIDbit to the input bit at that node. Addr must increase by +1 leftâ†’right. The right canonical block W_R(v) is symmetric. Noncanonical interiors do not use Role=PORT and have only PAD/ERR/HEAD/RUN roles as appropriate.
- Per-side gating: Only when the interior neighbor of S is a canonical gate token (GateL at S1â€™s right neighbor or GateR at S2â€™s left neighbor) is S allowed to carry a color {R,G,B}; otherwise S must be âŠ¥. These permissions are enforced by Coutâ€“out on the Sâ†”(interior) edges and are independent per side.

Per-bit boundary probe (Type-Separation)
- Reserve B boundary-output 4-tuples {Q_j} (one per j). Fix a boundary-input tuple aâ‹† âˆˆ Î£_in^4. Under Q_j, a deterministic â€œprobe modeâ€ is forced from the left boundary through a corridor into the PORT zone:
  â€¢ States per j: Start_j, Head_j (or Move_j/Test_j variants), Accept_j. While any of these is present, ERR/âŠ¥ are disallowed in adjacent symbols.
  â€¢ Movement rules: Start_jâ†’Head_j; Head_j marches rightward across non-PORT roles and across PORT cells whose Addr â‰  j; at the unique cell with Addr=j, the successor is Test_j; Test_j transitions to Accept_j iff RIDbit=1, otherwise dead-ends; Accept_j deterministically exits to PAD.
  â€¢ PORT well-formedness: local rules enforce a contiguous PORT block of length B with Addr=1,â€¦,B adjacent to S. Addr monotonicity and contiguity prevent the probe from skipping or looping.
- Claim TS (informal): For a canonical left block L(u), E_{L(u)}(aâ‹†)[Q_j] = u_j. This is DP-checkable and relies purely on the above radius-1 pairs and Cinâ€“out.

Seam activation, mixed pairs, and local verdict (adopt directional tokens)
- Directional tokens: Introduce Tokâ†’ and Tokâ† that live only on the seam corridor cells (RUN/PAD roles). If the left side is canonical, the cell right of S1 seeds Tokâ†’=1 and it propagates deterministically to the right across the bridge; symmetrically, the right side seeds Tokâ†=1 propagating to the left.
- Must-color and fallback, locally enforced at S:
  â€¢ If the opposite-direction token is present adjacent to S (Tokâ†=1 at S2â€™s neighbor; Tokâ†’=1 at S1â€™s neighbor), then S cannot be âŠ¥ and cannot attach to a neutral neighbor; it must attach to the seam verdict neighbor. This enforces â€œmust-colorâ€ only in active-active pairs.
  â€¢ If the opposite-direction token is absent, a colored S can attach to neutral neighbors and âŠ¥ is allowed; this yields unconditional acceptance in mixed pairs (exactly one token present) and inactive pairs (no token present).
- RUN tableau and verdict: When both tokens are present (active-active), we run a fixed-width 1D tableau (role RUN) that reads enc(D) and the port bits u and v and computes two bits: EDGE := D(u,v) and Eq := [u=v]. The cell immediately right of S2 becomes V = VERD(FwdColor, EDGE, Eq), where FwdColor is a copy of S1â€™s color forwarded along the seam via a local-equality track. ERR/âŠ¥ are disabled adjacent to RUN/VERD in active mode.
- Local acceptance at S2â€“V: Forbid exactly those pairs that violate (A) EDGE=1 â‡’ Color(S2) â‰  FwdColor and (B) Eq=1 â‡’ Color(S2) = FwdColor. Allow all pairs when EDGE=0 (for (A)) and when Eq=0 (for (B)). The diagonal D(u,u)=0 assumption avoids EDGE=1 âˆ§ Eq=1 conflicts.

Alphabet and adjacency budgeting
- Disjoint role subalphabets ensure sizes add, not multiply: PORT symbols O(B) (2Ã— per bit for RIDbit), probe states O(B), reserved boundary tokens O(B), colors and âŠ¥ (4), RUN/VERD/ERR/PAD/HEAD (O(1)). Thus |Î£_out| = Î˜(B) with slack; adjacency table contains O(B^2) allowed pairs for probe marching (Head_j â†” PORT@Addr=k) plus O(Î²) for other roles. Choose Î² = s^{c1} with c1 â‰¥ 2c0 (or 3c0 conservatively) so Î² = poly(s) and adjacency tables remain polynomial.

Length normalization (status)
- We will assume (to be proved or replaced by an explicit padding) that for each u there exists at least one left/right canonical context of length in {â„“_pump, â„“_pump+1} whose PORT abuts S. This is intended to follow from standard replacement/pumping lemmas for radius-1 types, pumping only in PAD so the probe/seam interfaces are unaffected.

B=2 DP-auditable instance (to build next)
- Symbols: colors {R,G,B,âŠ¥}; PORT cells {P1^0,P1^1,P2^0,P2^1}; probe states {Start_1,Head_1,Test_1,Accept_1, Start_2,Head_2,Test_2,Accept_2}; boundary tokens for Q_1,Q_2; GATE_L/GATE_R; tokens Tokâ†’/Tokâ† âˆˆ {0,1}; RUN alphabet (constant); VERD(câˆˆ{R,G,B}, EDGEâˆˆ{0,1}, Eqâˆˆ{0,1}).
- Checks to run by O(kÎ²^2) DP: (i) For L(00), L(01), L(10), L(11), verify E(aâ‹†)[Q_1,Q_2] equals u. (ii) For a toy D (4-cycle), and all 16 ordered pairs (L(u),R(v)), verify: active-active acceptance iff inequality on edges and equality when u=v; mixed pairs accept unconditionally (colored canonical side; âŠ¥ on the other).

Audit checklist for table instantiation
- Probes: enumerate allowed pairs for Start_j, Head_j, Test_j, Accept_j; no ERR/âŠ¥ adjacent; PORT contiguity and Addr monotonicity; forbid all other successors.
- Tokens: deterministic propagation; at S, forbid âŠ¥ and neutral neighbors only when the opposite token is present; allow fallback otherwise.
- Verdict: S2â€“V adjacency list realizing (A) and (B); ERR disabled near RUN/VERD.
- Cinâ€“out: tie RIDbit to inputs for PORT cells; limit other Cinâ€“out entries to the roles used at those nodes.


Current output.md (if any):
Results validated for radius-1, Î²-normalized LCLs on oriented paths

Why these results matter
- The decision procedures for feasible-function existence (and hence the O(1)/Î˜(log* n)/Î˜(n) classification on paths) rely on two ingredients: (i) that path segments admit a finite set of â€œtypesâ€ which compose under concatenation, and (ii) that extendibility of partially labeled paths can be checked efficiently. The theorems below formalize these facts for radius 1 and yield a finite bound for the bridging (F2) checks.

Definitions (radius 1)
- Fix finite alphabets Î£_in and Î£_out (|Î£_out| = Î²). Cinâ€“out âŠ† Î£_in Ã— Î£_out specifies allowed output symbols at a node given its input symbol. Coutâ€“out âŠ† Î£_out Ã— Î£_out specifies allowed pairs of consecutive output symbols along the oriented path. A labeling of outputs y_1â€¦y_k over an input x_1â€¦x_k is legal if (x_i, y_i) âˆˆ Cinâ€“out for all i and (y_i, y_{i+1}) âˆˆ Coutâ€“out for all i.
- For a word w of length k â‰¥ 2, let the four boundary positions be i=1,2 and i=k-1,k. For a fixed assignment a âˆˆ Î£_in^4 to the boundary inputs (x_1, x_2, x_{k-1}, x_k), define E_w(a) âŠ† Î£_out^4 to be the set of boundary-output assignments b = (y_1, y_2, y_{k-1}, y_k) for which there exists a legal output labeling y_1â€¦y_k extending b, given the boundary inputs a (interior inputs may be arbitrary in Î£_in; if the model fixes interior inputs, the definition is with respect to those fixed inputs). The type of w, Type(w), is the map a â†¦ E_w(a). Let T be the set of all types realized by some w.

Theorem 1 (Finite number of types and an explicit bound)
Let m := |Î£_in|. For radius 1 we have |T| â‰¤ m^4 Â· 2^{Î²^4}.
Proof. For each fixed boundary-input assignment a there are exactly Î²^4 possible boundary-output assignments; E_w(a) is an arbitrary subset of these, hence at most 2^{Î²^4} possibilities. There are m^4 possible aâ€™s. The type is fully determined by the tuple (a, E_w(a))_{aâˆˆÎ£_in^4}. Thus the total number of distinct types is at most m^4 Â· 2^{Î²^4}.

Lemma 2 (Composition of types under concatenation)
There is a computable binary operation âŠ›: T Ã— T â†’ T such that for all words u, v we have Type(uv) = Type(u) âŠ› Type(v).
Proof. Fix boundary inputs a on uv, i.e., inputs on positions 1,2 and at the last two positions of uv. For each boundary-outputs choice b on uv, extendibility is equivalent to the existence of output symbols p,q âˆˆ Î£_out at the shared boundary between u and v (the last two outputs of u = first two of v) such that:
- (i) (Type(u) under its corresponding boundary inputs) accepts the boundary outputs given by the left two outputs of b together with p,q; and
- (ii) (Type(v) under its corresponding boundary inputs) accepts p,q together with the right two outputs of b; and
- (iii) the two internal adjacencies across the u|v seam are allowed by Coutâ€“out (these involve only (y_{|u|-1}, y_{|u|}) = (p_left, p_right) and (p_left, p_right) = (y_1, y_2) of v, but these are exactly the p,q we quantify over).
Because radius is 1, no other interior constraints couple u and v. Thus extendibility of uv under (a,b) can be decided solely from Type(u), Type(v), and Coutâ€“out by existentially quantifying p,q. Defining âŠ› to implement this decision for all (a,b) yields Type(uv) = Type(u) âŠ› Type(v).

Lemma 3 (Ultimate periodicity of repeated concatenation)
Fix w and let Ï„ := Type(w). Define the sequence Ïƒ_1, Ïƒ_2, â€¦ in T by Ïƒ_z := Type(w^z). Then Ïƒ_{z+1} = Ïƒ_z âŠ› Ï„ for all z â‰¥ 1. Consequently, the sequence (Ïƒ_z) is ultimately periodic with preperiod and period at most |T|.
Proof. By Lemma 2, Ïƒ_{z+1} = Type(w^{z+1}) = Type(w^z w) = Type(w^z) âŠ› Type(w) = Ïƒ_z âŠ› Ï„. Since T is finite, the sequence must revisit a previous value within at most |T| steps, after which it evolves deterministically with fixed period â‰¤ |T|.

Corollary 4 (Finite bound for the bridging (F2) check)
Let â„“ := |T|. Fix a context (w_1, S, w_2) with |S| = 2 and a forced output assignment s âˆˆ Î£_out^2 on S. For each z â‰¥ 1, consider the path w_1^z S w_2^z with S fixed to s, and let P(z) be the predicate â€œthere exists a legal completion of outputs on w_1^z and w_2^z consistent with s.â€ Then P(z) depends only on the pair (Type(w_1^z), Type(w_2^z)). Moreover, it suffices to check P(z) for 1 â‰¤ z â‰¤ Z with Z â‰¤ â„“^2; if all these hold then P(z) holds for all z â‰¥ 1.
Proof. For fixed s, feasibility is determined by whether there exist outputs on the two boundary nodes adjacent to S on each side such that the two segments extend and Coutâ€“out holds across the two adjacencies touching S; this depends only on Type(w_1^z) and Type(w_2^z). By Lemma 3, each of the two type sequences is ultimately periodic with preperiod and period â‰¤ â„“. Hence the pair sequence (Type(w_1^z), Type(w_2^z)) takes values in a set of size â‰¤ â„“^2 and is ultimately periodic. If P(z) holds for one full traversal of the distinct pairs (which occurs within the first â„“^2 indices), it holds for all subsequent z.

Theorem 5 (DP for extension on a partially labeled path)
Given a path of length k with a fixed input string and some outputs preassigned on a subset of nodes, there is an O(k Î²^2) time algorithm that decides whether the outputs can be completed to a legal labeling.
Proof. Construct a layered graph with k layers, each layerâ€™s vertices being the output symbols allowed at that node by Cinâ€“out and any preassignment. Add a directed edge from y at layer i to yâ€² at layer i+1 iff (y, yâ€²) âˆˆ Coutâ€“out. There exists a legal completion iff there is a path from some vertex in layer 1 to some vertex in layer k. The graph has O(k Î²) vertices and O(k Î²^2) edges; reachability is decidable in O(k Î²^2).

Remarks
- The bounds above are not tight (e.g., the â„“^2 bound in Corollary 4 can be improved using lcm of periods), but they suffice for verification in exponential time in Î². They also isolate exactly where only the types matter (composition and periodicity), which is crucial for hardness reductions that aim to make (F2) vacuous and focus on (F1).

