{
  "progress_md": "Round 0007 \u2014 endpoint-aware Stage\u20111 for paths; audits, fixes, and a path-specific feasible witness\n\nAudit of output.md (gaps and quick fixes)\n- Missing base-case k=2\u21923. outputs.md currently states k=1\u21922 (Prop 6) and k=3\u21924 (Prop 7) but omits the explicit k=2\u21923 rule, although later arguments (\u201cshort cases follow by base cases\u201d) rely on it. Please add:\n  Proposition (Base-case update; k=2\u21923). Let t=(b1,b2), t\u2032=t\u00b7a. For all (x1,x2,x3,x4)\u2208\u03a3_out^4,\n  (x1,x2,x3,x4)\u2208Ext_{t\u2032} \u21d4 [x3=x2, x1\u2208A_{b1}, x2\u2208A_{b2}, x4\u2208A_a, E(x1,x2), E(x2,x4)].\n  This is the corrected rule that eliminates the earlier x2\u2208A_a bug and is needed by \u03b4.\n- Stage\u20111 equivalence on paths is still marked as \u201cpending endpoint treatment.\u201d Below I propose an endpoint-aware feasible witness and theorem tailored to globally oriented paths that cleanly resolves this gap using only Ext-level checks.\n\nPreliminaries to reuse (from outputs.md)\n- Types T with k_flag and Ext tables; \u03b4 enumeration and |T|\u22644\u00b72^{\u03b2^4} (Props 8\u20139).\n- Ext-concatenation for all k_flags (Lemma 11) and associativity (Prop 12).\n- Feasible function f over long types (Definition, Lemma 20) and seam-feasibility matrices W_{b\u2299c} (Prop 21).\n- Optimized append (Prop 19) and O(\u03b2^6) concatenation (Prop 5).\n\nNew endpoint primitives (one-sided summaries)\n- RightColors and LeftColors of a type \u03c4:\n  RightColors(\u03c4):= { y\u2208\u03a3_out : \u2203 x1,x2,x3 with (x1,x2,x3,y)\u2208Ext_\u03c4 }.\n  LeftColors(\u03c4):= { x\u2208\u03a3_out : \u2203 x2,x3,x4 with (x,x2,x3,x4)\u2208Ext_\u03c4 }.\n  These are simply the projections of Ext_\u03c4 to the last and first coordinates.\n- Endpoint seam-compatibility matrices (precomputed once):\n  \u2022 V_left[\u03c4][\u03b11] := true iff \u2203 y\u2208RightColors(\u03c4) with E(y,\u03b11). This witnesses the possibility to attach a left-end block of type \u03c4 to the first node of a separator colored \u03b11.\n  \u2022 V_right[\u03b12][\u03c4] := true iff \u2203 x\u2208LeftColors(\u03c4) with E(\u03b12,x). This witnesses the possibility to attach the last node of a separator colored \u03b12 to a right-end block of type \u03c4.\n  Complexity: RightColors, LeftColors in O(\u03b2^4) per \u03c4 by projecting Ext_\u03c4; V_left, V_right in O(|T|\u00b7\u03b2\u00b7\u0394) where \u0394\u2264\u03b2.\n\nEndpoint-aware Stage\u20111 witness for paths\n- Mid-separator witness (unchanged): f_mid : T_long \u00d7 {0,1}^2 \u00d7 T_long \u2192 \u03a3_out^2. This is the feasible function of outputs.md (Out-set form), to be used for separators strictly between two long contexts. Verification uses the W_{b\u2299c} matrices (Prop 21).\n- Endpoint witnesses: g_L : T \u00d7 {0,1}^2 \u2192 \u03a3_out^2 and g_R : {0,1}^2 \u00d7 T \u2192 \u03a3_out^2, giving the 2-node output on the unique separator adjacent to the left end (g_L) and to the right end (g_R). They must satisfy:\n  (i) Node/edge legality on the separator: if g_L(\u03c4_end,s)=(\u03b21,\u03b22) then \u03b2i\u2208A_{s[i]} and E(\u03b21,\u03b22); similarly for g_R(s,\u03c4_end)=(\u03b21,\u03b22).\n  (ii) One-sided extendibility:\n    \u2022 Left end: V_left[\u03c4_end][\u03b21]=true (equivalently, \u2203y\u2208RightColors(\u03c4_end) with E(y,\u03b21)).\n    \u2022 Right end: V_right[\u03b22][\u03c4_end]=true (equivalently, \u2203x\u2208LeftColors(\u03c4_end) with E(\u03b22,x)).\n  Remarks. We quantify \u03c4_end over all reachable types (short or long). The checks involve only precomputed endpoint matrices and A,E.\n\nTheorem (Stage\u20111 for globally oriented paths \u2014 equivalence).\nLet P be a \u03b2-normalized r=1 LCL on globally oriented paths. The following are equivalent:\n- P has deterministic LOCAL complexity o(n) on paths.\n- There exist witnesses (f_mid, g_L, g_R) such that f_mid is feasible in the sense of outputs.md (Out-set form; Lemma 20) and g_L,g_R satisfy (i)\u2013(ii) above.\nMoreover, existence of such witnesses is checkable in nondeterministic time 2^{poly(\u03b2)}.\n\nProof sketch.\n\u21d2 (Only if; extract witnesses from an o(n) algorithm A.)\n- Let t(n)=o(n) be the runtime of A. Fix s\u226bt(n) and n\u2032\u226bs as in Lemma 18. For each w with |w|\u2264\u2113_pump, define pumped w^+ with |w^+|\u2208[s,s+\u2113_pump] and Type(w^+)=Type(w). As in Lemma 18, define f_mid by simulating A on w_a^+\u00b7S\u00b7w_b^+ (two-sided) and reading the 2-node outputs on S; feasibility follows exactly as in the cycle proof using concatenation and Type pumping.\n- Left endpoint g_L: For any end type \u03c4_end and 2-bit input s of the separator S, consider an imaginary path P := Y \u00b7 P_end \u00b7 S \u00b7 Z where P_end has Type \u03c4_end, Y and Z are long pumped contexts with Type in T_long (|Y|,|Z|\u2265s), and the total size is \u2264n\u2032. Assign pairwise distinct IDs so that the view of S is determined as in Lemma 24. Run A on P, and define g_L(\u03c4_end,s) as the 2-node output on S. Since A produces a legal labeling, the edge between the last node of P_end and the first node of S is legal; thus \u2203y\u2208RightColors(\u03c4_end) with E(y,\u03b21)=true for \u03b21 = first(g_L(\u03c4_end,s)), i.e., V_left[\u03c4_end][\u03b21] holds. Node memberships and E(\u03b21,\u03b22) hold by local legality on S. g_R is extracted symmetrically by placing S before P_end. This construction is independent of particular Y,Z choices due to pumping and Type-determinism; hence witnesses are well-defined.\n\u21d0 (If; construct an O(log* n)-round algorithm.)\n- Place separators by computing an MIS on the K-th power of the directed path in O(log* n) rounds with K:=\u2113_pump+4; as standard, the distance between neighboring separators is in [K,2K] except possibly from an endpoint to its nearest separator, which is <K+1.\n- For any two separators S1,S2 (with a middle block B between them), let \u03c4_b,\u03c4_c be the long Types of the (at least K\u22122)-long contexts abutting S1 on the right and S2 on the left, respectively (pumping and \u03b4 ensure K is above the threshold so Types are long). Label S1 and S2 using f_mid (either orientation as needed). The feasibility of f_mid and the precomputed W_{b\u2299c} matrix guarantee a consistent completion of B via membership in Ext_{\u03c4_b\u2299\u03c4_c} with the seam constraints E(\u03b1_L,o1), E(o4,\u03b1_R).\n- For the leftmost end block P_end (from the path\u2019s first node to the first separator S), let \u03c4_end be its Type and s the 2-bit input on S. Label S by g_L(\u03c4_end,s). Then (ii) ensures V_left[\u03c4_end][\u03b21]=true for \u03b21=first(g_L(\u03c4_end,s)), i.e., \u2203(o1,o2,o3,o4)\u2208Ext_{\u03c4_end} with E(o4,\u03b21). Fill P_end by any such Ext-witness; all internal nodes of P_end and the seam to S are now locally consistent. Handle the right end with g_R symmetrically using V_right.\n- All nodes satisfy A/E constraints by construction; runtime is O(log* n) (the MIS step dominates; all fillings are local constant-radius choices guided by precomputed tables).\n\nNEXPTIME verification (paths)\n- Deterministically enumerate T and split T_long; precompute Ext_\u03c4 for \u03c4\u2208T, W_{b\u2299c} for \u03c4_b,\u03c4_c\u2208T_long (Prop 21), and endpoint matrices V_left, V_right.\n- Nondeterministically guess f_mid and verify:\n  \u2022 For every (\u03c4_L,s,\u03c4_R): node constraints on f_mid(\u00b7) (A and internal E).\n  \u2022 For all \u03c4_b,\u03c4_c\u2208T_long and s1,s2 and all \u03b1_L\u2208OutR2(\u03c4_b,s1), \u03b1_R\u2208OutL1(\u03c4_c,s2): W_{b\u2299c}[\u03b1_L][\u03b1_R]=true (Lemma 20).\n- Nondeterministically guess g_L,g_R and verify their (i) node constraints and (ii) one-sided feasibility via V_left,V_right.\n- Total time 2^{poly(\u03b2)}; all lookups are constant-time in the precomputed tables.\n\nIndexing sanity and orientation\n- Ext quadruples are ordered (L1,L2,R2,R1). For the left end, the seam to S is between R1 of P_end and L1 of S, hence we use V_left[\u03c4_end][\u03b21] with \u03b21=first(g_L). For the right end, the seam is between R1 of S and L1 of P_end, hence we require V_right[\u03b22][\u03c4_end] with \u03b22=second(g_R).\n\nWhy the endpoint augmentation is necessary\n- The two-sided feasibility of f_mid on cycles does not imply one-sided compatibility with arbitrary short end segments (counterexamples exist where RightColors(\u03c4_end) has no E-neighbor in some OutL1-set). The explicit endpoint witnesses g_L,g_R and checks via V_left,V_right are exactly the missing conditions to make the (\u21d0) direction work on paths without circularity.\n\nSmall examples and stress tests\n- Equality E={(c,c)}. RightColors(\u03c4)=LeftColors(\u03c4)={c} for all \u03c4 with Ext\u2260\u2205. Pick f_mid constant (c,c) and let g_L(\u00b7,\u00b7)=g_R(\u00b7,\u00b7)=(c,c). V_left,V_right trivially true. Classified O(1) by Stage\u20112 later; Stage\u20111 accepts.\n- Proper 2-coloring (\u03a3_out={a,b}, A_0=A_1=\u03a3_out, E forbids equal). There exists f_mid (\u0398(log* n)), and we can choose g_L,g_R that alternate (e.g., g_L returns (a,b) or (b,a) matching end inputs), since both RightColors and LeftColors are {a,b}. Stage\u20111 accepts; Stage\u20112 will reject, yielding \u0398(log* n).\n- Linear/unsatisfiable seam cases. If for some \u03c4_end we have RightColors(\u03c4_end)\u2286N_E^{-1}(\u03b1) empty for all \u03b1 in some OutL1-set forced by any f_mid, then no g_L can satisfy V_left on that \u03c4_end; Stage\u20111 rejects, certifying \u03a9(n).\n\nImplementation additions (to integrate into outputs.md)\n- Add the missing k=2\u21923 base-case proposition.\n- Add definitions of RightColors, LeftColors and endpoint matrices V_left,V_right with complexity notes.\n- Add the endpoint-aware Stage\u20111 witness (f_mid, g_L, g_R), its verification conditions, and the Stage\u20111 theorem (equivalence on paths) with the proof outline as above.\n- Keep the quantifier-minimized Out-set verification and W_{b\u2299c} precomputation; add a note that g_L,g_R do not require quantification over left/right long types\u2014only endpoint matrices V_left,V_right.\n\nNext steps\n- Promote the proposed theorem and primitives into output.md, resolving the \u201cpending endpoint treatment\u201d remark.\n- Provide a short appendix with an MIS-on-Kth-power routine for directed paths and the exact K used (\u2113_pump+4), to make the O(log* n) construction fully explicit for paths.\n- Stage\u20112: once Stage\u20111 is in place for paths, return to the constant-time partition for oriented paths (Lemma 22 analogue) and integrate the per-type boundary interface certificate Q_\u03c4 to decide O(1) vs \u0398(log* n).\n- Regression: extend the existing tests to include endpoint checks using V_left,V_right; verify on random tiny \u03b2 that RightColors/LeftColors agree with direct enumeration; re-run concatenation associativity and W_{b\u2299c} validation.\n"
}