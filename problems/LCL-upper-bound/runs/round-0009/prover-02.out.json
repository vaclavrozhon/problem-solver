{
  "progress_md": "Round 0009 \u2014 Endpoint-coupled Stage\u20111 for paths; certificate fix, proofs, and verifiable checks\n\nStatus and audit of output.md\n- Good: r=1 machinery is solid and comprehensive: append DP with k-flag cases (k=1\u21922, k=2\u21923, k=3\u21924), congruence, general Ext-concatenation (all k_flag) and associativity, \u03b4-enumeration with |T| \u2264 4\u00b72^{\u03b2^4}, optimized append (O(\u03b2^4)), optimized concatenation (O(\u03b2^6)), pumping lemmas, W_{b\u2299c} feasibility matrices, and endpoint projections RightColors/LeftColors with V_left/V_right + Lemma E1.\n- Gap: Stage-1 (o(n) vs \u03a9(n)) is marked \u201cpending endpoint treatment\u201d. The current notes already identify that we must couple the endpoint-adjacent separators with the interior feasible function via OutR2/OutL1; output.md does not yet contain the corrected endpoint-aware certificate and equivalence theorem.\n- Minor: We can note under Proposition 9 that k_flag\u22654 transitions can use Proposition 19 to reduce per-append cost from O(\u03b2^5) to O(\u03b2^4).\n\nIdea \u2014 Corrected Stage\u20111 path certificate with endpoint coupling\n- Motivation (why necessary). Without coupling, g_L/g_R can choose seam colors that are legal at the endpoint (V_left/V_right true) but fall outside the Out-sets produced by f_mid, so the first interior block (between the endpoint-adjacent separator and the next interior separator) may be unfillable even though interior checks pass. This was the \u201cminimal obstruction\u201d pointed out in the feedback.\n- Definitions (objects and sets already available):\n  \u2022 T_long := {\u03c4 : k_flag(\u03c4)\u22654}.\n  \u2022 OutR2(\u03c4_b,s) := { second(f(\u03c4_a,s,\u03c4_b)) : \u03c4_a\u2208T_long }.\n  \u2022 OutL1(\u03c4_c,s) := { first(f(\u03c4_c,s,\u03c4_d)) : \u03c4_d\u2208T_long }.\n  \u2022 W_{b\u2299c}[\u03b1_L][\u03b1_R] records the existence of an Ext-witness across \u03c4_b\u2299\u03c4_c consistent with seam colors \u03b1_L, \u03b1_R.\n  \u2022 V_left, V_right as in output.md (endpoint seam feasibility).\n- Certificate (to add):\n  1) f_mid: T_long\u00d7{0,1}^2\u00d7T_long\u2192\u03a3_out^2, feasible in the Out-set sense (already defined) and verified via W_{b\u2299c}.\n  2) g_L: T\u00d7{0,1}^2\u00d7T_long\u2192\u03a3_out^2; for g_L(\u03c4_end,s,\u03c4_b)=(\u03b21,\u03b22) require:\n     (i) node legality \u03b2i\u2208A_{s[i]} and E(\u03b21,\u03b22);\n     (ii) endpoint seam feasibility V_left[\u03c4_end][\u03b21]=true;\n     (iii) interior alignment \u03b22\u2208OutR2(\u03c4_b,s).\n  3) g_R: T_long\u00d7{0,1}^2\u00d7T\u2192\u03a3_out^2; for g_R(\u03c4_c,s,\u03c4_end)=(\u03b21,\u03b22) require:\n     (i) node legality and E(\u03b21,\u03b22);\n     (ii) endpoint seam feasibility V_right[\u03b22][\u03c4_end]=true;\n     (iii) interior alignment \u03b21\u2208OutL1(\u03c4_c,s).\n  Remarks.\n  - The third argument in g_L/g_R couples endpoint separators to the adjacent long type on the interior side. This ensures the open seam color toward the interior is drawn from the same Out-set used by f_mid, so the W_{b\u2299c} universal checks cover the first interior block as well.\n\nTheorem S1-path (Endpoint-coupled equivalence; to insert)\n- Statement. For a \u03b2-normalized r=1 LCL on globally oriented paths, the following are equivalent:\n  (A) There is a deterministic LOCAL algorithm with runtime o(n).\n  (B) There exist witnesses (f_mid,g_L,g_R) satisfying: f_mid is feasible in the Out-set sense, g_L,g_R satisfy (i)\u2013(iii) above.\n  Moreover, existence of such witnesses is verifiable in nondeterministic time 2^{poly(\u03b2)}.\n- Proof sketch (\u21d2):\n  \u2022 As in Lemma 18 (already in outputs.pdf/paper), choose s\u226bT(n), pump any short context w to w^+ with |w^+|\u2208[s,s+\u2113_pump]. Extract f_mid(\u00b7) by simulating the o(n)-algorithm A on w_L^+\u00b7S\u00b7w_R^+ and reading the 2-node outputs on S, implying Out-set feasibility via W_{b\u2299c}.\n  \u2022 For g_L(\u03c4_end,s,\u03c4_b): embed (left end-block of type \u03c4_end) + separator S with input s + a long pumped block of type \u03c4_b on the right into a large path padded beyond the runtime halo, run A, and set g_L to the 2-node output on S. Local correctness implies (i); the seam into the endpoint implies (ii); the presence of \u03c4_b on the right forces the second output to lie in OutR2(\u03c4_b,s), i.e., (iii). Similarly define g_R with \u03c4_c on the left.\n- Proof sketch (\u21d0):\n  \u2022 Place 2-node separators in O(log* n) by an MIS on the K-th power (K:=\u2113_pump+4), so distances between successive separators are in [K,2K], except for one-sided end segments.\n  \u2022 Interior: label each interior separator by f_mid and complete the middle block between any two interior separators using W_{b\u2299c} and Ext_{\u03c4_b\u2299\u03c4_c}.\n  \u2022 Ends: label the left (resp. right) endpoint-adjacent separator using g_L(\u03c4_end,s,\u03c4_b) (resp. g_R(\u03c4_c,s,\u03c4_end)), where \u03c4_b,\u03c4_c are the long types on the interior sides. Then:\n    \u2013 Fill the endpoint block via Lemma E1 using V_left/V_right (local seam feasibility).\n    \u2013 Fill the intervening block between the endpoint separator and the nearest interior separator via W_{b\u2299c}, with \u03b1_L=second(g_L) (in OutR2 by (iii)) and \u03b1_R=first(f_mid on the interior separator) (in OutL1 by construction), so the prechecked W_{b\u2299c}[\u03b1_L][\u03b1_R] entry guarantees a witness in Ext_{\u03c4_b\u2299\u03c4_c}.\n  \u2022 All checks are local; the MIS step dominates time: O(log* n).\n- NEXPTIME verification. Deterministically compute T and T_long; precompute Ext_\u03c4 and Ext_{\u03c4_b\u2299\u03c4_c}, W_{b\u2299c}, OutR2/OutL1 sets from f_mid; V_left,V_right from Ext tables. Nondeterministically guess f_mid, g_L, g_R. Verify:\n  \u2022 f_mid node legality and the universal Out-set checks via W_{b\u2299c}.\n  \u2022 For all (\u03c4_end,s,\u03c4_b): g_L node legality; V_left[\u03c4_end][\u03b21]; \u03b22\u2208OutR2(\u03c4_b,s).\n  \u2022 For all (\u03c4_c,s,\u03c4_end): g_R node legality; V_right[\u03b22][\u03c4_end]; \u03b21\u2208OutL1(\u03c4_c,s).\n  Each is a table lookup; total time 2^{poly(\u03b2)}.\n\nToy counterexample (why alignment is essential; optional to include)\n- Template. Choose \u03c4_b with OutR2(\u03c4_b,s)={\u03b1} and a \u03c4_c with some OutL1-set; suppose W_{b\u2299c}[\u03b1][\u00b7] admits fills. Let g_L output (\u03b21,\u03b22) with \u03b22\u2260\u03b1 but V_left[\u03c4_end][\u03b21] true. Then the first interior block fails to fill because W_{b\u2299c}[\u03b22][\u03b1_R] can be false for all \u03b1_R. Hence the uncoupled endpoint certificate can produce false positives.\n- This simple construction can be instantiated by adapting the 3-color a\u2192b\u2192c gadget used earlier (Proposition 4), with compatible A/E and Types.\n\nImplementation refinements (verifier-side)\n- Precomputations (single-exponential):\n  \u2022 T by BFS; Ext_\u03c4 for \u03c4\u2208T; Left3_t to speed appends (Proposition 19); Ext_{\u03c4_b\u2299\u03c4_c} for \u03c4_b,\u03c4_c\u2208T_long via Proposition 5.\n  \u2022 W_{b\u2299c}; V_left, V_right.\n  \u2022 For a guessed f_mid, compute OutR2(\u03c4_b,s) and OutL1(\u03c4_c,s) (max size \u03b2 each); for speed, precompute their bitsets.\n- Optional matrices: for endpoints, precompute L_allow[\u03c4_end]:={\u03b1 | V_left[\u03c4_end][\u03b1]} and R_allow[\u03c4_end]:={\u03b1 | V_right[\u03b1][\u03c4_end]} to reduce g_L/g_R checks to set membership plus E/A.\n- Complexity note (to amend Proposition 9). For k_flag\u22654 transitions during \u03b4-enumeration, the O(\u03b2^4) append (Proposition 19) reduces total preprocessing constants; asymptotics remain 2^{poly(\u03b2)}.\n\nSmall auxiliary lemmas (easy to add, testable)\n- Endpoint allowable-color sets are exactly the E-neighbors of endpoint projections (already implicit):\n  \u2022 L_allow(\u03c4) = N_E(RightColors(\u03c4)) and R_allow(\u03c4) = N_E^{-1}(LeftColors(\u03c4)). This is Lemma E1 reformulated as set identities.\n- RightColors/LeftColors under append (computational aid). For \u03c4\u2032=\u03c4\u00b7a with k_flag(\u03c4)\u22654,\n  \u2022 RightColors(\u03c4\u2032) = { y \u2208 A_a : \u2203(x1,x2,x3) with Left3_\u03c4[x1,x2,x3] and E(x3,y) }.\n  \u2022 LeftColors(\u03c4\u00b7a) = LeftColors(\u03c4). These follow directly from Lemma 1 and the definition of Left3_\u03c4.\n  Use: fast updates of V_left/V_right if recomputed incrementally.\n\nExamples and sanity\n- Equality LCL (E={(c,c)}, c\u2208A_0\u2229A_1). Choose f_mid(\u00b7)=(c,c). OutR2/OutL1 are {c}. Let g_L=g_R=(c,c). V_left/V_right trivially true; W_{b\u2299c}[c][c]\u2248true. Classified O(1) by Stage-2; Stage-1 accepts.\n- Proper 2-coloring: With \u03a3_out={a,b} and E forbidding equal neighbors, an f_mid exists; OutR2/OutL1={a,b}; pick endpoint g_L/g_R alternating; Stage-1 accepts; Stage-2 later rejects (\u0398(log* n)).\n\nConcrete next steps (edits to output.md)\n1) Add \u201cTheorem S1-path (endpoint-coupled equivalence)\u201d with the witnesses and proofs (both directions) as above.\n2) Define g_L, g_R with third argument and spell out the three verification clauses; reference V_left/V_right, OutR2/OutL1, W_{b\u2299c}.\n3) Under Proposition 9, note that Proposition 19 yields O(\u03b2^4) per-append for k_flag\u22654.\n4) Optionally include the toy counterexample to document why the endpoint coupling is necessary.\n5) Leave Stage-2 (constant-time) for paths out of output.md until we integrate a self-contained partition lemma (the paper\u2019s Lemma 22 can be specialized to oriented paths; drafting this is queued for next round).\n\nRegression checklist (to add to notes/tests)\n- Validate endpoint-coupled certificate:\n  \u2022 Construct a random small \u03b2 instance; enumerate T, T_long; nondeterministically synthesize f_mid; derive OutR2/OutL1; then attempt to synthesize g_L/g_R and verify constraints.\n  \u2022 Show that dropping (iii) can create false positives (use the minimal obstruction template).\n- Re-run: optimized append vs brute-force append on \u03b2\u22643; Ext-concatenation associativity; W_{b\u2299c} correctness vs direct Ext scans.\n\nPotential pitfalls addressed\n- Seam and indexing: we adhere to (L1,L2,R2,R1); the left seam meets o1 in Ext_{\u03c4_b\u2299\u03c4_c}, the right seam meets o4. Endpoint seam checks use \u03b21=first(g_L) at the left seam and \u03b22=second(g_R) at the right seam.\n- Edge cases (small n): if MIS yields 0 or 1 separators, handle with constant-radius fallback (brute-force local completion using Ext tables) \u2014 this does not affect asymptotic classification.\n"
}