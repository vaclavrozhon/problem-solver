--- SYSTEM ---
You are a research **summarizer**. Summarize this *last round only* for a human log.

Include:
- 3–7 bullet **Highlights** (facts learned, reductions, counterexamples, partial bounds).
- 1–3 **Open questions / TODOs** for the next round.
- 1–3 **Citations to files** you relied on (e.g. round files or papers by name).

**Return strictly JSON**:
{
  "summary_md": "Readable summary of the round (≤200 words)",
  "highlights": [],
  "next_questions": []
}

--- USER ---
=== prover-01.out.json (progress_md) ===
Round 0009 — Endpoint-correct Stage-1 for paths, audits, and verifiable fixes

Status and quick audit of output.md
- What is solid: r=1 primitives (append DP with k-flag, corrected base cases k=1→2, 3→4; concatenation; associativity; congruence), type enumeration and |T| bound; pumping lemmas; Out-set version of feasible f over T_long; optimized append O(β^4); seam-feasibility matrices W; endpoint projections RightColors/LeftColors and endpoint seam matrices V_left,V_right with Lemma E1.
- Main gap (explicitly acknowledged): Stage-1 equivalence on oriented paths is “pending endpoint treatment.” As written, there is no coupling between the endpoint-adjacent separator’s open seam color and the Out-sets of the interior feasible function; this can admit false positives.
- Minor editorial/numbering issues to flag: (i) There are two different “Proposition 6” items (base k=1→2 and k_flag=1 update as 6A) and also “Proposition 6B” (k=2→3), which is confusing; consider renumbering. (ii) Both Lemma 2 (k_flag≥4) and Lemma 11 (all k_flag) state concatenation; Lemma 11 subsumes Lemma 2—either keep both with a note or refer to Lemma 11 uniformly. (iii) Proposition 9 still quotes O(β^5) per append in the long regime; Proposition 19 improves this to O(β^4), so the preprocessing bound can be tightened accordingly.

Problem and minimal counterexample (why the current endpoint certificate is insufficient)
- Obstruction template: Fix a long type τ_b and an input s such that OutR2(τ_b,s) = {α}. Suppose W_{b⊙c}[α][·] admits all right seams induced by f on the next separator. If an endpoint witness g_L(τ_end,s) outputs (β1,β2) with β2 ≠ α but V_left[τ_end][β1]=true, the current checks pass but the fill of the block between this separator and the next separator (colored by f) may fail, as there may be no (o1,o2,o3,o4) ∈ Ext_{τ_b ⊙ τ_c} with E(β2,o1). Hence the endpoint separator must be aligned with the interior Out-sets.

Claim (corrected endpoint-aware Stage-1 certificate for oriented paths)
- Augmented endpoint witnesses aligned to Out-sets:
  • g_L: T × {0,1}^2 × T_long → Σ_out^2. For g_L(τ_end,s,τ_b)=(β1,β2) require: (i) βi∈A_{s[i]} and E(β1,β2); (ii) V_left[τ_end][β1]=true; (iii) β2 ∈ OutR2(τ_b,s).
  • g_R: T_long × {0,1}^2 × T → Σ_out^2. For g_R(τ_c,s,τ_end)=(β1,β2) require: (i) βi∈A_{s[i]} and E(β1,β2); (ii) V_right[β2][τ_end]=true; (iii) β1 ∈ OutL1(τ_c,s).
- Feasible mid-separator function f_mid: as in output.md (Out-set form over T_long), with universal extendibility checked via W_{b⊙c}.
- Theorem S1-path (equivalence; oriented paths). An r=1, β-normalized LCL on globally oriented paths has deterministic complexity o(n) iff there exist (f_mid,g_L,g_R) satisfying the above. Verification is in nondeterministic 2^{poly(β)} time.

Proof sketch (auditable pieces)
- (⇒) Existence. Given an o(n)-round algorithm A:
  • f_mid: As in output.md (cycle gadget + pumping). Well-definedness uses that we pump to length in [s,s+ℓ_pump] and choose IDs inside the <0.1s halos.
  • g_L: For any (τ_end,s,τ_b), form a path consisting of a long pumped block of type τ_b to the right, the 2-node separator S with input s, and a left endpoint block of type τ_end; pad far outside S so A’s runtime halo is contained. Set g_L(τ_end,s,τ_b) to A’s 2-node output on S. Then: (i) node/window legality holds by correctness of A; (ii) V_left holds because the seam into τ_end is satisfied in A’s run; (iii) alignment β2∈OutR2(τ_b,s) holds by construction since S’s right output was produced in a context of type τ_b, i.e., it is one of the attained second outputs for τ_b under f_mid with input s. Define g_R symmetrically.
- (⇐) Construction of an O(log* n) algorithm.
  • Place separators by an MIS on the K-th power of the directed path in O(log* n) rounds with K := ℓ_pump+4. Standard properties ensure that the distance between neighboring separators is in [K,2K], and that the long contexts abutting each interior side are T_long.
  • Label interior separators by f_mid (using local s and adjacent long types τ_b,τ_c). Use the precomputed matrix W_{b⊙c} to fill each interior middle block between two separators by choosing a witness in Ext_{τ_b⊙τ_c} consistent with the seams.
  • Endpoints: Let S_left be the unique separator adjacent to the left end. Compute τ_end (type of the left end-block) and τ_b (long type on S_left’s right). Color S_left by g_L(τ_end,s,τ_b). By V_left there is (o1,o2,o3,o4)∈Ext_{τ_end} with E(o4,β1), so we fill the endpoint block. For the block between S_left and the nearest interior separator S2, by (iii) the outward seam color β2 is in OutR2(τ_b,s), while the left seam color from S2 lies in OutL1(τ_c,s2). Hence W_{b⊙c}[β2][α_R] is true and the block is fillable via Ext_{τ_b⊙τ_c}. Do the right end symmetrically with g_R. Runtime is O(log* n); all fillings are constant-radius lookups in precomputed tables.

NEXPTIME verification details
- Precompute deterministically in 2^{poly(β)} time:
  • T, T_long via BFS (Prop. 9) and Ext_τ for τ∈T; use Prop. 19 to implement k_flag≥4 appends in O(β^4).
  • Ext_{τ_b⊙τ_c} for τ_b,τ_c∈T_long via Prop. 5, and W_{b⊙c}.
  • V_left, V_right from endpoint projections (as in output.md).
  • OutR2(τ_b,s), OutL1(τ_c,s) sets from f_mid.
- Guess f_mid, g_L, g_R. Verify:
  • For all entries: node legality and E on the 2-node window.
  • f_mid universal extendibility via W_{b⊙c} (Out-set form; Lemma 20).
  • g_L: V_left[τ_end][β1]=true and β2 ∈ OutR2(τ_b,s). g_R: V_right[β2][τ_end]=true and β1 ∈ OutL1(τ_c,s).
- All checks are constant-time table lookups; total number of cases is |T_long|^2·4 for f_mid and (|T|·|T_long|)·4 for each endpoint map; overall time 2^{poly(β)}.

Small example illustrating necessity of alignment
- Let Σ_out={a,b}, A_0=A_1=Σ_out, and E contains only edges a→a and b→b. Suppose a feasible f_mid exists that always outputs (a,a), hence OutR2(τ_b,s)={a}. Choose τ_end with RightColors(τ_end)={a,b}. If g_L(τ_end,s) outputs (b,a), V_left holds (since E(b,b) and b∈RightColors(τ_end)) but β2=a… OK here it matches. Now flip: define f_mid that always outputs (b,b), so OutR2={b}, but g_L outputs (a,a). V_left still holds if a∈RightColors(τ_end), yet β2=a∉OutR2. There is no guarantee that the endpoint–interior block can be completed respecting the next separator colored according to f_mid. This shows (iii) is required.

Additional small lemmas/propositions to add (self-contained)
- Endpoint–interior bridging lemma. Given τ_b,τ_c∈T_long, inputs s1,s2, and endpoint-adjacent separator colors α_L,α_R with α_L∈OutR2(τ_b,s1), α_R∈OutL1(τ_c,s2), there exists a completion of the intervening block consistent with both seams iff W_{b⊙c}[α_L][α_R]=true. Proof: by definition of W_{b⊙c}; direction “only if” follows by restricting any legal completion; “if” follows by taking the witnessing (o1,o2,o3,o4)∈Ext_{τ_b⊙τ_c}.
- Preprocessing remark (tightening Prop. 9). Using Prop. 19, the k_flag≥4 append step is O(β^4), so the BFS enumeration can cite O(β^4) per transition in the long regime; short base-case transitions remain O(β^4).

Implementation notes and counts
- OutR2/OutL1 sets have size ≤β; precompute once per (τ, s). For faster Stage-1 checks, one can precompute for each (τ_b,τ_c,s1,s2) the β×β mask W_{b⊙c} and then just iterate over α_L in OutR2(τ_b,s1) and α_R in OutL1(τ_c,s2).
- Endpoints: the verification size of g_L is |T|·|T_long|·4 entries; g_R symmetric. Sparse E can reduce preprocessing time for W and V matrices.

Explicit gaps to address in output.md
- Integrate the corrected Stage-1 path theorem (S1-path) with (f_mid,g_L,g_R) as above, and add the (⇒) and (⇐) proofs specialized to globally oriented paths.
- Add the endpoint–interior bridging lemma stated above; it is just an unpacking of W_{b⊙c} and will clarify the fill of the first interior block.
- Tighten Prop. 9’s complexity to use Prop. 19 (O(β^4) per long append).
- Note that Lemma 11 subsumes Lemma 2; consider merging references.
- Clean up numbering: avoid multiple “Proposition 6/6A/6B”.

Next steps
- Promote S1-path into output.md with full statement and auditable proofs, together with the augmented endpoint witnesses. Update the classification logic: if Stage-1 fails, classify Ω(n); if Stage-1 holds but Stage-2 certificate fails, classify Θ(log* n); if Stage-2 holds, classify O(1).
- Prepare unit tests: (i) synthetic instances where OutR2 is singleton and g_L is misaligned; the augmented certificate must reject; (ii) equality LCL (accept both stages); (iii) proper 2-coloring (accept Stage-1, reject Stage-2).
- Return to Stage-2: port the (ℓ_width,ℓ_count,ℓ_pattern)-partition to oriented paths with explicit parameters and a short self-contained proof, then finalize the per-type boundary interface certificate Q_τ.


=== prover-02.out.json (progress_md) ===
Round 0009 — Endpoint-coupled Stage‑1 for paths; certificate fix, proofs, and verifiable checks

Status and audit of output.md
- Good: r=1 machinery is solid and comprehensive: append DP with k-flag cases (k=1→2, k=2→3, k=3→4), congruence, general Ext-concatenation (all k_flag) and associativity, δ-enumeration with |T| ≤ 4·2^{β^4}, optimized append (O(β^4)), optimized concatenation (O(β^6)), pumping lemmas, W_{b⊙c} feasibility matrices, and endpoint projections RightColors/LeftColors with V_left/V_right + Lemma E1.
- Gap: Stage-1 (o(n) vs Ω(n)) is marked “pending endpoint treatment”. The current notes already identify that we must couple the endpoint-adjacent separators with the interior feasible function via OutR2/OutL1; output.md does not yet contain the corrected endpoint-aware certificate and equivalence theorem.
- Minor: We can note under Proposition 9 that k_flag≥4 transitions can use Proposition 19 to reduce per-append cost from O(β^5) to O(β^4).

Idea — Corrected Stage‑1 path certificate with endpoint coupling
- Motivation (why necessary). Without coupling, g_L/g_R can choose seam colors that are legal at the endpoint (V_left/V_right true) but fall outside the Out-sets produced by f_mid, so the first interior block (between the endpoint-adjacent separator and the next interior separator) may be unfillable even though interior checks pass. This was the “minimal obstruction” pointed out in the feedback.
- Definitions (objects and sets already available):
  • T_long := {τ : k_flag(τ)≥4}.
  • OutR2(τ_b,s) := { second(f(τ_a,s,τ_b)) : τ_a∈T_long }.
  • OutL1(τ_c,s) := { first(f(τ_c,s,τ_d)) : τ_d∈T_long }.
  • W_{b⊙c}[α_L][α_R] records the existence of an Ext-witness across τ_b⊙τ_c consistent with seam colors α_L, α_R.
  • V_left, V_right as in output.md (endpoint seam feasibility).
- Certificate (to add):
  1) f_mid: T_long×{0,1}^2×T_long→Σ_out^2, feasible in the Out-set sense (already defined) and verified via W_{b⊙c}.
  2) g_L: T×{0,1}^2×T_long→Σ_out^2; for g_L(τ_end,s,τ_b)=(β1,β2) require:
     (i) node legality βi∈A_{s[i]} and E(β1,β2);
     (ii) endpoint seam feasibility V_left[τ_end][β1]=true;
     (iii) interior alignment β2∈OutR2(τ_b,s).
  3) g_R: T_long×{0,1}^2×T→Σ_out^2; for g_R(τ_c,s,τ_end)=(β1,β2) require:
     (i) node legality and E(β1,β2);
     (ii) endpoint seam feasibility V_right[β2][τ_end]=true;
     (iii) interior alignment β1∈OutL1(τ_c,s).
  Remarks.
  - The third argument in g_L/g_R couples endpoint separators to the adjacent long type on the interior side. This ensures the open seam color toward the interior is drawn from the same Out-set used by f_mid, so the W_{b⊙c} universal checks cover the first interior block as well.

Theorem S1-path (Endpoint-coupled equivalence; to insert)
- Statement. For a β-normalized r=1 LCL on globally oriented paths, the following are equivalent:
  (A) There is a deterministic LOCAL algorithm with runtime o(n).
  (B) There exist witnesses (f_mid,g_L,g_R) satisfying: f_mid is feasible in the Out-set sense, g_L,g_R satisfy (i)–(iii) above.
  Moreover, existence of such witnesses is verifiable in nondeterministic time 2^{poly(β)}.
- Proof sketch (⇒):
  • As in Lemma 18 (already in outputs.pdf/paper), choose s≫T(n), pump any short context w to w^+ with |w^+|∈[s,s+ℓ_pump]. Extract f_mid(·) by simulating the o(n)-algorithm A on w_L^+·S·w_R^+ and reading the 2-node outputs on S, implying Out-set feasibility via W_{b⊙c}.
  • For g_L(τ_end,s,τ_b): embed (left end-block of type τ_end) + separator S with input s + a long pumped block of type τ_b on the right into a large path padded beyond the runtime halo, run A, and set g_L to the 2-node output on S. Local correctness implies (i); the seam into the endpoint implies (ii); the presence of τ_b on the right forces the second output to lie in OutR2(τ_b,s), i.e., (iii). Similarly define g_R with τ_c on the left.
- Proof sketch (⇐):
  • Place 2-node separators in O(log* n) by an MIS on the K-th power (K:=ℓ_pump+4), so distances between successive separators are in [K,2K], except for one-sided end segments.
  • Interior: label each interior separator by f_mid and complete the middle block between any two interior separators using W_{b⊙c} and Ext_{τ_b⊙τ_c}.
  • Ends: label the left (resp. right) endpoint-adjacent separator using g_L(τ_end,s,τ_b) (resp. g_R(τ_c,s,τ_end)), where τ_b,τ_c are the long types on the interior sides. Then:
    – Fill the endpoint block via Lemma E1 using V_left/V_right (local seam feasibility).
    – Fill the intervening block between the endpoint separator and the nearest interior separator via W_{b⊙c}, with α_L=second(g_L) (in OutR2 by (iii)) and α_R=first(f_mid on the interior separator) (in OutL1 by construction), so the prechecked W_{b⊙c}[α_L][α_R] entry guarantees a witness in Ext_{τ_b⊙τ_c}.
  • All checks are local; the MIS step dominates time: O(log* n).
- NEXPTIME verification. Deterministically compute T and T_long; precompute Ext_τ and Ext_{τ_b⊙τ_c}, W_{b⊙c}, OutR2/OutL1 sets from f_mid; V_left,V_right from Ext tables. Nondeterministically guess f_mid, g_L, g_R. Verify:
  • f_mid node legality and the universal Out-set checks via W_{b⊙c}.
  • For all (τ_end,s,τ_b): g_L node legality; V_left[τ_end][β1]; β2∈OutR2(τ_b,s).
  • For all (τ_c,s,τ_end): g_R node legality; V_right[β2][τ_end]; β1∈OutL1(τ_c,s).
  Each is a table lookup; total time 2^{poly(β)}.

Toy counterexample (why alignment is essential; optional to include)
- Template. Choose τ_b with OutR2(τ_b,s)={α} and a τ_c with some OutL1-set; suppose W_{b⊙c}[α][·] admits fills. Let g_L output (β1,β2) with β2≠α but V_left[τ_end][β1] true. Then the first interior block fails to fill because W_{b⊙c}[β2][α_R] can be false for all α_R. Hence the uncoupled endpoint certificate can produce false positives.
- This simple construction can be instantiated by adapting the 3-color a→b→c gadget used earlier (Proposition 4), with compatible A/E and Types.

Implementation refinements (verifier-side)
- Precomputations (single-exponential):
  • T by BFS; Ext_τ for τ∈T; Left3_t to speed appends (Proposition 19); Ext_{τ_b⊙τ_c} for τ_b,τ_c∈T_long via Proposition 5.
  • W_{b⊙c}; V_left, V_right.
  • For a guessed f_mid, compute OutR2(τ_b,s) and OutL1(τ_c,s) (max size β each); for speed, precompute their bitsets.
- Optional matrices: for endpoints, precompute L_allow[τ_end]:={α | V_left[τ_end][α]} and R_allow[τ_end]:={α | V_right[α][τ_end]} to reduce g_L/g_R checks to set membership plus E/A.
- Complexity note (to amend Proposition 9). For k_flag≥4 transitions during δ-enumeration, the O(β^4) append (Proposition 19) reduces total preprocessing constants; asymptotics remain 2^{poly(β)}.

Small auxiliary lemmas (easy to add, testable)
- Endpoint allowable-color sets are exactly the E-neighbors of endpoint projections (already implicit):
  • L_allow(τ) = N_E(RightColors(τ)) and R_allow(τ) = N_E^{-1}(LeftColors(τ)). This is Lemma E1 reformulated as set identities.
- RightColors/LeftColors under append (computational aid). For τ′=τ·a with k_flag(τ)≥4,
  • RightColors(τ′) = { y ∈ A_a : ∃(x1,x2,x3) with Left3_τ[x1,x2,x3] and E(x3,y) }.
  • LeftColors(τ·a) = LeftColors(τ). These follow directly from Lemma 1 and the definition of Left3_τ.
  Use: fast updates of V_left/V_right if recomputed incrementally.

Examples and sanity
- Equality LCL (E={(c,c)}, c∈A_0∩A_1). Choose f_mid(·)=(c,c). OutR2/OutL1 are {c}. Let g_L=g_R=(c,c). V_left/V_right trivially true; W_{b⊙c}[c][c]≈true. Classified O(1) by Stage-2; Stage-1 accepts.
- Proper 2-coloring: With Σ_out={a,b} and E forbidding equal neighbors, an f_mid exists; OutR2/OutL1={a,b}; pick endpoint g_L/g_R alternating; Stage-1 accepts; Stage-2 later rejects (Θ(log* n)).

Concrete next steps (edits to output.md)
1) Add “Theorem S1-path (endpoint-coupled equivalence)” with the witnesses and proofs (both directions) as above.
2) Define g_L, g_R with third argument and spell out the three verification clauses; reference V_left/V_right, OutR2/OutL1, W_{b⊙c}.
3) Under Proposition 9, note that Proposition 19 yields O(β^4) per-append for k_flag≥4.
4) Optionally include the toy counterexample to document why the endpoint coupling is necessary.
5) Leave Stage-2 (constant-time) for paths out of output.md until we integrate a self-contained partition lemma (the paper’s Lemma 22 can be specialized to oriented paths; drafting this is queued for next round).

Regression checklist (to add to notes/tests)
- Validate endpoint-coupled certificate:
  • Construct a random small β instance; enumerate T, T_long; nondeterministically synthesize f_mid; derive OutR2/OutL1; then attempt to synthesize g_L/g_R and verify constraints.
  • Show that dropping (iii) can create false positives (use the minimal obstruction template).
- Re-run: optimized append vs brute-force append on β≤3; Ext-concatenation associativity; W_{b⊙c} correctness vs direct Ext scans.

Potential pitfalls addressed
- Seam and indexing: we adhere to (L1,L2,R2,R1); the left seam meets o1 in Ext_{τ_b⊙τ_c}, the right seam meets o4. Endpoint seam checks use β1=first(g_L) at the left seam and β2=second(g_R) at the right seam.
- Edge cases (small n): if MIS yields 0 or 1 separators, handle with constant-radius fallback (brute-force local completion using Ext tables) — this does not affect asymptotic classification.


=== Verifier (summary_md) ===

=== Verifier (verdict) ===
partial success

