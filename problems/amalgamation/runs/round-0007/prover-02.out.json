{
  "progress_md": "# Round 0007 \u2014 Inner\u2011product characterization of O5 and immediate consequences for local F\u2011tables\n\n## Quick recap and current bottleneck\n- Goal: Decide AP for H (finite 4\u2011hypertournaments omitting O5) via the one\u2011point step. The hard minimal base is |A|=4, a 6\u2011variable CSP with four local 5\u2011set constraints Y_k (output.md Prop. 3).\n- Missing data: The local tables F(\u03b1,\u03b2)\u2286{\u00b11}^3 (especially for (\u03b1,\u03b2)\u2208{(+,+),(+,-)}), which determine whether the 2+2 vertex\u2011sign ansatz or a small brute\u2011force search suffices. We previously left open whether (+++)\u2208F(+,-).\n\n## New lemma (rigorous, implementation\u2011ready)\nLemma 18 (Inner\u2011product characterization of O5).\n- Statement. Let E={\u03b5(\u03c4):\u03c4\u2208S5} be the \u03b5\u2011set from Lemma 6. For p\u2208{\u00b11}^5, one has p\u2208O5 if and only if there exists \u03b5\u2208E with \u03a3_{i=1}^5 p_i \u03b5_i = \u22123.\n- Proof. O5 is the orbit of e_O=(+,-,-,-,-). For \u03c4\u2208S5, the image has the form p=\u03c6(\u03b5,i0) where \u03b5=\u03b5(\u03c4), i0=\u03c4(1), and p_i=\u03b5_i if i=i0 and p_i=\u2212\u03b5_i otherwise (notes: \u201cO5\u2011image formula\u201d). Hence \u03a3 p_i \u03b5_i = \u03b5_{i0}^2 + \u03a3_{i\u2260i0}(\u2212\u03b5_i^2)=1\u22124=\u22123. Conversely, if \u03a3 p_i \u03b5_i = \u22123 with \u03b5\u2208E, then exactly one coordinate satisfies p_i \u03b5_i=+1 (the others are \u22121). Let i0 be this index. Then p=\u03c6(\u03b5,i0), hence p\u2208O5. \u220e\n- Why useful: Reduces IsO5 to a 120\u2011element check over E with a single scalar test; in particular, special \u03b5\u2208E yield immediate hand\u2011classifications for families of 5\u2011vectors p.\n\n## Immediate corollaries for F(\u03b1,\u03b2) (hard exclusions now settled)\nUsing Lemma 8 (\u03b5\u2261\u22121\u2208E) and that \u03b5\u2261(+1)\u2208E (\u03c4=id), Lemma 18 yields:\n- C1. F(+,-): (+++) is forbidden. Indeed, p=(+,-,+,+,+) has \u03a3 p_i=+3, and with \u03b5\u2261\u22121 we get \u03a3 p_i \u03b5_i=\u22123 \u21d2 O5. Together with output.md Lemma 13 ((---) forbidden), we now fully classify the all\u2011equal triples in the opposite\u2011fixed case: both (+++) and (---) are O5 (forbidden).\n- C2. F(+,+): Every triple with exactly two \u201c+\u201d and one \u201c\u2212\u201d is forbidden. For p=(+,+,x,y,z), \u03a3 p_i = 2 + (x+y+z). When the triple has two + and one \u2212, x+y+z=+1 \u21d2 \u03a3 p_i=+3, hence O5 by \u03b5\u2261\u22121. Thus all three permutations of (++\u2212) are excluded in F(+,+).\n- C3. F(\u2212,\u2212): Every triple with exactly one \u201c+\u201d and two \u201c\u2212\u201d is forbidden. Symmetric to C2 via flipping all signs (Cor. 9).\nThese are strict consequences; there may be further forbidden triples (we do not claim exclusivity without enumerating E).\n\nWhy this matters now:\n- The long\u2011standing ambiguity \u201c(+++)\u2208F(+,-)?\u201d is resolved (it is forbidden). This tightens the local tables and provides immediate unit tests for IsO5 and F\u2011table population.\n- C2 implies the union\u2011bound route (Lemma 16) cannot settle the |A|=4 step: for (\u03b1,\u03b2)=(+,+), at least three triples are forbidden, so |{\u00b11}^3\\F(+,+)| \u2265 3 (>1). The union\u2011bound lemma remains valid but is not applicable here.\n\n## Compatibility with the 2+2 vertex\u2011sign ansatz (sanity checks)\n- The 2+2 ansatz only produces triangle\u2011triples of product +1, namely the three permutations of (+,\u2212,\u2212) and (+++). Lemma 10 (and its refinement in notes) shows that with 2+2, exactly the two ordered shapes (+,\u2212,\u2212) and (\u2212,\u2212,+) occur across k (under our fixed coordinate convention), never (\u2212,+,\u2212) and never (+++).\n- The new exclusions C1\u2013C3 do not rule out (+,\u2212,\u2212) or (\u2212,\u2212,+) for either (\u03b1,\u03b2)=(+,+) or (+,\u2212). Thus the central feasibility question for the 2+2 method remains: do these two ordered shapes lie in F(+,+) and F(+,-)? If yes, Proposition 11 applies and the |A|=4 step follows uniformly.\n\n## Examples and unit tests (for the verifier)\n- All\u2011equal in the opposite\u2011fixed case:\n  \u2022 (\u03b1,\u03b2)=(+,-), (x,y,z)=(+,+,+) \u21d2 p=(+,-,+,+,+) \u21d2 \u03a3 p=+3 \u21d2 O5 by \u03b5\u2261\u22121.\n  \u2022 (\u03b1,\u03b2)=(+,-), (x,y,z)=(\u2212,\u2212,\u2212) \u21d2 canonical O5 representative.\n  These should both fail IsO5 (i.e., classify as O5) and be excluded from F(+,-).\n- Mixed in the equal\u2011fixed case:\n  \u2022 (\u03b1,\u03b2)=(+,+), (x,y,z) a permutation of (++\u2212) \u21d2 \u03a3 p=+3 \u21d2 O5 by \u03b5\u2261\u22121. All three such ordered triples must be excluded from F(+,+).\n- Sanity checks for the 2+2 test vectors (from notes P1\u2013P3):\n  \u2022 (+,+,\u2212,\u2212,+), (+,+,+,\u2212,\u2212), (+,\u2212,\u2212,\u2212,+), (+,\u2212,+,\u2212,\u2212) all have \u03a3 p\u2208{+1,\u22121}. Lemma 18 gives no automatic O5 verdict with \u03b5\u2261\u00b11, which is consistent with the expectation that these might be non\u2011O5 (to be confirmed by IsO5).\n\n## Implementation aids (to speed E and IsO5)\n- Cocycle identity. For \u03c3,\u03c4\u2208S5 and i\u2208[5]: \u03b5_i(\u03c3 \u03c4) = \u03b5_i(\u03c3)\u00b7\u03b5_{\u03c3^{-1}(i)}(\u03c4). Proof: Compose the two signed actions (output.md Lemma 6) and compare with the one\u2011step action of \u03c3 \u03c4; coordinate\u2011wise equality follows from the definition of the induced signs on 4\u2011element complements. This identity enables generating E from the \u03b5 of adjacent transpositions.\n- Minimal generator data. Compute \u03b5 for the four adjacent transpositions s_k=(k,k+1) (k=1,\u2026,4) once (via Lemma 6), and generate E by the cocycle identity using any standard S5 word. Archive |E| and its list; then:\n  \u2022 p\u2208O5 iff min_{\u03b5\u2208E} \u03a3 p_i \u03b5_i = \u22123 (Lemma 18).\n  \u2022 F(\u03b1,\u03b2) is the complement in {\u00b11}^3 of those triples whose 5\u2011vector hits \u22123 against some \u03b5.\n\n## Obstacles and limits of the new facts\n- C1\u2013C3 are only necessary exclusions. Without a full enumeration of E (or equivalently, the O5 orbit), we cannot decide the status of the key ordered shapes (+,\u2212,\u2212) and (\u2212,\u2212,+) in F(+,+) and F(+,-), which control the 2+2 method.\n- The union\u2011bound feasibility (Lemma 16) is now known inapplicable due to C2. We keep it as a general tool, but it will not conclude the |A|=4 step here.\n\n## Next steps (minimal, decisive)\n1) Compute E via the cocycle identity (or directly via Lemma 6) and report |E|.\n2) Implement IsO5 using Lemma 18 (inner product \u22123 against E). Run unit tests including: C1/C2/C3 exclusions, and the four P1\u2013P3 vectors from notes.\n3) Populate F(+,+) and F(+,-) fully; derive the other two via Cor. 9. Explicitly confirm (or refute) that (+,\u2212,\u2212) and (\u2212,\u2212,+) are allowed in both tables.\n4) If both shapes are allowed in both tables, apply Proposition 11 (uniform 2+2) to conclude the |A|=4 step and AP (via Lemma 2). Otherwise, run the 2^6 CSP per realized macro\u2011profile, using the parity invariant (Lemma 17) for pruning, and archive SAT/UNSAT witnesses.\n\n## Notes on output.md (gaps/corrections to add later)\n- Suggest adding Lemma 18 (inner\u2011product characterization of O5) to output.md; it streamlines IsO5 and underpins the new corollaries.\n- With Lemma 18 in place, the status of (+++) in F(+,-) is settled (forbidden), refining the earlier caution in notes. Output.md currently proves only the (---) half (Lemma 13).\n- Record in output.md the strict necessary exclusions C2 and C3 for F(+,+) and F(\u2212,\u2212) respectively. These clarify why the union\u2011bound lemma (Lemma 16) cannot close the |A|=4 case here.\n\n## Summary of this round\u2019s progress\n- Established a sharp, general IsO5 criterion (Lemma 18): p\u2208O5 iff \u03a3 p_i \u03b5_i = \u22123 for some \u03b5\u2208E. This yields immediate, rigorous exclusions in the local F\u2011tables.\n- Resolved the open question (+++)\u2208F(+,-) (it is forbidden) and derived further necessary exclusions for F(+,+) and F(\u2212,\u2212), strengthening the local picture.\n- Refined the computational plan: generate E via a cocycle identity and complete F(+,+),F(+,-); then either certify the 2+2 method or finish with a tiny 2^6 CSP per profile.\n- Provided concrete unit tests and clarified why the union\u2011bound tool does not apply in this setting.\n"
}