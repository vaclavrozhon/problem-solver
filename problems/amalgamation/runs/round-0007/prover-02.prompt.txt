--- SYSTEM ---
You are a research mathematician. 

You are being run in a loop with a verifier that checks rigor. Your goal is to make **incremental, auditable progress**. You are not expected to solve the problem at once, but to generate new, testable ideas.

Inputs: 
- task statement 
- notes.md (summary of past progress; optional) 
- output.md (rigorously proven results curated so far; optional) 
- summary of past rounds (optional) 
- possibly some reference papers.

What counts as progress:
- Extract small lemmas/heuristics from literature and state them cleanly with one-line "why useful here".
- Explore small examples & try to break your own claims with toy counterexamples.
- Prove special cases or nontrivial bounds.
- If an approach fails, explain crisply why.
- Point out flaws in notes.md or output.md (but do not rewrite output.md yourself).

**Discipline.** 
- Read notes, outputs, summaries carefully before proposing new work. 
- Reference papers if relevant, but focus on *incremental, checkable steps*. 
- Do not output Markdown code fences, only raw JSON. 
- Length: at least ~200 words. 
- Organize your reasoning with short headings (Ideas, Examples, Obstacles, Next steps), make clear what your claims are and how they are supported. 
- Remember: the verifier curates notes and outputs, you only suggest.

**Return strictly JSON**:
{
  "progress_md": "Your progress notes for this round in Markdown (KaTeX allowed). Point out any gaps in output.md clearly. Do not modify output.md directly."
}


--- USER ---
Work on this problem context:

=== task.txt ===

An n-hypertournament is a structure with one n-ary relation R which is injective (that is, there are no tuples with repeated occurrences of vertices in R) such that every substructure on n vertices is preserved precisely by the even permutations. In other words, a structure (A,R), where R is an n-ary relation, is an n-hypertournament if the following three conditions are satisfied:

1) If (x_1, ..., x_n) \in R then x_1, ..., x_n are pairwise distinct.
2) If (x_1, ..., x_n) \in R and \sigma is an even permutation of {1,...,n} then (x_{\sigma(1)}, ..., x_{\sigma(n)}) \in R.
3) For every distinct x_1, x_2, ..., x_n of A it holds that exactly one of (x_1, x_2, x_3, ..., x_n) and (x_2, x_1, x_3, ..., x_n) is in R.

Now, given an n-hypertournament (A,R) with vertex set A = {1,...,n+1}, one can concisely describe it by recording for which i \in A it holds that the tuple (1,...,i-1,i+1,...,n+1), which contains all vertices of A except i in the natural order, is in the relation R; we call these the POSITIVE vertices. It turns out that there are only a few (namely ceil((n+2)/2)) isomorphism types of n-hypertournaments on n+1 vertices. For n = 4, they are the following three (we assume that their vertex set is {1,...,n+1} and, in accordance with the previous sentence, we describe them by the set of positive vertices):

1) C_5, for which the set of positive vertices is empty. (Note, however, that with a different enumeration, one could also describe C_5 by having all vertices positive, or for example by having precisely positive vertices {1,2}, and there are many more possibilities, all of which are isomorphic as 4-hypertournaments.)
2) O_5, for which only the vertex 2 is positive. (Again, there are many more descriptions based on what enumeration of the vertex set one chooses.)
3) H_5, for which the set of positive vertices is {1,3,5} (equivalently, one could also have the set of positive vertices be {2,4}, these are the only possibilities).

Next, let H be the class of all finite 4-hypertournaments with no substructure isomorphic to O_5. Your task is to decide whether H has the amalgamation property. That is, is the following statement true:

For every A, B, C in H such that A is an (induced) substructure of B and C and B \cap C = A (that is, B and C only share vertices of A) is there D in H such that both B and C are substructures of D (that is, the inclusions are embeddings, so note in particular that A is also a substructure of D and that the copies of B and C in D "overlap" at least over A).

=== progress.md ===
...
wo paths forward:
- Computational: Verify this ansatz in all |A|=4 profiles. If it always avoids O5, it is a strong candidate for a uniform construction in general m=|A| by the same reasoning (every Y_T will have the same structured triple).
- Theoretical: Try to identify a 5-vector invariant (under the S5 action) which separates the O5 orbit from the set of vectors with the “pairwise-product” form on a distinguished triple combined with two fixed bits; if such an invariant exists, it would yield a conceptual proof that the ansatz avoids O5.

## Examples (toy checks by hand)
- Sanity check: For p = ( +, +, +, +, + ), IsO5 should return false (C5). For p = ( +, −, −, −, − ), IsO5 should return true (O5). For p = ( +, −, +, −, + ), IsO5 should return false (H5). These serve as unit tests for the IsO5 implementation.
- Under the action formula (Idea 1), confirm that for τ a transposition, ∏ p_i flips sign; test that IsO5 remains invariant (i.e., (+,−,−,−,−) maps to some vector in its orbit under appropriate ε(τ)).

## Obstacles
- A clean, pen-and-paper characterization of the O5 orbit in {±1}^5 under the signed S5 action is nontrivial. The counts of “+” entries or simple products do not classify orbits. Hence, for rigor and speed, we should rely on the small computational enumeration (32 candidates per 5-set, 120 actions).
- For |A|=3, while we covered the α=β subcase (Lemma A), the general α≠β case is best settled by the F_opp table. Attempting to fully classify it analytically seems overkill compared to the trivial enumeration.

## Next steps for the verifier (concrete, minimal)
1) Implement IsO5(p):
   - Precompute the 120 signed permutation matrices via ε_i(τ) from Idea 1.
   - Build the O5 orbit by applying all to the seed p_O=(+,-,-,-,-), store in a set.
   - IsO5(p) is membership in this set.
2) Compute F_eq and F_opp:
   - For (α,β)=(+,+) and (+,−), enumerate the 8 triples (x,y,z), form p=(α,β,x,y,z), evaluate IsO5(p), and record allowed triples.
3) |A|=3: Using F_eq and F_opp, verify that at least one triple is allowed in both cases (this completes the |A|=3 proof).
4) |A|=4 CSP:
   - Enumerate B and C as 5-vertex C5/H5 types on A∪{b} and A∪{c} that agree on A (reduce modulo S4 permutations of A to shrink cases).
   - For each k, decide eq/opp by testing p^B_k vs p^C_k, and enforce that the triangle-triple lies in F_eq or F_opp.
   - Solve the 6-variable CSP by brute force (2^6=64 assignments) for each (B,C). Either find an unsatisfiable pair (refuting AP) or certify all feasible (supporting AP).
5) Test the constructive ansatz x_{ij}=w_i w_j as a fast heuristic; if it always succeeds, we gain a candidate general proof strategy.

## Why these steps count as incremental, auditable progress
- We supplied a concrete, verifiable formula for the S5 action on 5-vectors (Idea 1), removing ambiguity in ε_i(τ) and aiding robust code.
- We proved two nontrivial special cases (Lemmas A and B) that establish one-point amalgamation in meaningful subfamilies.
- We reduced the enumeration burden by symmetry (Idea 2) and provided canonical test profiles (Idea 3) that will either quickly produce a counterexample or increase confidence toward AP.

## Checklist for the next round
- [ ] Verifier to produce F_eq, F_opp tables and report their sizes and entries.
- [ ] Confirm |A|=3 holds fully by those tables.
- [ ] Run the |A|=4 CSP, at least on Profiles P1–P4; report SAT/UNSAT and, if SAT, an explicit assignment {x_{ij}}.
- [ ] If all tested profiles are SAT, extend to a complete enumeration modulo S4 on A.
- [ ] Report whether the ansatz x_{ij}=w_iw_j always passes in the tested cases.

## Status and focus
- Outputs.md currently contains: the orientation-function model (Prop. 1), one-point sufficiency (Lemma 2), the |A|=4 CSP formulation (Prop. 3), trivial |A|≤2 (Cor. 4), a caution on switching (Fact 5), and the explicit S5 action/identity (Lemma 6, Cor. 7). These are correct and useful.
- Missing pieces to settle AP: explicit characterization of the 5-vector O5-orbit membership for the small “two-fixed plus three-free” situations; the tables F(α,β)⊆{±1}^3; a proof of the |A|=3 one-point case; and a resolution of the |A|=4 6-variable CSP across all compatible B,C.

## New observations and micro-lemmas (auditable)
1) Interpretation of the fixed bits p^B_k and p^C_k.
- For B on A∪{b}, the four fixed signs p^B_k (k∈A) are exactly the indicator (via +/−) of which vertices of A are “positive” in the 5-vertex structure induced by B (i.e., k is positive in B iff the increasing 4-tuple on {b}∪(A\{k}) is in R_B).
- Same for C. Why useful: This ties the |A|=4 profiles directly to the 5-point types of B and C and justifies reducing the search by S4-symmetry on A.

2) Necessary local exclusions for the “opposite” case (to be used as quick unit checks).
- Claim N1: With α=+ and β=−, the triple (x,y,z)=(−,−,−) yields p=(+;−;−,−,−) which is the canonical labeled O5 representative; hence forbidden. Symmetrically, with α=− and β=+, the triple (+,+,+) yields p=(−;+;+,+,+) which is in the O5 orbit (by the same reasoning after swapping the two fixed positions and re-enumerating); thus forbidden as well.
- Why useful: This gives immediate necessary constraints that any F(+,-) and F(-,+) must omit. It also supplies two easy sanity tests for any IsO5 implementation.

3) Triangle/edge perspective and a structured ansatz.
- Variables are on edges of K_4 on A: x_{ij}∈{±1} for 1≤i<j≤4. Each constraint Y_k involves the triangle on T=A\{k}. This viewpoint helps reason about compatibility.
- Structured ansatz (to test): pick signs w_i∈{±1} on vertices and set x_{ij}:=w_i w_j. Then for any triangle {i,j,k}, the triple is (w_iw_j,w_iw_k,w_jw_k) and has product +1. Among the 8 patterns, this ansatz realises exactly the four with product +1: (+++), (+−−), (−+−), (−−+).
- Why useful: If all constraints admit at least one of these four patterns (per their (α,β)), one can try to choose w_i to satisfy all triangles simultaneously. This reduces the search to a low-complexity global choice of four bits w_i; it is easy to brute-force (2^4=16) and scales to general |A| as well.

4) Reduction by eq/opp pattern across k.
- For the |A|=4 CSP, only the pair (α_k,β_k) for each k matters via the choice F(α_k,β_k) of allowed triples; the absolute signs on A’s 4-set in B and C do not enter the new constraints. Hence, modulo S4 on A, it suffices to test the 16 eq/opp patterns E⊆A where E={k: α_k=β_k} (provided we use the full F(α,β) tables rather than assuming F(+,+)=F(−,−), etc.). This organizes the exhaustive check and avoids unnecessary duplication.

## Explicit computational blueprint (refined)
A) Build IsO5(p) correctly.
- Use Lemma 6 to compute ε_i(τ)=sgn(τ)(−1)^{c_{τ^{-1}(i)}(τ)} for all τ∈S5.
- Generate the O5 orbit as O = { (ε(τ)·e1∘τ^{-1}) : τ∈S5 }, with e1=(+,-,-,-,-) in the chosen labeling.
- Implement IsO5(p): return true iff p∈O.
- Unit tests: IsO5(+,+,+,+,+)=false; IsO5(+,-,-,-,-)=true; IsO5(+,-,+,-,+)=false. Also verify orbit size (report it) and closure under the action.

B) Compute the local tables F(α,β)⊆{±1}^3.
- For each (α,β)∈{±1}^2, enumerate the 8 triples (x,y,z) and evaluate IsO5 on p=(α,β,x,y,z). Record F(α,β) as the complement of the O5 cases. Store the full tables (do not assume symmetries a priori), and note any observed invariances (e.g., under permuting x,y,z).
- Immediate checks: verify Claim N1 above is reflected (i.e., (−,−,−)∉F(+,-) and (+,+,+)∉F(−,+)); verify (+++)∈F(+,+) and (−,−,−)∈F(−,−) (constant 5-vectors are non-O5).

C) Conclude |A|=3 one-point amalgamation.
- For each (α,β), check that F(α,β) is nonempty and archive one explicit triple per case. This settles |A|=3 rigorously.

D) Solve the |A|=4 6-variable CSP.
- For a given eq/opp pattern E⊆{1,2,3,4}, impose that the triangle on A\{k} chooses a triple in F(α_k,β_k), i.e., in F(+,+) if k∈E, or in F(+,-) otherwise (after fixing a concrete representative with α_k,β_k; the concrete sign choices do not matter because the constraint is picked by the (α,β) pair).
- Two complementary solvers:
  • Brute-force x_{ij} (2^6=64) and check all four Y_k via IsO5 by constructing p(Y_k) explicitly; report SAT/UNSAT.
  • Try the structured ansatz x_{ij}=w_i w_j (2^4=16 assignments) and accept if each triangle’s triple lands in F(α_k,β_k). If this always succeeds across all tested patterns, we get a strong template for general |A|.
- Start with the four canonical profiles (P1–P4 from notes) and then cover all 16 eq/opp patterns modulo S4.

E) Optional but informative: enumerate actual pairs (B,C) up to S4 on A.
- Extract p^B_k and p^C_k patterns realizable by C5/H5 on B and C (as 4-bit vectors), ensuring B and C agree on A’s 4-set; then feed their induced eq/opp signatures to step D. This cross-checks that all emergent eq/opp patterns indeed arise from valid (B,C).

## Why this is concrete progress
- We isolated a sharp necessary exclusion (Claim N1) that provides immediate unit tests and sanity checks for F(α,β).
- We clarified exactly how the four fixed signs p^B_k and p^C_k are determined by the 5-point types on B and C, which justifies organizing the |A|=4 exploration by eq/opp patterns and S4 symmetry.
- We provided a structured, low-complexity ansatz (x_{ij}=w_iw_j) that, if accepted by the F(α,β) tables, yields a uniform construction and a plausible path to all |A| by iterated one-point steps.
- The refined computational blueprint reduces ambiguity (e.g., coordinate ordering in Y_k) and pinpoints the minimal data to archive (F(α,β) tables, eq/opp SAT results, and, if found, a counterexample assignment witnessing failure of AP).

## Obstacles and open items
- Analytic classification of the O5 orbit in {±1}^5 under the signed S5 action remains nontrivial; we rely (appropriately) on small-scale enumeration suggested above.
- We intentionally do not assert symmetries like F(+,+)=F(−,−) without computation. These might hold but are not needed to proceed.
- The structured ansatz may fail in some patterns; in that case, fallback to the 2^6 brute-force solver will still decide the |A|=4 CSP.

## Next steps for the verifier (minimal, checkable)
1) Implement IsO5 with Lemma 6; report orbit size and perform the unit tests (three vectors and an action-closure check).
2) Compute and record all four F(α,β) tables; confirm Claim N1 and that (+++)∈F(+,+), (−,−,−)∈F(−,−). Conclude |A|=3 by listing one allowed triple per (α,β).
3) For |A|=4, first test the four profiles P1–P4 (from notes) and then the 16 eq/opp patterns modulo S4 using the 2^6 brute force. Archive a satisfying assignment x_{ij} for each SAT case; if any UNSAT appears, this is a concrete counterexample to AP.
4) Test the structured ansatz x_{ij}=w_iw_j across all patterns; if it always succeeds, note it as a candidate general construction and we will attempt to lift it to arbitrary |A| next.

## Notes on outputs.md
- No errors detected in the current statements. A minor clarification we already kept in notes: the “aligned B,C” constant-triple trick works only when the common 4-bit pattern on A is constant (then taking all x_{ij} equal produces constant 5-vectors). This was previously mis-stated in a draft and has been corrected (not present in outputs.md).
- Still missing from outputs.md (for future addition once computed): the |A|=3 one-point lemma (with explicit witnesses per (α,β)) and the resolution of the |A|=4 CSP (either a general construction or a minimal counterexample).

## Status and focus for this round
- We keep the CSP reduction and one‑point amalgamation framework from output.md and notes.md. The key unresolved item is to decide feasibility of the |A|=4 one‑point step, which determines AP (Lemma 2).
- This round contributes: two concrete, checkable lemmas sharpening the local tables F(α,β); a uniform edge‑assignment strategy on K_4 that reduces the |A|=4 decision to verifying a very small number of membership tests in F; and a tightened computational plan that, if validated, essentially settles AP.

## Ideas and micro‑lemmas (auditable)

Lemma 10 (All‑equal triples in the opposite‑fixed case are O5).
- Statement: For F(+,-), both (+++) and (---) are forbidden (yield O5). By Corollary 9, the symmetric cases for F(−,+) are also forbidden.
- Proof sketch: (+++) with (α,β)=(+,-) gives p=(+,-,+,+,+), which has exactly one minus. There exists τ with ε_i(τ)=−1 for all i (Lemma 8), hence −ε=(+,+,+,+,+). Flipping one coordinate produces exactly the “one discrepancy” pattern, which is in the O5 orbit. Similarly, (---) with (α,β)=(+,-) yields p=(+,-,−,−,−), which is the canonical labeled O5 representative.∎
- Why useful: Gives two hard exclusions in the most constrained case; provides unit tests for IsO5 and for computed F(+,-).

Lemma 11 (Two‑plus two‑minus vertex signs force the triangle triple type (+−−) on all four Y_k).
- Set up: Label A={1,2,3,4}. Choose vertex signs w_i∈{±1} with exactly two + and two −, and set edge variables x_{ij}:=w_i w_j for 1≤i<j≤4 (the structured ansatz).
- Claim: For each k, the triple of variables on Y_k’s three edges (inside A\{k}) is, up to permutation of its three coordinates, of the form (+,−,−).
- Proof: If the missing vertex k is chosen from the + group, the included three vertices contain exactly one + and two −; the three pairwise products are (+·−, +·−, −·−) = (−,−,+), i.e., a permutation of (+,−,−). If k is chosen from the − group, the included set is {+, +, −}, whose pairwise products again form a permutation of (+,−,−).∎
- Why useful: A single global choice (2+2− on vertices) makes every triangle triple equal to (+−−) (up to reordering). If the triple pattern (+−−) is allowed for all four (α_k,β_k), then this assignment simultaneously satisfies all four constraints, yielding the one‑point amalgam.

Lemma 12 (Minimal membership tests suffice to settle the |A|=4 one‑point amalgam via a uniform assignment).
- Let F(α,β)⊆{±1}^3 be as in notes.md (p=(α,β,x,y,z) non‑O5). If the following three membership properties all hold:
  1) (+++) ∈ F(+,+) (already holds: p=(+,+,+,+,+) is C_5),
  2) (+−−) ∈ F(+,+), and by Corollary 9 also (−, +, +) ∈ F(−,−),
  3) (+−−) ∈ F(+,-), and by Corollary 9 also (+−−) ∈ F(−,+),
  then the |A|=4 one‑point amalgamation always succeeds.
- Proof: Distinguish two cases for a given one‑point diagram over A={1,2,3,4}:
  • If all four pairs (p^B_k,p^C_k) are equal (either all ++ or all −−), then setting w_i≡+ gives x_{ij}=+ and hence each triangle triple is (+++), which is allowed by (1). (By central symmetry, the (−,−) case is covered as well.)
  • Otherwise, there exists at least one k with (p^B_k,p^C_k) opposite. Choose w with exactly two + and two − (Lemma 11). Then all four triangle triples are of type (+−−) up to permutation. By (2) and (3), (+−−) is allowed for both equal and opposite fixed‑pairs (using Corollary 9 for the (−,−) and (−,+) subcases). Hence all four Y_k pass, and we obtain an amalgam in H.∎
- Why useful: Reduces the entire |A|=4 decision to verifying only two concrete membership facts: (a) (+−−) ∈ F(+,+), and (b) (+−−) ∈ F(+,-). The other two cases follow by Corollary 9.

Remark (Scope of the uniform 2+2− assignment).
- The argument of Lemma 12 is specific to |A|=4, where every Y_k sees exactly three of the w_i’s; with 2+2−, every triangle contains a mixed triple, never all three equal. For larger |A| the same fixed 2+2− choice would not prevent +++ triples on some 3‑subsets, so we do not propose it beyond |A|=4. This is fine: by Lemma 2, settling the one‑point step for all |A| is sufficient, and we can (and should) handle |A|>4 by the same CSP with its own choices of w.

## Examples and unit checks (to aid the verifier)
- Opposite case (+++, +−): p=(+,-,+,+,+) has exactly one minus ⇒ O5 (Lemma 10). Symmetric (---, +−) gives the canonical O5 representative.
- Equal case (+++, ++): p=(+,+,+,+,+) is C5 ⇒ allowed; unit test for IsO5.
- Pattern (+−−): test both F(+,+) and F(+,-). If either fails, archive the specific τ that maps p to the O5 orbit and note which ε(τ) was used. If both succeed, Lemma 12 resolves |A|=4.

## Obstacles and why a tiny computation is still needed
- We cannot, by purely pen‑and‑paper means, certify (+−−) ∈ F(+,+) and (+−−) ∈ F(+,-) without unpacking the S5 signed action in detail. However, this is an 8‑evaluation task per F and we only need two of them, with a simple IsO5 oracle (Step A in notes.md/output.md). The check is immediate once IsO5 is implemented.

## Next steps (minimal, checkable)
1) Implement IsO5 via Lemma 6; validate with unit tests: (+,+,+,+,+) non‑O5; (+,−,−,−,−) O5; (+,−,+,−,+) non‑O5. Report the orbit size for O5 and closure under the action.
2) Compute the two key memberships:
   - Check whether (+−−) ∈ F(+,+) (i.e., p=(+,+,+,−,−) is non‑O5).
   - Check whether (+−−) ∈ F(+,-) (i.e., p=(+,−,+,−,−) is non‑O5).
   By Corollary 9 this immediately implies the corresponding statements for F(−,−) and F(−,+).
3) If both are true, conclude (by Lemma 12) that the |A|=4 one‑point amalgamation always succeeds. Together with Lemma 2, this proves that H has the amalgamation property.
4) If either membership fails, fall back to the 2^6 brute‑force CSP solver for |A|=4 (as already outlined) to either find a different satisfying assignment or exhibit a counterexample to AP. In reporting, include the failing (α_k,β_k) pattern over k∈A and an UNSAT certificate (e.g., list of all 64 assignments with the O5‑witnessing Y_k per assignment, or a SAT witness if it exists).

## Additional cleanups and clarifications
- Symmetry note: Lemma 8 and Corollary 9 (in output.md) justify reducing F‑table computations by sign flip: F(−α,−β) is obtained from F(α,β) by triplewise negation. We do not assume S3‑invariance of F(α,β) on the last three coordinates; use the fixed coordinate convention when constructing p=(α,β,x,y,z).
- Edge‑assignment viewpoint: Lemma 11 makes explicit that the structured ansatz with vertex signs w realizes, on K_4’s triangles, only two S3‑types of triples: (+++) (when the three w’s are equal) and (+−−) (when exactly one w differs). This is the core combinatorial mechanism behind Lemma 12.

## Gaps in output.md (to be addressed later; do not edit now)
- Proposition 3 fixes which two coordinates of p(Y_k) are “missing c” and “missing b,” but does not record an explicit convention for ordering the last three coordinates (the vertices of A\{k}). For reproducibility, a precise convention (e.g., increasing order in the ambient enumeration) should be stated in output.md when the F(α,β) tables are finally incorporated.
- The |A|=3 one‑point case is not yet proved in output.md; once IsO5 is implemented and F(+,+), F(+,-) are tabulated, it will follow immediately by listing one allowed triple per (α,β).

## Summary of progress
- Proved Lemma 10 (both all‑equal triples forbidden in the opposite‑fixed case), sharpening constraints and supplying concrete unit tests.
- Proved Lemma 11 (a 2+2− vertex‑sign assignment yields (+−−) triples on all four triangles), and Lemma 12 reducing the |A|=4 one‑point amalgamation to verifying just two memberships: (+−−)∈F(+,+) and (+−−)∈F(+,-).
- Provided a minimal, auditable computational path: implement IsO5, check the two memberships, and conclude AP if both hold; else, perform the already‑planned 2^6 brute‑force search to decide AP either way.
- This materially narrows the search space and sets up a decisive final step for the verifier to complete in the next round.

## Round 0005 — 2025-08-27T15:25:18.671956Z

Status and goal
- Class H: all finite 4-hypertournaments with no induced O_5 on any 5-set.
- We aim to decide whether H has the amalgamation property. As agreed, we reduce to one-point amalgamation and, for the minimal nontrivial base |A|=4, to a 6-variable CSP on the six cross 4-sets, with exactly four local 5-set constraints Y_k (k∈A) that must avoid O_5 (see output.md Proposition 3).

Gaps and corrections relative to output.md
- Missing convention: output.md does not yet fix the precise ordering of the five coordinates in the 5-vector p(Y_k) used when defining the local tables F(α,β). For reproducibility, we should adopt the notes.md convention: order coordinates as (missing c, missing b; then missing i<j<ℓ for A\{k}). This is already spelled out in notes.md; it should be recorded in output.md when finalizing the F-tables and any explicit constructions.
- All other core reductions in output.md (orientation-function model, one-point sufficiency, S5-action formula, central symmetry, the |A|=4 CSP) remain correct. The conditional 2+2 ansatz (Proposition 11) is stated with the proper caveat (we need all three permutations of (+,−,−) to be allowed in each F(α,β)).

New rigor: complete resolution of |A|=3 one-point amalgamation
- Lemma (|A|=3 always solvable). Let |A|=3. For B=A∪{b} and C=A∪{c} in H, pick the cross 4-sets so that the unique 5-set Y=A∪{b,c} has 5-vector p(Y) equal to one of the canonical non-O_5 representatives, as follows:
  • If (α,β)=(+,+), set (x,y,z)=(+,+,+); then p(Y)=(+,+,+,+,+)=C_5.
  • If (α,β)=(−,−), set (x,y,z)=(−,−,−); then p(Y)=(−,−,−,−,−)=−C_5.
  • If (α,β)=(+,-), set (x,y,z)=(+,-,+); then p(Y)=(+,-,+,-,+)=H_5.
  • If (α,β)=(−,+), set (x,y,z)=(−,+,−); then p(Y)=(−,+,−,+,−)=−H_5.
  These choices use exactly the coordinate ordering in notes.md. They are manifestly not of type O_5, so the one-point amalgam exists. This completes |A|=3 without any enumeration.
  Why useful: This closes a gap acknowledged in prior rounds and relieves pressure on small-case computations.

Concrete test instances for |A|=4 (explicit p-vectors to check)
To expedite a decisive check by the IsO5 oracle, here are explicit variable assignments and the resulting four 5-vectors; a single IsO5 pass on these settles the showcased profiles.

- Ordering convention (used below): For Y_k={b,c}∪(A\{k}) with A={1,2,3,4} and i<j<ℓ the increasing order on A\{k}, encode p(Y_k) as (p_missing c, p_missing b, p_missing i, p_missing j, p_missing ℓ).

- Profile P1 (aligned C5 on both sides): p^B_k≡+, p^C_k≡+ for k=1..4.
  • Choose the 2+2 vertex-sign ansatz with w=(w_1,w_2,w_3,w_4)=(+,+,−,−) and set x_{ij}=w_i w_j.
  • Computed triangle-triples and resulting 5-vectors:
    – Y_1 uses pairs {23,24,34}: triple (−,−,+); p(Y_1)=(+,+,−,−,+).
    – Y_2 uses pairs {13,14,34}: triple (−,−,+); p(Y_2)=(+,+,−,−,+).
    – Y_3 uses pairs {12,14,24}: triple (+,−,−); p(Y_3)=(+,+,+,−,−).
    – Y_4 uses pairs {12,13,23}: triple (+,−,−); p(Y_4)=(+,+,+,−,−).
  • Action item: Verify via IsO5 that (+,+,−,−,+) and (+,+,+,−,−) are non-O_5. If yes, this witnesses an amalgam for P1.

- Profile P2 (opposed C5 vs C5): p^B_k≡+, p^C_k≡− for k=1..4.
  • Use the same w=(+,+,−,−), x_{ij}=w_i w_j.
  • Computed triples and vectors:
    – Y_1: triple (−,−,+); p(Y_1)=(+,-,−,−,+).
    – Y_2: triple (−,−,+); p(Y_2)=(+,-,−,−,+).
    – Y_3: triple (+,−,−); p(Y_3)=(+,-,+,−,−).
    – Y_4: triple (+,−,−); p(Y_4)=(+,-,+,−,−).
  • Action item: Verify via IsO5 that (+,−,−,−,+) and (+,−,+,−,−) are non-O_5. If yes, this witnesses an amalgam for P2 and gives strong support for the 2+2 ansatz in a “hard” pattern.

- Profile P3 (mixed C5 vs H5): Take p^B_k≡+ and p^C=(+,-,+,-) (canonical H_5 on A∪{c} aligned with A); hence w_i=p^B_i p^C_i = (+,−,+,−).
  • Set x_{ij}=w_i w_j. Then the two distinct p-vectors that appear (up to relabeling across Y_k) are exactly the same as in P2: (+,−,−,−,+) and (+,−,+,−,−). If these are non-O_5 (as per the P2 check), this assignment also witnesses an amalgam for P3.

These four concrete 5-vectors are a minimal, auditable set for the verifier to run through IsO5. If all are non-O_5, the 2+2 ansatz settles three central profiles at once.

A further solvable family (explicit constraints linking α,β across k)
- Construction pattern: For each Y_k prescribe its triple to be (α_k,β_k,α_k) (the “local H5 witness” pattern used to solve |A|=3). Consistency across the four Y_k’s (because edge-variables are shared) forces the following equalities on the type-data:
  • α_1=α_2=α_3=α_4.
  • β_1=α_3 (hence β_1=α_1) and β_4=α_2 (hence β_4=α_1).
  • β_2=β_3.
- If these hold for a given pair (B,C), then defining x_{ij} by this pattern yields, for each k, p(Y_k) equal to ±C_5 (if α_k=β_k) or H_5 (if α_k≠β_k), hence an amalgam in H.
- Why useful: This provides a nontrivial, checkable subclass of one-point instances (beyond the equal-constant case of Proposition 12) that are solvable by an explicit assignment. It also illustrates how shared-edge consistency interacts with local choices.

Ideas toward a uniform |A|=4 construction (analysis and obstacles)
- 2+2 vertex-sign ansatz: As recorded (Lemma 10), with x_{ij}=w_i w_j and exactly two plus and two minus on vertices, every triangle contributes a permutation of (+,−,−). Consequently, the uniform feasibility of this ansatz reduces to membership tests that all three permutations of (+,−,−) belong to F(α_k,β_k) for each k. This is precisely the conditional statement in Proposition 11.
- Without the F-tables, we cannot yet certify these memberships analytically. However, the concrete vectors in P1–P3 above are p(Y_k) images of such permutations and thus constitute decisive micro-tests for two of the four α,β-types: (++), (+−).
- Greedy/LLL thought: A random assignment to the six variables makes each triangle uniformly distributed over {±1}^3. If the complement set {±1}^3\F(α,β) has size ≤1 in all four local types, then the LLL (with dependency degree 3) would guarantee a satisfying assignment. Establishing such small forbidden-fraction bounds is equivalent to computing the F-tables, which remains the minimal necessary check.

Actionable next steps for the verifier (small, decisive computations)
1) Implement IsO5 using the ε-factor formula in output.md Lemma 6; run unit tests: (+,+,+,+,+) non-O_5; (+,−,−,−,−) O_5; (+,−,+,−,+) non-O_5. Report the size of the O_5 orbit under the signed S_5 action.
2) Check the four concrete 5-vectors listed above:
   - (+,+,−,−,+), (+,+,+,−,−) [Profile P1]
   - (+,−,−,−,+), (+,−,+,−,−) [Profiles P2, P3]
   If all are non-O_5 then the presented assignments witness amalgams for these profiles.
3) Compute the local tables F(+,+) and F(+,−) fully (8 triples each) under the fixed ordering convention. Derive F(−,−), F(−,+) by triplewise negation (Corollary 9). Archive the tables; this completes the data needed to:
   - finish |A|=3 formally (although we already supplied an explicit solution), and
   - apply Proposition 11 (if all permutations of (+,−,−) are present in each F) to resolve |A|=4 uniformly, or else run the small 2^6 brute-force CSP per type-profile.
4) If Proposition 11’s condition fails, perform the 2^6 brute-force search for all compatible (B,C) over A (or, at minimum, over the 16 eq/opp patterns modulo S_4 on A) using the F-tables. Either record a SAT assignment (proving one-point amalgamation in each case) or produce a concrete UNSAT certificate (which would refute AP).

Why this counts as incremental, auditable progress
- Closed the |A|=3 case completely with explicit assignments for each (α,β), requiring no computation.
- Provided concrete, small test vectors for three central |A|=4 profiles (aligned, opposed, and mixed). Verifying four 5-vectors against IsO5 will either provide immediate positive evidence (witnessing amalgams) or reveal a specific local obstruction to the 2+2 ansatz.
- Identified a nontrivial solvable subclass for |A|=4 via the “local H5 witness” pattern and spelled out the precise necessary equalities it imposes on the type-data (α_k,β_k).
- Consolidated the minimal computational tasks (IsO5, two F-tables) that now suffice to either complete a uniform proof via Proposition 11 or to drive a short brute-force resolution of the |A|=4 CSP across all patterns.

Obstacles and open items
- An analytic characterization of the F(α,β) tables (beyond the hard exclusion (−,−,−)∉F(+,-)) remains elusive; we appropriately defer to the tiny enumeration.
- The 2+2 ansatz success hinges on membership of all permutations of (+,−,−) in F(α,β); this must be checked. If it fails, we will pivot to full 2^6 CSP solving (still very small) and, if needed, extract a minimal counterexample.

Checklist for the next round (expected outputs)
- IsO5 orbit size and unit-test confirmations.
- Verdict on the four concrete 5-vectors: non-O_5 or O_5; if all non-O_5, record the P1–P3 amalgam witnesses.
- Full F(+,+), F(+,−) tables and derivations of the other two via sign-flip.
- Either: (i) confirmation that all permutations of (+,−,−) are present in each F(α,β), hence a uniform 2+2 solution for |A|=4; or (ii) a small list of remaining profiles with a brute-force SAT witness or a single UNSAT certificate (which would refute AP).

## Round 0006 — 2025-08-27T18:59:55.891338Z

Round 0006 — Focus: closing the |A|=4 one‑point step; small unconditional progress and a tiny decision check

Context recap and what is already rigorous in output.md
- Orientation function model (Prop. 1), sufficiency of one‑point amalgamation (Lemma 2), and the |A|=4 6‑variable CSP formulation (Prop. 3) are correct and sufficient to reduce AP to a finite local decision.
- Small cases: |A|≤2 are trivial (Cor. 4). The |A|=3 one‑point amalgamation is now fully solved constructively (Prop. 14).
- Tools: explicit S5 signed action (Lemma 6) and central symmetry of O5 (Lemma 8, Cor. 9).
- |A|=4: We have a conditional uniform solution (Prop. 11) via a 2+2 vertex‑sign ansatz x_{ij}=w_iw_j if all three permutations of (+,−,−) are allowed in each local table F(α,β). We also have a nontrivial solvable subclass (Prop. 15) and the equal‑constant case (Prop. 12).

New, unconditional micro‑lemma (auditable) — a union‑bound satisfiability criterion
Lemma UB (union‑bound CSP feasibility for |A|=4).
- Setup: In the |A|=4 CSP (variables x_{ij} on edges of K_4), suppose that for each triangle T_k (k=1,2,3,4), at most one ordered triple in {±1}^3 is forbidden (i.e., |{±1}^3\F(α_k,β_k)| ≤ 1).
- Claim: Then there exists a satisfying assignment to the six variables.
- Proof: There are 2^6=64 global assignments. Fix a triangle T; forbidding one ordered triple on its three variables eliminates exactly 2^3=8 of the 64 assignments (the other three variables are free). By the union bound, the four triangles together eliminate at most 4·8=32 assignments, leaving at least 32 ≥ 1 satisfying assignments.∎
Why useful here. This gives a rigorous, computation‑light sufficient condition for one‑point amalgamation at |A|=4. It reduces the task to bounding, per case (α,β), the number of forbidden triples. If a tiny computation confirms |{±1}^3\F(+,+)| ≤ 1 and |{±1}^3\F(+,-)| ≤ 1 (the other two follow by Cor. 9), then AP follows at once (by Lemma 2) without searching the 6‑variable space.

Product‑pattern conjecture (testable; would settle |A|=4 uniformly)
Conjecture P+. For both (α,β)=(+,+) and (α,β)=(+,-), one has
F(α,β) = { (x,y,z) ∈ {±1}^3 : x·y·z = +1 }.
- Evidence: All explicit non‑O5 witnesses used so far (|A|=3 and the P1–P3 test vectors in notes.md) exhibit triple product +1; the only hard exclusion we proved (Lemma 13: (−,−,−) ∉ F(+,-)) has triple product −1.
- Consequence if true: The structured ansatz x_{ij}=w_iw_j (with arbitrary w: A→{±1}) yields, on each triangle, product +1 (since (w_iw_j)(w_iw_k)(w_jw_k)=+1). Hence it would satisfy every local constraint for any (α_k,β_k), giving a uniform one‑point amalgam for |A|=4 (indeed for all |A|, by the same local reasoning). This would prove AP outright.
- Action: This is an 8+8 evaluation check once IsO5 is in place.

Clarification of the triangle coordinate mapping (implementation aid)
- For Y_k={b,c}∪(A\{k}) with A={1,2,3,4} and i<j<ℓ the increasing order on A\{k}, our fixed encoding is
  p(Y_k) = (p_{missing\ c}, p_{missing\ b}, p_{missing\ i}, p_{missing\ j}, p_{missing\ ℓ}).
- The last three coordinates are expressed via the edge‑variables as
  p_{missing\ i} = x_{jℓ},\quad p_{missing\ j} = x_{iℓ},\quad p_{missing\ ℓ} = x_{ij}.
This convention is already used in Prop. 15 and should be observed when populating F(α,β).

Concrete examples and unit checks to run (tiny, decisive)
- Maintain the unit tests for IsO5: (+,+,+,+,+) ∉ O5; (+,−,−,−,−) ∈ O5; (+,−,+,−,+) ∉ O5.
- The four decisive test vectors from notes.md §P1–P3:
  • (+,+,−,−,+), (+,+,+,−,−), (+,−,−,−,+), (+,−,+,−,−). Each should be classified non‑O5 for the 2+2 ansatz to witness those profiles.
- Populate F(+,+) and F(+,-) fully (8 triples each). Immediate checks: (+++)∈F(+,+); (−,−,−)∉F(+,-). Report sizes |F(+,+)|, |F(+,-)| and list the complements {±1}^3\F.
- If both complements have size ≤1, conclude |A|=4 by Lemma UB. If, stronger, F(α,β) equals “product +1,” conclude AP by the structured ansatz (Conjecture P+).

Why these steps are valuable incremental progress
- Lemma UB is unconditional and reduces the |A|=4 decision to checking two tiny local tables (16 values total) and two cardinality inequalities; this is significantly weaker than the earlier need to solve all 6‑variable instances, yet it suffices to conclude AP if the tables are as sparse as anticipated.
- Conjecture P+ crystallizes the suspected structure of the local constraints and provides a one‑line uniform solution template if verified; even if false, the explicit counter‑entries will directly inform a minimal backtracking strategy.

Obstacles and open points
- We still lack an analytic classification of the O5 orbit to certify F(α,β) without computation. Given the minute size (32 total 5‑vectors), a brute‑force enumeration remains the quickest rigorous path.
- The conditional Prop. 11 remains unverified pending the membership of the three permutations of (+,−,−) in each F(α,β). This should be settled by the same F‑table computation.

Gaps, corrections, and notes on output.md
- Prop. 3 uses a coordinate‑free description of Y_k; when F‑tables are integrated into output.md, it would be helpful to restate the fixed 5‑coordinate ordering (as above) near Prop. 3 or before Prop. 11 (currently the precise ordering is spelled out later in Prop. 15).
- All other statements in output.md remain correct; no further errors spotted. Lemma 13 is properly justified (it uses the canonical O5 representative under the fixed coordinate order).

Next steps for the verifier (minimal and decisive)
1) Implement IsO5 via Lemma 6; run the three unit tests and report the O5 orbit size.
2) Evaluate IsO5 on the four concrete 5‑vectors listed above to settle P1–P3 for the 2+2 ansatz.
3) Compute F(+,+) and F(+,-) completely; derive the other two by Cor. 9. Report complements and sizes.
4) If |{±1}^3\F(+,+)| ≤ 1 and |{±1}^3\F(+,-)| ≤ 1, invoke Lemma UB to conclude the |A|=4 step and AP.
5) If, stronger, F(α,β)={triples with product +1} in both cases, record the uniform construction x_{ij}=w_iw_j as a final proof strategy for all |A|.
6) If either complement has size ≥2, run the 2^6 brute‑force CSP per realized (B,C) profiles or at least per the 16 type‑patterns over k∈A (keeping the ordered pairs {++,−−,+−,−+}); archive either SAT witnesses or a single UNSAT certificate (refuting AP).

End of round summary
- Introduced a new unconditional lemma (union‑bound feasibility) that can, by checking two 8‑entry tables, settle |A|=4 and hence AP.
- Formulated the “product +1” conjecture (precisely testable) which, if true, yields a uniform, simple construction for the amalgam.
- Provided precise, small computational tasks that will decisively resolve the remaining |A|=4 bottleneck, along with explicit test vectors and sanity checks.

## Round 0006 — 2025-08-27T19:00:01.879047Z

Status and focus
- We keep the one‑point reduction and the 6‑variable CSP for |A|=4 (output.md Prop. 3). The key missing piece remains deciding the local 5‑set constraints, i.e., membership in F(α,β)⊆{±1}^3 (output.md Cor. 9 gives the sign‑flip symmetry, but we still need explicit tables or at least a few decisive entries).
- Proposition 11 is conditional; Proposition 12 settles the equal‑constant subcase; Proposition 14 settles |A|=3; Proposition 15 provides a further solvable subclass. No contradictions detected in output.md.

New micro‑lemmas and structural observations (auditable)
1) Type patterns on A induced by 5‑types (enumeration aid).
- Lemma T. Let B be a 5‑vertex structure on A∪{b} with type T_B∈{C5,H5}. Then the 4‑tuple (p^B_k)_{k∈A} equals:
  • Constant (all + or all −) if T_B=C5.
  • A 2+2 pattern (exactly two + and two −) if T_B=H5.
  Proof. For the 5‑vector p on A∪{b}, p_x is constant on C5; restricting to coordinates indexed by A yields a constant 4‑tuple. For H5, the canonical representative (+,−,+,−,+), after removing the “missing b” coordinate, leaves exactly two + and two − on A; S4 relabelings of A preserve the 2+2 property.∎
- Why useful: Narrows the |A|=4 case analysis to macro‑profiles (C,C), (C,H), (H,C), (H,H), and within each, the eq/opp pattern over k is now strongly constrained (e.g., C vs H yields exactly two equals and two opposites).

2) Triangle triple distribution under vertex‑sign assignments (combinatorial control).
- Lemma D. Let w∈{±1}^A and set x_{ij}=w_i w_j. For the four triangles (Y_k), the triple on Y_k is:
  • If |{i:w_i=+1}|=4 or 0: all four triples are (+++).
  • If |{i:w_i=+1}|=3 or 1: exactly one Y_k has (+++); the other three have permutations of (+,−,−).
  • If |{i:w_i=+1}|=2: all four Y_k have permutations of (+,−,−).
  Proof. For a 3‑vertex set, the pairwise products are (+++) if all three w are equal; otherwise exactly one edge‑product is + and two are −. Counting how many triangles contain three equal signs yields the cases above.∎
- Why useful: This extends Lemma 10 (the 2+2 case) and gives us three controllable regimes (0/1/4 occurrences of (+++)) by choosing w with 2+/2−, 3+/1− (or 1+/3−), or 4+/0− (or 0+/4−).

3) Global parity constraint across the four triangles (sanity check for UNSAT certificates).
- Lemma P (parity). For any assignment x_{ij}∈{±1}, the product of the four triangle‑products equals +1. Equivalently, the number of triangles whose triple has product −1 is even.
  Proof. Each edge variable x_{ij} appears in exactly two triangles of K_4, hence ∏_k (x_{ab}x_{ac}x_{bc} on triangle k) = ∏_{edges} x_{ij}^2 = 1.∎
- Why useful: If future F‑tables force odd parity (e.g., three triangles requiring triple product −1 and one requiring +1), we get an immediate contradiction, giving a clean UNSAT witness.

4) Minimal decisive membership checks for the 2+2/3+1 strategy (refinement of Prop. 11).
- Observation: The vertex‑sign method only ever produces (+++) or permutations of (+,−,−). Thus, to certify existence of an amalgam, it suffices to know, per (α,β): whether (+++) is allowed and whether the specific permutations of (+,−,−) that occur under a chosen w are allowed.
- Conditional Proposition 11′ (weaker prerequisites than Prop. 11). Fix the coordinate order from notes/output. If the following hold:
  (E1) (+++)∈F(+,+) and (+++)∈F(−,−) (true: ±C5),
  (E2) For (α,β)∈{(+,+),(−,−)}, at least one of the two concrete permutations of (+,−,−) realized by a 2+2 choice w=(+,+,−,−) (e.g., (+,−,−) and (−,−,+) as in P1) lies in F(α,β),
  (E3) For (α,β)∈{(+,-),(−,+)}, at least one of the two concrete permutations of (+,−,−) realized by a 2+2 choice w lies in F(α,β),
  (E4) For (α,β)∈{(+,-)}, (+++)∈F(+,-) or else (E3) holds and the count of k with (α_k,β_k)=(+,-) is even (so w with 2+2 can serve). For (−,+), (+++) is known forbidden (output.md Lemma 13), so require (E3) for those k.
  then every one‑point instance over |A|=4 is solvable by choosing w with 2+2, 3+1, or 4+0 as appropriate (use Lemma D to match how many (+++) triples are needed).
- Why useful: This further reduces the needed F‑table data to a handful of entries tied to the two triple shapes the vertex‑sign method can realize, and it incorporates the parity Lemma P to handle counts.

Concrete test vectors (to be evaluated by IsO5)
- As already prepared in notes/output, validating the following suffices to green‑light the 2+2 ansatz on central profiles:
  • P1 (C vs C, aligned): (+,+,−,−,+), (+,+,+,−,−).
  • P2 (C vs C, opposed): (+,−,−,−,+), (+,−,+,−,−).
  • P3 (C vs H, mixed): same two vectors as P2.
- Action: A single IsO5 pass on these four 5‑vectors decides P1–P3. If all are non‑O5, we have explicit amalgams for these macro‑profiles.

Enumeration of macro‑profiles and expected eq/opp distribution (for small exhaustive runs)
- By Lemma T, the four p^B_k (k∈A) are: all equal (C) or 2+2 (H). Hence, up to S4 on A, the possibilities are:
  • (C,C): either all eq (δ,δ) or all opp (δ,−δ).
  • (C,H) or (H,C): exactly two eq and two opp (which of the two depends on δ and the 2+2 positions).
  • (H,H): 4 eq (when identical), 0 eq (when negations), or 2 eq.
- These five eq/opp profiles, coupled with which positions within the 2+2 pattern, represent all realizable one‑point patterns.
- Why useful: This confines the 2^6 brute‑force search to a tiny, structured set of cases for final certification if needed.

Gaps/clarifications in output.md
- Prop. 11 requires “all three permutations” of (+,−,−) in each F(α,β). For our vertex‑sign method, only two concrete permutations occur for a fixed 2+2 choice; moreover, we can swap which two appear by permuting which vertices receive w=+ (Lemma D/notes’ P1–P3). It would be slightly sharper to state a conditional that only requires those two realized permutations (as in Proposition 11′ above) rather than all three.
- The precise mapping from the triple (x_{jℓ},x_{iℓ},x_{ij}) to the last three coordinates of p(Y_k) is stated in notes.md but not explicitly in output.md’s Prop. 3. When F‑tables are finalized, restating the “missing i/j/ℓ” order there would aid reproducibility.

Obstacles
- An analytic characterization of F(+,+) and F(+,-) remains elusive. We therefore continue to rely on the minimal computation plan (IsO5 oracle + 16 evaluations) to settle them.
- We cannot presently certify or refute the status of (+++) in F(+,-) without computation (we correctly retracted a heuristic argument earlier; output.md Lemma 13 addresses only (---)∉F(+,-)).

Next steps for the verifier (small, decisive)
1) Run IsO5 on the four vectors listed under P1–P3.
2) Compute F(+,+), F(+,-) fully (8 triples each) under the fixed coordinate convention; derive F(−,−), F(−,+) by sign‑flip (Cor. 9). Archive tables.
3) If both (+,−,−) and (−,−,+) lie in each F(α,β), apply output.md Prop. 11 directly. Otherwise, apply Proposition 11′ + Lemma D + parity Lemma P to choose between 2+2 vs 3+1 vs 4+0 for each macro‑profile, using (+++) where allowed to match the required counts among k.
4) If any macro‑profile remains unresolved, brute‑force its 2^6 assignments (Prop. 3), report SAT/UNSAT, and archive witnesses/certificates.

Why this is progress
- We refined the uniform vertex‑sign construction beyond the 2+2 case (Lemma D), and distilled the necessary F‑table checks to a minimal, actionable set (Proposition 11′), incorporating a global parity invariant (Lemma P).
- We classified the realizable p^B, p^C patterns over A (Lemma T), narrowing the remaining search to five macro‑profiles and providing a clear plan to dispatch each.
- These steps are immediately testable by the IsO5 routine and require only a handful of evaluations to either conclude AP or extract a concrete counterexample.

## Round 0006 — 2025-08-27T19:42:10.463400Z

Status and aim
- We continue to resolve the one-point amalgamation for |A|=4, which reduces AP for H to a finite CSP on six edge variables with four local 5-set constraints (output.md Prop. 3). The computational oracle IsO5 is still the bottleneck; I add rigorously checkable lemmas that simplify the local constraint analysis and shrink the number of patterns to verify.

New lemma: explicit O5-image formula (useful for hand checks)
- Lemma (O5 image equals “−ε off one coordinate”). Let e_O = (+,−,−,−,−). For any τ∈S_5 with ε(τ)=(ε_1,…,ε_5) and any i_0 with τ^{-1}(i_0)=the + position of e_O, the image p′ under the signed action satisfies
  p′_i = −ε_i for i≠i_0, and p′_{i_0} = ε_{i_0}.
  Proof. Immediate from p′_i = ε_i·(e_O)_{τ^{-1}(i)} and that (e_O)_j is + at one j and − otherwise.
- Why useful: To test whether a target 5-vector p lies in the O5 orbit, it suffices to check if there exists some i_0 with ε determined by ε_{i_0}=p_{i_0} and ε_i=−p_i for i≠i_0 such that ε=ε(τ) for some τ. This is a sharper necessary-and-sufficient condition and provides quick hand-proofs in some cases.

Corollary: all-equal triple is forbidden in the opposite-fixed case (now with a clean proof)
- Corollary (completes the “hard exclusion” in both directions). For (α,β)=(+,-), both (+++) and (---) are forbidden: (x,y,z)∉F(+,-) for (x,y,z)=(+,+,+) and (x,y,z)=(−,−,−). Proof:
  • (---) gives p=(+,-,−,−,−), the canonical O5 representative.
  • (+++) gives p=(+,-,+,+,+). By Lemma 8 there exists τ with ε_i(τ)=−1 for all i. Taking i_0=2 yields p′ with p′_2=ε_2=−1 and p′_i=−ε_i=+1 for i≠2, i.e., p′=(+,-,+,+,+). Hence p is in O5.∎
- Symmetrically, for (α,β)=(−,+), both (+++) and (---) are forbidden by global sign reversal (output.md Cor. 9).
- Why useful: This fully classifies the all-equal triples for the opposite-fixed case without computation, tightening the F(+,-) and F(−,+) tables and providing robust unit tests for IsO5.

Hand-verified ε-examples (sanity catalog for the verifier)
- Using Lemma 6, I computed ε(τ) for small τ (useful to debug IsO5):
  • id: ε=(+,+,+,+,+), Σε=+5.
  • (12): ε=(+,+,−,−,−), Σε=−1.
  • (123): ε=(+,−,−,+,+), Σε=+1.
  • (12)(34): ε=(−,−,−,−,+), Σε=−3.
  • (13): ε=(−,−,−,−,−), Σε=−5 (the “central” flip from Lemma 8).
  These confirm that Σε can realize ±5, ±3, ±1, so constraints based solely on Σε (or plus-counts) cannot rule out O5 membership.

Example checks guided by the O5-image formula
- For p=(+,-,+,-,-): considering i_0=2 gives ε=(−,−,−,+,+); i_0=1 gives ε=(+,+,−,+,+). Both patterns appear plausible from small τ, but I do not assert membership either way; this illustrates how the formula reduces a membership query to “does this ε occur as ε(τ)?”, which is trivial to decide computationally and infeasible by hand enumeration.

New solvable family via 2+2 vertex-sign ansatz (synthesis and scope)
- Recall Lemma 10 and Prop. 11. Under x_{ij}=w_iw_j with exactly two + and two − on A, each triangle-triple is a permutation of (+,−,−). Thus, if the verifier confirms that every F(α,β) contains all three permutations of (+,−,−), then the one-point step over |A|=4 is uniformly solvable (Prop. 11), implying AP for H (Lemma 2).
- I emphasize that the only remaining local memberships to check for this route are the 12 entries: for each (α,β)∈{++, +−, −+, −−}, the three permutations of (+,−,−). Cor. 9 halves this (the two opposite-sign cases follow by triplewise negation), so only F(+,+) and F(+,-) need computing.

Refined classification of 4-bit type patterns on A (search-space reduction)
- Observation (C5): For any B of type C5 on A∪{b}, the 5-vector on that 5-set is constant ±, hence the 4-bit pattern (p^B_k)_{k∈A} is constant (all equal) as well. This confirms that, in the one-point data, any non-constant 4-bit pattern on A must come from an H5 side.
- Heuristic (H5, to be verified computationally): For any C of type H5 on A∪{c}, the 4-bit pattern (p^C_k)_{k∈A} consists of exactly two + and two − (never all equal). The canonical representative (+,−,+,−) exhibits this; testing whether all six 2–2 patterns occur will reduce the |A|=4 enumeration by symmetry. Action item: Enumerate the orbit of H5 under relabelings that fix c and record the distinct 4-bit patterns on A; this bounds the profile list to check.

Obstacles and why a small computation remains necessary
- Attempts to certify (+,−,−)-admissibility analytically in F(+,+) or F(+,-) via parity/sum invariants fail because the S_5 signed action realizes ε with all odd sums, and the O5 orbit is large. The O5-image formula reduces membership to ε-realizability, yet characterizing the full image E={ε(τ):τ∈S_5} pen-and-paper appears cumbersome. A 120-step enumeration is the right tool here.

Actionable next steps for the verifier (precise and minimal)
1) Implement IsO5 via output.md Lemma 6. Unit tests: (+,+,+,+,+) non‑O5; (+,−,−,−,−) O5; (+,−,+,−,+) non‑O5; and the five ε-vectors above should appear for the listed τ.
2) Populate F(+,+) and F(+,-) (8 triples each) under the fixed coordinate order (notes/output). Obtain F(−,−), F(−,+) by triplewise negation (Cor. 9). Confirm the proven exclusions: for (+,-), exclude (+++) and (---).
3) Check the 12 key memberships: for each (α,β), all permutations of (+,−,−) belong to F(α,β). If yes, conclude the |A|=4 one‑point step via Prop. 11 and hence AP (Lemma 2).
4) If any of those memberships fail, revert to the 2^6 brute‑force CSP per realized (B,C) profile (with the H5 4-bit patterns catalogued as above). Either archive SAT assignments or produce an UNSAT certificate.

Gaps and clarifications in output.md
- Prop. 11 remains conditional on the F-table check; it should eventually cite explicitly which 12 memberships were verified. The present round supplies a complete proof that (+++) and (---) are both forbidden in F(+,-), filling a previously flagged gap.
- The precise ordering of the last three coordinates in p(Y_k) is critical and already stated; when the F-tables are recorded, repeat this convention in output.md adjacent to their definition for reproducibility.

Summary of this round’s contributions
- Introduced and proved the O5-image formula p = −ε off one coordinate, enabling quick hand checks and guiding IsO5 implementation.
- Fully classified “all-equal” triples in the opposite-fixed case as O5 (forbidden) by a short, rigorous argument.
- Provided computed ε-vectors for several small τ as sanity data.
- Outlined a minimal verification plan: compute two F-tables, test 12 memberships to unlock the uniform 2+2 solution; otherwise, fall back to the tiny 2^6 CSP with a reduced profile list via H5’s 4-bit patterns on A.



=== summary.md ===

## round-0001 — model summary — 2025-08-27T14:32:46.889913Z
Both provers independently reduce the AP question for H (finite 4-hypertournaments forbidding O_5) to a small, finite, auditable constraint problem: encode a 4-hypertournament by an alternating ±1 function f on 4-sets, observe that forbidding O_5 is a local 5-set constraint, and note that AP reduces to checking one-point amalgamation. The minimal nontrivial case is |A|=4: the problem becomes a 6-variable Boolean CSP (variables x_{ij} for pairs in A) with four local 5-set constraints (each must avoid the O_5 orbit). Prover-01 emphasizes the switching operation (multiply f by ε-products) which preserves the O_5/non-O_5 partition and gives normalization power; Prover-02 gives a clean orientation-function formalism and isolates the precise 6-variable CSP and a necessary-triangle condition in a symmetric case. Both provide explicit canonical templates for C5,H5,O5, and an explicit, small computational plan to decide the |A|=3 and |A|=4 cases by enumerating S5-orbits and brute-force searching the CSP. Verifier remains "uncertain" pending these computations. (Sources: prover-01.out.json, prover-02.out.json.)

## round-0002 — model summary — 2025-08-27T14:56:56.512498Z
This round validated the core reductions from output.md while correcting a mistaken “switching” normalization and identified two remaining gaps: the |A|=3 α≠β subcase and the concrete F(α,β) tables needed to finish the |A|=4 CSP. A concrete, implementable formula for the S5 signed action was derived (ε_i(τ)=sgn(τ)·(−1)^{c_{τ^{-1}(i)}(τ)} with c_j the inversion count), together with the product identity ∏ε_i=sgn(τ). The recommended computational route is to build IsO5 by orbit enumeration of p_O, compute the two small constraint tables F_eq=F(+,+) and F_opp=F(+,−) (each ≤8 triples), finish |A|=3 by lookup, then brute-force the 6-variable |A|=4 CSP (64 assignments) on representative B,C profiles. Two lemmas were proved: (A) |A|=3 with α=β solved by the all-equal triple, and (B) |A|=4 aligned B,C solved by constant cross-edges. A promising uniform ansatz x_{ij}=w_i w_j (w_i=p^B_i p^C_i) was proposed to try across cases. Concrete next steps and tests were listed for the verifier. Cited file: prover-01.out.json (progress_md).

## round-0003 — model summary — 2025-08-27T15:07:19.949557Z
This round produced a concrete, checkable plan to finish the remaining small-case verifications for AP. outputs.md already records the orientation-function model, one-point sufficiency lemmas, the |A|=4 CSP formulation, trivial |A|≤2 cases, and the S5-action identity; missing are (i) an explicit O5-orbit classification for the “two-fixed + three-free” 5-vectors, (ii) the four local tables F(α,β)⊆{±1}^3, (iii) a |A|=3 one-point proof (with witnesses), and (iv) a resolution of the |A|=4 6-variable CSP. New micro-lemmas: p^B_k/p^C_k are exactly the fixed “positive” bits coming from 5-point types (justifying S4-reduction); Claim N1 rules out (−,−,−) for (α,+;β,−) and symmetrically (+,+,+) for (α,−;β,+) (easy IsO5 unit tests); a triangle/edge ansatz x_{ij}=w_iw_j realizes all product +1 triangle patterns and reduces the global search to 2^4 choices (fallback brute force is 2^6=64). A concrete computational blueprint (implement IsO5 via Lemma 6, compute F tables, prove |A|=3 by exhibiting triples, exhaust |A|=4 via eq/opp patterns modulo S4 using brute force and the ansatz) was provided. Citations: prover-01.out.json (progress_md); outputs.md.

## round-0004 — model summary — 2025-08-27T15:19:47.824931Z
Kept the CSP reduction and one‑point amalgamation framework from output.md/notes.md; the remaining decision is the |A|=4 one‑point step which determines AP. This round produced three concrete lemmas: Lemma 10 rules out (+++) and (---) in the opposite‑fixed case (F(+,-) and symmetric), Lemma 11 shows a uniform 2+2− vertex‑sign assignment on K_4 forces every triangle triple to be of type (+−−) (up to order), and Lemma 12 reduces the entire |A|=4 one‑point amalgamation to two explicit IsO5 membership checks: (+−−)∈F(+,+) and (+−−)∈F(+,-) (with the other two cases following by symmetry). The round gives a tiny, auditable computational plan: implement IsO5, run two 8‑evaluation tests, conclude AP if both pass, otherwise run the planned 2^6 brute‑force CSP to find a witness or UNSAT certificate. Unit tests and symmetry clarifications to aid verification are provided. (Files relied on: prover-01.out.json (progress_md); background: notes.md, output.md.)

## round-0005 — model summary — 2025-08-27T15:49:00.620791Z
Round goal: decide amalgamation for class H by reducing to one-point amalgamation; the hard case is |A|=4, a 6-variable CSP with four local 5-set constraints avoiding O_5. Corrections: fix the 5-coordinate ordering per notes.md for reproducibility. Main progress: closed |A|=3 with explicit assignments for all (α,β) cases giving p(Y) ∈ {C5, −C5, H5, −H5}. For |A|=4 provided concrete 2+2-ansatz instances (P1,P2,P3) using w=(+,+,−,−) and x_{ij}=w_iw_j that produce a minimal audit set of four 5-vectors to test by IsO5: (+,+,−,−,+), (+,+,+,−,−), (+,−,−,−,+), (+,−,+,−,−). Action plan: implement IsO5, test these vectors, compute F(+,+) and F(+,−) (derive others by sign flip), and check whether all permutations of (+,−,−) lie in each F to validate the uniform 2+2 solution; otherwise run the 2^6 brute-force CSP. Verifier verdict: success. Citations: prover-01.out.json; output.md; notes.md.

## round-0006 — model summary — 2025-08-27T19:47:08.856775Z
Round 0006 introduced a small, auditable unconditional lemma (UB) that reduces the |A|=4 one‑point CSP to two tiny 8‑entry local tables: if each triangle forbids ≤1 triple then the 6‑variable instance is satisfiable by a union‑bound count. A sharp O5‑image formula (p' = −ε off one coordinate) was proved to speed IsO5 membership tests. The 2+2 vertex‑sign ansatz (x_{ij}=w_iw_j) was sharpened: if certain (+,−,−) permutations lie in the local F(α,β) tables then Prop.11 yields a uniform solution; weaker, concrete prerequisites were distilled (Prop.11′). Structural lemmas (T, D, P) classify 5‑types as constant vs 2+2 on A, control which triangle‑triples appear under w choices, and give an even‑parity constraint on triangle products — all shrink the brute‑force search. A remaining, decisive computational task is to run IsO5 and populate F(+,+),F(+,−); note a discrepancy in the notes about whether (+++)∈F(+,−) (claimed excluded in one draft, later retracted), so enumeration is needed. Citations: prover-01.out.json, prover-02.out.json, prover-03.out.json.



=== notes.md ===
Set‑up and notations (agreed baseline)
- 4‑hypertournament on finite V: equivalent to a function f:[V]^4→{±1}. For an ordered 4‑tuple (x1,x2,x3,x4) with underlying set S, we declare (x1,x2,x3,x4)∈R iff the permutation from the increasing ordering of S to (x1,…,x4) has sign equal to f(S). This satisfies (i) tuples have distinct entries, (ii) closure under even permutations, (iii) exactly one of (x1,x2,x3,x4) and (x2,x1,x3,x4) lies in R.
- For a 5‑set X, define its 5‑vector p(X)∈{±1}^X by p_x:=f(X\{x}). Isomorphisms act by p↦(ε_i(τ)·p_{τ^{-1}(i)}) with ε_i(τ)=sign of τ restricted to X\{τ^{-1}(i)}. The three isomorphism types on 5 points are denoted C5, H5, O5. For computation we may use representatives C5=(+,+,+,+,+), O5=(+,-,-,-,-), H5=(+,-,+,-,+); the orbit relation is determined by the above action (not by raw counts of pluses).

One‑point amalgamation reduction
- AP for H (class of finite 4‑hypertournaments with no induced O5) reduces to the one‑point case: Given A∈H, B=A∪{b}∈H, C=A∪{c}∈H with B∩C=A, existence of D on A∪{b,c} in H extending B and C implies full AP by iteratively adding the vertices of C\A to B.

CSP for the minimal nontrivial one‑point case |A|=4
- Fix A={1,2,3,4}, b=5, c=6. The only undetermined f‑values are the six cross 4‑sets X_{ij}={i,j,5,6} (1≤i<j≤4). Let variables x_{ij}:=f(X_{ij})∈{±1}.
- The only potentially new 5‑sets are Y_k:={5,6}∪(A\{k}) for k∈{1,2,3,4}. For each k, p(Y_k) has two fixed coordinates: p missing 6 equals p^B_k:=f_B({5}∪(A\{k})), and p missing 5 equals p^C_k:=f_C({6}∪(A\{k})); and three variable coordinates drawn from {x_{ij}} on the three pairs inside A\{k}:
  • Y_1 depends on {x_{23},x_{24},x_{34}}
  • Y_2 depends on {x_{13},x_{14},x_{34}}
  • Y_3 depends on {x_{12},x_{14},x_{24}}
  • Y_4 depends on {x_{12},x_{13},x_{23}}.
- Constraint: For each k, p(Y_k) must not lie in the O5‑orbit. This is the complete constraint system for the one‑point amalgam over A of size 4.

Base sizes |A|≤2 and |A|=3
- |A|≤2: There are no 5‑sets Y; any assignment to cross 4‑sets works, so one‑point amalgamation always succeeds.
- |A|=3: There is exactly one 5‑set Y=A∪{b,c}, with two fixed coordinates (those missing b and c) and three unknowns (those missing each a∈A). We expect (and plan to verify computationally) that for every (α,β)∈{±1}^2 at least one of the 8 assignments to the three unknowns avoids the O5 orbit. This settles one‑point amalgamation at size 3 once verified.

Switching: what it does and what it does not
- For ε:V→{±1}, define f^ε(S):=(∏_{v∈S}ε(v))·f(S). Then f^ε encodes another 4‑hypertournament.
- Caution: For a fixed 5‑set X, switching at a vertex v∈X flips the four coordinates of p(X) corresponding to the 4‑sets that contain v and leaves the coordinate “missing v” unchanged. This can change the 5‑type: e.g., (+,-,-,-,-) (an O5 representative) switches at the ‘+’ vertex to (+,+,+,+,+) (a C5 representative). Thus switching is not a valid normalization trick for fixed one‑point data (B,C) in H.

Computational plan (to settle |A|=3 and |A|=4)
- Step A: Compute the O5 orbit via the S5 action above; implement IsO5(p).
- Step B (|A|=3): For each (α,β), enumerate the 8 triples, test IsO5, and record that at least one choice avoids O5.
- Step C (|A|=4): Enumerate compatible (B,C) (both of type C5 or H5, agreeing on f(A)), form p^B_k,p^C_k (k=1..4), and brute‑force the 2^6 choices of x_{ij}, rejecting any assignment for which some Y_k is O5. Record either a counterexample or certify all cases pass.
- Precompute F(α,β)⊆{±1}^3: the allowed triples for a 5‑set with given two fixed coordinates. Then the |A|=4 CSP checks membership of the four triangle‑triples in F(p^B_k,p^C_k).

Constructive ansatz to test
- Try x_{ij}=w_iw_j with w_i:=p^B_i·p^C_i for i∈A. For T={i,j,k} this gives a triple (w_iw_j,w_iw_k,w_jw_k) of product +1. If this never yields O5 for any (p^B_k,p^C_k), it provides a uniform construction for all |A| (worth testing; not proved).
Addendum: explicit S5 action, corrections, and computation plan

1) Explicit ε-formula for the S5 action (implementation aid)
For τ ∈ S5 and i ∈ {1,…,5}, write j := τ^{-1}(i) and define
c_j(τ) := |{k<j : τ(k) > τ(j)}| + |{k>j : τ(k) < τ(j)}|.
Then the sign multiplier in the action p′_i = ε_i(τ)·p_{τ^{-1}(i)} equals
ε_i(τ) = sgn(τ)·(−1)^{c_j(τ)}.
Sketch of justification: Let τ′ be the induced bijection from [5]\{j} to [5]\{i}. Its inversion count is inv(τ′) = inv(τ) − c_j(τ) because the inversions of τ decompose into those not involving j (which biject with the inversions of τ′) and those involving j (counted by c_j). Hence sgn(τ′) = (−1)^{inv(τ′)} = (−1)^{inv(τ)−c_j} = sgn(τ)·(−1)^{c_j}. By definition ε_i(τ) = sgn(τ′). A immediate corollary is the product identity ∏_{i=1}^5 ε_i(τ) = sgn(τ), since Σ_j c_j(τ) = 2·inv(τ).

Practical note: This eliminates ambiguity about ε and supports a robust IsO5 enumerator.

2) Correction to the “fully aligned” claim
The statement “If p^B_k = p^C_k for all k then setting all x_{ij}=δ makes p(Y_k) constant δ for all k” is false unless the common pattern (p^B_k)_{k∈A} is itself constant with value δ. Counterexample: take p^B=p^C=(+,+,−,+) and δ=+. Then for k=3 the fixed coordinates are (−,−) while the three variables are +, so p(Y_3) is not constant. A correct (weaker) statement is: if p^B_k = p^C_k = δ for all k, then x_{ij}≡δ makes every p(Y_k) constant δ, hence non-O5.

3) F(α,β) tables: compute all four cases
Define F(α,β) ⊆ {±1}^3 as the set of triples (x,y,z) for which p=(α,β,x,y,z) is non-O5. Do not assume F(+,+)=F(−,−) or F(+,-)=F(−,+) a priori; compute all four cases. This is an 8×4=32-evaluation task. Record each F(α,β) explicitly along with any observed symmetries (e.g., invariance under permuting x,y,z).

Consequence: |A|=3 reduces to checking that for each (α,β) there exists at least one triple in F(α,β). Archive one such triple per case.

4) |A|=4 CSP protocol (profiles and ansatz)
- Use the already-recorded CSP with variables x_{ij} on the six edges of K4 and four constraints Y_k. For any concrete pair (B,C) over A with B∩C=A and both omitting O5, determine the four pairs (p^B_k,p^C_k) and require the corresponding triangle-triple to lie in F(p^B_k,p^C_k).
- Profiles to test early:
  • P1: p^B≡+, p^C≡+. The corrected alignment lemma (constant case) gives the assignment x_{ij}≡+.
  • P2: p^B≡+, p^C≡−. Try the perfect-matching assignment x_{12}=x_{34}=+, others −; check all four Y_k via IsO5.
  • P3: p^B≡+, p^C drawn from an H5 labeling consistent on A; try ansatz x_{ij}=w_i w_j with w_i=p^B_i p^C_i.
  • P4: both sides H5 aligned on A; by the corrected alignment lemma with δ=+, x_{ij}≡+ works if the common 4-bit pattern on A is constant +.
- Constructive ansatz: x_{ij}:=w_i w_j where w_i:=p^B_i p^C_i. For T={i,j,k}, the triple is (w_i w_j, w_i w_k, w_j w_k) with product +1. Test this uniformly across enumerated cases; if it always avoids O5, it suggests a uniform construction for general |A|.

5) Unit tests for IsO5
- p=(+,+,+,+,+) should classify non-O5; p=(+,−,−,−,−) should classify O5; p=(+,−,+,−,+) should classify non-O5 (H5). Also verify that for a transposition τ, ∏_i p′_i flips sign (product identity) and that orbit membership is invariant under the action.

6) Checklist for the next round
- Implement IsO5 with the ε-formula; report the size of the O5 orbit found by enumeration.
- Compute and list F(α,β) for all four cases; confirm |A|=3.
- Run the |A|=4 CSP on P1–P4 first, then extend to representatives modulo S4 on A; archive satisfying/unsatisfying assignments.
- Report whether the ansatz x_{ij}=w_i w_j succeeds in all tested instances.
Additional clarifications, small lemmas, and symmetry for the 5-vector orbit

1) Semantics of the fixed bits p^B_k and p^C_k (|A|=4)
For B on A∪{b} and k∈A, define p^B_k:=f_B({b}∪(A\{k})). On the 5-set A∪{b}, the 5-vector p has entries p_x=f((A∪{b})\{x}). Thus for k∈A, p^B_k coincides with the coordinate “missing k” of p on A∪{b}: it records whether the increasing 4-tuple on {b}∪(A\{k}) is in R_B. Analogously p^C_k is the coordinate “missing k” of the 5-vector on A∪{c}.

2) Necessary local exclusions in the opposite-fixed case (rigorous justification)
- With (α,β,x,y,z)=(+;−;−,−,−) we obtain the canonical O5 representative; hence this triple is forbidden for (α,β)=(+,-).
- By central symmetry of the O5 orbit (see 4) below), (−;+;+,+,+) is also O5; hence forbidden for (α,β)=(−,+).
These give immediate unit tests for any IsO5 implementation and constraints for F(+,-) and F(−,+).

3) Edge/triangle viewpoint and the structured ansatz
- Place the six variables x_{ij} on the edges of K4 on A. The constraint Y_k uses the triangle on T=A\{k}.
- Structured ansatz: pick w_i∈{±1} on the vertices and set x_{ij}:=w_i w_j. For any triangle {i,j,k}, the triple (w_iw_j,w_iw_k,w_jw_k) has product +1, realizing exactly (+++),(+−−),(−+−),(−−+).

4) Central symmetry of the O5 orbit and a consequence for F(α,β)
There exists τ∈S5, e.g. τ=(13), with ε_i(τ)=−1 for all i (check via Lemma 6: c_j(τ) is even for every j and sgn(τ)=−1). Hence for any 5-vector p, p∈O5 iff −p∈O5. As a consequence, for the local tables F(α,β)⊆{±1}^3 (defined by p=(α,β,x,y,z) non-O5), one has
F(−α,−β) = { (−x,−y,−z) : (x,y,z)∈F(α,β) }.
Therefore it suffices to compute F(+,+) and F(+,-); the other two cases follow by triplewise negation. Do not assume any further symmetries (e.g., permutations of x,y,z or F(+,-)=F(−,+)) without verification.

5) On classifying |A|=4 instances
The constraint at each k depends on the ordered pair (p^B_k,p^C_k)∈{++,−−,+−,−+}. Reduction to the pure eq/opp pattern E={k: p^B_k=p^C_k} is insufficient unless one proves F(+,+)=F(−,−) and F(+,-)=F(−,+). Use the full type-vector in {++,−−,+−,−+}^A. By 4), it is enough to compute and store F(+,+), F(+,-), and infer the other two by negation.

6) Implementation checklist (precise conventions)
- Fix, once and for all, an ordering of the five vertices of each Y_k with the first two positions corresponding to the coordinates “missing c” and “missing b”, respectively, and the last three to the vertices of A\{k} in increasing order. Use the same convention for constructing p=(α,β,x,y,z) when populating F(α,β).
- Implement IsO5 via Lemma 6. Unit tests: (+,+,+,+,+) is non-O5; (+,−,−,−,−) is O5; (+,−,+,−,+) is non-O5. Report the orbit size and verify closure under the action.
- Compute F(+,+), F(+,-); obtain F(−,−), F(−,+) by triplewise negation. Conclude |A|=3 by listing one admissible triple for each (α,β).
- For |A|=4, enumerate realizable type-vectors from actual pairs (B,C) (both C5/H5, agreeing on A), and brute-force 2^6 assignments to x_{ij}. Archive SAT witnesses or UNSAT certificates. Test the ansatz x_{ij}=w_i w_j with w_i=p^B_i p^C_i across the same cases.

These additions lock down the symmetry that underlies Claim N1, correct the eq/opp reduction, and make the forthcoming computations unambiguous and reusable.
Uniform 2+2− assignment and a corrected conditional reduction for |A|=4

Ordering convention for local F-tables
- For any 5-set Y_k={b,c}∪(A\{k}) with A={1,2,3,4} and i<j<ℓ the increasing order on A\{k}, we use the coordinate order
  p(Y_k) = (p_{\text{missing }c}, p_{\text{missing }b}, p_{\text{missing }i}, p_{\text{missing }j}, p_{\text{missing }\ell}).
- With this convention, F(α,β)⊆{±1}^3 is the set of ordered triples (x,y,z) such that (α,β,x,y,z) is non-O5.

Lemma A (2+2 vertex-sign ansatz yields (+−−)-type on every triangle).
- Let w_i∈{±1} (i∈A) have exactly two + and two −, and set x_{ij}:=w_i w_j. For each k, the triple (x,y,z) contributed by the three edges inside A\{k} is, up to permutation of its three coordinates, of the form (+,−,−).
- Proof. If k is from the + vertices, then A\{k} contains {+,−,−}; the pairwise products are (−,−,+). If k is from the − vertices, then A\{k} contains {+, +, −}; the pairwise products are (+,−,−). In either case the unordered triple has one + and two −. The order within (x,y,z) depends on the fixed coordinate convention but is a permutation of (+,−,−). ∎

Corrected conditional reduction for |A|=4
- Conditional Proposition (uniform 2+2 ansatz). Fix the above ordering convention. Suppose that for each (α,β)∈{++, +−, −+, −−}, all three permutations of (+,−,−) lie in F(α,β). Then for every one-point instance over |A|=4 there exists an amalgam D in H obtained by the uniform assignment x_{ij}=w_i w_j with some w having exactly two + and two − on A.
  • Proof. By Lemma A, for every k the ordered triple on Y_k is a permutation of (+,−,−). By hypothesis, this ordered triple is in F(p^B_k,p^C_k) for each k, hence none of the four Y_k is O5, and D∈H. ∎
- Unconditional subcase (equal-constant fixed pairs). If (p^B_k,p^C_k)=(δ,δ) for all k (with δ∈{±1}), then the constant assignment x_{ij}≡δ makes every p(Y_k) equal to (δ,δ,δ,δ,δ), which is ±C5 and therefore non-O5. Hence an amalgam exists in this subcase.

Hard local exclusion in the opposite-fixed case
- For (α,β)=(+,-), the triple (−,−,−) is forbidden: p=(+,-,−,−,−) is the canonical O5 representative. By central symmetry of the S5 action, (+++) is forbidden for (α,β)=(−,+) as well. These serve as unit checks for IsO5 and constraints in populating F.

Notes on earlier claims
- The claim “(+++) is forbidden in F(+,-)” has not been proved. The argument via “flipping one coordinate” is not valid under the S5 signed action. Treat this as a computational check when populating F.

Computational checklist (precise and minimal)
1) Implement IsO5 via Lemma 6; unit tests: (+,+,+,+,+) non-O5; (+,−,−,−,−) O5; (+,−,+,−,+) non-O5. Report the size of the O5 orbit and closure under the action.
2) Compute F(+,+) and F(+,-) completely (8 triples each) under the above ordering; use Corollary 9 to derive F(−,−) and F(−,+) by triplewise negation. Do not assume S3-invariance.
3) Test the 12 memberships: for each (α,β)∈{++, +−, −+, −−}, verify that all three permutations of (+,−,−) lie in F(α,β).
4) If step 3 passes, conclude by the conditional proposition that the |A|=4 one-point step is uniformly solvable by a 2+2 ansatz; with Lemma 2 this yields AP.
5) If step 3 fails, run the 2^6 CSP for the offending type-profile to search for a different satisfying assignment or produce an UNSAT certificate (listing, for each assignment, a Y_k showing O5).

Implementation detail retained: the structured ansatz yields triangle triples of product +1, hence it can never realize (−,+,+) or (−,−,−). Keep this in mind when interpreting F-tables and debugging assignments.
Updates: explicit |A|=3 solution, concrete |A|=4 tests, and a solvable subclass

Coordinate convention reminder (used below)
- For Y_k={b,c}∪(A\{k}) with A={1,2,3,4} and i<j<ℓ the increasing order on A\{k}, we encode
  p(Y_k) = (p_{missing c}, p_{missing b}, p_{missing i}, p_{missing j}, p_{missing ℓ}).
- Mapping of the last three coordinates to edge variables on K4[A]:
  • p_{missing i} = x_{jℓ},  p_{missing j} = x_{iℓ},  p_{missing ℓ} = x_{ij}.

|A|=3 one‑point amalgamation solved (constructive)
- Let A have size 3. For Y=A∪{b,c} write p(Y)=(α,β,x,y,z) in the above order, where α is fixed by B (missing c), β by C (missing b), and x,y,z are the cross 4‑sets. The following choices always avoid O5:
  • (α,β)=(+,+): take (x,y,z)=(+,+,+) → p(Y)=(+,+,+,+,+)=C5.
  • (α,β)=(−,−): take (x,y,z)=(−,−,−) → p(Y)=(−,−,−,−,−)=−C5.
  • (α,β)=(+,-): take (x,y,z)=(+,-,+) → p(Y)=(+,-,+,-,+)=H5.
  • (α,β)=(−,+): take (x,y,z)=(−,+,−) → p(Y)=(−,+,−,+,−)=−H5.
  Hence the one‑point extension over |A|=3 always exists in H.

Concrete |A|=4 test profiles for the 2+2 ansatz (w=(+,+,−,−), x_{ij}=w_i w_j)
- Triangles (Y_k):
  • k=1: (x_{23},x_{24},x_{34})=(−,−,+) → p(Y_1)=(p^B_1,p^C_1,−,−,+).
  • k=2: (x_{13},x_{14},x_{34})=(−,−,+) → p(Y_2)=(p^B_2,p^C_2,−,−,+).
  • k=3: (x_{12},x_{14},x_{24})=(+,-,−) → p(Y_3)=(p^B_3,p^C_3,+,−,−).
  • k=4: (x_{12},x_{13},x_{23})=(+,-,−) → p(Y_4)=(p^B_4,p^C_4,+,−,−).
- Profiles to check via IsO5 (the first two coordinates are specialized as follows):
  • P1: p^B≡+, p^C≡+ → test (+,+,−,−,+) and (+,+,+,−,−).
  • P2: p^B≡+, p^C≡− → test (+,−,−,−,+) and (+,−,+,−,−).
  • P3: p^B≡+, p^C=(+,-,+,-) (aligned H5 on A∪{c}) → same two vectors as P2.
A single IsO5 pass on these four vectors settles P1–P3 for the 2+2 ansatz.

A solvable subclass for |A|=4 via a “local H5 witness” pattern
- Prescribe for each k a local triple (x_{jℓ}, x_{iℓ}, x_{ij}) = (α_k, β_k, α_k), where (α_k,β_k)=(p^B_k,p^C_k) and i<j<ℓ enumerate A\{k}.
- Shared‑edge consistency forces:
  • α_1=α_2=α_3=α_4;  β_1=α_3;  β_4=α_2;  β_2=β_3.
- If the given one‑point data (B,C) satisfy these equalities, then for each k we get p(Y_k)=(α_k,β_k,α_k,β_k,α_k), which is ±C5 if α_k=β_k, else ±H5. Hence an amalgam exists for this subclass.

Caveat on the LLL heuristic
- The symmetric LLL condition e·p·(d+1)≤1 with d=3 would require p≤1/(4e)≈0.091. If |{±1}^3\F(α,β)|≤1 then p=1/8≈0.125, which does not meet the symmetric bound. Treat any LLL‑based argument as heuristic unless we deploy a sharper criterion tailored to our dependency graph.

Actionable checklist (minimal computation to unblock |A|=4)
1) Implement IsO5 (Lemma 6), run unit tests, and report the O5 orbit size.
2) Test the four 5‑vectors from P1–P3 above.
3) Compute F(+,+) and F(+,-) fully (8 triples each) under the fixed ordering; obtain the other two by triplewise negation. Archive the tables.
4) If all permutations of (+,−,−) lie in each F(α,β), invoke Proposition 11 (uniform 2+2). Otherwise, brute‑force the 2^6 CSP per realized 4‑type profile and record SAT witnesses or an UNSAT certificate.
New rigorous tools and corrections (to be used going forward)

1) Union‑bound feasibility for the |A|=4 CSP
- Statement. In the |A|=4 CSP with six edge variables x_{ij} and four triangle constraints Y_k, if for each k the local table F(p^B_k,p^C_k) forbids at most one ordered triple (i.e., |{±1}^3\F(p^B_k,p^C_k)| ≤ 1), then there exists a satisfying global assignment.
- Reason. Each forbidden triple for a fixed triangle rules out exactly 2^3 global assignments (the other 3 edges are free). With at most one forbidden triple per triangle, at most 4·2^3=32 of the 64 assignments are excluded. Hence at least 32 assignments remain.
- Consequence. If a small computation confirms |{±1}^3\F(+,+)| ≤ 1 and |{±1}^3\F(+,-)| ≤ 1 (the other two cases follow by triplewise negation; Cor. 9), the |A|=4 step follows immediately without any 6‑variable search.

2) Specialization of the S5 action to the O5 representative (implementation aid)
- For e_O=(+,-,-,-,-) and τ∈S5 with ε(τ)=(ε_1,…,ε_5), let i0:=τ(1). Then the image p′ under the signed action satisfies p′_i = ε_i if i=i0 and p′_i = −ε_i otherwise. Equivalently, p′ is obtained from ε by flipping all coordinates except i0. Thus p∈O5 iff ∃ε∈E:={ε(τ):τ∈S5} and i0 with p_i=−ε_i for i≠i0 and p_{i0}=ε_{i0}.
- Note. This enables a very compact IsO5: precompute E (120 evaluations) and check the 5·|E| candidates.

3) Parity invariant across the four triangles
- For any assignment x_{ij}∈{±1}, the product of the triangle‑products over the four Y_k equals +1. Equivalently, an odd number of triangles cannot have triple product −1. Reason: each x_{ij} appears in exactly two triangle‑products.

4) Distribution of triangle triples under vertex‑sign assignments
- If x_{ij}=w_i w_j with w∈{±1}^A, then on any triangle the triple is either (+++) (when the three w are equal) or a permutation of (+,−,−) (otherwise). In particular: 4+/0− (or 0+/4−) yields four (+++); 3+/1− (or 1+/3−) yields exactly one (+++); 2+/2− yields no (+++) and all four triangles are permutations of (+,−,−).

Corrections to prior claims
- False: “If T_B=C5 then (p^B_k)_{k∈A} is constant; if T_B=H5 then it is 2+2.” Counterexample: for a C5 5‑set, the 5‑vector equals ε(τ) for some τ; e.g., τ=(12) gives ε=(+,+,−,−,−), which is not constant on A. Do not use this classification to prune cases.
- Unproved (and currently unknown): (+++)∉F(+,-). The argument that tried to force this from Lemma 8 incorrectly treats the free index i0. We keep only the rigorously proved exclusion (---)∉F(+,-) (output.md Lemma 13). The status of (+++) in F(+,-) must be decided computationally.

Coordinate convention (reminder)
- For Y_k={b,c}∪(A\{k}) with A={1,2,3,4} and i<j<ℓ the increasing order on A\{k}, we encode p(Y_k)=(p_{missing c}, p_{missing b}, p_{missing i}, p_{missing j}, p_{missing ℓ}), with p_{missing i}=x_{jℓ}, p_{missing j}=x_{iℓ}, p_{missing ℓ}=x_{ij}.

Actionable checklist (minimal computation to unblock |A|=4)
- Implement IsO5 using Lemma 6; validate unit tests: (+,+,+,+,+) ∉O5; (+,−,−,−,−) ∈O5; (+,−,+,−,+) ∉O5. Also verify the sample ε(τ) values listed in prior notes.
- Compute F(+,+) and F(+,-) completely (8 triples each) under the fixed coordinate order; derive F(−,−), F(−,+) by triplewise negation. Report sizes and explicit complements.
- If both complements have size ≤1, conclude |A|=4 by the union‑bound lemma and hence AP via Lemma 2. If, stronger, both F tables are exactly “triple product +1,” record the uniform construction x_{ij}=w_i w_j and close.
- If not, test whether all permutations of (+,−,−) lie in F(+,+) and F(+,-); if yes, apply Proposition 11 (uniform 2+2). Otherwise brute‑force the 2^6 CSP on the realized profiles, using the parity invariant to prune, and archive SAT/UNSAT witnesses.


=== output.md ===
Proposition 1 (Orientation function model).
For a finite set V, giving a 4‑hypertournament structure (V,R) satisfying: (i) all tuples in R have distinct entries; (ii) R is closed under even permutations of coordinates; (iii) for every 4‑tuple of distinct vertices (x1,x2,x3,x4), exactly one of (x1,x2,x3,x4) and (x2,x1,x3,x4) lies in R; is equivalent to giving an arbitrary function f:[V]^4→{±1}.
Proof. Given f, declare (x1,x2,x3,x4)∈R iff the permutation from the increasing ordering of S={x1,x2,x3,x4} to (x1,…,x4) has sign equal to f(S). This satisfies (i)–(iii) by construction. Conversely, given R with (i)–(iii), fix any 4‑set S and any increasing ordering s of S. By (iii), exactly one of s and its swap lies in R; define f(S)=+1 if s∈R and f(S)=−1 otherwise. By (ii) and (iii), membership of any ordered tuple from S depends only on the parity relative to s, so f is well defined and recovers R. ∎

Lemma 2 (One‑point amalgamation suffices for AP in H).
Let H be the class of finite 4‑hypertournaments omitting O5. Suppose that whenever A∈H and B=A∪{b}∈H and C=A∪{c}∈H with B∩C=A, there exists D∈H on A∪{b,c} extending both B and C. Then H has the amalgamation property.
Proof. Given B0,B1∈H over A, enumerate C\A as c1,…,ck and set A0:=A. Inductively, amalgamate Bi with Ai∪{ci} over Ai to obtain Bi+1 on Ai+1:=Ai∪{ci}. At each step, by hypothesis, all 5‑sets involving the new vertex ci avoid O5, and previously constructed parts are unchanged. After k steps we obtain an amalgam D∈H of B0 and C over A. ∎

Proposition 3 (CSP formulation of the |A|=4 one‑point step).
Let A={1,2,3,4}, b, c new. Given B on A∪{b} and C on A∪{c} in H that agree on A, any amalgam D on A∪{b,c} is determined on new 4‑sets by the six values x_{ij}:=f({i,j,b,c}) (1≤i<j≤4). The only new 5‑sets are Y_k:={b,c}∪(A\{k}) for k=1,2,3,4. Writing p^B_k:=f_B({b}∪(A\{k})) and p^C_k:=f_C({c}∪(A\{k})), the 5‑vector p(Y_k) has two fixed coordinates (missing c gives p^B_k; missing b gives p^C_k) and three coordinates equal to the x_{ij} for {i,j}⊂A\{k}. D∈H iff for each k, p(Y_k) is not in the O5 orbit.
Proof. All 4‑sets contained in B or C are already fixed. The only 4‑sets not contained in B or C are precisely the six X_{ij}={i,j,b,c}. The only new 5‑subsets of A∪{b,c} (relative to B and C) are those that contain both b and c; there are exactly four, the Y_k. Their p‑vectors depend on the listed values. Avoidance of O5 on all 5‑sets is thus equivalent to the stated four constraints. ∎

Corollary 4 (Trivial one‑point cases |A|≤2).
If |A|≤2, then one‑point amalgamation always succeeds in H.
Proof. When |A|≤2 there are no 3‑subsets of A, hence no 5‑sets of the form {b,c}∪T with T⊂A of size 3. Thus there are no new 5‑set constraints; any assignment to cross 4‑sets yields an amalgam in H. ∎

Fact 5 (Switching yields a 4‑hypertournament but may change 5‑types).
For ε:V→{±1}, define f^ε(S):=(∏_{v∈S}ε(v))·f(S). Then f^ε encodes a 4‑hypertournament. However, for a fixed 5‑set X, switching at v∈X flips the four coordinates of p(X) corresponding to 4‑sets containing v and leaves the coordinate “missing v” unchanged; this can change the isomorphism type on X (e.g., an O5 representative (+,-,-,-,-) switches at its ‘+’ vertex to (+,+,+,+,+), a C5 representative). ∎
Lemma 6 (Explicit formula for the S5 action on 5-vectors).
Let X be a 5-set equipped with an increasing labeling {1,2,3,4,5}. For τ∈S5 and i∈{1,…,5}, write j:=τ^{-1}(i) and define
c_j(τ) := |{k<j : τ(k) > τ(j)}| + |{k>j : τ(k) < τ(j)}|.
In the isomorphism action on p∈{±1}^X given by p′_i = ε_i(τ)·p_{τ^{-1}(i)}, the sign factor is
ε_i(τ) = sgn(τ)·(−1)^{c_j(τ)}.

Proof. Let τ′ be the induced bijection from [5]\{j} to [5]\{i}, obtained by deleting position j in the domain and value i in the codomain. By definition, ε_i(τ)=sgn(τ′). The inversions of τ split into two disjoint families: those not involving j (which correspond bijectively to inversions of τ′) and those involving j, whose number is c_j(τ) by definition. Hence inv(τ)=inv(τ′)+c_j(τ), so sgn(τ)= (−1)^{inv(τ)} = (−1)^{inv(τ′)+c_j(τ)} = sgn(τ′)·(−1)^{c_j(τ)} = ε_i(τ)·(−1)^{c_j(τ)}. Rearranging gives the claimed formula. ∎

Corollary 7 (Product identity for ε-factors).
For τ∈S5, one has ∏_{i=1}^5 ε_i(τ) = sgn(τ).

Proof. Using ε_i(τ) = sgn(τ)·(−1)^{c_{τ^{-1}(i)}(τ)} and the fact that each inversion contributes 1 to c_a and 1 to c_b, we have Σ_{j=1}^5 c_j(τ) = 2·inv(τ). Therefore ∏_{i=1}^5 ε_i(τ) = sgn(τ)^5 · (−1)^{Σ_j c_j(τ)} = sgn(τ)·(−1)^{2·inv(τ)} = sgn(τ). ∎
Lemma 8 (Central symmetry of the O5 orbit).
There exists τ∈S5 with ε_i(τ)=−1 for all i. In particular, for any 5-vector p one has p∈O5 if and only if −p∈O5. Thus the O5 orbit is closed under global sign reversal.

Proof. Take τ=(13) in one-line notation [3,2,1,4,5]. By Lemma 6, for j:=τ^{-1}(i), ε_i(τ)=sgn(τ)·(−1)^{c_j(τ)}. A direct count gives c_1(τ)=c_2(τ)=c_3(τ)=2 and c_4(τ)=c_5(τ)=0, so c_j(τ) is even for all j. Since sgn(τ)=−1, we get ε_i(τ)=−1 for every i. If q is in the O5 orbit, then so is R_τ(q)=−q∘τ^{−1}. As σ ranges over S5, the set {−R_σ(e1)} equals {R_{τσ}(e1):σ∈S5}, hence −O5=O5. ∎

Corollary 9 (Sign-flip symmetry for local tables F).
For F(α,β)⊆{±1}^3 defined by: (x,y,z)∈F(α,β) iff (α,β,x,y,z) is non-O5, one has
F(−α,−β) = { (−x,−y,−z) : (x,y,z)∈F(α,β) }.

Proof. (α,β,x,y,z) is non-O5 iff its global negation (−α,−β,−x,−y,−z) is non-O5 by Lemma 8. This is exactly the stated correspondence. ∎
Lemma 10 (2+2 vertex signs induce (+−−)-type on every triangle).
Let A={1,2,3,4} and choose w_i∈{±1} with exactly two plus and two minus. Define x_{ij}:=w_i w_j for 1≤i<j≤4. For each k∈A, on the triangle induced by A\{k} the ordered triple of edge-variables (x,y,z) (in any fixed coordinate convention) is a permutation of (+,−,−).

Proof. If k is one of the + vertices, then A\{k} contains one + and two −; the three pairwise products are (−,−,+). If k is one of the − vertices, then A\{k} contains two + and one −; the three pairwise products are (+,−,−). Thus in either case the unordered triple has signs {+ , − , −}. The ordering of (x,y,z) depends on the fixed convention but is a permutation of (+,−,−). ∎

Proposition 11 (Conditional |A|=4 amalgamation via a uniform 2+2 ansatz).
Fix a consistent ordering convention for the last three coordinates in the definition of F(α,β) (e.g., by increasing order of the three vertices in A\{k}). Suppose that for each (α,β)∈{++, +−, −+, −−}, all three permutations of (+,−,−) belong to F(α,β). Then for every one-point diagram over |A|=4 there exists an amalgam D∈H obtained by setting x_{ij}=w_i w_j for some choice of w with exactly two + and two − on A.

Proof. Choose any w with exactly two + and two − on A and set x_{ij}=w_i w_j. By Lemma 10, for each k the ordered triple contributed by the three edges in A\{k} is a permutation of (+,−,−). By hypothesis, this ordered triple lies in F(p^B_k,p^C_k) for every k, so no Y_k is of type O5. Therefore the resulting structure on A∪{b,c} is in H and extends both B and C. ∎

Proposition 12 (Equal-constant fixed pairs are solvable by a constant assignment).
In the |A|=4 one-point amalgamation problem, if (p^B_k,p^C_k)=(δ,δ) for all k∈A with a fixed δ∈{±1}, then there exists an amalgam D∈H obtained by setting x_{ij}≡δ.

Proof. With this assignment, for each k the 5-vector p(Y_k) equals (δ,δ,δ,δ,δ), which is ±C5. Since ±C5 is not in the O5 orbit, each Y_k is non-O5 and the amalgam lies in H. ∎

Lemma 13 (A hard local exclusion in the opposite-fixed case).
For (α,β)=(+,-), the triple (−,−,−) is forbidden: (x,y,z)=(−,−,−)∉F(+,-). Symmetrically, for (α,β)=(−,+), (+++)∉F(−,+).

Proof. For (α,β)=(+,-) and (x,y,z)=(−,−,−) one has p=(+,-,−,−,−), which is the canonical O5 representative; hence it is in the O5 orbit. By Lemma 8 (global sign-reversal is in the orbit), (−,+,+,+,+) is also in O5, yielding the symmetric statement. ∎
Proposition 14 (The one-point amalgamation over |A|=3 always succeeds, constructively).
Let A have size 3 and let B=A∪{b} and C=A∪{c} lie in H and agree on A. On Y:=A∪{b,c}, write p(Y)=(α,β,x,y,z) in the coordinate order (missing c, missing b, then missing the elements of A in increasing order). Then for each (α,β)∈{±1}^2 there is a choice of (x,y,z)∈{±1}^3 such that p(Y) is not in the O5 orbit, namely:
- If (α,β)=(+,+), take (x,y,z)=(+,+,+), so p(Y)=(+,+,+,+,+)=C5.
- If (α,β)=(−,−), take (x,y,z)=(−,−,−), so p(Y)=(−,−,−,−,−)=−C5.
- If (α,β)=(+,-), take (x,y,z)=(+,-,+), so p(Y)=(+,-,+,-,+)=H5.
- If (α,β)=(−,+), take (x,y,z)=(−,+,−), so p(Y)=(−,+,−,+,−)=−H5.
In all cases Y is non‑O5, hence there exists an amalgam D∈H on A∪{b,c} extending B and C.

Proof. The only new 5‑set is Y=A∪{b,c}. The displayed assignments set its 5‑vector equal to one of ±C5 or ±H5 in the fixed coordinate order, and these are not in the O5 orbit. There are no other new 5‑sets to check. Hence the extension lies in H. ∎

Proposition 15 (A solvable subclass for |A|=4 via a local H5 pattern with consistency).
Let A={1,2,3,4}, and let B=A∪{b} and C=A∪{c} lie in H and agree on A. For k∈A, write (α_k,β_k):=(p^B_k,p^C_k). Adopt the coordinate order
p(Y_k)=(p_{missing c},p_{missing b},p_{missing i},p_{missing j},p_{missing ℓ}) for Y_k={b,c}∪(A\{k}) with i<j<ℓ the increasing order on A\{k}. Suppose the type‑data satisfy the equalities
α_1=α_2=α_3=α_4,
β_1=α_3,
β_4=α_2,
β_2=β_3.
Then there exists an assignment to the six cross 4‑sets x_{ij}=f({i,j,b,c}) such that, for each k, p(Y_k) is ±C5 if α_k=β_k and ±H5 otherwise. In particular, an amalgam D∈H exists.

Proof. Define the triple of edge variables on Y_k by (x_{jℓ},x_{iℓ},x_{ij})=(α_k,β_k,α_k), where {i,j,ℓ}=A\{k} with i<j<ℓ. Each edge variable x_{ij} appears in exactly two such triples, corresponding to the two values of k∈A\{i,j}. The displayed equalities on the α_k and β_k are exactly those required to make these two prescriptions agree for every edge (a direct check using the mapping p_{missing i}=x_{jℓ}, p_{missing j}=x_{iℓ}, p_{missing ℓ}=x_{ij}). With this consistent assignment, p(Y_k)=(α_k,β_k,α_k,β_k,α_k), which is ±C5 if α_k=β_k and ±H5 otherwise. None of these are in the O5 orbit, so all four Y_k are non‑O5 and the resulting structure is an amalgam in H. ∎
Lemma 16 (Union‑bound feasibility for the |A|=4 CSP).
In the |A|=4 one‑point CSP (Proposition 3), suppose that for each k∈{1,2,3,4} the local table forbids at most one ordered triple, i.e., |{±1}^3\F(p^B_k,p^C_k)| ≤ 1. Then there exists an assignment to the six variables x_{ij} that satisfies all four constraints (so an amalgam in H exists).

Proof. There are 2^6=64 global assignments to the six variables. Fix k and a forbidden ordered triple t on its three local variables; the set of global assignments inducing t on that triangle has size 2^3 (the other three edge‑variables are free). Thus forbidding at most one triple per triangle eliminates at most 4·2^3=32 global assignments in total. Therefore at least 64−32=32 assignments remain that satisfy all four local constraints. ∎

Corollary 16.1 (A small‑table criterion for the |A|=4 step).
If the two base tables satisfy |{±1}^3\F(+,+)| ≤ 1 and |{±1}^3\F(+,-)| ≤ 1 (so, by Corollary 9, the same holds for F(−,−) and F(−,+) by triplewise negation), then for every one‑point diagram over |A|=4 there exists an amalgam D∈H.

Proof. For any instance, each Y_k uses one of the four pairs (p^B_k,p^C_k)∈{++,−−,+−,−+}; by the stated hypothesis and Corollary 9, each corresponding table forbids at most one triple. Apply Lemma 16. ∎

Lemma 17 (Global parity constraint across the four triangles).
In the |A|=4 CSP, for any assignment x_{ij}∈{±1}, the product of the triangle‑products over the four Y_k equals +1. Equivalently, an odd number of triangles cannot have triple‑product −1.

Proof. Each triangle‑product equals the product of its three edge‑variables. Multiplying the four triangle‑products together, each edge‑variable x_{ij} appears exactly twice (in the two triangles omitting i and j), hence contributes x_{ij}^2=1 to the total product. Therefore the total product is +1. ∎

=== round-0006/verifier.feedback.md ===
Overall assessment: We have solid incremental advances and one clear, rigorous new tool (the union‑bound feasibility lemma) plus a correct global parity invariant. There are, however, a couple of incorrect or unjustified claims that we must not carry forward.

Prover 01
- Lemma UB (union‑bound CSP feasibility) is correct. The counting is sound: forbidding a single ordered triple for a fixed triangle eliminates exactly 2^3 global assignments; with ≤1 forbidden triple per triangle, ≤32 of the 64 assignments are excluded, hence a solution exists. This is worth elevating to output.md; I’ve added a precise version and a corollary explaining how to conclude |A|=4 once the two base tables F(+,+) and F(+,-) have complements of size ≤1.
- Conjecture P+ (F equals “triple product +1”) is a clean, testable hypothesis. Keep it in notes; do not promote to output.md without computation.
- The clarification of the triangle coordinate mapping is consistent with our fixed convention in output.md Proposition 15. Good to keep emphasized in notes.

Prover 02
- The “O5‑image formula” specialized to e_O is a correct, immediate consequence of Lemma 6: for τ and i0 with τ^{-1}(i0) the “+” position of e_O, one has p′_i = ε_i if i=i0 and p′_i = −ε_i otherwise. This is useful for hand checks/debugging; I’ve kept it in notes as an implementation aid.
- The claimed corollary “for (α,β)=(+,-), both (+++) and (---) are forbidden” is not proved. The argument incorrectly treats i0 as freely choosable for a fixed τ with ε≡−1. In fact i0 is determined by τ via i0=τ(1), and the specific τ from Lemma 8 need not satisfy τ(1)=2. We retain only the rigorously proved exclusion (---)∉F(+,-) (output.md Lemma 13). The status of (+++) in F(+,-) remains to be decided computationally.
- The sample ε(τ) vectors are welcome as unit tests, but they should be presented as checks for the IsO5 implementation, not as structural constraints.

Prover 03
- Lemma D (distribution of (+++) vs permutations of (+,−,−) under x_{ij}=w_iw_j) is correct and complements Lemma 10. I leave it in notes; Lemma 10 already covers the 2+2 case explicitly.
- Lemma P (parity of triangle products) is correct and broadly useful. I’ve promoted it to output.md.
- Lemma T (“on C5 the 4‑tuple (p^B_k) is constant; on H5 it is 2+2”) is false as stated. Counterexample: if the 5‑set is of type C5, then under the S5 signed action its 5‑vector equals ε(τ) for some τ; taking τ=(12) (as in the samples), ε can be (+,+,−,−,−), which is not constant on the A‑coordinates. Please discard this classification; do not use it to prune cases.
- Proposition 11′ is a reasonable conditional plan (using 2+2/3+1/4+0 choices guided by which entries of F are allowed) but remains conditional; keep in notes only.

What is now in output.md
- Added Lemma (union‑bound feasibility) and its corollary (how to conclude the |A|=4 step once |{±1}^3\F(+,+)|≤1 and |{±1}^3\F(+,-)|≤1).
- Added Lemma (parity across the four triangles).
- No other structural changes; kept all previously proved items intact.

Next steps (minimal, decisive)
1) Implement IsO5 via Lemma 6; run unit tests: (+,+,+,+,+) non‑O5; (+,−,−,−,−) O5; (+,−,+,−,+) non‑O5; and verify the ε(τ) samples listed by Prover 02.
2) Populate F(+,+) and F(+,-) completely (8 entries each) under the fixed coordinate order. Derive F(−,−), F(−,+) by triplewise negation (Corollary 9). Report complements and their sizes.
3) If both complements have size ≤1, conclude the |A|=4 amalgamation by the union‑bound lemma and hence AP (via Lemma 2). If, stronger, both F tables coincide with “triple product +1”, record the uniform construction x_{ij}=w_iw_j and close the problem.
4) Otherwise, check whether all permutations of (+,−,−) lie in F(+,+) and F(+,-); if yes, apply Proposition 11 (uniform 2+2 ansatz). If not, brute‑force the 2^6 CSP for the realized (B,C) profiles; use the parity lemma to prune and archive SAT/UNSAT witnesses.
5) Optionally precompute the set E={ε(τ):τ∈S5}. Then p∈O5 iff ∃i0 with p_i=−ε_i for i≠i0 and p_{i0}=ε_{i0} for some ε∈E. This gives a very fast IsO5.


=== notes.md ===
Set‑up and notations (agreed baseline)
- 4‑hypertournament on finite V: equivalent to a function f:[V]^4→{±1}. For an ordered 4‑tuple (x1,x2,x3,x4) with underlying set S, we declare (x1,x2,x3,x4)∈R iff the permutation from the increasing ordering of S to (x1,…,x4) has sign equal to f(S). This satisfies (i) tuples have distinct entries, (ii) closure under even permutations, (iii) exactly one of (x1,x2,x3,x4) and (x2,x1,x3,x4) lies in R.
- For a 5‑set X, define its 5‑vector p(X)∈{±1}^X by p_x:=f(X\{x}). Isomorphisms act by p↦(ε_i(τ)·p_{τ^{-1}(i)}) with ε_i(τ)=sign of τ restricted to X\{τ^{-1}(i)}. The three isomorphism types on 5 points are denoted C5, H5, O5. For computation we may use representatives C5=(+,+,+,+,+), O5=(+,-,-,-,-), H5=(+,-,+,-,+); the orbit relation is determined by the above action (not by raw counts of pluses).

One‑point amalgamation reduction
- AP for H (class of finite 4‑hypertournaments with no induced O5) reduces to the one‑point case: Given A∈H, B=A∪{b}∈H, C=A∪{c}∈H with B∩C=A, existence of D on A∪{b,c} in H extending B and C implies full AP by iteratively adding the vertices of C\A to B.

CSP for the minimal nontrivial one‑point case |A|=4
- Fix A={1,2,3,4}, b=5, c=6. The only undetermined f‑values are the six cross 4‑sets X_{ij}={i,j,5,6} (1≤i<j≤4). Let variables x_{ij}:=f(X_{ij})∈{±1}.
- The only potentially new 5‑sets are Y_k:={5,6}∪(A\{k}) for k∈{1,2,3,4}. For each k, p(Y_k) has two fixed coordinates: p missing 6 equals p^B_k:=f_B({5}∪(A\{k})), and p missing 5 equals p^C_k:=f_C({6}∪(A\{k})); and three variable coordinates drawn from {x_{ij}} on the three pairs inside A\{k}:
  • Y_1 depends on {x_{23},x_{24},x_{34}}
  • Y_2 depends on {x_{13},x_{14},x_{34}}
  • Y_3 depends on {x_{12},x_{14},x_{24}}
  • Y_4 depends on {x_{12},x_{13},x_{23}}.
- Constraint: For each k, p(Y_k) must not lie in the O5‑orbit. This is the complete constraint system for the one‑point amalgam over A of size 4.

Base sizes |A|≤2 and |A|=3
- |A|≤2: There are no 5‑sets Y; any assignment to cross 4‑sets works, so one‑point amalgamation always succeeds.
- |A|=3: There is exactly one 5‑set Y=A∪{b,c}, with two fixed coordinates (those missing b and c) and three unknowns (those missing each a∈A). We expect (and plan to verify computationally) that for every (α,β)∈{±1}^2 at least one of the 8 assignments to the three unknowns avoids the O5 orbit. This settles one‑point amalgamation at size 3 once verified.

Switching: what it does and what it does not
- For ε:V→{±1}, define f^ε(S):=(∏_{v∈S}ε(v))·f(S). Then f^ε encodes another 4‑hypertournament.
- Caution: For a fixed 5‑set X, switching at a vertex v∈X flips the four coordinates of p(X) corresponding to the 4‑sets that contain v and leaves the coordinate “missing v” unchanged. This can change the 5‑type: e.g., (+,-,-,-,-) (an O5 representative) switches at the ‘+’ vertex to (+,+,+,+,+) (a C5 representative). Thus switching is not a valid normalization trick for fixed one‑point data (B,C) in H.

Computational plan (to settle |A|=3 and |A|=4)
- Step A: Compute the O5 orbit via the S5 action above; implement IsO5(p).
- Step B (|A|=3): For each (α,β), enumerate the 8 triples, test IsO5, and record that at least one choice avoids O5.
- Step C (|A|=4): Enumerate compatible (B,C) (both of type C5 or H5, agreeing on f(A)), form p^B_k,p^C_k (k=1..4), and brute‑force the 2^6 choices of x_{ij}, rejecting any assignment for which some Y_k is O5. Record either a counterexample or certify all cases pass.
- Precompute F(α,β)⊆{±1}^3: the allowed triples for a 5‑set with given two fixed coordinates. Then the |A|=4 CSP checks membership of the four triangle‑triples in F(p^B_k,p^C_k).

Constructive ansatz to test
- Try x_{ij}=w_iw_j with w_i:=p^B_i·p^C_i for i∈A. For T={i,j,k} this gives a triple (w_iw_j,w_iw_k,w_jw_k) of product +1. If this never yields O5 for any (p^B_k,p^C_k), it provides a uniform construction for all |A| (worth testing; not proved).
Addendum: explicit S5 action, corrections, and computation plan

1) Explicit ε-formula for the S5 action (implementation aid)
For τ ∈ S5 and i ∈ {1,…,5}, write j := τ^{-1}(i) and define
c_j(τ) := |{k<j : τ(k) > τ(j)}| + |{k>j : τ(k) < τ(j)}|.
Then the sign multiplier in the action p′_i = ε_i(τ)·p_{τ^{-1}(i)} equals
ε_i(τ) = sgn(τ)·(−1)^{c_j(τ)}.
Sketch of justification: Let τ′ be the induced bijection from [5]\{j} to [5]\{i}. Its inversion count is inv(τ′) = inv(τ) − c_j(τ) because the inversions of τ decompose into those not involving j (which biject with the inversions of τ′) and those involving j (counted by c_j). Hence sgn(τ′) = (−1)^{inv(τ′)} = (−1)^{inv(τ)−c_j} = sgn(τ)·(−1)^{c_j}. By definition ε_i(τ) = sgn(τ′). A immediate corollary is the product identity ∏_{i=1}^5 ε_i(τ) = sgn(τ), since Σ_j c_j(τ) = 2·inv(τ).

Practical note: This eliminates ambiguity about ε and supports a robust IsO5 enumerator.

2) Correction to the “fully aligned” claim
The statement “If p^B_k = p^C_k for all k then setting all x_{ij}=δ makes p(Y_k) constant δ for all k” is false unless the common pattern (p^B_k)_{k∈A} is itself constant with value δ. Counterexample: take p^B=p^C=(+,+,−,+) and δ=+. Then for k=3 the fixed coordinates are (−,−) while the three variables are +, so p(Y_3) is not constant. A correct (weaker) statement is: if p^B_k = p^C_k = δ for all k, then x_{ij}≡δ makes every p(Y_k) constant δ, hence non-O5.

3) F(α,β) tables: compute all four cases
Define F(α,β) ⊆ {±1}^3 as the set of triples (x,y,z) for which p=(α,β,x,y,z) is non-O5. Do not assume F(+,+)=F(−,−) or F(+,-)=F(−,+) a priori; compute all four cases. This is an 8×4=32-evaluation task. Record each F(α,β) explicitly along with any observed symmetries (e.g., invariance under permuting x,y,z).

Consequence: |A|=3 reduces to checking that for each (α,β) there exists at least one triple in F(α,β). Archive one such triple per case.

4) |A|=4 CSP protocol (profiles and ansatz)
- Use the already-recorded CSP with variables x_{ij} on the six edges of K4 and four constraints Y_k. For any concrete pair (B,C) over A with B∩C=A and both omitting O5, determine the four pairs (p^B_k,p^C_k) and require the corresponding triangle-triple to lie in F(p^B_k,p^C_k).
- Profiles to test early:
  • P1: p^B≡+, p^C≡+. The corrected alignment lemma (constant case) gives the assignment x_{ij}≡+.
  • P2: p^B≡+, p^C≡−. Try the perfect-matching assignment x_{12}=x_{34}=+, others −; check all four Y_k via IsO5.
  • P3: p^B≡+, p^C drawn from an H5 labeling consistent on A; try ansatz x_{ij}=w_i w_j with w_i=p^B_i p^C_i.
  • P4: both sides H5 aligned on A; by the corrected alignment lemma with δ=+, x_{ij}≡+ works if the common 4-bit pattern on A is constant +.
- Constructive ansatz: x_{ij}:=w_i w_j where w_i:=p^B_i p^C_i. For T={i,j,k}, the triple is (w_i w_j, w_i w_k, w_j w_k) with product +1. Test this uniformly across enumerated cases; if it always avoids O5, it suggests a uniform construction for general |A|.

5) Unit tests for IsO5
- p=(+,+,+,+,+) should classify non-O5; p=(+,−,−,−,−) should classify O5; p=(+,−,+,−,+) should classify non-O5 (H5). Also verify that for a transposition τ, ∏_i p′_i flips sign (product identity) and that orbit membership is invariant under the action.

6) Checklist for the next round
- Implement IsO5 with the ε-formula; report the size of the O5 orbit found by enumeration.
- Compute and list F(α,β) for all four cases; confirm |A|=3.
- Run the |A|=4 CSP on P1–P4 first, then extend to representatives modulo S4 on A; archive satisfying/unsatisfying assignments.
- Report whether the ansatz x_{ij}=w_i w_j succeeds in all tested instances.
Additional clarifications, small lemmas, and symmetry for the 5-vector orbit

1) Semantics of the fixed bits p^B_k and p^C_k (|A|=4)
For B on A∪{b} and k∈A, define p^B_k:=f_B({b}∪(A\{k})). On the 5-set A∪{b}, the 5-vector p has entries p_x=f((A∪{b})\{x}). Thus for k∈A, p^B_k coincides with the coordinate “missing k” of p on A∪{b}: it records whether the increasing 4-tuple on {b}∪(A\{k}) is in R_B. Analogously p^C_k is the coordinate “missing k” of the 5-vector on A∪{c}.

2) Necessary local exclusions in the opposite-fixed case (rigorous justification)
- With (α,β,x,y,z)=(+;−;−,−,−) we obtain the canonical O5 representative; hence this triple is forbidden for (α,β)=(+,-).
- By central symmetry of the O5 orbit (see 4) below), (−;+;+,+,+) is also O5; hence forbidden for (α,β)=(−,+).
These give immediate unit tests for any IsO5 implementation and constraints for F(+,-) and F(−,+).

3) Edge/triangle viewpoint and the structured ansatz
- Place the six variables x_{ij} on the edges of K4 on A. The constraint Y_k uses the triangle on T=A\{k}.
- Structured ansatz: pick w_i∈{±1} on the vertices and set x_{ij}:=w_i w_j. For any triangle {i,j,k}, the triple (w_iw_j,w_iw_k,w_jw_k) has product +1, realizing exactly (+++),(+−−),(−+−),(−−+).

4) Central symmetry of the O5 orbit and a consequence for F(α,β)
There exists τ∈S5, e.g. τ=(13), with ε_i(τ)=−1 for all i (check via Lemma 6: c_j(τ) is even for every j and sgn(τ)=−1). Hence for any 5-vector p, p∈O5 iff −p∈O5. As a consequence, for the local tables F(α,β)⊆{±1}^3 (defined by p=(α,β,x,y,z) non-O5), one has
F(−α,−β) = { (−x,−y,−z) : (x,y,z)∈F(α,β) }.
Therefore it suffices to compute F(+,+) and F(+,-); the other two cases follow by triplewise negation. Do not assume any further symmetries (e.g., permutations of x,y,z or F(+,-)=F(−,+)) without verification.

5) On classifying |A|=4 instances
The constraint at each k depends on the ordered pair (p^B_k,p^C_k)∈{++,−−,+−,−+}. Reduction to the pure eq/opp pattern E={k: p^B_k=p^C_k} is insufficient unless one proves F(+,+)=F(−,−) and F(+,-)=F(−,+). Use the full type-vector in {++,−−,+−,−+}^A. By 4), it is enough to compute and store F(+,+), F(+,-), and infer the other two by negation.

6) Implementation checklist (precise conventions)
- Fix, once and for all, an ordering of the five vertices of each Y_k with the first two positions corresponding to the coordinates “missing c” and “missing b”, respectively, and the last three to the vertices of A\{k} in increasing order. Use the same convention for constructing p=(α,β,x,y,z) when populating F(α,β).
- Implement IsO5 via Lemma 6. Unit tests: (+,+,+,+,+) is non-O5; (+,−,−,−,−) is O5; (+,−,+,−,+) is non-O5. Report the orbit size and verify closure under the action.
- Compute F(+,+), F(+,-); obtain F(−,−), F(−,+) by triplewise negation. Conclude |A|=3 by listing one admissible triple for each (α,β).
- For |A|=4, enumerate realizable type-vectors from actual pairs (B,C) (both C5/H5, agreeing on A), and brute-force 2^6 assignments to x_{ij}. Archive SAT witnesses or UNSAT certificates. Test the ansatz x_{ij}=w_i w_j with w_i=p^B_i p^C_i across the same cases.

These additions lock down the symmetry that underlies Claim N1, correct the eq/opp reduction, and make the forthcoming computations unambiguous and reusable.
Uniform 2+2− assignment and a corrected conditional reduction for |A|=4

Ordering convention for local F-tables
- For any 5-set Y_k={b,c}∪(A\{k}) with A={1,2,3,4} and i<j<ℓ the increasing order on A\{k}, we use the coordinate order
  p(Y_k) = (p_{\text{missing }c}, p_{\text{missing }b}, p_{\text{missing }i}, p_{\text{missing }j}, p_{\text{missing }\ell}).
- With this convention, F(α,β)⊆{±1}^3 is the set of ordered triples (x,y,z) such that (α,β,x,y,z) is non-O5.

Lemma A (2+2 vertex-sign ansatz yields (+−−)-type on every triangle).
- Let w_i∈{±1} (i∈A) have exactly two + and two −, and set x_{ij}:=w_i w_j. For each k, the triple (x,y,z) contributed by the three edges inside A\{k} is, up to permutation of its three coordinates, of the form (+,−,−).
- Proof. If k is from the + vertices, then A\{k} contains {+,−,−}; the pairwise products are (−,−,+). If k is from the − vertices, then A\{k} contains {+, +, −}; the pairwise products are (+,−,−). In either case the unordered triple has one + and two −. The order within (x,y,z) depends on the fixed coordinate convention but is a permutation of (+,−,−). ∎

Corrected conditional reduction for |A|=4
- Conditional Proposition (uniform 2+2 ansatz). Fix the above ordering convention. Suppose that for each (α,β)∈{++, +−, −+, −−}, all three permutations of (+,−,−) lie in F(α,β). Then for every one-point instance over |A|=4 there exists an amalgam D in H obtained by the uniform assignment x_{ij}=w_i w_j with some w having exactly two + and two − on A.
  • Proof. By Lemma A, for every k the ordered triple on Y_k is a permutation of (+,−,−). By hypothesis, this ordered triple is in F(p^B_k,p^C_k) for each k, hence none of the four Y_k is O5, and D∈H. ∎
- Unconditional subcase (equal-constant fixed pairs). If (p^B_k,p^C_k)=(δ,δ) for all k (with δ∈{±1}), then the constant assignment x_{ij}≡δ makes every p(Y_k) equal to (δ,δ,δ,δ,δ), which is ±C5 and therefore non-O5. Hence an amalgam exists in this subcase.

Hard local exclusion in the opposite-fixed case
- For (α,β)=(+,-), the triple (−,−,−) is forbidden: p=(+,-,−,−,−) is the canonical O5 representative. By central symmetry of the S5 action, (+++) is forbidden for (α,β)=(−,+) as well. These serve as unit checks for IsO5 and constraints in populating F.

Notes on earlier claims
- The claim “(+++) is forbidden in F(+,-)” has not been proved. The argument via “flipping one coordinate” is not valid under the S5 signed action. Treat this as a computational check when populating F.

Computational checklist (precise and minimal)
1) Implement IsO5 via Lemma 6; unit tests: (+,+,+,+,+) non-O5; (+,−,−,−,−) O5; (+,−,+,−,+) non-O5. Report the size of the O5 orbit and closure under the action.
2) Compute F(+,+) and F(+,-) completely (8 triples each) under the above ordering; use Corollary 9 to derive F(−,−) and F(−,+) by triplewise negation. Do not assume S3-invariance.
3) Test the 12 memberships: for each (α,β)∈{++, +−, −+, −−}, verify that all three permutations of (+,−,−) lie in F(α,β).
4) If step 3 passes, conclude by the conditional proposition that the |A|=4 one-point step is uniformly solvable by a 2+2 ansatz; with Lemma 2 this yields AP.
5) If step 3 fails, run the 2^6 CSP for the offending type-profile to search for a different satisfying assignment or produce an UNSAT certificate (listing, for each assignment, a Y_k showing O5).

Implementation detail retained: the structured ansatz yields triangle triples of product +1, hence it can never realize (−,+,+) or (−,−,−). Keep this in mind when interpreting F-tables and debugging assignments.
Updates: explicit |A|=3 solution, concrete |A|=4 tests, and a solvable subclass

Coordinate convention reminder (used below)
- For Y_k={b,c}∪(A\{k}) with A={1,2,3,4} and i<j<ℓ the increasing order on A\{k}, we encode
  p(Y_k) = (p_{missing c}, p_{missing b}, p_{missing i}, p_{missing j}, p_{missing ℓ}).
- Mapping of the last three coordinates to edge variables on K4[A]:
  • p_{missing i} = x_{jℓ},  p_{missing j} = x_{iℓ},  p_{missing ℓ} = x_{ij}.

|A|=3 one‑point amalgamation solved (constructive)
- Let A have size 3. For Y=A∪{b,c} write p(Y)=(α,β,x,y,z) in the above order, where α is fixed by B (missing c), β by C (missing b), and x,y,z are the cross 4‑sets. The following choices always avoid O5:
  • (α,β)=(+,+): take (x,y,z)=(+,+,+) → p(Y)=(+,+,+,+,+)=C5.
  • (α,β)=(−,−): take (x,y,z)=(−,−,−) → p(Y)=(−,−,−,−,−)=−C5.
  • (α,β)=(+,-): take (x,y,z)=(+,-,+) → p(Y)=(+,-,+,-,+)=H5.
  • (α,β)=(−,+): take (x,y,z)=(−,+,−) → p(Y)=(−,+,−,+,−)=−H5.
  Hence the one‑point extension over |A|=3 always exists in H.

Concrete |A|=4 test profiles for the 2+2 ansatz (w=(+,+,−,−), x_{ij}=w_i w_j)
- Triangles (Y_k):
  • k=1: (x_{23},x_{24},x_{34})=(−,−,+) → p(Y_1)=(p^B_1,p^C_1,−,−,+).
  • k=2: (x_{13},x_{14},x_{34})=(−,−,+) → p(Y_2)=(p^B_2,p^C_2,−,−,+).
  • k=3: (x_{12},x_{14},x_{24})=(+,-,−) → p(Y_3)=(p^B_3,p^C_3,+,−,−).
  • k=4: (x_{12},x_{13},x_{23})=(+,-,−) → p(Y_4)=(p^B_4,p^C_4,+,−,−).
- Profiles to check via IsO5 (the first two coordinates are specialized as follows):
  • P1: p^B≡+, p^C≡+ → test (+,+,−,−,+) and (+,+,+,−,−).
  • P2: p^B≡+, p^C≡− → test (+,−,−,−,+) and (+,−,+,−,−).
  • P3: p^B≡+, p^C=(+,-,+,-) (aligned H5 on A∪{c}) → same two vectors as P2.
A single IsO5 pass on these four vectors settles P1–P3 for the 2+2 ansatz.

A solvable subclass for |A|=4 via a “local H5 witness” pattern
- Prescribe for each k a local triple (x_{jℓ}, x_{iℓ}, x_{ij}) = (α_k, β_k, α_k), where (α_k,β_k)=(p^B_k,p^C_k) and i<j<ℓ enumerate A\{k}.
- Shared‑edge consistency forces:
  • α_1=α_2=α_3=α_4;  β_1=α_3;  β_4=α_2;  β_2=β_3.
- If the given one‑point data (B,C) satisfy these equalities, then for each k we get p(Y_k)=(α_k,β_k,α_k,β_k,α_k), which is ±C5 if α_k=β_k, else ±H5. Hence an amalgam exists for this subclass.

Caveat on the LLL heuristic
- The symmetric LLL condition e·p·(d+1)≤1 with d=3 would require p≤1/(4e)≈0.091. If |{±1}^3\F(α,β)|≤1 then p=1/8≈0.125, which does not meet the symmetric bound. Treat any LLL‑based argument as heuristic unless we deploy a sharper criterion tailored to our dependency graph.

Actionable checklist (minimal computation to unblock |A|=4)
1) Implement IsO5 (Lemma 6), run unit tests, and report the O5 orbit size.
2) Test the four 5‑vectors from P1–P3 above.
3) Compute F(+,+) and F(+,-) fully (8 triples each) under the fixed ordering; obtain the other two by triplewise negation. Archive the tables.
4) If all permutations of (+,−,−) lie in each F(α,β), invoke Proposition 11 (uniform 2+2). Otherwise, brute‑force the 2^6 CSP per realized 4‑type profile and record SAT witnesses or an UNSAT certificate.
New rigorous tools and corrections (to be used going forward)

1) Union‑bound feasibility for the |A|=4 CSP
- Statement. In the |A|=4 CSP with six edge variables x_{ij} and four triangle constraints Y_k, if for each k the local table F(p^B_k,p^C_k) forbids at most one ordered triple (i.e., |{±1}^3\F(p^B_k,p^C_k)| ≤ 1), then there exists a satisfying global assignment.
- Reason. Each forbidden triple for a fixed triangle rules out exactly 2^3 global assignments (the other 3 edges are free). With at most one forbidden triple per triangle, at most 4·2^3=32 of the 64 assignments are excluded. Hence at least 32 assignments remain.
- Consequence. If a small computation confirms |{±1}^3\F(+,+)| ≤ 1 and |{±1}^3\F(+,-)| ≤ 1 (the other two cases follow by triplewise negation; Cor. 9), the |A|=4 step follows immediately without any 6‑variable search.

2) Specialization of the S5 action to the O5 representative (implementation aid)
- For e_O=(+,-,-,-,-) and τ∈S5 with ε(τ)=(ε_1,…,ε_5), let i0:=τ(1). Then the image p′ under the signed action satisfies p′_i = ε_i if i=i0 and p′_i = −ε_i otherwise. Equivalently, p′ is obtained from ε by flipping all coordinates except i0. Thus p∈O5 iff ∃ε∈E:={ε(τ):τ∈S5} and i0 with p_i=−ε_i for i≠i0 and p_{i0}=ε_{i0}.
- Note. This enables a very compact IsO5: precompute E (120 evaluations) and check the 5·|E| candidates.

3) Parity invariant across the four triangles
- For any assignment x_{ij}∈{±1}, the product of the triangle‑products over the four Y_k equals +1. Equivalently, an odd number of triangles cannot have triple product −1. Reason: each x_{ij} appears in exactly two triangle‑products.

4) Distribution of triangle triples under vertex‑sign assignments
- If x_{ij}=w_i w_j with w∈{±1}^A, then on any triangle the triple is either (+++) (when the three w are equal) or a permutation of (+,−,−) (otherwise). In particular: 4+/0− (or 0+/4−) yields four (+++); 3+/1− (or 1+/3−) yields exactly one (+++); 2+/2− yields no (+++) and all four triangles are permutations of (+,−,−).

Corrections to prior claims
- False: “If T_B=C5 then (p^B_k)_{k∈A} is constant; if T_B=H5 then it is 2+2.” Counterexample: for a C5 5‑set, the 5‑vector equals ε(τ) for some τ; e.g., τ=(12) gives ε=(+,+,−,−,−), which is not constant on A. Do not use this classification to prune cases.
- Unproved (and currently unknown): (+++)∉F(+,-). The argument that tried to force this from Lemma 8 incorrectly treats the free index i0. We keep only the rigorously proved exclusion (---)∉F(+,-) (output.md Lemma 13). The status of (+++) in F(+,-) must be decided computationally.

Coordinate convention (reminder)
- For Y_k={b,c}∪(A\{k}) with A={1,2,3,4} and i<j<ℓ the increasing order on A\{k}, we encode p(Y_k)=(p_{missing c}, p_{missing b}, p_{missing i}, p_{missing j}, p_{missing ℓ}), with p_{missing i}=x_{jℓ}, p_{missing j}=x_{iℓ}, p_{missing ℓ}=x_{ij}.

Actionable checklist (minimal computation to unblock |A|=4)
- Implement IsO5 using Lemma 6; validate unit tests: (+,+,+,+,+) ∉O5; (+,−,−,−,−) ∈O5; (+,−,+,−,+) ∉O5. Also verify the sample ε(τ) values listed in prior notes.
- Compute F(+,+) and F(+,-) completely (8 triples each) under the fixed coordinate order; derive F(−,−), F(−,+) by triplewise negation. Report sizes and explicit complements.
- If both complements have size ≤1, conclude |A|=4 by the union‑bound lemma and hence AP via Lemma 2. If, stronger, both F tables are exactly “triple product +1,” record the uniform construction x_{ij}=w_i w_j and close.
- If not, test whether all permutations of (+,−,−) lie in F(+,+) and F(+,-); if yes, apply Proposition 11 (uniform 2+2). Otherwise brute‑force the 2^6 CSP on the realized profiles, using the parity invariant to prune, and archive SAT/UNSAT witnesses.


=== output.md ===
Proposition 1 (Orientation function model).
For a finite set V, giving a 4‑hypertournament structure (V,R) satisfying: (i) all tuples in R have distinct entries; (ii) R is closed under even permutations of coordinates; (iii) for every 4‑tuple of distinct vertices (x1,x2,x3,x4), exactly one of (x1,x2,x3,x4) and (x2,x1,x3,x4) lies in R; is equivalent to giving an arbitrary function f:[V]^4→{±1}.
Proof. Given f, declare (x1,x2,x3,x4)∈R iff the permutation from the increasing ordering of S={x1,x2,x3,x4} to (x1,…,x4) has sign equal to f(S). This satisfies (i)–(iii) by construction. Conversely, given R with (i)–(iii), fix any 4‑set S and any increasing ordering s of S. By (iii), exactly one of s and its swap lies in R; define f(S)=+1 if s∈R and f(S)=−1 otherwise. By (ii) and (iii), membership of any ordered tuple from S depends only on the parity relative to s, so f is well defined and recovers R. ∎

Lemma 2 (One‑point amalgamation suffices for AP in H).
Let H be the class of finite 4‑hypertournaments omitting O5. Suppose that whenever A∈H and B=A∪{b}∈H and C=A∪{c}∈H with B∩C=A, there exists D∈H on A∪{b,c} extending both B and C. Then H has the amalgamation property.
Proof. Given B0,B1∈H over A, enumerate C\A as c1,…,ck and set A0:=A. Inductively, amalgamate Bi with Ai∪{ci} over Ai to obtain Bi+1 on Ai+1:=Ai∪{ci}. At each step, by hypothesis, all 5‑sets involving the new vertex ci avoid O5, and previously constructed parts are unchanged. After k steps we obtain an amalgam D∈H of B0 and C over A. ∎

Proposition 3 (CSP formulation of the |A|=4 one‑point step).
Let A={1,2,3,4}, b, c new. Given B on A∪{b} and C on A∪{c} in H that agree on A, any amalgam D on A∪{b,c} is determined on new 4‑sets by the six values x_{ij}:=f({i,j,b,c}) (1≤i<j≤4). The only new 5‑sets are Y_k:={b,c}∪(A\{k}) for k=1,2,3,4. Writing p^B_k:=f_B({b}∪(A\{k})) and p^C_k:=f_C({c}∪(A\{k})), the 5‑vector p(Y_k) has two fixed coordinates (missing c gives p^B_k; missing b gives p^C_k) and three coordinates equal to the x_{ij} for {i,j}⊂A\{k}. D∈H iff for each k, p(Y_k) is not in the O5 orbit.
Proof. All 4‑sets contained in B or C are already fixed. The only 4‑sets not contained in B or C are precisely the six X_{ij}={i,j,b,c}. The only new 5‑subsets of A∪{b,c} (relative to B and C) are those that contain both b and c; there are exactly four, the Y_k. Their p‑vectors depend on the listed values. Avoidance of O5 on all 5‑sets is thus equivalent to the stated four constraints. ∎

Corollary 4 (Trivial one‑point cases |A|≤2).
If |A|≤2, then one‑point amalgamation always succeeds in H.
Proof. When |A|≤2 there are no 3‑subsets of A, hence no 5‑sets of the form {b,c}∪T with T⊂A of size 3. Thus there are no new 5‑set constraints; any assignment to cross 4‑sets yields an amalgam in H. ∎

Fact 5 (Switching yields a 4‑hypertournament but may change 5‑types).
For ε:V→{±1}, define f^ε(S):=(∏_{v∈S}ε(v))·f(S). Then f^ε encodes a 4‑hypertournament. However, for a fixed 5‑set X, switching at v∈X flips the four coordinates of p(X) corresponding to 4‑sets containing v and leaves the coordinate “missing v” unchanged; this can change the isomorphism type on X (e.g., an O5 representative (+,-,-,-,-) switches at its ‘+’ vertex to (+,+,+,+,+), a C5 representative). ∎
Lemma 6 (Explicit formula for the S5 action on 5-vectors).
Let X be a 5-set equipped with an increasing labeling {1,2,3,4,5}. For τ∈S5 and i∈{1,…,5}, write j:=τ^{-1}(i) and define
c_j(τ) := |{k<j : τ(k) > τ(j)}| + |{k>j : τ(k) < τ(j)}|.
In the isomorphism action on p∈{±1}^X given by p′_i = ε_i(τ)·p_{τ^{-1}(i)}, the sign factor is
ε_i(τ) = sgn(τ)·(−1)^{c_j(τ)}.

Proof. Let τ′ be the induced bijection from [5]\{j} to [5]\{i}, obtained by deleting position j in the domain and value i in the codomain. By definition, ε_i(τ)=sgn(τ′). The inversions of τ split into two disjoint families: those not involving j (which correspond bijectively to inversions of τ′) and those involving j, whose number is c_j(τ) by definition. Hence inv(τ)=inv(τ′)+c_j(τ), so sgn(τ)= (−1)^{inv(τ)} = (−1)^{inv(τ′)+c_j(τ)} = sgn(τ′)·(−1)^{c_j(τ)} = ε_i(τ)·(−1)^{c_j(τ)}. Rearranging gives the claimed formula. ∎

Corollary 7 (Product identity for ε-factors).
For τ∈S5, one has ∏_{i=1}^5 ε_i(τ) = sgn(τ).

Proof. Using ε_i(τ) = sgn(τ)·(−1)^{c_{τ^{-1}(i)}(τ)} and the fact that each inversion contributes 1 to c_a and 1 to c_b, we have Σ_{j=1}^5 c_j(τ) = 2·inv(τ). Therefore ∏_{i=1}^5 ε_i(τ) = sgn(τ)^5 · (−1)^{Σ_j c_j(τ)} = sgn(τ)·(−1)^{2·inv(τ)} = sgn(τ). ∎
Lemma 8 (Central symmetry of the O5 orbit).
There exists τ∈S5 with ε_i(τ)=−1 for all i. In particular, for any 5-vector p one has p∈O5 if and only if −p∈O5. Thus the O5 orbit is closed under global sign reversal.

Proof. Take τ=(13) in one-line notation [3,2,1,4,5]. By Lemma 6, for j:=τ^{-1}(i), ε_i(τ)=sgn(τ)·(−1)^{c_j(τ)}. A direct count gives c_1(τ)=c_2(τ)=c_3(τ)=2 and c_4(τ)=c_5(τ)=0, so c_j(τ) is even for all j. Since sgn(τ)=−1, we get ε_i(τ)=−1 for every i. If q is in the O5 orbit, then so is R_τ(q)=−q∘τ^{−1}. As σ ranges over S5, the set {−R_σ(e1)} equals {R_{τσ}(e1):σ∈S5}, hence −O5=O5. ∎

Corollary 9 (Sign-flip symmetry for local tables F).
For F(α,β)⊆{±1}^3 defined by: (x,y,z)∈F(α,β) iff (α,β,x,y,z) is non-O5, one has
F(−α,−β) = { (−x,−y,−z) : (x,y,z)∈F(α,β) }.

Proof. (α,β,x,y,z) is non-O5 iff its global negation (−α,−β,−x,−y,−z) is non-O5 by Lemma 8. This is exactly the stated correspondence. ∎
Lemma 10 (2+2 vertex signs induce (+−−)-type on every triangle).
Let A={1,2,3,4} and choose w_i∈{±1} with exactly two plus and two minus. Define x_{ij}:=w_i w_j for 1≤i<j≤4. For each k∈A, on the triangle induced by A\{k} the ordered triple of edge-variables (x,y,z) (in any fixed coordinate convention) is a permutation of (+,−,−).

Proof. If k is one of the + vertices, then A\{k} contains one + and two −; the three pairwise products are (−,−,+). If k is one of the − vertices, then A\{k} contains two + and one −; the three pairwise products are (+,−,−). Thus in either case the unordered triple has signs {+ , − , −}. The ordering of (x,y,z) depends on the fixed convention but is a permutation of (+,−,−). ∎

Proposition 11 (Conditional |A|=4 amalgamation via a uniform 2+2 ansatz).
Fix a consistent ordering convention for the last three coordinates in the definition of F(α,β) (e.g., by increasing order of the three vertices in A\{k}). Suppose that for each (α,β)∈{++, +−, −+, −−}, all three permutations of (+,−,−) belong to F(α,β). Then for every one-point diagram over |A|=4 there exists an amalgam D∈H obtained by setting x_{ij}=w_i w_j for some choice of w with exactly two + and two − on A.

Proof. Choose any w with exactly two + and two − on A and set x_{ij}=w_i w_j. By Lemma 10, for each k the ordered triple contributed by the three edges in A\{k} is a permutation of (+,−,−). By hypothesis, this ordered triple lies in F(p^B_k,p^C_k) for every k, so no Y_k is of type O5. Therefore the resulting structure on A∪{b,c} is in H and extends both B and C. ∎

Proposition 12 (Equal-constant fixed pairs are solvable by a constant assignment).
In the |A|=4 one-point amalgamation problem, if (p^B_k,p^C_k)=(δ,δ) for all k∈A with a fixed δ∈{±1}, then there exists an amalgam D∈H obtained by setting x_{ij}≡δ.

Proof. With this assignment, for each k the 5-vector p(Y_k) equals (δ,δ,δ,δ,δ), which is ±C5. Since ±C5 is not in the O5 orbit, each Y_k is non-O5 and the amalgam lies in H. ∎

Lemma 13 (A hard local exclusion in the opposite-fixed case).
For (α,β)=(+,-), the triple (−,−,−) is forbidden: (x,y,z)=(−,−,−)∉F(+,-). Symmetrically, for (α,β)=(−,+), (+++)∉F(−,+).

Proof. For (α,β)=(+,-) and (x,y,z)=(−,−,−) one has p=(+,-,−,−,−), which is the canonical O5 representative; hence it is in the O5 orbit. By Lemma 8 (global sign-reversal is in the orbit), (−,+,+,+,+) is also in O5, yielding the symmetric statement. ∎
Proposition 14 (The one-point amalgamation over |A|=3 always succeeds, constructively).
Let A have size 3 and let B=A∪{b} and C=A∪{c} lie in H and agree on A. On Y:=A∪{b,c}, write p(Y)=(α,β,x,y,z) in the coordinate order (missing c, missing b, then missing the elements of A in increasing order). Then for each (α,β)∈{±1}^2 there is a choice of (x,y,z)∈{±1}^3 such that p(Y) is not in the O5 orbit, namely:
- If (α,β)=(+,+), take (x,y,z)=(+,+,+), so p(Y)=(+,+,+,+,+)=C5.
- If (α,β)=(−,−), take (x,y,z)=(−,−,−), so p(Y)=(−,−,−,−,−)=−C5.
- If (α,β)=(+,-), take (x,y,z)=(+,-,+), so p(Y)=(+,-,+,-,+)=H5.
- If (α,β)=(−,+), take (x,y,z)=(−,+,−), so p(Y)=(−,+,−,+,−)=−H5.
In all cases Y is non‑O5, hence there exists an amalgam D∈H on A∪{b,c} extending B and C.

Proof. The only new 5‑set is Y=A∪{b,c}. The displayed assignments set its 5‑vector equal to one of ±C5 or ±H5 in the fixed coordinate order, and these are not in the O5 orbit. There are no other new 5‑sets to check. Hence the extension lies in H. ∎

Proposition 15 (A solvable subclass for |A|=4 via a local H5 pattern with consistency).
Let A={1,2,3,4}, and let B=A∪{b} and C=A∪{c} lie in H and agree on A. For k∈A, write (α_k,β_k):=(p^B_k,p^C_k). Adopt the coordinate order
p(Y_k)=(p_{missing c},p_{missing b},p_{missing i},p_{missing j},p_{missing ℓ}) for Y_k={b,c}∪(A\{k}) with i<j<ℓ the increasing order on A\{k}. Suppose the type‑data satisfy the equalities
α_1=α_2=α_3=α_4,
β_1=α_3,
β_4=α_2,
β_2=β_3.
Then there exists an assignment to the six cross 4‑sets x_{ij}=f({i,j,b,c}) such that, for each k, p(Y_k) is ±C5 if α_k=β_k and ±H5 otherwise. In particular, an amalgam D∈H exists.

Proof. Define the triple of edge variables on Y_k by (x_{jℓ},x_{iℓ},x_{ij})=(α_k,β_k,α_k), where {i,j,ℓ}=A\{k} with i<j<ℓ. Each edge variable x_{ij} appears in exactly two such triples, corresponding to the two values of k∈A\{i,j}. The displayed equalities on the α_k and β_k are exactly those required to make these two prescriptions agree for every edge (a direct check using the mapping p_{missing i}=x_{jℓ}, p_{missing j}=x_{iℓ}, p_{missing ℓ}=x_{ij}). With this consistent assignment, p(Y_k)=(α_k,β_k,α_k,β_k,α_k), which is ±C5 if α_k=β_k and ±H5 otherwise. None of these are in the O5 orbit, so all four Y_k are non‑O5 and the resulting structure is an amalgam in H. ∎
Lemma 16 (Union‑bound feasibility for the |A|=4 CSP).
In the |A|=4 one‑point CSP (Proposition 3), suppose that for each k∈{1,2,3,4} the local table forbids at most one ordered triple, i.e., |{±1}^3\F(p^B_k,p^C_k)| ≤ 1. Then there exists an assignment to the six variables x_{ij} that satisfies all four constraints (so an amalgam in H exists).

Proof. There are 2^6=64 global assignments to the six variables. Fix k and a forbidden ordered triple t on its three local variables; the set of global assignments inducing t on that triangle has size 2^3 (the other three edge‑variables are free). Thus forbidding at most one triple per triangle eliminates at most 4·2^3=32 global assignments in total. Therefore at least 64−32=32 assignments remain that satisfy all four local constraints. ∎

Corollary 16.1 (A small‑table criterion for the |A|=4 step).
If the two base tables satisfy |{±1}^3\F(+,+)| ≤ 1 and |{±1}^3\F(+,-)| ≤ 1 (so, by Corollary 9, the same holds for F(−,−) and F(−,+) by triplewise negation), then for every one‑point diagram over |A|=4 there exists an amalgam D∈H.

Proof. For any instance, each Y_k uses one of the four pairs (p^B_k,p^C_k)∈{++,−−,+−,−+}; by the stated hypothesis and Corollary 9, each corresponding table forbids at most one triple. Apply Lemma 16. ∎

Lemma 17 (Global parity constraint across the four triangles).
In the |A|=4 CSP, for any assignment x_{ij}∈{±1}, the product of the triangle‑products over the four Y_k equals +1. Equivalently, an odd number of triangles cannot have triple‑product −1.

Proof. Each triangle‑product equals the product of its three edge‑variables. Multiplying the four triangle‑products together, each edge‑variable x_{ij} appears exactly twice (in the two triangles omitting i and j), hence contributes x_{ij}^2=1 to the total product. Therefore the total product is +1. ∎


Current round tag: Round 0007 — 2025-08-27T19:47:08.905002Z
Return ONLY valid JSON with a single field:
{ "progress_md": "<your progress notes for this round>" }

Read output.md. If you spot gaps, errors, or missing justifications in output.md, point them out clearly inside progress_md.
