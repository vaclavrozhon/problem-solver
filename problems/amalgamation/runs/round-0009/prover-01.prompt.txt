--- SYSTEM ---
You are a research mathematician. 

You are being run in a loop with a verifier that checks rigor. Your goal is to make **incremental, auditable progress**. You are not expected to solve the problem at once, but to generate new, testable ideas.

Inputs: 
- task statement 
- notes.md (summary of past progress; optional) 
- output.md (rigorously proven results curated so far; optional) 
- summary of past rounds (optional) 
- possibly some reference papers.

What counts as progress:
- Extract small lemmas/heuristics from literature and state them cleanly with one-line "why useful here".
- Explore small examples & try to break your own claims with toy counterexamples.
- Prove special cases or nontrivial bounds.
- If an approach fails, explain crisply why.
- Point out flaws in notes.md or output.md (but do not rewrite output.md yourself).

**Discipline.** 
- Read notes, outputs, summaries carefully before proposing new work. 
- Reference papers if relevant, but focus on *incremental, checkable steps*. 
- Do not output Markdown code fences, only raw JSON. 
- Length: at least ~200 words. 
- Organize your reasoning with short headings (Ideas, Examples, Obstacles, Next steps), make clear what your claims are and how they are supported. 
- Remember: the verifier curates notes and outputs, you only suggest.

**Return strictly JSON**:
{
  "progress_md": "Your progress notes for this round in Markdown (KaTeX allowed). Point out any gaps in output.md clearly. Do not modify output.md directly."
}


--- USER ---
Work on this problem context:

=== task.txt ===

An n-hypertournament is a structure with one n-ary relation R which is injective (that is, there are no tuples with repeated occurrences of vertices in R) such that every substructure on n vertices is preserved precisely by the even permutations. In other words, a structure (A,R), where R is an n-ary relation, is an n-hypertournament if the following three conditions are satisfied:

1) If (x_1, ..., x_n) \in R then x_1, ..., x_n are pairwise distinct.
2) If (x_1, ..., x_n) \in R and \sigma is an even permutation of {1,...,n} then (x_{\sigma(1)}, ..., x_{\sigma(n)}) \in R.
3) For every distinct x_1, x_2, ..., x_n of A it holds that exactly one of (x_1, x_2, x_3, ..., x_n) and (x_2, x_1, x_3, ..., x_n) is in R.

Now, given an n-hypertournament (A,R) with vertex set A = {1,...,n+1}, one can concisely describe it by recording for which i \in A it holds that the tuple (1,...,i-1,i+1,...,n+1), which contains all vertices of A except i in the natural order, is in the relation R; we call these the POSITIVE vertices. It turns out that there are only a few (namely ceil((n+2)/2)) isomorphism types of n-hypertournaments on n+1 vertices. For n = 4, they are the following three (we assume that their vertex set is {1,...,n+1} and, in accordance with the previous sentence, we describe them by the set of positive vertices):

1) C_5, for which the set of positive vertices is empty. (Note, however, that with a different enumeration, one could also describe C_5 by having all vertices positive, or for example by having precisely positive vertices {1,2}, and there are many more possibilities, all of which are isomorphic as 4-hypertournaments.)
2) O_5, for which only the vertex 2 is positive. (Again, there are many more descriptions based on what enumeration of the vertex set one chooses.)
3) H_5, for which the set of positive vertices is {1,3,5} (equivalently, one could also have the set of positive vertices be {2,4}, these are the only possibilities).

Next, let H be the class of all finite 4-hypertournaments with no substructure isomorphic to O_5. Your task is to decide whether H has the amalgamation property. That is, is the following statement true:

For every A, B, C in H such that A is an (induced) substructure of B and C and B \cap C = A (that is, B and C only share vertices of A) is there D in H such that both B and C are substructures of D (that is, the inclusions are embeddings, so note in particular that A is also a substructure of D and that the copies of B and C in D "overlap" at least over A).

=== progress.md ===
...
 (α,β)=(−,+), both (+++) and (---) are forbidden by global sign reversal (output.md Cor. 9).
- Why useful: This fully classifies the all-equal triples for the opposite-fixed case without computation, tightening the F(+,-) and F(−,+) tables and providing robust unit tests for IsO5.

Hand-verified ε-examples (sanity catalog for the verifier)
- Using Lemma 6, I computed ε(τ) for small τ (useful to debug IsO5):
  • id: ε=(+,+,+,+,+), Σε=+5.
  • (12): ε=(+,+,−,−,−), Σε=−1.
  • (123): ε=(+,−,−,+,+), Σε=+1.
  • (12)(34): ε=(−,−,−,−,+), Σε=−3.
  • (13): ε=(−,−,−,−,−), Σε=−5 (the “central” flip from Lemma 8).
  These confirm that Σε can realize ±5, ±3, ±1, so constraints based solely on Σε (or plus-counts) cannot rule out O5 membership.

Example checks guided by the O5-image formula
- For p=(+,-,+,-,-): considering i_0=2 gives ε=(−,−,−,+,+); i_0=1 gives ε=(+,+,−,+,+). Both patterns appear plausible from small τ, but I do not assert membership either way; this illustrates how the formula reduces a membership query to “does this ε occur as ε(τ)?”, which is trivial to decide computationally and infeasible by hand enumeration.

New solvable family via 2+2 vertex-sign ansatz (synthesis and scope)
- Recall Lemma 10 and Prop. 11. Under x_{ij}=w_iw_j with exactly two + and two − on A, each triangle-triple is a permutation of (+,−,−). Thus, if the verifier confirms that every F(α,β) contains all three permutations of (+,−,−), then the one-point step over |A|=4 is uniformly solvable (Prop. 11), implying AP for H (Lemma 2).
- I emphasize that the only remaining local memberships to check for this route are the 12 entries: for each (α,β)∈{++, +−, −+, −−}, the three permutations of (+,−,−). Cor. 9 halves this (the two opposite-sign cases follow by triplewise negation), so only F(+,+) and F(+,-) need computing.

Refined classification of 4-bit type patterns on A (search-space reduction)
- Observation (C5): For any B of type C5 on A∪{b}, the 5-vector on that 5-set is constant ±, hence the 4-bit pattern (p^B_k)_{k∈A} is constant (all equal) as well. This confirms that, in the one-point data, any non-constant 4-bit pattern on A must come from an H5 side.
- Heuristic (H5, to be verified computationally): For any C of type H5 on A∪{c}, the 4-bit pattern (p^C_k)_{k∈A} consists of exactly two + and two − (never all equal). The canonical representative (+,−,+,−) exhibits this; testing whether all six 2–2 patterns occur will reduce the |A|=4 enumeration by symmetry. Action item: Enumerate the orbit of H5 under relabelings that fix c and record the distinct 4-bit patterns on A; this bounds the profile list to check.

Obstacles and why a small computation remains necessary
- Attempts to certify (+,−,−)-admissibility analytically in F(+,+) or F(+,-) via parity/sum invariants fail because the S_5 signed action realizes ε with all odd sums, and the O5 orbit is large. The O5-image formula reduces membership to ε-realizability, yet characterizing the full image E={ε(τ):τ∈S_5} pen-and-paper appears cumbersome. A 120-step enumeration is the right tool here.

Actionable next steps for the verifier (precise and minimal)
1) Implement IsO5 via output.md Lemma 6. Unit tests: (+,+,+,+,+) non‑O5; (+,−,−,−,−) O5; (+,−,+,−,+) non‑O5; and the five ε-vectors above should appear for the listed τ.
2) Populate F(+,+) and F(+,-) (8 triples each) under the fixed coordinate order (notes/output). Obtain F(−,−), F(−,+) by triplewise negation (Cor. 9). Confirm the proven exclusions: for (+,-), exclude (+++) and (---).
3) Check the 12 key memberships: for each (α,β), all permutations of (+,−,−) belong to F(α,β). If yes, conclude the |A|=4 one‑point step via Prop. 11 and hence AP (Lemma 2).
4) If any of those memberships fail, revert to the 2^6 brute‑force CSP per realized (B,C) profile (with the H5 4-bit patterns catalogued as above). Either archive SAT assignments or produce an UNSAT certificate.

Gaps and clarifications in output.md
- Prop. 11 remains conditional on the F-table check; it should eventually cite explicitly which 12 memberships were verified. The present round supplies a complete proof that (+++) and (---) are both forbidden in F(+,-), filling a previously flagged gap.
- The precise ordering of the last three coordinates in p(Y_k) is critical and already stated; when the F-tables are recorded, repeat this convention in output.md adjacent to their definition for reproducibility.

Summary of this round’s contributions
- Introduced and proved the O5-image formula p = −ε off one coordinate, enabling quick hand checks and guiding IsO5 implementation.
- Fully classified “all-equal” triples in the opposite-fixed case as O5 (forbidden) by a short, rigorous argument.
- Provided computed ε-vectors for several small τ as sanity data.
- Outlined a minimal verification plan: compute two F-tables, test 12 memberships to unlock the uniform 2+2 solution; otherwise, fall back to the tiny 2^6 CSP with a reduced profile list via H5’s 4-bit patterns on A.

## Round 0007 — 2025-08-27T19:51:54.349723Z

Round 0007 — Focus: tightening IsO5 and the local F-tables; cocycle and generator analysis; implementable criteria

Status recap
- The reduction to one-point amalgamation and the |A|=4 CSP is sound (output.md Props. 1–3). The small cases |A|≤2 and |A|=3 are closed (Cor. 4, Prop. 14). We have two key tools now recorded: central symmetry (Lemma 8) and the global parity invariant across the four triangles (Lemma 17). The union-bound feasibility criterion (Lemma 16) gives a decisive small-table condition.
- The remaining bottleneck is to populate F(+,+) and F(+,-) (and derive the other two by Cor. 9), and then either apply Lemma 16 or the 2+2 construction (Prop. 11) to finish |A|=4.

New micro-lemmas (auditable) — structure of ε(τ) and a cocycle
1) Lemma 18 (ε-cocycle for composition).
- Statement: For τ,σ∈S5 and i∈{1,…,5}, one has ε_i(τσ) = ε_i(τ)·ε_{τ^{-1}(i)}(σ).
- Proof: For p′ = A_τ(p) with (A_τp)_i = ε_i(τ)·p_{τ^{-1}(i)}, we have (A_τA_σ p)_i = ε_i(τ)·(A_σ p)_{τ^{-1}(i)} = ε_i(τ)·ε_{τ^{-1}(i)}(σ)·p_{σ^{-1}(τ^{-1}(i))}. Since A_{τσ}p has i-th coordinate ε_i(τσ)·p_{(τσ)^{-1}(i)}, uniqueness of the action implies ε_i(τσ) = ε_i(τ)·ε_{τ^{-1}(i)}(σ). ∎
- Why useful: Enables computation of all ε(τ) from the generators without recomputing c-counts; critical for a robust, fast IsO5 oracle.

2) Lemma 19 (ε for adjacent transpositions).
- Statement: For s_k=(k k+1) (k=1,2,3,4), ε(s_k) has + at positions k,k+1 and − elsewhere, i.e., ε(s_k)=(−,…,−, + at k, + at k+1, −,…,−).
- Proof: s_k has exactly one inversion (between k and k+1). Its restriction to [5]\{j} has odd sign iff j∈{k,k+1}, hence ε_i(s_k)=sgn(s_k)·(−1)^{c_j} equals + at i=k,k+1 and − otherwise. This matches direct c_j counts (as checked in notes earlier). ∎
- Why useful: Supplies base ε-vectors on generators; combined with Lemma 18 yields all ε(τ) by multiplying generators.

3) Corollary (parity of the number of + in ε(τ)).
- By Corollary 7, ∏_i ε_i(τ)=sgn(τ). Let m(ε) be the number of + entries. Then (−1)^{5−m(ε)}=sgn(τ), so m(ε) is odd if τ is even and even if τ is odd. Useful as a sanity check for ε enumeration.

Corrected and implementable IsO5 criterion (pair-set S)
- O5-image formula (from notes) says: for e_O=(+,-,-,-,-), the image under τ is p with p_i = −ε_i(τ) for i≠i0 and p_{i0} = ε_{i0}(τ) where i0:=τ(1). Equivalently, for a given p, there exists τ with (ε,i0)=(ε(τ),τ(1)) such that p⊙ε equals h(i0), the vector with exactly one + at i0 and − elsewhere.
- Crucial correction: It is not enough to find i0 with p⊙h(i0) ∈ E={ε(τ)}; the pair (ε,i0) must be realized by the same τ (i.e., i0=τ(1) for ε=ε(τ)). This invalidates the naive “ε-only” test and explains the earlier false positive for p=(+,+,+,+,+) with ε=h(5).
- Implementation blueprint: Precompute the pair-set S = { (ε(τ), i0=τ(1)) : τ∈S5 } using Lemma 18 and generators s_k (Lemma 19), tracking i0 under right-multiplication: if τ′=τ s_k then ε(τ′)_i = ε_i(τ)·ε_{τ^{-1}(i)}(s_k) and i0′=τ(s_k(1)). Then IsO5(p) is true iff ∃(ε,i0)∈S with p_i=−ε_i for i≠i0 and p_{i0}=ε_{i0}. This avoids orbit-building and uses only a 120-pair membership test per query.

Hand checks and unit data (partial, to aid verification)
- ε on generators (confirmed):
  • ε((12))=(+,+,−,−,−),
  • ε((23))=(−,+,+,−,−),
  • ε((34))=(−,−,+,+,−),
  • ε((45))=(−,−,−,+,+).
- Quick “non-O5 by partial exclusion” for two of the profile vectors using these ε-samples:
  • p1=(+,+,−,−,+): For the above ε and also ε(id) and ε((13))=(−,−,−,−,−), the match count |{i: p1_i=ε_i}| is 4,2,0,2,3 respectively (never 1). This is not a proof of non-O5 (other τ could still work), but serves as a debugging checklist for IsO5. Please use the S-based oracle to decide decisively.
  • p2=(+,+,+,−,−) similarly has match-counts 3,2,2,0,1 under the above ε; again ambiguous and needs a full S-check.

Consequences for F(α,β) computation
- With the S-oracle in place, F(+,+) and F(+,-) are obtained by the 8 tests on p=(α,β,x,y,z). By Cor. 9, F(−,−) and F(−,+) follow by triplewise negation. Unit constraints to verify:
  • (+++)∈F(+,+) and (−,−,−)∈F(−,−) (constant 5-vectors are ±C5, non-O5).
  • (−,−,−)∉F(+,-) (output.md Lemma 13); by symmetry (+++)∉F(−,+).
- Two decisive targets (carry-over from last round): check whether (+−−)∈F(+,+) and (+−−)∈F(+,-). If both hold (for all three permutations under our fixed coordinate order), Prop. 11 resolves |A|=4 uniformly via the 2+2 ansatz.

Implementation blueprint (refined, minimal)
1) Build S via the cocycle:
  - Start with τ=id: ε=+++++, i0=1.
  - BFS over right-multiplication by s_k (k=1..4) using Lemma 18 to update ε and i0.
  - Store S as a set of 120 pairs (ε,i0). Sanity checks: parity of plus-count in ε matches sgn(τ); S has size 120; sample ε above are present with their correct i0.
2) Implement IsO5(p): return true iff ∃(ε,i0)∈S with p_i=−ε_i for i≠i0 and p_{i0}=ε_{i0}. Unit tests: (+,−,−,−,−) true; (+,+,+,+,+) false; (+,−,+,−,+) false.
3) Compute F(+,+) and F(+,-) (8 entries each) under the fixed coordinate convention (notes/output). Derive the other two via Cor. 9. Report complements and sizes. If both complements have size ≤1, conclude |A|=4 by Lemma 16.
4) If, stronger, all three permutations of (+,−,−) lie in both F(+,+) and F(+,-), apply Prop. 11 to conclude |A|=4 by the 2+2 ansatz x_{ij}=w_i w_j.
5) If either condition fails, brute-force the 2^6 CSP on the realized (B,C) profiles; use Lemma 17 to prune.

Gaps and clarifications in output.md (to address later; do not modify now)
- It would be helpful to add Lemma 18 (ε-cocycle) in output.md as an implementation lemma; currently Lemma 6 suffices but the cocycle substantially simplifies and stabilizes code.
- The O5-image formula specialized to e_O and the necessity to track the pair (ε(τ), i0=τ(1)) is only in notes; incorporating it in output.md would prevent misuse of “ε-only” tests. We flagged the earlier incorrect simplification explicitly here.
- Coordinate ordering for the last three entries of p(Y_k) is correctly fixed near Prop. 15; when F-tables appear, restating that ordering there will improve reproducibility.

Obstacles
- A purely analytic classification of E={ε(τ)} (or of the O5 orbit) appears cumbersome; the cocycle+generator method is the right small computation.
- Without the F-tables, we cannot certify the 2+2 ansatz or the union-bound criterion. These remain the decisive next computations.

Next steps (concrete, minimal)
- Verifier: Implement S via Lemma 18 and ε(s_k) from Lemma 19; build IsO5 as above and run the standard unit tests.
- Populate F(+,+), F(+,-); confirm the already-proved exclusions and record sizes of complements. If both complements ≤1, invoke Lemma 16 to conclude |A|=4 and AP. If, stronger, (+−−)-permutations are allowed in both, apply Prop. 11 to conclude AP via the 2+2 construction.
- Independently, evaluate IsO5 on the four concrete 5-vectors from profiles P1–P3 listed in notes/output; archive their classifications and, if non-O5, keep these as explicit witnesses for representative one-point instances.

Why this is incremental, auditable progress
- We introduced two precise, easy-to-check lemmas (ε-cocycle and ε on generators) that drastically simplify the O5 oracle and remove ambiguity in the ε-factors.
- We corrected a subtle but important pitfall (the necessity of tracking i0 alongside ε in O5 membership), providing a rigorous criterion based on the pair-set S.
- We supplied partial hand checks and a concrete, minimal computation plan that will decisively settle the small F-tables and hence the |A|=4 step via Lemma 16 or Prop. 11.

## Round 0007 — 2025-08-27T19:52:04.491555Z

Round 0007 — Focus: sharpen O5-membership testing and prune local tables with rigorous tools; refine the |A|=4 search

Summary of what is rigorous in output.md and remaining gaps
- Proposition 1, Lemma 2, Proposition 3, Corollary 4, Fact 5, Lemma 6, Corollary 7, Lemma 8, Corollary 9, Lemma 10, Proposition 11 (conditional), Proposition 12, Lemma 13, Proposition 14, Proposition 15, Lemma 16, Corollary 16.1, Lemma 17 are internally consistent and correctly stated.
- Remaining gap to settle AP: We still need the two base local tables F(+,+), F(+,-) and, consequently, a resolution of the |A|=4 one‑point CSP across the realized profiles. Proposition 11 remains conditional; Corollary 16.1 offers an unconditional route if both complements are ≤1, but this awaits the tiny computation.
- A useful characterization of O5 membership (the “Hamming‑1” criterion; see Lemma H1 below) is not yet recorded in output.md. It reduces orbit membership to a radius‑1 Hamming neighborhood test around the set E={ε(τ):τ∈S5}. This should be added later for transparency (do not edit output.md now).

New micro‑lemma (rigorous) — Hamming‑1 characterization of the O5 orbit (implementation aid)
Lemma H1 (O5 as Hamming distance 1 from E).
- Let e_O=(+,-,-,-,-) and E:={ε(τ):τ∈S_5} with ε(τ) as in Lemma 6. Then for p∈{±1}^5,
  p∈O5 if and only if there exist ε∈E and i0∈{1,…,5} such that, writing q:=-p, one has Hamming(q,ε)=1 with the unique discrepancy at i0.
- Equivalently, O5 = { flip_all_but_one(ε,i0) : ε∈E, i0∈[5] }, where flip_all_but_one(ε,i0) is the 5‑vector v with v_{i0}=ε_{i0} and v_i=−ε_i for i≠i0.
Proof. By the specialization of the action to e_O: R_τ(e_O) has coordinates p′_i = ε_i(τ)·(e_O)_{τ^{-1}(i)}; if j=τ^{-1}(i) equals the unique + position of e_O, then p′_i=ε_i(τ), and otherwise p′_i=−ε_i(τ). Writing i0:=τ(1), we obtain exactly p′=flip_all_but_one(ε(τ),i0). Conversely, any vector of this form is R_τ(e_O) for the corresponding τ. Rewriting as q:=-p yields the Hamming‑1 characterization. ∎
Why useful. For an IsO5 oracle, it suffices to precompute E (120 evaluations via Lemma 6) and then test membership of −p in the radius‑1 Hamming neighborhood of E. This is faster and more robust than building the full O5 orbit, and supports hand checks.

Concrete consequences and hand checks (auditable)
- Sanity: For p=(+,-,+,+,+), q=(−,+,−,−,−). If ε=all − were known to occur with i0=2, then Hamming(q,ε)=1 at 2 and p∈O5. We cannot assert “ε=all − with τ(1)=2” without computation (see Obstacles), so we keep this as a tiny check for the IsO5 implementation, not as a claim.
- Verified exclusions retained: (x,y,z)=(−,−,−) is forbidden for (α,β)=(+,-) (Lemma 13). By sign symmetry (Cor. 9), (+++) is forbidden for (α,β)=(−,+).
- Verified inclusions (from |A|=3 constructive witnesses, Proposition 14): (+++)∈F(+,+); (−−−)∈F(−,−); (+,−,+)∈F(+,-); (−,+,−)∈F(−,+). These serve as base unit tests for the F‑table computation.

Refined computational blueprint (minimal, decisive)
A) Precompute E and implement IsO5 via Lemma H1.
- Enumerate all τ∈S5; compute ε(τ) via Lemma 6; store E as a set of 5‑vectors.
- IsO5(p): compute q=−p; return true iff ∃ε∈E with Hamming(q,ε)=1. Archive |E| and, optionally, the multiset of sums Σε_i (useful for diagnostics).
- Unit checks: classify (+,+,+,+,+) as non‑O5; (+,−,−,−,−) as O5; (+,−,+,−,+) as non‑O5. Also verify sample ε(τ) vectors from notes (id, (12), (123), (12)(34), (13)).

B) Populate the base local tables under the fixed coordinate order.
- Compute F(+,+) and F(+,-) completely by evaluating the 8 triples each against IsO5 on p=(α,β,x,y,z). Derive F(−,−) and F(−,+) by triplewise negation (Cor. 9). Archive explicit lists and complements; report sizes.
- Immediate validations: (+++)∈F(+,+), (−−−)∉F(+,-) as above. Keep an eye on the number of forbidden triples per table (Cor. 16.1 route).

C) Decide |A|=4 one‑point amalgamation via two small routes.
- If |{±1}^3\F(+,+)| ≤ 1 and |{±1}^3\F(+,-)| ≤ 1, invoke Lemma 16 + Cor. 16.1 to conclude the |A|=4 step and hence AP (Lemma 2).
- Otherwise, run the 6‑variable CSP per realized profile (brute force over x_{ij}∈{±1}): for each assignment, build the four p(Y_k) and test IsO5; archive a SAT witness or an UNSAT certificate if found. Use Lemma 17 (parity) to prune: an odd number of triangles demanding triple product −1 is impossible.

D) Optional but efficient: a backtracking solver with small branching.
- Choose a triangle (say Y_4) and fix its triple (x_{12},x_{13},x_{23}) to one of the |F(p^B_4,p^C_4)| allowed patterns (at most 8 choices). Propagate to constraints on Y_1,Y_2,Y_3 via shared edges; backtrack when hitting an O5. With at most 8 initial branches and shallow propagation, this is typically faster than the naive 2^6 loop.

Implications for the 2+2 vertex‑sign ansatz
- The conditional Proposition 11 cannot be used until we certify memberships of all three permutations of (+,−,−) in each F(α,β). The Hamming‑1 criterion (Lemma H1) provides a crisp way to test the key instances; in particular, the four 5‑vectors listed in notes for P1–P3 should be tested immediately (they are built from permutations of (+,−,−) on the last three coordinates with (α,β)=(+,+) and (+,−)).
- If any of those four classifies as O5, the uniform 2+2 ansatz fails for that profile (which is fine; Proposition 12 already solves the fully aligned (++++) case by a constant assignment). We then proceed with the general CSP or the backtracking solver.

Examples to feed IsO5 (relisted for convenience; same coordinate order as output.md)
- P1 (C vs C, aligned): check (+,+,−,−,+) and (+,+,+,−,−).
- P2 (C vs C, opposed): check (+,−,−,−,+) and (+,−,+,−,−).
- P3 (C vs H, mixed): check (+,−,−,−,+) and (+,−,+,−,−) (same as P2).
Outcome of these four evaluations will immediately confirm or refute the 2+2 ansatz on these central profiles and guide the subsequent global search.

Why these steps are concrete, incremental progress
- Lemma H1 gives a simple, exact O5‑membership test in terms of a precomputed set E and Hamming distance. It streamlines the IsO5 routine and enables hand checks in small instances.
- The plan B/C/D consolidates earlier ideas into a minimal, decisive pipeline that either resolves |A|=4 via the small‑table criterion (Cor. 16.1) or via a tiny brute force/backtracking with parity pruning. This is auditable and easily implementable.
- The explicit test vectors from P1–P3 remain the quickest sanity checks; their classification directly informs whether the 2+2 ansatz is viable anywhere beyond the equal‑constant subcase.

Obstacles and open items
- We still lack an analytic description of E and, as a result, of the O5 orbit; computing E (120 entries) is the appropriate step.
- Without the F‑tables, we cannot confirm or deny the “product +1” conjecture (Conjecture P+) or the stronger condition in Proposition 11.
- Attempts to hand‑prove (+++)∉F(+,-) or to classify (+,−,−) in F(+,+) stumbled on the constraint i0=τ(1) in the O5‑image formula; these are best left to the IsO5 oracle.

Notes on output.md (gaps/clarifications; do not edit now)
- It would be helpful to add, after Lemma 6 or near the definition of O5, the Hamming‑1 characterization (Lemma H1) as a corollary specialized to the O5 seed e_O. This is already established in notes and will aid future readers.
- The coordinate convention for p(Y_k) is clearly stated near Proposition 15; when the F‑tables are finalized, repeating that convention next to their definition will avoid confusion in reproducing the data.

Next steps for the verifier (minimal, checkable)
1) Build E via Lemma 6 and implement IsO5 using Lemma H1; run the unit tests and report |E|.
2) Evaluate the four P1–P3 vectors; report their O5 status.
3) Populate F(+,+) and F(+,-); derive the others via Cor. 9; report complements and confirm Proposition 14’s witness triples.
4) If both complements are ≤1, conclude |A|=4 via Lemma 16 and AP via Lemma 2. Else, run the 6‑variable CSP (or the backtracking variant) on realized profiles; archive SAT witnesses or an UNSAT certificate if found.

This round’s deliverables
- New Lemma H1 (O5=Hamming‑1 from E), with proof and implementation guidance.
- A clarified, minimal computational plan prioritizing E and the two base F‑tables, and a compact backtracking alternative to the 2^6 brute force.
- Retained and emphasized concrete test vectors (P1–P3) and parity‑based pruning for the |A|=4 search.

## Round 0007 — 2025-08-27T19:52:27.721171Z

# Round 0007 — Inner‑product characterization of O5 and immediate consequences for local F‑tables

## Quick recap and current bottleneck
- Goal: Decide AP for H (finite 4‑hypertournaments omitting O5) via the one‑point step. The hard minimal base is |A|=4, a 6‑variable CSP with four local 5‑set constraints Y_k (output.md Prop. 3).
- Missing data: The local tables F(α,β)⊆{±1}^3 (especially for (α,β)∈{(+,+),(+,-)}), which determine whether the 2+2 vertex‑sign ansatz or a small brute‑force search suffices. We previously left open whether (+++)∈F(+,-).

## New lemma (rigorous, implementation‑ready)
Lemma 18 (Inner‑product characterization of O5).
- Statement. Let E={ε(τ):τ∈S5} be the ε‑set from Lemma 6. For p∈{±1}^5, one has p∈O5 if and only if there exists ε∈E with Σ_{i=1}^5 p_i ε_i = −3.
- Proof. O5 is the orbit of e_O=(+,-,-,-,-). For τ∈S5, the image has the form p=φ(ε,i0) where ε=ε(τ), i0=τ(1), and p_i=ε_i if i=i0 and p_i=−ε_i otherwise (notes: “O5‑image formula”). Hence Σ p_i ε_i = ε_{i0}^2 + Σ_{i≠i0}(−ε_i^2)=1−4=−3. Conversely, if Σ p_i ε_i = −3 with ε∈E, then exactly one coordinate satisfies p_i ε_i=+1 (the others are −1). Let i0 be this index. Then p=φ(ε,i0), hence p∈O5. ∎
- Why useful: Reduces IsO5 to a 120‑element check over E with a single scalar test; in particular, special ε∈E yield immediate hand‑classifications for families of 5‑vectors p.

## Immediate corollaries for F(α,β) (hard exclusions now settled)
Using Lemma 8 (ε≡−1∈E) and that ε≡(+1)∈E (τ=id), Lemma 18 yields:
- C1. F(+,-): (+++) is forbidden. Indeed, p=(+,-,+,+,+) has Σ p_i=+3, and with ε≡−1 we get Σ p_i ε_i=−3 ⇒ O5. Together with output.md Lemma 13 ((---) forbidden), we now fully classify the all‑equal triples in the opposite‑fixed case: both (+++) and (---) are O5 (forbidden).
- C2. F(+,+): Every triple with exactly two “+” and one “−” is forbidden. For p=(+,+,x,y,z), Σ p_i = 2 + (x+y+z). When the triple has two + and one −, x+y+z=+1 ⇒ Σ p_i=+3, hence O5 by ε≡−1. Thus all three permutations of (++−) are excluded in F(+,+).
- C3. F(−,−): Every triple with exactly one “+” and two “−” is forbidden. Symmetric to C2 via flipping all signs (Cor. 9).
These are strict consequences; there may be further forbidden triples (we do not claim exclusivity without enumerating E).

Why this matters now:
- The long‑standing ambiguity “(+++)∈F(+,-)?” is resolved (it is forbidden). This tightens the local tables and provides immediate unit tests for IsO5 and F‑table population.
- C2 implies the union‑bound route (Lemma 16) cannot settle the |A|=4 step: for (α,β)=(+,+), at least three triples are forbidden, so |{±1}^3\F(+,+)| ≥ 3 (>1). The union‑bound lemma remains valid but is not applicable here.

## Compatibility with the 2+2 vertex‑sign ansatz (sanity checks)
- The 2+2 ansatz only produces triangle‑triples of product +1, namely the three permutations of (+,−,−) and (+++). Lemma 10 (and its refinement in notes) shows that with 2+2, exactly the two ordered shapes (+,−,−) and (−,−,+) occur across k (under our fixed coordinate convention), never (−,+,−) and never (+++).
- The new exclusions C1–C3 do not rule out (+,−,−) or (−,−,+) for either (α,β)=(+,+) or (+,−). Thus the central feasibility question for the 2+2 method remains: do these two ordered shapes lie in F(+,+) and F(+,-)? If yes, Proposition 11 applies and the |A|=4 step follows uniformly.

## Examples and unit tests (for the verifier)
- All‑equal in the opposite‑fixed case:
  • (α,β)=(+,-), (x,y,z)=(+,+,+) ⇒ p=(+,-,+,+,+) ⇒ Σ p=+3 ⇒ O5 by ε≡−1.
  • (α,β)=(+,-), (x,y,z)=(−,−,−) ⇒ canonical O5 representative.
  These should both fail IsO5 (i.e., classify as O5) and be excluded from F(+,-).
- Mixed in the equal‑fixed case:
  • (α,β)=(+,+), (x,y,z) a permutation of (++−) ⇒ Σ p=+3 ⇒ O5 by ε≡−1. All three such ordered triples must be excluded from F(+,+).
- Sanity checks for the 2+2 test vectors (from notes P1–P3):
  • (+,+,−,−,+), (+,+,+,−,−), (+,−,−,−,+), (+,−,+,−,−) all have Σ p∈{+1,−1}. Lemma 18 gives no automatic O5 verdict with ε≡±1, which is consistent with the expectation that these might be non‑O5 (to be confirmed by IsO5).

## Implementation aids (to speed E and IsO5)
- Cocycle identity. For σ,τ∈S5 and i∈[5]: ε_i(σ τ) = ε_i(σ)·ε_{σ^{-1}(i)}(τ). Proof: Compose the two signed actions (output.md Lemma 6) and compare with the one‑step action of σ τ; coordinate‑wise equality follows from the definition of the induced signs on 4‑element complements. This identity enables generating E from the ε of adjacent transpositions.
- Minimal generator data. Compute ε for the four adjacent transpositions s_k=(k,k+1) (k=1,…,4) once (via Lemma 6), and generate E by the cocycle identity using any standard S5 word. Archive |E| and its list; then:
  • p∈O5 iff min_{ε∈E} Σ p_i ε_i = −3 (Lemma 18).
  • F(α,β) is the complement in {±1}^3 of those triples whose 5‑vector hits −3 against some ε.

## Obstacles and limits of the new facts
- C1–C3 are only necessary exclusions. Without a full enumeration of E (or equivalently, the O5 orbit), we cannot decide the status of the key ordered shapes (+,−,−) and (−,−,+) in F(+,+) and F(+,-), which control the 2+2 method.
- The union‑bound feasibility (Lemma 16) is now known inapplicable due to C2. We keep it as a general tool, but it will not conclude the |A|=4 step here.

## Next steps (minimal, decisive)
1) Compute E via the cocycle identity (or directly via Lemma 6) and report |E|.
2) Implement IsO5 using Lemma 18 (inner product −3 against E). Run unit tests including: C1/C2/C3 exclusions, and the four P1–P3 vectors from notes.
3) Populate F(+,+) and F(+,-) fully; derive the other two via Cor. 9. Explicitly confirm (or refute) that (+,−,−) and (−,−,+) are allowed in both tables.
4) If both shapes are allowed in both tables, apply Proposition 11 (uniform 2+2) to conclude the |A|=4 step and AP (via Lemma 2). Otherwise, run the 2^6 CSP per realized macro‑profile, using the parity invariant (Lemma 17) for pruning, and archive SAT/UNSAT witnesses.

## Notes on output.md (gaps/corrections to add later)
- Suggest adding Lemma 18 (inner‑product characterization of O5) to output.md; it streamlines IsO5 and underpins the new corollaries.
- With Lemma 18 in place, the status of (+++) in F(+,-) is settled (forbidden), refining the earlier caution in notes. Output.md currently proves only the (---) half (Lemma 13).
- Record in output.md the strict necessary exclusions C2 and C3 for F(+,+) and F(−,−) respectively. These clarify why the union‑bound lemma (Lemma 16) cannot close the |A|=4 case here.

## Summary of this round’s progress
- Established a sharp, general IsO5 criterion (Lemma 18): p∈O5 iff Σ p_i ε_i = −3 for some ε∈E. This yields immediate, rigorous exclusions in the local F‑tables.
- Resolved the open question (+++)∈F(+,-) (it is forbidden) and derived further necessary exclusions for F(+,+) and F(−,−), strengthening the local picture.
- Refined the computational plan: generate E via a cocycle identity and complete F(+,+),F(+,-); then either certify the 2+2 method or finish with a tiny 2^6 CSP per profile.
- Provided concrete unit tests and clarified why the union‑bound tool does not apply in this setting.

## Round 0008 — 2025-08-27T20:07:47.973645Z

Round 0008 — Shrinking the F-table computation via internal S5-induced symmetries; two decisive membership checks for the 2+2 ansatz

Status and aim
- We keep the one‑point reduction and the |A|=4 six‑variable CSP (output.md Prop. 3). The S‑based O5 membership test is now rigorous (output.md Lemma 20), as are the ε‑cocycle and generator data (Lemmas 18–19). The remaining bottleneck is to populate the two base tables F(+,+) and F(+,-) and then close |A|=4 either by the 2+2 ansatz (Prop. 11) or by a tiny brute force, if needed.

New rigor: S5 actions that preserve the (α,β) table and their effect on triples
- Notation and convention: We use the fixed coordinate order for p(Y_k) recorded in output.md: (missing c, missing b, then the three positions missing i<j<ℓ from A\{k}). For the local table F(α,β), membership is: (x,y,z)∈F(α,β) ⇔ (α,β,x,y,z) is non‑O5.

Lemma 21 (swap of the fixed coordinates enforces central symmetry at α=β).
- Statement. For all α,β and (x,y,z), one has
  (x,y,z)∈F(α,β) ⇔ (−x,−y,−z)∈F(β,α).
  In particular, if α=β, then F(α,α) is centrally symmetric: (x,y,z)∈F(α,α) ⇔ (−x,−y,−z)∈F(α,α).
- Proof. Apply τ=(12). By Lemma 19, ε(τ)=(+,+,−,−,−). The action A_τ swaps the first two coordinates and flips signs on the last three: A_τ(α,β,x,y,z)=(β,α,−x,−y,−z). O5‑membership is invariant under A_τ; hence (α,β,x,y,z) is non‑O5 ⇔ (β,α,−x,−y,−z) is non‑O5. This is exactly the claim.∎
- Use: reduces F(+,+) to four unordered pairs of opposite triples, and relates F(+,-) to F(−,+) (though we already have Cor. 9 for global sign flip).

Lemma 22 (two internal generators acting on last three coordinates while preserving (α,β)).
- Statements. For all α,β and all (x,y,z), one has the equivalences within the same table F(α,β):
  (S3) (x,y,z)∈F(α,β) ⇔ (−y,−x,z)∈F(α,β).
  (S4) (x,y,z)∈F(α,β) ⇔ (x,−z,−y)∈F(α,β).
- Proof. For S3 use τ=(34). Lemma 19 gives ε(τ)=(−,−,+,+,−). Then A_τ(α,β,x,y,z)= (−α,−β, y, x, −z). By Cor. 9 (global sign symmetry), (−α,−β, y, x, −z) is non‑O5 iff (α,β, −y, −x, z) is non‑O5. This yields S3. For S4 use τ=(45) with ε(τ)=(−,−,−,+,+), giving A_τ(α,β,x,y,z)=(−α,−β, −x, z, y). Applying Cor. 9 again gives (α,β, x, −z, −y), i.e., S4.∎
- Use: S3 and S4 generate a small group of transformations on triples inside a fixed table F(α,β) that preserve triple‑product and relate many ordered patterns without touching α,β.

Lemma 23 (a coordinate swap on triples that preserves (α,β)).
- Statement. For all α,β and all (x,y,z), one has (x,y,z)∈F(α,β) ⇔ (z,y,x)∈F(α,β).
- Proof. Combine S4, then S3, then S4 again. Starting with (x,y,z), S4 gives (x,−z,−y); S3 then gives (z,y,−x); S4 again gives (z,y,x). Each step preserves membership in F(α,β), hence the equivalence.∎
- Use: F(α,β) is invariant under swapping the first and third triple coordinates, a key reduction for the 2+2 ansatz.

Consequences for orbits of {±1}^3 under these internal symmetries
- The group generated by S3, S4, and the swap (x,y,z)↔(z,y,x) (Lemma 23) preserves triple‑product and partitions {±1}^3 into the following orbits:
  • Product +1: O+_A = { (+++), (+−−), (−−+) } and O+_B = { (−+−) }.
  • Product −1: O−_A = { (−−−), (++−), (−++) } and O−_B = { (+−+) }.
  The equivalences S3/S4 connect the two 3‑element orbits (within each parity) and leave the 1‑element orbits fixed; Lemma 23 allows us to permute x and z, ensuring (+−−) and (−−+) are interchangeable inside F(α,β).
- Reduction of F‑table workload: To determine F(α,β) completely, it suffices to test at most four representatives: (+++), (+−−), (−−−), (+−+). The remaining 4 triples follow by the above orbit relations and Lemma 21 when α=β (central symmetry).

Refined implications for the 2+2 vertex‑sign ansatz (Prop. 11)
- Under the fixed coordinate convention (output.md), the 2+2 vertex‑sign ansatz (Lemma 10) produces, for any choice of the two “+” vertices on A, on each triangle an ordered triple that is either (+,−,−) or (−,−,+). The permutation (−,+,−) never occurs under this ansatz.
- By Lemma 23 (x↔z swap) the two realized permutations are equivalent inside any fixed F(α,β). Therefore, for Prop. 11 it suffices to check a single representative:
  • Decisive checks: (+,−,−)∈F(+,+) and (+,−,−)∈F(+,-).
  If both hold, then by Lemma 23 the other realized permutation (−,−,+) also lies in F, and Prop. 11 yields a uniform |A|=4 solution, hence AP (via Lemma 2). By Cor. 9, the remaining two cases (−,−) and (−,+) follow by triplewise negation.
- This sharpens and justifies the “two‑checks suffice” reduction proposed earlier (now with full proofs relying on S3/S4/Lemma 23). Note this is weaker than assuming all three permutations of (+,−,−) are present; the ansatz never requires (−,+,−).

Concrete micro‑tests and minimal computation plan (auditable)
- Unit tests for the new symmetries (to sanity‑check the IsO5 implementation and the F‑tables):
  1) Verify S3/S4 on sample inputs: For a random (α,β) and triple t, confirm IsO5(α,β,t) equals IsO5(α,β,−y,−x,z) and IsO5(α,β,x,−z,−y).
  2) Verify Lemma 23: IsO5(α,β,x,y,z)=IsO5(α,β,z,y,x).
  3) Verify Lemma 21: IsO5(α,β,x,y,z)=IsO5(β,α,−x,−y,−z).
- Minimal decisive F‑entries to evaluate with the S‑oracle (output.md Lemma 20):
  • For F(+,+): check (+,−,−). (+++) is known allowed (Prop. 14 for |A|=3; also C5), so (−,−,−) follows by Lemma 21.
  • For F(+,-): check (+,−,−) and retain that (+,−,+) is allowed (Prop. 14). (−,−,−) is forbidden (Lemma 13).
  Derive the remaining two base tables by Cor. 9. Using Lemma 23, if (+,−,−) is allowed in a table, (−,−,+) is automatically allowed too.
- Four pre‑existing decisive 5‑vector tests (still recommended):
  • For F(+,+): (+,+,+,−,−) and (+,+,−,−,+) (the two realized permutations under w=(+,+,−,−)).
  • For F(+,-): (+,−,+,−,−) and (+,−,−,−,+).
  Each should be non‑O5 for the 2+2 ansatz to succeed on the corresponding profiles.

Examples and sanity data already fixed by output.md
- F(+,+) contains (+++) and, by Lemma 21, also (−−−).
- F(+,-) contains (+,−,+) (Prop. 14) and forbids (−−−) (Lemma 13). The status of (+++) in F(+,-) remains to be decided by the S‑oracle (do not assume).

Why this is incremental, auditable progress
- New, fully rigorous lemmas (21–23) extract symmetry directly from the S5 action (using only Lemmas 6, 8, 19) and sharply reduce the local enumeration:
  • Per base table, at most four representatives need evaluation to reconstruct all 8 entries.
  • For the 2+2 ansatz, only two total tests are decisive: (+,−,−)∈F(+,+) and (+,−,−)∈F(+,-).
- These are immediately testable with the existing S‑oracle plan (output.md Lemma 20). They also supply strong unit tests to validate an implementation.

Obstacles and open items
- An analytic (non‑computational) classification of S remains difficult; we therefore continue to rely on the small enumeration via the S‑oracle. The new symmetries minimize the number of required queries.
- If either of the two decisive checks fails, the uniform 2+2 construction (Prop. 11) is unavailable. The fallback remains the tiny 2^6 CSP search with parity pruning (output.md Lemma 17) or the specific solvable subclass (Prop. 15).

Gaps or clarifications for output.md (do not edit now; for later integration)
- Adding Lemmas 21–23 would be valuable: they formalize the internal invariances that reduce F‑table computation and justify the “two‑checks suffice” reduction for Prop. 11.
- When the F‑tables are eventually archived, include a note that they are invariant under the transforms S3, S4, and x↔z, and that F(α,α) is centrally symmetric (Lemma 21), to aid reproducibility and debugging.

Next steps for the verifier (minimal, decisive)
1) Implement/validate the S‑oracle IsO5 (output.md Lemma 20). Run the unit tests in output.md and the symmetry checks listed above (S3/S4/Lemma 23/Lemma 21).
2) Evaluate the two decisive entries: (+,−,−) in F(+,+) and in F(+,-). If both pass, conclude |A|=4 via Prop. 11 and AP via Lemma 2.
3) If needed, populate the full F(+,+), F(+,-) using only the four representatives (+++), (+−−), (−−−), (+−+) and derive all entries by the proved symmetries. Cross‑check against the four P1–P3 vectors.
4) If Prop. 11 fails, run the small 2^6 search with parity pruning and archive either SAT witnesses or a minimal UNSAT certificate (which would refute AP).

## Round 0008 — 2025-08-27T20:08:31.594665Z

Status and aim
- We keep the one‑point reduction and the |A|=4 six‑variable CSP (output.md Prop. 3). The exact O5 membership test via the pair‑set S (output.md Lemma 20), the ε‑cocycle (Lemma 18), and ε on generators (Lemma 19) are now in output.md and are sufficient to implement a correct IsO5.
- Remaining blocker: populate the two base local tables F(+,+) and F(+,-), then conclude |A|=4 either by the 2+2 construction (Prop. 11, conditional) or a tiny brute‑force/backtracking run.

New small, rigorous facts (auditable)
1) Product‑of‑entries identity for O5 (debug/check aid).
- Claim. If p∈O5 with witness τ in Lemma 20 (i.e., p=A_τ(e_O)), then ∏_{i=1}^5 p_i = sgn(τ).
- Proof. Writing p=flip_all_but_one(ε(τ), i0=τ(1)), we have ∏ p_i = ε_{i0}·∏_{i≠i0}(−ε_i) = (−1)^4∏_i ε_i = ∏_i ε_i = sgn(τ) by Corollary 7.∎
- Why useful: A quick invariant to sanity‑check an S‑oracle and any hand‑computed witnesses.

2) A concrete forbidden ordered triple in F(+,-).
- Lemma EX1. For (α,β)=(+,-), the ordered triple (x,y,z)=(+,+,−) is forbidden, i.e., ( +, −, +, +, − ) ∈ O5.
- Proof. Take τ=(12)(34), which is even; by direct computation (already in notes and rechecked here) ε(τ)=(−,−,−,−,+) and i0=τ(1)=2. Lemma 20 then gives p=A_τ(e_O)=flip_all_but_one(ε,2)=(+,−,+,+,−). Hence (x,y,z)=(+,+,−) is not in F(+,-).∎
- Why useful: This gives a certified entry of F(+,-) without any enumeration. It also provides a unit test for IsO5.

Explicit ε and (ε,i0) samples (for S‑oracle validation)
- τ=id: ε=(+,+,+,+,+), i0=1; ∏ε=+.
- τ=(12): ε=(+,+,−,−,−), i0=2; ∏ε=−.
- τ=(23): ε=(−,+,+,−,−), i0=1; ∏ε=−.
- τ=(34): ε=(−,−,+,+,−), i0=1; ∏ε=−.
- τ=(45): ε=(−,−,−,+,+), i0=1; ∏ε=−.
- τ=(12)(34): ε=(−,−,−,−,+), i0=2; ∏ε=+.
- τ=(123): ε=(+,−,−,+,+), i0=2; ∏ε=+.
- τ=(234): ε=(+,+,−,−,+), i0=1; ∏ε=+.
- τ=(345): ε=(+,+,+,−,−), i0=1; ∏ε=+.
These pairs should appear in S; they are also useful check‑points when debugging the cocycle BFS.

2+2 ansatz: precise permutation usage and a weaker feasibility reduction
- Reminder (output.md Lemma 10): with w having two + and two − and x_{ij}=w_iw_j, every triangle‑triple is a permutation of (+,−,−). Under our fixed coordinate order, for the concrete choice w=(+,+,−,−) on A={1,2,3,4}, one checks explicitly (as already used in notes) that:
  • Y_1,Y_2 realize the ordered shape (−,−,+); Y_3,Y_4 realize (+,−,−).
- Consequently, a weaker conditional than Prop. 11 suffices in practice:
  • If for every realized pair type (α_k,β_k), both ordered shapes (+,−,−) and (−,−,+) are in F(α_k,β_k), then choosing w so that the two “+” are placed on the two indices k where the (−,−,+) shape is allowed and the other two k where (+,−,−) is allowed yields a satisfying assignment. This reduces to a simple feasibility check on the multiset { (α_k,β_k) : k∈A } and whether exactly two of them admit (−,−,+) (the rest admitting (+,−,−)).
- Actionable use: Once F(+,+),F(+,-) are computed, form, for each ordered pair type, the set S_perm(α,β)⊆{(+−−),(−+−),(−−+)} of allowed ordered shapes. If for a given one‑point instance there exists a 2+2 choice with exactly two k’s assigned to a shape in S_perm that matches the 2+2 distribution above, the 2+2 ansatz succeeds even if the third permutation is disallowed. This is a small combinatorial check (choose which two indices carry the “(−,−,+)” triangles).

Backtracking solver blueprint (deterministic, tiny) with propagation
- Choose a starting triangle, e.g. Y_4, and branch on its allowed triple set F(p^B_4,p^C_4) (≤8 branches). For each branch (x_{12},x_{13},x_{23}) fixed, propagate to Y_1 (which shares {x_{23}}), Y_2 (shares {x_{13}}), Y_3 (shares {x_{12}}) by intersecting their allowed sets with the corresponding fiber:
  • Y_1 reduces F(p^B_1,p^C_1) by fixing its first of the three local variables to x_{23} (remember mapping: for Y_1 the last three coordinates are (x_{23},x_{24},x_{34})). Similarly for Y_2 and Y_3 via their shared edge.
- Use two pruning rules:
  • If any Y_k’s local set becomes empty, backtrack.
  • Track the triangle‑product parity (output.md Lemma 17): if the partial assignment forces an odd number of triangles to have product −1 with no flexibility left to flip an even count, backtrack.
- Depth is at most 4 steps; in most cases the branching factor collapses quickly.

Concrete test vectors to complete the 2+2 permutation checks (implement next)
- For (α,β)=(+,+): test the missing permutation (+,+,−,+,−) in addition to the two already listed in notes ( (+,+,−,−,+), (+,+,+,−,−) ).
- For (α,β)=(+,-): test the missing permutation (+,−,−,+,−) in addition to ( (+,−,−,−,+), (+,−,+,−,−) ).
- These two additional evaluations complete the 6 decisive checks needed to apply Prop. 11 (three permutations for each of the two base tables), modulo Cor. 9 for the sign‑flipped cases.

Sanity/unit tests for IsO5 and F‑tables (succinct list)
- IsO5 must classify: (+,−,−,−,−) as O5; (+,+,+,+,+) and (+,−,+,−,+) as non‑O5; and the samples under “Explicit ε …” should yield A_τ(e_O) as written (check via Lemma 20).
- F(+,+) must contain (+++) (output.md Prop. 14 witness) and F(−,−) must contain (−−−). F(+,-) must contain (+,−,+) and F(−,+) must contain (−,+,−). The new Lemma EX1 adds: F(+,-) forbids the ordered (++−).

Gaps and clarifications in output.md (for later incorporation; do not edit now)
- It would help to add the product‑of‑entries identity for O5 (∏p_i=sgn(τ)) as a corollary after Lemma 20; it is a convenient invariant for debugging and hand checks.
- The weaker 2+2 feasibility reduction sketched above (choose two k for (−,−,+), two for (+,−,−)) could be formulated as a proposition conditional on the explicitly computed S_perm(α,β); this avoids requiring all three permutations as in Prop. 11. Once F‑tables are known, this is a two‑line check per instance.

Next steps for the verifier (minimal and decisive)
1) Build S via Lemmas 18–19 and implement IsO5 using Lemma 20. Validate on the sample pairs and unit tests listed.
2) Populate F(+,+), F(+,-) fully (8 triples each). Record complements and confirm the witnesses from Prop. 14 and Lemma EX1.
3) Run the six decisive 2+2‑permutation checks listed above. If they all pass, invoke Prop. 11. If not, apply the weaker 2+2 selection test using S_perm(α,β); if still inconclusive, run the shallow backtracking solver.

Why this is incremental, auditable progress
- We added a new explicit exclusion in F(+,-) (ordered (++−) forbidden) with a concrete τ‑witness and no computation.
- We provided additional ε/(ε,i0) samples and a product‑of‑entries invariant that make the S‑oracle easy to validate.
- We sharpened how to use the 2+2 ansatz with only two permutations available per triangle (a simple selection check once the tables are computed) and supplied the two missing test vectors to complete the decisive 12‑entry check for Prop. 11.

## Round 0008 — 2025-08-27T20:09:50.936178Z

Round 0008 — Tightening the local F-tables with exact S-pair witnesses; correcting a subtle misuse of i0; minimal but rigorous exclusions

Context and aim
- We keep the framework in output.md: the |A|=4 one‑point step is a 6‑variable CSP with four local 5‑set constraints Y_k (Prop. 3). The decisive tool for O5 membership is now Lemma 20 (the exact S‑pair criterion), together with Lemmas 18–19 for computing ε(τ).
- Goal this round: record a few rigorously proved forbidden entries for the base tables F(+,+) and F(+,-) using explicit τ and the S‑pair criterion, and correct an earlier pitfall about choosing i0. These small exclusions are auditable and shrink the remaining enumeration.

New, rigorous micro‑lemmas (using Lemma 20)
- Lemma F1. In F(+,+), the ordered triple (x,y,z)=(-,+,+) is forbidden.
  Why: Take τ=(13). By Lemma 8, ε(τ)=(-,-,-,-,-). Here i0:=τ(1)=3. Lemma 20 then gives A_τ(e_O) with coordinates p_i=ε_i for i=3 and p_i=−ε_i for i≠3, namely p=(+,+,−,+,+). Thus (−,+,+)∉F(+,+). This is a concrete O5 instance in the fixed coordinate order.
  Consequence: |{±1}^3\F(+,+)| ≥ 1. (This does not yet falsify the union‑bound criterion, but it is a firm, testable exclusion.)

- Lemma F2 (already in output.md, restated for completeness). In F(+,-), (x,y,z)=(−,−,−) is forbidden (Lemma 13). By Corollary 9, in F(−,+), (+++) is forbidden.

- Corollary F1′ (by sign symmetry). In F(−,−), the ordered triple (+,−,−) is forbidden (triplewise negation of Lemma F1). Proof: Apply Corollary 9 to F1.
  Consequence: |{±1}^3\F(−,−)| ≥ 1.

Why useful here
- These entries are established via the exact S‑pair criterion (Lemma 20) with explicit τ, hence they are rigorous and independently verifiable. They prune the base tables and sharpen expectations for the remaining entries that the verifier will compute.
- F1 in particular shows that not all “two‑plus one‑minus” ordered patterns are allowed in F(+,+). This impacts both the union‑bound route (Lemma 16) and any uniform 2+2 construction that might rely on arbitrary permutations of (+,−,−): the precise ordered membership matters.

Important correction of a subtle pitfall (auditable)
- Earlier drafts (and my own heuristic in a past round) tried to classify O5 via the ε‑only condition Σ p_i ε_i = −3 (or Hamming(−p,ε)=1). This is necessary but not sufficient; it ignores the i0 matching constraint i0=τ(1) that Lemma 20 enforces. In particular, attempting to certify (+++)∈O5 for (α,β)=(+,-) by picking ε≡−1 and i0 arbitrary is invalid. Any O5 membership must be demonstrated via an explicit τ (or via the precomputed S‑set), not ε alone.
- As a concrete illustration of why i0 matters, for τ=(23) one has ε(τ)=(−,+,+,−,−) and i0=τ(1)=1; the image A_τ(e_O) is (−,−,−,+,+), not (+,−,+,+,+). The earlier shortcut that tacitly took i0=3 was incorrect; Lemma 20 clarifies the bookkeeping and prevents such slips.

Examples (fully worked, for audit)
- F1 computation in detail. τ=(13) has ε(τ)=(-,-,-,-,-) (Lemma 8), i0=3. By Lemma 20, p=A_τ(e_O) has p_3=ε_3=− and p_i=−ε_i=+ for i≠3, hence p=(+,+,−,+,+). This matches (α,β,x,y,z)=(+,+,−,+,+), so (−,+,+) is excluded from F(+,+).
- F2 remains the canonical case: for (α,β)=(+,-) and (x,y,z)=(−,−,−), p=(+,-,−,−,−) is the standard O5 representative.

Obstacles and scope
- Proving further entries without precomputing S is delicate because of the i0 constraint. For instance, it is tempting (but not justified) to generalize F1 to say that all three permutations of a “two‑plus one‑minus” triple are forbidden in F(+,+) by conjugating τ=(13); this requires tracking ε under conjugation (which is nontrivial) and verifying i0 for the same τ.
- Likewise, attempting to certify (+++)∉F(+,-) purely from ε≡−1 fails absent an explicit τ with ε(τ)=−−−−− and τ(1)=2. This should be decided computationally via S.

Impact on global strategies
- Union‑bound (Lemma 16). Since we have only shown ≥1 forbidden ordered triple in F(+,+) and in F(−,−), the condition “forbid at most one triple per table” is not yet falsified. A tiny computation of the two base tables F(+,+), F(+,-) remains the quickest path to either applying Lemma 16 or to proceeding with the backtracking/SAT approach.
- 2+2 ansatz (Prop. 11). The vertex‑sign method produces only (+++) and permutations of (+,−,−). F1 shows that in the equal‑fixed case (++), at least one of the three permutations of (+,−,−) is actually forbidden (the one with ‘−’ in position 3). Whether the two permutations realized by a specific 2+2 choice of w are allowed is a factual question for F(+,+). Computing the full ordered table F(+,+) resolves this immediately.

Actionable next steps for the verifier (minimal and decisive)
1) Build S and IsO5 exactly as in Lemma 20 (output.md); retain unit tests already listed in notes/output.
2) Populate F(+,+), F(+,-) completely (8 entries each) under the fixed coordinate order; derive F(−,−), F(−,+) by Corollary 9. Confirm:
   - The new exclusion from Lemma F1: (−,+,+)∉F(+,+).
   - The standard exclusion from Lemma 13: (−,−,−)∉F(+,-).
3) If both complements have size ≤1, apply Cor. 16.1 to conclude the |A|=4 step and AP. Otherwise:
   - Check whether the two ordered permutations of (+,−,−) that arise under a 2+2 choice w (as in notes) lie in the relevant F(α,β) for each k; if yes, apply Prop. 11.
   - If not, run the 2^6 brute‑force CSP per realized profile or the small backtracking solver with parity pruning (Lemma 17).
4) Evaluate the four P1–P3 5‑vectors from notes against IsO5; archive their status to quickly validate the 2+2 witnesses already proposed for those profiles.

Notes on output.md (gaps/clarifications)
- The new Lemma 20 (S‑pair criterion) is precisely the right tool; no contradictions found. The pitfalls around ε‑only criteria are now avoided.
- Suggestion (for later integration): Record Lemma F1 explicitly when the F‑tables are finalized, to document at least one ordered exclusion in F(+,+). This will help readers reproduce the non‑symmetry across ordered triples.

Summary of incremental progress
- Provided a new, exact O5 exclusion in the equal‑fixed case (Lemma F1: (−,+,+)∉F(+,+)) with a concrete τ witness, tightening the F(+,+) table.
- Reiterated the correct use of Lemma 20 and corrected a subtle but frequent mistake (misassigning i0), preventing false positives like the earlier (+++) claim for F(+,-).
- Clarified how these facts intersect with union‑bound and the 2+2 ansatz, and distilled the next minimal computations needed to close |A|=4 and hence AP.



=== summary.md ===

## round-0001 — model summary — 2025-08-27T14:32:46.889913Z
Both provers independently reduce the AP question for H (finite 4-hypertournaments forbidding O_5) to a small, finite, auditable constraint problem: encode a 4-hypertournament by an alternating ±1 function f on 4-sets, observe that forbidding O_5 is a local 5-set constraint, and note that AP reduces to checking one-point amalgamation. The minimal nontrivial case is |A|=4: the problem becomes a 6-variable Boolean CSP (variables x_{ij} for pairs in A) with four local 5-set constraints (each must avoid the O_5 orbit). Prover-01 emphasizes the switching operation (multiply f by ε-products) which preserves the O_5/non-O_5 partition and gives normalization power; Prover-02 gives a clean orientation-function formalism and isolates the precise 6-variable CSP and a necessary-triangle condition in a symmetric case. Both provide explicit canonical templates for C5,H5,O5, and an explicit, small computational plan to decide the |A|=3 and |A|=4 cases by enumerating S5-orbits and brute-force searching the CSP. Verifier remains "uncertain" pending these computations. (Sources: prover-01.out.json, prover-02.out.json.)

## round-0002 — model summary — 2025-08-27T14:56:56.512498Z
This round validated the core reductions from output.md while correcting a mistaken “switching” normalization and identified two remaining gaps: the |A|=3 α≠β subcase and the concrete F(α,β) tables needed to finish the |A|=4 CSP. A concrete, implementable formula for the S5 signed action was derived (ε_i(τ)=sgn(τ)·(−1)^{c_{τ^{-1}(i)}(τ)} with c_j the inversion count), together with the product identity ∏ε_i=sgn(τ). The recommended computational route is to build IsO5 by orbit enumeration of p_O, compute the two small constraint tables F_eq=F(+,+) and F_opp=F(+,−) (each ≤8 triples), finish |A|=3 by lookup, then brute-force the 6-variable |A|=4 CSP (64 assignments) on representative B,C profiles. Two lemmas were proved: (A) |A|=3 with α=β solved by the all-equal triple, and (B) |A|=4 aligned B,C solved by constant cross-edges. A promising uniform ansatz x_{ij}=w_i w_j (w_i=p^B_i p^C_i) was proposed to try across cases. Concrete next steps and tests were listed for the verifier. Cited file: prover-01.out.json (progress_md).

## round-0003 — model summary — 2025-08-27T15:07:19.949557Z
This round produced a concrete, checkable plan to finish the remaining small-case verifications for AP. outputs.md already records the orientation-function model, one-point sufficiency lemmas, the |A|=4 CSP formulation, trivial |A|≤2 cases, and the S5-action identity; missing are (i) an explicit O5-orbit classification for the “two-fixed + three-free” 5-vectors, (ii) the four local tables F(α,β)⊆{±1}^3, (iii) a |A|=3 one-point proof (with witnesses), and (iv) a resolution of the |A|=4 6-variable CSP. New micro-lemmas: p^B_k/p^C_k are exactly the fixed “positive” bits coming from 5-point types (justifying S4-reduction); Claim N1 rules out (−,−,−) for (α,+;β,−) and symmetrically (+,+,+) for (α,−;β,+) (easy IsO5 unit tests); a triangle/edge ansatz x_{ij}=w_iw_j realizes all product +1 triangle patterns and reduces the global search to 2^4 choices (fallback brute force is 2^6=64). A concrete computational blueprint (implement IsO5 via Lemma 6, compute F tables, prove |A|=3 by exhibiting triples, exhaust |A|=4 via eq/opp patterns modulo S4 using brute force and the ansatz) was provided. Citations: prover-01.out.json (progress_md); outputs.md.

## round-0004 — model summary — 2025-08-27T15:19:47.824931Z
Kept the CSP reduction and one‑point amalgamation framework from output.md/notes.md; the remaining decision is the |A|=4 one‑point step which determines AP. This round produced three concrete lemmas: Lemma 10 rules out (+++) and (---) in the opposite‑fixed case (F(+,-) and symmetric), Lemma 11 shows a uniform 2+2− vertex‑sign assignment on K_4 forces every triangle triple to be of type (+−−) (up to order), and Lemma 12 reduces the entire |A|=4 one‑point amalgamation to two explicit IsO5 membership checks: (+−−)∈F(+,+) and (+−−)∈F(+,-) (with the other two cases following by symmetry). The round gives a tiny, auditable computational plan: implement IsO5, run two 8‑evaluation tests, conclude AP if both pass, otherwise run the planned 2^6 brute‑force CSP to find a witness or UNSAT certificate. Unit tests and symmetry clarifications to aid verification are provided. (Files relied on: prover-01.out.json (progress_md); background: notes.md, output.md.)

## round-0005 — model summary — 2025-08-27T15:49:00.620791Z
Round goal: decide amalgamation for class H by reducing to one-point amalgamation; the hard case is |A|=4, a 6-variable CSP with four local 5-set constraints avoiding O_5. Corrections: fix the 5-coordinate ordering per notes.md for reproducibility. Main progress: closed |A|=3 with explicit assignments for all (α,β) cases giving p(Y) ∈ {C5, −C5, H5, −H5}. For |A|=4 provided concrete 2+2-ansatz instances (P1,P2,P3) using w=(+,+,−,−) and x_{ij}=w_iw_j that produce a minimal audit set of four 5-vectors to test by IsO5: (+,+,−,−,+), (+,+,+,−,−), (+,−,−,−,+), (+,−,+,−,−). Action plan: implement IsO5, test these vectors, compute F(+,+) and F(+,−) (derive others by sign flip), and check whether all permutations of (+,−,−) lie in each F to validate the uniform 2+2 solution; otherwise run the 2^6 brute-force CSP. Verifier verdict: success. Citations: prover-01.out.json; output.md; notes.md.

## round-0006 — model summary — 2025-08-27T19:47:08.856775Z
Round 0006 introduced a small, auditable unconditional lemma (UB) that reduces the |A|=4 one‑point CSP to two tiny 8‑entry local tables: if each triangle forbids ≤1 triple then the 6‑variable instance is satisfiable by a union‑bound count. A sharp O5‑image formula (p' = −ε off one coordinate) was proved to speed IsO5 membership tests. The 2+2 vertex‑sign ansatz (x_{ij}=w_iw_j) was sharpened: if certain (+,−,−) permutations lie in the local F(α,β) tables then Prop.11 yields a uniform solution; weaker, concrete prerequisites were distilled (Prop.11′). Structural lemmas (T, D, P) classify 5‑types as constant vs 2+2 on A, control which triangle‑triples appear under w choices, and give an even‑parity constraint on triangle products — all shrink the brute‑force search. A remaining, decisive computational task is to run IsO5 and populate F(+,+),F(+,−); note a discrepancy in the notes about whether (+++)∈F(+,−) (claimed excluded in one draft, later retracted), so enumeration is needed. Citations: prover-01.out.json, prover-02.out.json, prover-03.out.json.

## round-0007 — model summary — 2025-08-27T20:01:10.730080Z
Round 0007 produced rigorous, implementable criteria for deciding O5‑membership and a concrete, minimal pipeline to finish the |A|=4 one‑point step. Two complementary oracle tests were given (a Hamming‑1 reformulation and an inner‑product −3 test against the ε‑set E), plus a cocycle and generator description of ε(τ) that makes enumerating E (and the stronger pair set S={(ε(τ),τ(1))}) fast and auditable. A crucial correction was recorded: an ε‑only test can give false positives — membership must use the paired i0=τ(1) (the S‑oracle). Immediate rigorous exclusions in the local F‑tables were derived (e.g. (+++) ∉ F(+,-) and all permutations of (++−) are excluded from F(+,+)), which implies the union‑bound route cannot settle |A|=4. The round ends with a short, decisive computational blueprint: build S, implement IsO5, populate F(+,+)/F(+,-), then either apply the 2+2 ansatz (Prop. 11) or exhaust the tiny 6‑variable CSP with parity pruning.

## round-0008 — model summary — 2025-08-27T20:16:43.832984Z
Round 0008 produced three complementary prover notes that sharply reduce the remaining computation needed to close the |A|=4 step. New rigorous lemmas (21–23) extract internal S5-induced symmetries: a swap (12) yields central symmetry F(α,α), two internal generators (S3,S4) act on the last three coordinates, and their composition gives the x↔z swap. These symmetries partition {±1}^3 into small orbits and cut each base table to at most four representatives. Practically, the 2+2 vertex‑sign ansatz requires only two decisive membership checks ( (+,−,−) in F(+,+) and in F(+,−) ), or a slightly weaker feasibility check on the realized multiset of pair‑types. The round also produced auditable explicit witnesses: a product‑of‑entries invariant ∏ p_i = sgn(τ) for O5, a certified forbidden triple (++−)∉F(+,−) (τ=(12)(34)), and (−,+,+)∉F(+,+) (τ=(13)). A subtle bookkeeping correction was made: ε alone is not enough—i0 must be tracked via the τ witness (Lemma 20). Next steps are to implement/validate IsO5, run symmetry unit tests, evaluate the decisive entries, and fall back to the tiny 2^6 CSP/backtracking only if needed.



=== notes.md ===
Set‑up and notations (agreed baseline)
- 4‑hypertournament on finite V: equivalent to a function f:[V]^4→{±1}. For an ordered 4‑tuple (x1,x2,x3,x4) with underlying set S, we declare (x1,x2,x3,x4)∈R iff the permutation from the increasing ordering of S to (x1,…,x4) has sign equal to f(S). This satisfies (i) tuples have distinct entries, (ii) closure under even permutations, (iii) exactly one of (x1,x2,x3,x4) and (x2,x1,x3,x4) lies in R.
- For a 5‑set X, define its 5‑vector p(X)∈{±1}^X by p_x:=f(X\{x}). Isomorphisms act by p↦(ε_i(τ)·p_{τ^{-1}(i)}) with ε_i(τ)=sign of τ restricted to X\{τ^{-1}(i)}. The three isomorphism types on 5 points are denoted C5, H5, O5. For computation we may use representatives C5=(+,+,+,+,+), O5=(+,-,-,-,-), H5=(+,-,+,-,+); the orbit relation is determined by the above action (not by raw counts of pluses).

One‑point amalgamation reduction
- AP for H (class of finite 4‑hypertournaments with no induced O5) reduces to the one‑point case: Given A∈H, B=A∪{b}∈H, C=A∪{c}∈H with B∩C=A, existence of D on A∪{b,c} in H extending B and C implies full AP by iteratively adding the vertices of C\A to B.

CSP for the minimal nontrivial one‑point case |A|=4
- Fix A={1,2,3,4}, b=5, c=6. The only undetermined f‑values are the six cross 4‑sets X_{ij}={i,j,5,6} (1≤i<j≤4). Let variables x_{ij}:=f(X_{ij})∈{±1}.
- The only potentially new 5‑sets are Y_k:={5,6}∪(A\{k}) for k∈{1,2,3,4}. For each k, p(Y_k) has two fixed coordinates: p missing 6 equals p^B_k:=f_B({5}∪(A\{k})), and p missing 5 equals p^C_k:=f_C({6}∪(A\{k})); and three variable coordinates drawn from {x_{ij}} on the three pairs inside A\{k}:
  • Y_1 depends on {x_{23},x_{24},x_{34}}
  • Y_2 depends on {x_{13},x_{14},x_{34}}
  • Y_3 depends on {x_{12},x_{14},x_{24}}
  • Y_4 depends on {x_{12},x_{13},x_{23}}.
- Constraint: For each k, p(Y_k) must not lie in the O5‑orbit. This is the complete constraint system for the one‑point amalgam over A of size 4.

Base sizes |A|≤2 and |A|=3
- |A|≤2: There are no 5‑sets Y; any assignment to cross 4‑sets works, so one‑point amalgamation always succeeds.
- |A|=3: There is exactly one 5‑set Y=A∪{b,c}, with two fixed coordinates (those missing b and c) and three unknowns (those missing each a∈A). We expect (and plan to verify computationally) that for every (α,β)∈{±1}^2 at least one of the 8 assignments to the three unknowns avoids the O5 orbit. This settles one‑point amalgamation at size 3 once verified.

Switching: what it does and what it does not
- For ε:V→{±1}, define f^ε(S):=(∏_{v∈S}ε(v))·f(S). Then f^ε encodes another 4‑hypertournament.
- Caution: For a fixed 5‑set X, switching at a vertex v∈X flips the four coordinates of p(X) corresponding to the 4‑sets that contain v and leaves the coordinate “missing v” unchanged. This can change the 5‑type: e.g., (+,-,-,-,-) (an O5 representative) switches at the ‘+’ vertex to (+,+,+,+,+) (a C5 representative). Thus switching is not a valid normalization trick for fixed one‑point data (B,C) in H.

Computational plan (to settle |A|=3 and |A|=4)
- Step A: Compute the O5 orbit via the S5 action above; implement IsO5(p).
- Step B (|A|=3): For each (α,β), enumerate the 8 triples, test IsO5, and record that at least one choice avoids O5.
- Step C (|A|=4): Enumerate compatible (B,C) (both of type C5 or H5, agreeing on f(A)), form p^B_k,p^C_k (k=1..4), and brute‑force the 2^6 choices of x_{ij}, rejecting any assignment for which some Y_k is O5. Record either a counterexample or certify all cases pass.
- Precompute F(α,β)⊆{±1}^3: the allowed triples for a 5‑set with given two fixed coordinates. Then the |A|=4 CSP checks membership of the four triangle‑triples in F(p^B_k,p^C_k).

Constructive ansatz to test
- Try x_{ij}=w_iw_j with w_i:=p^B_i·p^C_i for i∈A. For T={i,j,k} this gives a triple (w_iw_j,w_iw_k,w_jw_k) of product +1. If this never yields O5 for any (p^B_k,p^C_k), it provides a uniform construction for all |A| (worth testing; not proved).
Addendum: explicit S5 action, corrections, and computation plan

1) Explicit ε-formula for the S5 action (implementation aid)
For τ ∈ S5 and i ∈ {1,…,5}, write j := τ^{-1}(i) and define
c_j(τ) := |{k<j : τ(k) > τ(j)}| + |{k>j : τ(k) < τ(j)}|.
Then the sign multiplier in the action p′_i = ε_i(τ)·p_{τ^{-1}(i)} equals
ε_i(τ) = sgn(τ)·(−1)^{c_j(τ)}.
Sketch of justification: Let τ′ be the induced bijection from [5]\{j} to [5]\{i}. Its inversion count is inv(τ′) = inv(τ) − c_j(τ) because the inversions of τ decompose into those not involving j (which biject with the inversions of τ′) and those involving j (counted by c_j). Hence sgn(τ′) = (−1)^{inv(τ′)} = (−1)^{inv(τ)−c_j} = sgn(τ)·(−1)^{c_j}. By definition ε_i(τ) = sgn(τ′). A immediate corollary is the product identity ∏_{i=1}^5 ε_i(τ) = sgn(τ), since Σ_j c_j(τ) = 2·inv(τ).

Practical note: This eliminates ambiguity about ε and supports a robust IsO5 enumerator.

2) Correction to the “fully aligned” claim
The statement “If p^B_k = p^C_k for all k then setting all x_{ij}=δ makes p(Y_k) constant δ for all k” is false unless the common pattern (p^B_k)_{k∈A} is itself constant with value δ. Counterexample: take p^B=p^C=(+,+,−,+) and δ=+. Then for k=3 the fixed coordinates are (−,−) while the three variables are +, so p(Y_3) is not constant. A correct (weaker) statement is: if p^B_k = p^C_k = δ for all k, then x_{ij}≡δ makes every p(Y_k) constant δ, hence non-O5.

3) F(α,β) tables: compute all four cases
Define F(α,β) ⊆ {±1}^3 as the set of triples (x,y,z) for which p=(α,β,x,y,z) is non-O5. Do not assume F(+,+)=F(−,−) or F(+,-)=F(−,+) a priori; compute all four cases. This is an 8×4=32-evaluation task. Record each F(α,β) explicitly along with any observed symmetries (e.g., invariance under permuting x,y,z).

Consequence: |A|=3 reduces to checking that for each (α,β) there exists at least one triple in F(α,β). Archive one such triple per case.

4) |A|=4 CSP protocol (profiles and ansatz)
- Use the already-recorded CSP with variables x_{ij} on the six edges of K4 and four constraints Y_k. For any concrete pair (B,C) over A with B∩C=A and both omitting O5, determine the four pairs (p^B_k,p^C_k) and require the corresponding triangle-triple to lie in F(p^B_k,p^C_k).
- Profiles to test early:
  • P1: p^B≡+, p^C≡+. The corrected alignment lemma (constant case) gives the assignment x_{ij}≡+.
  • P2: p^B≡+, p^C≡−. Try the perfect-matching assignment x_{12}=x_{34}=+, others −; check all four Y_k via IsO5.
  • P3: p^B≡+, p^C drawn from an H5 labeling consistent on A; try ansatz x_{ij}=w_i w_j with w_i=p^B_i p^C_i.
  • P4: both sides H5 aligned on A; by the corrected alignment lemma with δ=+, x_{ij}≡+ works if the common 4-bit pattern on A is constant +.
- Constructive ansatz: x_{ij}:=w_i w_j where w_i:=p^B_i p^C_i. For T={i,j,k}, the triple is (w_i w_j, w_i w_k, w_j w_k) with product +1. Test this uniformly across enumerated cases; if it always avoids O5, it suggests a uniform construction for general |A|.

5) Unit tests for IsO5
- p=(+,+,+,+,+) should classify non-O5; p=(+,−,−,−,−) should classify O5; p=(+,−,+,−,+) should classify non-O5 (H5). Also verify that for a transposition τ, ∏_i p′_i flips sign (product identity) and that orbit membership is invariant under the action.

6) Checklist for the next round
- Implement IsO5 with the ε-formula; report the size of the O5 orbit found by enumeration.
- Compute and list F(α,β) for all four cases; confirm |A|=3.
- Run the |A|=4 CSP on P1–P4 first, then extend to representatives modulo S4 on A; archive satisfying/unsatisfying assignments.
- Report whether the ansatz x_{ij}=w_i w_j succeeds in all tested instances.
Additional clarifications, small lemmas, and symmetry for the 5-vector orbit

1) Semantics of the fixed bits p^B_k and p^C_k (|A|=4)
For B on A∪{b} and k∈A, define p^B_k:=f_B({b}∪(A\{k})). On the 5-set A∪{b}, the 5-vector p has entries p_x=f((A∪{b})\{x}). Thus for k∈A, p^B_k coincides with the coordinate “missing k” of p on A∪{b}: it records whether the increasing 4-tuple on {b}∪(A\{k}) is in R_B. Analogously p^C_k is the coordinate “missing k” of the 5-vector on A∪{c}.

2) Necessary local exclusions in the opposite-fixed case (rigorous justification)
- With (α,β,x,y,z)=(+;−;−,−,−) we obtain the canonical O5 representative; hence this triple is forbidden for (α,β)=(+,-).
- By central symmetry of the O5 orbit (see 4) below), (−;+;+,+,+) is also O5; hence forbidden for (α,β)=(−,+).
These give immediate unit tests for any IsO5 implementation and constraints for F(+,-) and F(−,+).

3) Edge/triangle viewpoint and the structured ansatz
- Place the six variables x_{ij} on the edges of K4 on A. The constraint Y_k uses the triangle on T=A\{k}.
- Structured ansatz: pick w_i∈{±1} on the vertices and set x_{ij}:=w_i w_j. For any triangle {i,j,k}, the triple (w_iw_j,w_iw_k,w_jw_k) has product +1, realizing exactly (+++),(+−−),(−+−),(−−+).

4) Central symmetry of the O5 orbit and a consequence for F(α,β)
There exists τ∈S5, e.g. τ=(13), with ε_i(τ)=−1 for all i (check via Lemma 6: c_j(τ) is even for every j and sgn(τ)=−1). Hence for any 5-vector p, p∈O5 iff −p∈O5. As a consequence, for the local tables F(α,β)⊆{±1}^3 (defined by p=(α,β,x,y,z) non-O5), one has
F(−α,−β) = { (−x,−y,−z) : (x,y,z)∈F(α,β) }.
Therefore it suffices to compute F(+,+) and F(+,-); the other two cases follow by triplewise negation. Do not assume any further symmetries (e.g., permutations of x,y,z or F(+,-)=F(−,+)) without verification.

5) On classifying |A|=4 instances
The constraint at each k depends on the ordered pair (p^B_k,p^C_k)∈{++,−−,+−,−+}. Reduction to the pure eq/opp pattern E={k: p^B_k=p^C_k} is insufficient unless one proves F(+,+)=F(−,−) and F(+,-)=F(−,+). Use the full type-vector in {++,−−,+−,−+}^A. By 4), it is enough to compute and store F(+,+), F(+,-), and infer the other two by negation.

6) Implementation checklist (precise conventions)
- Fix, once and for all, an ordering of the five vertices of each Y_k with the first two positions corresponding to the coordinates “missing c” and “missing b”, respectively, and the last three to the vertices of A\{k} in increasing order. Use the same convention for constructing p=(α,β,x,y,z) when populating F(α,β).
- Implement IsO5 via Lemma 6. Unit tests: (+,+,+,+,+) is non-O5; (+,−,−,−,−) is O5; (+,−,+,−,+) is non-O5. Report the orbit size and verify closure under the action.
- Compute F(+,+), F(+,-); obtain F(−,−), F(−,+) by triplewise negation. Conclude |A|=3 by listing one admissible triple for each (α,β).
- For |A|=4, enumerate realizable type-vectors from actual pairs (B,C) (both C5/H5, agreeing on A), and brute-force 2^6 assignments to x_{ij}. Archive SAT witnesses or UNSAT certificates. Test the ansatz x_{ij}=w_i w_j with w_i=p^B_i p^C_i across the same cases.

These additions lock down the symmetry that underlies Claim N1, correct the eq/opp reduction, and make the forthcoming computations unambiguous and reusable.
Uniform 2+2− assignment and a corrected conditional reduction for |A|=4

Ordering convention for local F-tables
- For any 5-set Y_k={b,c}∪(A\{k}) with A={1,2,3,4} and i<j<ℓ the increasing order on A\{k}, we use the coordinate order
  p(Y_k) = (p_{\text{missing }c}, p_{\text{missing }b}, p_{\text{missing }i}, p_{\text{missing }j}, p_{\text{missing }\ell}).
- With this convention, F(α,β)⊆{±1}^3 is the set of ordered triples (x,y,z) such that (α,β,x,y,z) is non-O5.

Lemma A (2+2 vertex-sign ansatz yields (+−−)-type on every triangle).
- Let w_i∈{±1} (i∈A) have exactly two + and two −, and set x_{ij}:=w_i w_j. For each k, the triple (x,y,z) contributed by the three edges inside A\{k} is, up to permutation of its three coordinates, of the form (+,−,−).
- Proof. If k is from the + vertices, then A\{k} contains {+,−,−}; the pairwise products are (−,−,+). If k is from the − vertices, then A\{k} contains {+, +, −}; the pairwise products are (+,−,−). In either case the unordered triple has one + and two −. The order within (x,y,z) depends on the fixed coordinate convention but is a permutation of (+,−,−). ∎

Corrected conditional reduction for |A|=4
- Conditional Proposition (uniform 2+2 ansatz). Fix the above ordering convention. Suppose that for each (α,β)∈{++, +−, −+, −−}, all three permutations of (+,−,−) lie in F(α,β). Then for every one-point instance over |A|=4 there exists an amalgam D in H obtained by the uniform assignment x_{ij}=w_i w_j with some w having exactly two + and two − on A.
  • Proof. By Lemma A, for every k the ordered triple on Y_k is a permutation of (+,−,−). By hypothesis, this ordered triple is in F(p^B_k,p^C_k) for each k, hence none of the four Y_k is O5, and D∈H. ∎
- Unconditional subcase (equal-constant fixed pairs). If (p^B_k,p^C_k)=(δ,δ) for all k (with δ∈{±1}), then the constant assignment x_{ij}≡δ makes every p(Y_k) equal to (δ,δ,δ,δ,δ), which is ±C5 and therefore non-O5. Hence an amalgam exists in this subcase.

Hard local exclusion in the opposite-fixed case
- For (α,β)=(+,-), the triple (−,−,−) is forbidden: p=(+,-,−,−,−) is the canonical O5 representative. By central symmetry of the S5 action, (+++) is forbidden for (α,β)=(−,+) as well. These serve as unit checks for IsO5 and constraints in populating F.

Notes on earlier claims
- The claim “(+++) is forbidden in F(+,-)” has not been proved. The argument via “flipping one coordinate” is not valid under the S5 signed action. Treat this as a computational check when populating F.

Computational checklist (precise and minimal)
1) Implement IsO5 via Lemma 6; unit tests: (+,+,+,+,+) non-O5; (+,−,−,−,−) O5; (+,−,+,−,+) non-O5. Report the size of the O5 orbit and closure under the action.
2) Compute F(+,+) and F(+,-) completely (8 triples each) under the above ordering; use Corollary 9 to derive F(−,−) and F(−,+) by triplewise negation. Do not assume S3-invariance.
3) Test the 12 memberships: for each (α,β)∈{++, +−, −+, −−}, verify that all three permutations of (+,−,−) lie in F(α,β).
4) If step 3 passes, conclude by the conditional proposition that the |A|=4 one-point step is uniformly solvable by a 2+2 ansatz; with Lemma 2 this yields AP.
5) If step 3 fails, run the 2^6 CSP for the offending type-profile to search for a different satisfying assignment or produce an UNSAT certificate (listing, for each assignment, a Y_k showing O5).

Implementation detail retained: the structured ansatz yields triangle triples of product +1, hence it can never realize (−,+,+) or (−,−,−). Keep this in mind when interpreting F-tables and debugging assignments.
Updates: explicit |A|=3 solution, concrete |A|=4 tests, and a solvable subclass

Coordinate convention reminder (used below)
- For Y_k={b,c}∪(A\{k}) with A={1,2,3,4} and i<j<ℓ the increasing order on A\{k}, we encode
  p(Y_k) = (p_{missing c}, p_{missing b}, p_{missing i}, p_{missing j}, p_{missing ℓ}).
- Mapping of the last three coordinates to edge variables on K4[A]:
  • p_{missing i} = x_{jℓ},  p_{missing j} = x_{iℓ},  p_{missing ℓ} = x_{ij}.

|A|=3 one‑point amalgamation solved (constructive)
- Let A have size 3. For Y=A∪{b,c} write p(Y)=(α,β,x,y,z) in the above order, where α is fixed by B (missing c), β by C (missing b), and x,y,z are the cross 4‑sets. The following choices always avoid O5:
  • (α,β)=(+,+): take (x,y,z)=(+,+,+) → p(Y)=(+,+,+,+,+)=C5.
  • (α,β)=(−,−): take (x,y,z)=(−,−,−) → p(Y)=(−,−,−,−,−)=−C5.
  • (α,β)=(+,-): take (x,y,z)=(+,-,+) → p(Y)=(+,-,+,-,+)=H5.
  • (α,β)=(−,+): take (x,y,z)=(−,+,−) → p(Y)=(−,+,−,+,−)=−H5.
  Hence the one‑point extension over |A|=3 always exists in H.

Concrete |A|=4 test profiles for the 2+2 ansatz (w=(+,+,−,−), x_{ij}=w_i w_j)
- Triangles (Y_k):
  • k=1: (x_{23},x_{24},x_{34})=(−,−,+) → p(Y_1)=(p^B_1,p^C_1,−,−,+).
  • k=2: (x_{13},x_{14},x_{34})=(−,−,+) → p(Y_2)=(p^B_2,p^C_2,−,−,+).
  • k=3: (x_{12},x_{14},x_{24})=(+,-,−) → p(Y_3)=(p^B_3,p^C_3,+,−,−).
  • k=4: (x_{12},x_{13},x_{23})=(+,-,−) → p(Y_4)=(p^B_4,p^C_4,+,−,−).
- Profiles to check via IsO5 (the first two coordinates are specialized as follows):
  • P1: p^B≡+, p^C≡+ → test (+,+,−,−,+) and (+,+,+,−,−).
  • P2: p^B≡+, p^C≡− → test (+,−,−,−,+) and (+,−,+,−,−).
  • P3: p^B≡+, p^C=(+,-,+,-) (aligned H5 on A∪{c}) → same two vectors as P2.
A single IsO5 pass on these four vectors settles P1–P3 for the 2+2 ansatz.

A solvable subclass for |A|=4 via a “local H5 witness” pattern
- Prescribe for each k a local triple (x_{jℓ}, x_{iℓ}, x_{ij}) = (α_k, β_k, α_k), where (α_k,β_k)=(p^B_k,p^C_k) and i<j<ℓ enumerate A\{k}.
- Shared‑edge consistency forces:
  • α_1=α_2=α_3=α_4;  β_1=α_3;  β_4=α_2;  β_2=β_3.
- If the given one‑point data (B,C) satisfy these equalities, then for each k we get p(Y_k)=(α_k,β_k,α_k,β_k,α_k), which is ±C5 if α_k=β_k, else ±H5. Hence an amalgam exists for this subclass.

Caveat on the LLL heuristic
- The symmetric LLL condition e·p·(d+1)≤1 with d=3 would require p≤1/(4e)≈0.091. If |{±1}^3\F(α,β)|≤1 then p=1/8≈0.125, which does not meet the symmetric bound. Treat any LLL‑based argument as heuristic unless we deploy a sharper criterion tailored to our dependency graph.

Actionable checklist (minimal computation to unblock |A|=4)
1) Implement IsO5 (Lemma 6), run unit tests, and report the O5 orbit size.
2) Test the four 5‑vectors from P1–P3 above.
3) Compute F(+,+) and F(+,-) fully (8 triples each) under the fixed ordering; obtain the other two by triplewise negation. Archive the tables.
4) If all permutations of (+,−,−) lie in each F(α,β), invoke Proposition 11 (uniform 2+2). Otherwise, brute‑force the 2^6 CSP per realized 4‑type profile and record SAT witnesses or an UNSAT certificate.
New rigorous tools and corrections (to be used going forward)

1) Union‑bound feasibility for the |A|=4 CSP
- Statement. In the |A|=4 CSP with six edge variables x_{ij} and four triangle constraints Y_k, if for each k the local table F(p^B_k,p^C_k) forbids at most one ordered triple (i.e., |{±1}^3\F(p^B_k,p^C_k)| ≤ 1), then there exists a satisfying global assignment.
- Reason. Each forbidden triple for a fixed triangle rules out exactly 2^3 global assignments (the other 3 edges are free). With at most one forbidden triple per triangle, at most 4·2^3=32 of the 64 assignments are excluded. Hence at least 32 assignments remain.
- Consequence. If a small computation confirms |{±1}^3\F(+,+)| ≤ 1 and |{±1}^3\F(+,-)| ≤ 1 (the other two cases follow by triplewise negation; Cor. 9), the |A|=4 step follows immediately without any 6‑variable search.

2) Specialization of the S5 action to the O5 representative (implementation aid)
- For e_O=(+,-,-,-,-) and τ∈S5 with ε(τ)=(ε_1,…,ε_5), let i0:=τ(1). Then the image p′ under the signed action satisfies p′_i = ε_i if i=i0 and p′_i = −ε_i otherwise. Equivalently, p′ is obtained from ε by flipping all coordinates except i0. Thus p∈O5 iff ∃ε∈E:={ε(τ):τ∈S5} and i0 with p_i=−ε_i for i≠i0 and p_{i0}=ε_{i0}.
- Note. This enables a very compact IsO5: precompute E (120 evaluations) and check the 5·|E| candidates.

3) Parity invariant across the four triangles
- For any assignment x_{ij}∈{±1}, the product of the triangle‑products over the four Y_k equals +1. Equivalently, an odd number of triangles cannot have triple product −1. Reason: each x_{ij} appears in exactly two triangle‑products.

4) Distribution of triangle triples under vertex‑sign assignments
- If x_{ij}=w_i w_j with w∈{±1}^A, then on any triangle the triple is either (+++) (when the three w are equal) or a permutation of (+,−,−) (otherwise). In particular: 4+/0− (or 0+/4−) yields four (+++); 3+/1− (or 1+/3−) yields exactly one (+++); 2+/2− yields no (+++) and all four triangles are permutations of (+,−,−).

Corrections to prior claims
- False: “If T_B=C5 then (p^B_k)_{k∈A} is constant; if T_B=H5 then it is 2+2.” Counterexample: for a C5 5‑set, the 5‑vector equals ε(τ) for some τ; e.g., τ=(12) gives ε=(+,+,−,−,−), which is not constant on A. Do not use this classification to prune cases.
- Unproved (and currently unknown): (+++)∉F(+,-). The argument that tried to force this from Lemma 8 incorrectly treats the free index i0. We keep only the rigorously proved exclusion (---)∉F(+,-) (output.md Lemma 13). The status of (+++) in F(+,-) must be decided computationally.

Coordinate convention (reminder)
- For Y_k={b,c}∪(A\{k}) with A={1,2,3,4} and i<j<ℓ the increasing order on A\{k}, we encode p(Y_k)=(p_{missing c}, p_{missing b}, p_{missing i}, p_{missing j}, p_{missing ℓ}), with p_{missing i}=x_{jℓ}, p_{missing j}=x_{iℓ}, p_{missing ℓ}=x_{ij}.

Actionable checklist (minimal computation to unblock |A|=4)
- Implement IsO5 using Lemma 6; validate unit tests: (+,+,+,+,+) ∉O5; (+,−,−,−,−) ∈O5; (+,−,+,−,+) ∉O5. Also verify the sample ε(τ) values listed in prior notes.
- Compute F(+,+) and F(+,-) completely (8 triples each) under the fixed coordinate order; derive F(−,−), F(−,+) by triplewise negation. Report sizes and explicit complements.
- If both complements have size ≤1, conclude |A|=4 by the union‑bound lemma and hence AP via Lemma 2. If, stronger, both F tables are exactly “triple product +1,” record the uniform construction x_{ij}=w_i w_j and close.
- If not, test whether all permutations of (+,−,−) lie in F(+,+) and F(+,-); if yes, apply Proposition 11 (uniform 2+2). Otherwise brute‑force the 2^6 CSP on the realized profiles, using the parity invariant to prune, and archive SAT/UNSAT witnesses.
O5 membership: exact S‑criterion vs. ε‑only heuristics
- Exact criterion (to be used for IsO5). Let e_O=(+,-,-,-,-), and define the pair‑set
  S := { (ε(τ), i0=τ(1)) : τ ∈ S_5 },
  where ε(τ) is as in Lemma 6. Then for p∈{±1}^5,
  p ∈ O5 ⇔ ∃(ε,i0)∈S such that p_i = ε_i for i=i0 and p_i = −ε_i for i≠i0.
  Equivalently, p is obtained from ε by “flipping all coordinates except i0,” with (ε,i0) realized by the same τ. This is the specialization of the action to e_O and is both necessary and sufficient.

- ε‑only heuristics (use with caution). Two convenient tests are often useful but are not sufficient on their own:
  • Hamming‑1: Hamming(−p, ε) = 1 for some ε ∈ E := {ε(τ) : τ∈S_5}.
  • Inner‑product −3: Σ_i p_i ε_i = −3 for some ε∈E (equivalently to Hamming‑1).
  These conditions are necessary for O5 membership but not sufficient unless the unique discrepancy index i0 is consistent with i0=τ(1) for the same τ realizing ε. Hence, they can give false positives. Always validate by checking the pair (ε,i0)∈S.

ε‑cocycle and generators (implementation aids)
- Cocycle identity. For σ,τ∈S_5 and i∈[5]:
  ε_i(σ∘τ) = ε_i(σ) · ε_{σ^{-1}(i)}(τ).
  This follows by composing the signed actions (Lemma 6) and comparing with the action of σ∘τ.

- Adjacent transpositions. For s_k=(k k+1) (k=1,2,3,4),
  ε(s_k) has + at positions k and k+1 and − elsewhere.
  This is a direct computation from Lemma 6 via the c_j counts and is a robust generator datum for building E and S by BFS on the Cayley graph of S_5.

Practical S‑oracle blueprint
- Build S by BFS over right‑multiplication by s_k, storing for each state (τ) the pair (ε(τ), i0=τ(1)). Update via the cocycle and track i0′=τ(s_k(1)). Verify: |S|=120; sample ε values on generators; product identity ∏_i ε_i(τ)=sgn(τ) (Cor. 7).
- IsO5(p): return true iff ∃(ε,i0)∈S with p_i=ε_i for i=i0 and p_i=−ε_i otherwise.

Local F‑tables and the |A|=4 plan
- Compute F(+,+) and F(+,-) by 8 exact IsO5 calls each on p=(α,β,x,y,z) under the fixed coordinate order (reminder in output.md). Derive F(−,−) and F(−,+) by triplewise negation (Cor. 9). Confirm the |A|=3 witnesses (Proposition 14) show up as allowed entries in the appropriate tables.
- Decision routes:
  • If |{±1}^3\F(+,+)| ≤ 1 and |{±1}^3\F(+,-)| ≤ 1, conclude |A|=4 by Cor. 16.1.
  • If, stronger, all three permutations of (+,−,−) lie in F(+,+) and F(+,-), conclude by Proposition 11 (uniform 2+2).
  • Otherwise, run the 2^6 CSP per realized profile, pruning by the parity invariant (Lemma 17).

Unit checks for the oracle
- Mandatory: (+,−,−,−,−) ∈ O5; (+,+,+,+,+) ∉ O5; (+,−,+,−,+) ∉ O5. Also verify ε(s_k) as above and closure properties from Lemma 6/Cor. 7.

Caveat
- Do not treat “ε only” rules (Hamming‑1 or inner‑product −3) as definitive. They are helpful filters but must be validated against the S‑pair constraint to avoid false positives.
New internal symmetries for F(α,β), concrete exclusions, and a correction about 2+2 shapes

Internal S5-induced symmetries of the local tables
- Let F(α,β)⊆{±1}^3 be defined under the fixed coordinate convention: (x,y,z)∈F(α,β) iff (α,β,x,y,z) is non‑O5.
- Lemma 21 (swap of the fixed coordinates; central symmetry when α=β). For all α,β and all (x,y,z),
  (x,y,z)∈F(α,β) ⇔ (−x,−y,−z)∈F(β,α).
  In particular, F(α,α) is centrally symmetric: t∈F(α,α) ⇔ −t∈F(α,α).
  Sketch: Apply τ=(12) (ε=(+,+,−,−,−) by Lemma 19) and use O5‑invariance under A_τ.
- Lemma 22 (internal generators preserving (α,β)). Within a fixed table F(α,β), membership is preserved by the transformations
  • S3: (x,y,z)↦(−y,−x,z) (from τ=(34) + global sign symmetry),
  • S4: (x,y,z)↦(x,−z,−y) (from τ=(45) + global sign symmetry).
- Lemma 23 (swap of first and third triple coordinates). Within F(α,β), (x,y,z)∈F(α,β) ⇔ (z,y,x)∈F(α,β). Proof: compose S4, then S3, then S4.
- Consequence: The action generated by S3, S4, and (x,y,z)↦(z,y,x) preserves the triple‑product and partitions {±1}^3 into four orbits: for product +1, an orbit of size 3 {+++, +−−, −−+} and a fixed singleton {−+−}; for product −1, an orbit of size 3 {−−−, ++−, −++} and a fixed singleton {+−+}. Thus, per table, it suffices to test at most four representatives, e.g. (+++), (+−−), (−−−), (+−+). When α=β, the central symmetry of Lemma 21 reduces the representatives further.

Concrete forbidden triples (with explicit τ‑witnesses)
- In F(+,-): (++−) is forbidden. Witness: τ=(12)(34) has ε=(−,−,−,−,+) and i0=τ(1)=2. Then A_τ(e_O)=(+,−,+,+,−), i.e. (α,β,x,y,z)=(+,-,+,+,−) is O5, so (++−)∉F(+,-).
- In F(+,+): (−,+,+) is forbidden. Witness: τ=(13) has ε=(−,−,−,−,−) (cf. Lemma 8) and i0=3. Then A_τ(e_O)=(+,+,−,+,+), so (−,+,+)∉F(+,+). By Lemma 21 (α=β), (+,−,−) is also forbidden in F(+,+).

Correction about realized permutations under the 2+2 ansatz
- The 2+2 vertex‑sign ansatz (x_{ij}=w_i w_j with w having two + and two −) produces on each triangle a permutation of (+,−,−) (Lemma 10). However, contrary to an earlier claim, the specific permutation (−,+,−) can occur for some choices of w under our fixed coordinate order. Example: w=(+,-,+,-) and k=4 yield (x_{23},x_{13},x_{12})=(−,+,−).
- A safe specialization: if we commit to the fixed choice w=(+,+,−,−) (or symmetrically w=(−,−,+,+)), then one checks explicitly that Y_1,Y_2 realize (−,−,+) while Y_3,Y_4 realize (+,−,−). Under this restriction, Lemma 23 guarantees that the two realized shapes are equivalent within each F(α,β), reducing checks to a single representative per base table.

Minimal computation plan (refined by symmetries)
- Implement IsO5 via Lemma 20 and validate using the sample (ε,i0) pairs and the product invariant ∏ p_i = sgn(τ).
- Populate F(+,+), F(+,-) by testing only the four representatives (+++), (+−−), (−−−), (+−+) per table; recover the rest by Lemmas 21–23 and Cor. 9. Derive F(−,−), F(−,+) by Cor. 9.
- If |{±1}^3\F(+,+)|≤1 and |{±1}^3\F(+,-)|≤1, conclude by Cor. 16.1. Otherwise, try the fixed 2+2 choice w=(+,+,−,−) and check (+,−,−)∈F(+,+) and (+,−,−)∈F(+,-); if both hold, all four Y_k are allowed by Lemma 23. Failing that, run the tiny backtracking solver with parity pruning (Lemma 17).


=== output.md ===
Proposition 1 (Orientation function model).
For a finite set V, giving a 4‑hypertournament structure (V,R) satisfying: (i) all tuples in R have distinct entries; (ii) R is closed under even permutations of coordinates; (iii) for every 4‑tuple of distinct vertices (x1,x2,x3,x4), exactly one of (x1,x2,x3,x4) and (x2,x1,x3,x4) lies in R; is equivalent to giving an arbitrary function f:[V]^4→{±1}.
Proof. Given f, declare (x1,x2,x3,x4)∈R iff the permutation from the increasing ordering of S={x1,x2,x3,x4} to (x1,…,x4) has sign equal to f(S). This satisfies (i)–(iii) by construction. Conversely, given R with (i)–(iii), fix any 4‑set S and any increasing ordering s of S. By (iii), exactly one of s and its swap lies in R; define f(S)=+1 if s∈R and f(S)=−1 otherwise. By (ii) and (iii), membership of any ordered tuple from S depends only on the parity relative to s, so f is well defined and recovers R. ∎

Lemma 2 (One‑point amalgamation suffices for AP in H).
Let H be the class of finite 4‑hypertournaments omitting O5. Suppose that whenever A∈H and B=A∪{b}∈H and C=A∪{c}∈H with B∩C=A, there exists D∈H on A∪{b,c} extending both B and C. Then H has the amalgamation property.
Proof. Given B0,B1∈H over A, enumerate C\A as c1,…,ck and set A0:=A. Inductively, amalgamate Bi with Ai∪{ci} over Ai to obtain Bi+1 on Ai+1:=Ai∪{ci}. At each step, by hypothesis, all 5‑sets involving the new vertex ci avoid O5, and previously constructed parts are unchanged. After k steps we obtain an amalgam D∈H of B0 and C over A. ∎

Proposition 3 (CSP formulation of the |A|=4 one‑point step).
Let A={1,2,3,4}, b, c new. Given B on A∪{b} and C on A∪{c} in H that agree on A, any amalgam D on A∪{b,c} is determined on new 4‑sets by the six values x_{ij}:=f({i,j,b,c}) (1≤i<j≤4). The only new 5‑sets are Y_k:={b,c}∪(A\{k}) for k=1,2,3,4. Writing p^B_k:=f_B({b}∪(A\{k})) and p^C_k:=f_C({c}∪(A\{k})), the 5‑vector p(Y_k) has two fixed coordinates (missing c gives p^B_k; missing b gives p^C_k) and three coordinates equal to the x_{ij} for {i,j}⊂A\{k}. D∈H iff for each k, p(Y_k) is not in the O5 orbit.
Proof. All 4‑sets contained in B or C are already fixed. The only 4‑sets not contained in B or C are precisely the six X_{ij}={i,j,b,c}. The only new 5‑subsets of A∪{b,c} (relative to B and C) are those that contain both b and c; there are exactly four, the Y_k. Their p‑vectors depend on the listed values. Avoidance of O5 on all 5‑sets is thus equivalent to the stated four constraints. ∎

Corollary 4 (Trivial one‑point cases |A|≤2).
If |A|≤2, then one‑point amalgamation always succeeds in H.
Proof. When |A|≤2 there are no 3‑subsets of A, hence no 5‑sets of the form {b,c}∪T with T⊂A of size 3. Thus there are no new 5‑set constraints; any assignment to cross 4‑sets yields an amalgam in H. ∎

Fact 5 (Switching yields a 4‑hypertournament but may change 5‑types).
For ε:V→{±1}, define f^ε(S):=(∏_{v∈S}ε(v))·f(S). Then f^ε encodes a 4‑hypertournament. However, for a fixed 5‑set X, switching at v∈X flips the four coordinates of p(X) corresponding to 4‑sets containing v and leaves the coordinate “missing v” unchanged; this can change the isomorphism type on X (e.g., an O5 representative (+,-,-,-,-) switches at its ‘+’ vertex to (+,+,+,+,+), a C5 representative). ∎
Lemma 6 (Explicit formula for the S5 action on 5-vectors).
Let X be a 5-set equipped with an increasing labeling {1,2,3,4,5}. For τ∈S5 and i∈{1,…,5}, write j:=τ^{-1}(i) and define
c_j(τ) := |{k<j : τ(k) > τ(j)}| + |{k>j : τ(k) < τ(j)}|.
In the isomorphism action on p∈{±1}^X given by p′_i = ε_i(τ)·p_{τ^{-1}(i)}, the sign factor is
ε_i(τ) = sgn(τ)·(−1)^{c_j(τ)}.

Proof. Let τ′ be the induced bijection from [5]\{j} to [5]\{i}, obtained by deleting position j in the domain and value i in the codomain. By definition, ε_i(τ)=sgn(τ′). The inversions of τ split into two disjoint families: those not involving j (which correspond bijectively to inversions of τ′) and those involving j, whose number is c_j(τ) by definition. Hence inv(τ)=inv(τ′)+c_j(τ), so sgn(τ)= (−1)^{inv(τ)} = (−1)^{inv(τ′)+c_j(τ)} = sgn(τ′)·(−1)^{c_j(τ)} = ε_i(τ)·(−1)^{c_j(τ)}. Rearranging gives the claimed formula. ∎

Corollary 7 (Product identity for ε-factors).
For τ∈S5, one has ∏_{i=1}^5 ε_i(τ) = sgn(τ).

Proof. Using ε_i(τ) = sgn(τ)·(−1)^{c_{τ^{-1}(i)}(τ)} and the fact that each inversion contributes 1 to c_a and 1 to c_b, we have Σ_{j=1}^5 c_j(τ) = 2·inv(τ). Therefore ∏_{i=1}^5 ε_i(τ) = sgn(τ)^5 · (−1)^{Σ_j c_j(τ)} = sgn(τ)·(−1)^{2·inv(τ)} = sgn(τ). ∎
Lemma 8 (Central symmetry of the O5 orbit).
There exists τ∈S5 with ε_i(τ)=−1 for all i. In particular, for any 5-vector p one has p∈O5 if and only if −p∈O5. Thus the O5 orbit is closed under global sign reversal.

Proof. Take τ=(13) in one-line notation [3,2,1,4,5]. By Lemma 6, for j:=τ^{-1}(i), ε_i(τ)=sgn(τ)·(−1)^{c_j(τ)}. A direct count gives c_1(τ)=c_2(τ)=c_3(τ)=2 and c_4(τ)=c_5(τ)=0, so c_j(τ) is even for all j. Since sgn(τ)=−1, we get ε_i(τ)=−1 for every i. If q is in the O5 orbit, then so is R_τ(q)=−q∘τ^{−1}. As σ ranges over S5, the set {−R_σ(e1)} equals {R_{τσ}(e1):σ∈S5}, hence −O5=O5. ∎

Corollary 9 (Sign-flip symmetry for local tables F).
For F(α,β)⊆{±1}^3 defined by: (x,y,z)∈F(α,β) iff (α,β,x,y,z) is non-O5, one has
F(−α,−β) = { (−x,−y,−z) : (x,y,z)∈F(α,β) }.

Proof. (α,β,x,y,z) is non-O5 iff its global negation (−α,−β,−x,−y,−z) is non-O5 by Lemma 8. This is exactly the stated correspondence. ∎
Lemma 10 (2+2 vertex signs induce (+−−)-type on every triangle).
Let A={1,2,3,4} and choose w_i∈{±1} with exactly two plus and two minus. Define x_{ij}:=w_i w_j for 1≤i<j≤4. For each k∈A, on the triangle induced by A\{k} the ordered triple of edge-variables (x,y,z) (in any fixed coordinate convention) is a permutation of (+,−,−).

Proof. If k is one of the + vertices, then A\{k} contains one + and two −; the three pairwise products are (−,−,+). If k is one of the − vertices, then A\{k} contains two + and one −; the three pairwise products are (+,−,−). Thus in either case the unordered triple has signs {+ , − , −}. The ordering of (x,y,z) depends on the fixed convention but is a permutation of (+,−,−). ∎

Proposition 11 (Conditional |A|=4 amalgamation via a uniform 2+2 ansatz).
Fix a consistent ordering convention for the last three coordinates in the definition of F(α,β) (e.g., by increasing order of the three vertices in A\{k}). Suppose that for each (α,β)∈{++, +−, −+, −−}, all three permutations of (+,−,−) belong to F(α,β). Then for every one-point diagram over |A|=4 there exists an amalgam D∈H obtained by setting x_{ij}=w_i w_j for some choice of w with exactly two + and two − on A.

Proof. Choose any w with exactly two + and two − on A and set x_{ij}=w_i w_j. By Lemma 10, for each k the ordered triple contributed by the three edges in A\{k} is a permutation of (+,−,−). By hypothesis, this ordered triple lies in F(p^B_k,p^C_k) for every k, so no Y_k is of type O5. Therefore the resulting structure on A∪{b,c} is in H and extends both B and C. ∎

Proposition 12 (Equal-constant fixed pairs are solvable by a constant assignment).
In the |A|=4 one-point amalgamation problem, if (p^B_k,p^C_k)=(δ,δ) for all k∈A with a fixed δ∈{±1}, then there exists an amalgam D∈H obtained by setting x_{ij}≡δ.

Proof. With this assignment, for each k the 5-vector p(Y_k) equals (δ,δ,δ,δ,δ), which is ±C5. Since ±C5 is not in the O5 orbit, each Y_k is non-O5 and the amalgam lies in H. ∎

Lemma 13 (A hard local exclusion in the opposite-fixed case).
For (α,β)=(+,-), the triple (−,−,−) is forbidden: (x,y,z)=(−,−,−)∉F(+,-). Symmetrically, for (α,β)=(−,+), (+++)∉F(−,+).

Proof. For (α,β)=(+,-) and (x,y,z)=(−,−,−) one has p=(+,-,−,−,−), which is the canonical O5 representative; hence it is in the O5 orbit. By Lemma 8 (global sign-reversal is in the orbit), (−,+,+,+,+) is also in O5, yielding the symmetric statement. ∎
Proposition 14 (The one-point amalgamation over |A|=3 always succeeds, constructively).
Let A have size 3 and let B=A∪{b} and C=A∪{c} lie in H and agree on A. On Y:=A∪{b,c}, write p(Y)=(α,β,x,y,z) in the coordinate order (missing c, missing b, then missing the elements of A in increasing order). Then for each (α,β)∈{±1}^2 there is a choice of (x,y,z)∈{±1}^3 such that p(Y) is not in the O5 orbit, namely:
- If (α,β)=(+,+), take (x,y,z)=(+,+,+), so p(Y)=(+,+,+,+,+)=C5.
- If (α,β)=(−,−), take (x,y,z)=(−,−,−), so p(Y)=(−,−,−,−,−)=−C5.
- If (α,β)=(+,-), take (x,y,z)=(+,-,+), so p(Y)=(+,-,+,-,+)=H5.
- If (α,β)=(−,+), take (x,y,z)=(−,+,−), so p(Y)=(−,+,−,+,−)=−H5.
In all cases Y is non‑O5, hence there exists an amalgam D∈H on A∪{b,c} extending B and C.

Proof. The only new 5‑set is Y=A∪{b,c}. The displayed assignments set its 5‑vector equal to one of ±C5 or ±H5 in the fixed coordinate order, and these are not in the O5 orbit. There are no other new 5‑sets to check. Hence the extension lies in H. ∎

Proposition 15 (A solvable subclass for |A|=4 via a local H5 pattern with consistency).
Let A={1,2,3,4}, and let B=A∪{b} and C=A∪{c} lie in H and agree on A. For k∈A, write (α_k,β_k):=(p^B_k,p^C_k). Adopt the coordinate order
p(Y_k)=(p_{missing c},p_{missing b},p_{missing i},p_{missing j},p_{missing ℓ}) for Y_k={b,c}∪(A\{k}) with i<j<ℓ the increasing order on A\{k}. Suppose the type‑data satisfy the equalities
α_1=α_2=α_3=α_4,
β_1=α_3,
β_4=α_2,
β_2=β_3.
Then there exists an assignment to the six cross 4‑sets x_{ij}=f({i,j,b,c}) such that, for each k, p(Y_k) is ±C5 if α_k=β_k and ±H5 otherwise. In particular, an amalgam D∈H exists.

Proof. Define the triple of edge variables on Y_k by (x_{jℓ},x_{iℓ},x_{ij})=(α_k,β_k,α_k), where {i,j,ℓ}=A\{k} with i<j<ℓ. Each edge variable x_{ij} appears in exactly two such triples, corresponding to the two values of k∈A\{i,j}. The displayed equalities on the α_k and β_k are exactly those required to make these two prescriptions agree for every edge (a direct check using the mapping p_{missing i}=x_{jℓ}, p_{missing j}=x_{iℓ}, p_{missing ℓ}=x_{ij}). With this consistent assignment, p(Y_k)=(α_k,β_k,α_k,β_k,α_k), which is ±C5 if α_k=β_k and ±H5 otherwise. None of these are in the O5 orbit, so all four Y_k are non‑O5 and the resulting structure is an amalgam in H. ∎
Lemma 16 (Union‑bound feasibility for the |A|=4 CSP).
In the |A|=4 one‑point CSP (Proposition 3), suppose that for each k∈{1,2,3,4} the local table forbids at most one ordered triple, i.e., |{±1}^3\F(p^B_k,p^C_k)| ≤ 1. Then there exists an assignment to the six variables x_{ij} that satisfies all four constraints (so an amalgam in H exists).

Proof. There are 2^6=64 global assignments to the six variables. Fix k and a forbidden ordered triple t on its three local variables; the set of global assignments inducing t on that triangle has size 2^3 (the other three edge‑variables are free). Thus forbidding at most one triple per triangle eliminates at most 4·2^3=32 global assignments in total. Therefore at least 64−32=32 assignments remain that satisfy all four local constraints. ∎

Corollary 16.1 (A small‑table criterion for the |A|=4 step).
If the two base tables satisfy |{±1}^3\F(+,+)| ≤ 1 and |{±1}^3\F(+,-)| ≤ 1 (so, by Corollary 9, the same holds for F(−,−) and F(−,+) by triplewise negation), then for every one‑point diagram over |A|=4 there exists an amalgam D∈H.

Proof. For any instance, each Y_k uses one of the four pairs (p^B_k,p^C_k)∈{++,−−,+−,−+}; by the stated hypothesis and Corollary 9, each corresponding table forbids at most one triple. Apply Lemma 16. ∎

Lemma 17 (Global parity constraint across the four triangles).
In the |A|=4 CSP, for any assignment x_{ij}∈{±1}, the product of the triangle‑products over the four Y_k equals +1. Equivalently, an odd number of triangles cannot have triple‑product −1.

Proof. Each triangle‑product equals the product of its three edge‑variables. Multiplying the four triangle‑products together, each edge‑variable x_{ij} appears exactly twice (in the two triangles omitting i and j), hence contributes x_{ij}^2=1 to the total product. Therefore the total product is +1. ∎
Lemma 18 (ε‑cocycle for composition).
For σ,τ∈S_5 and i∈{1,2,3,4,5}, one has
ε_i(σ∘τ) = ε_i(σ) · ε_{σ^{-1}(i)}(τ).

Proof. Let A_ρ denote the signed action from Lemma 6: (A_ρ p)_i = ε_i(ρ) · p_{ρ^{-1}(i)}. Then (A_σ A_τ p)_i = ε_i(σ) · (A_τ p)_{σ^{-1}(i)} = ε_i(σ) · ε_{σ^{-1}(i)}(τ) · p_{τ^{-1}(σ^{-1}(i))}. On the other hand, A_{σ∘τ} p has i‑th coordinate ε_i(σ∘τ) · p_{(σ∘τ)^{-1}(i)}. Uniqueness of the action implies ε_i(σ∘τ) = ε_i(σ) · ε_{σ^{-1}(i)}(τ). ∎

Lemma 19 (ε for adjacent transpositions).
For s_k=(k k+1) with k∈{1,2,3,4}, the vector ε(s_k) has entries + at positions k and k+1 and − at the other three positions.

Proof. Write τ:=s_k. Using Lemma 6, ε_i(τ)=sgn(τ)·(−1)^{c_j(τ)} for j=τ^{-1}(i). A direct count shows that c_j(τ) is odd for j∉{k,k+1} and even for j∈{k,k+1}. Since sgn(τ)=−1, this yields ε_i(τ)=−1 at i∉{k,k+1} and ε_i(τ)=+1 at i∈{k,k+1}. ∎

Lemma 20 (O5‑image formula and exact pair‑set membership test).
Let e_O=(+,-,-,-,-). Define the pair‑set S:={ (ε(τ), i0=τ(1)) : τ∈S_5 }. For p∈{±1}^5, the following are equivalent:
(a) p lies in the O5 orbit (i.e., p = A_τ(e_O) for some τ∈S_5).
(b) There exists (ε,i0)∈S such that p_i=ε_i for i=i0 and p_i=−ε_i for i≠i0.
Equivalently, p is obtained from ε by flipping all coordinates except i0, with (ε,i0) realized by the same τ.

Proof. For (a)⇒(b): If p=A_τ(e_O), then for i with τ^{-1}(i)=1 one has p_i=ε_i(τ)·(+)=ε_i(τ), and for i with τ^{-1}(i)≠1 one has p_i=ε_i(τ)·(−)=−ε_i(τ). Writing i0:=τ(1) gives (b). For (b)⇒(a): Given (ε,i0)∈S, pick τ with ε(τ)=ε and τ(1)=i0. The same computation shows A_τ(e_O)=p. ∎
Corollary 20.1 (Product-of-entries identity for O5).
If p∈O5 with witness τ∈S_5 (i.e., p=A_τ(e_O)), then ∏_{i=1}^5 p_i = sgn(τ).

Proof. By Lemma 20, p is obtained from ε(τ) by flipping all coordinates except i0=τ(1). Thus ∏_i p_i = ε_{i0} · ∏_{i≠i0}(−ε_i) = (−1)^4 · ∏_i ε_i = ∏_i ε_i. By Corollary 7, ∏_i ε_i = sgn(τ). ∎

Lemma 21 (Swap of fixed coordinates; central symmetry when α=β).
For all α,β∈{±1} and all (x,y,z)∈{±1}^3,
(x,y,z) ∈ F(α,β) if and only if (−x,−y,−z) ∈ F(β,α).
In particular, F(α,α) is centrally symmetric: t∈F(α,α) ⇔ −t∈F(α,α).

Proof. Let τ=(12). By Lemma 19, ε(τ)=(+,+,−,−,−). For any p=(α,β,x,y,z), the signed action gives A_τ(p)=(β,α,−x,−y,−z). Since O5-orbit membership is invariant under A_τ, p is non‑O5 iff A_τ(p) is non‑O5. This yields the stated equivalence and the corollary for α=β. ∎

Lemma 22 (Internal generators preserving F(α,β)).
For all α,β and all (x,y,z), the following equivalences hold within the same table F(α,β):
- S3: (x,y,z)∈F(α,β) ⇔ (−y,−x,z)∈F(α,β).
- S4: (x,y,z)∈F(α,β) ⇔ (x,−z,−y)∈F(α,β).

Proof. For τ=(34), Lemma 19 gives ε(τ)=(−,−,+,+,−). Hence A_τ(α,β,x,y,z)=(−α,−β,y,x,−z). Applying Lemma 8 (global sign) yields (α,β,−y,−x,z), proving S3. For τ=(45), ε(τ)=(−,−,−,+,+) and A_τ(α,β,x,y,z)=(−α,−β,−x,z,y). Applying Lemma 8 gives (α,β,x,−z,−y), proving S4. ∎

Lemma 23 (Swap of first and third triple coordinates within F(α,β)).
For all α,β and all (x,y,z), (x,y,z)∈F(α,β) if and only if (z,y,x)∈F(α,β).

Proof. Start from (x,y,z), apply S4 to get (x,−z,−y); then apply S3 to get (z,−x,−y); then apply S4 again to get (z,y,x). Each step preserves membership in F(α,β) by Lemma 22. ∎

Lemma 24 (Two explicit forbidden ordered triples in the base tables).
(a) In F(+,-), the ordered triple (++−) is forbidden.
(b) In F(+,+), the ordered triple (−, +, +) is forbidden.

Proof. (a) Take τ=(12)(34), which is even. A direct computation gives ε(τ)=(−,−,−,−,+) and i0=τ(1)=2. By Lemma 20, A_τ(e_O)=flip_all_but_one(ε,2)=(+,−,+,+,−). Hence (α,β,x,y,z)=(+,-,+,+,−) is in O5, so (++−)∉F(+,-).
(b) Take τ=(13), for which Lemma 8 shows ε(τ)=(−,−,−,−,−). With i0=τ(1)=3, Lemma 20 yields A_τ(e_O)=(+,+,−,+,+). Thus (−,+,+)∉F(+,+). ∎

=== round-0008/verifier.feedback.md ===
High-level assessment
- There is solid, rigorous progress this round. The most valuable additions are: (i) internal S5-induced symmetries of the local tables F(α,β) (P01, Lemmas 21–23), (ii) a simple product-of-entries invariant for O5 (P02), and (iii) two concrete forbidden ordered triples with explicit τ-witnesses (P02: (++−)∉F(+,-); P03: (−, +, +)∉F(+,+)). All of these are compatible with the fixed coordinate convention already in output.md and can be cleanly integrated.
- The exact S-oracle framework (ε-cocycle, generators, pair-set S, Lemma 20) continues to hold up; the new results leverage it correctly.

Corrections and issues
- P01’s claim “the permutation (−,+,−) never occurs under the 2+2 ansatz” is false in general. Counterexample under our fixed coordinate order: take w=(+,-,+,-) and k=4; then on A\{4}={1,2,3} we get (x_{23},x_{13},x_{12})=(−,+,−). Thus (−,+,−) can occur for some 2+2 choices. What is true: for the specific choice w=(+,+,−,−) (or w=(−,−,+,+)), the four triangles realize only the two shapes (+,−,−) and (−,−,+). So the “two-checks suffice” reduction is valid only for that fixed w, not for arbitrary placements of the two pluses.
- P02’s “weaker 2+2 feasibility reduction” implicitly relies on the incorrect assumption that plus-vertices always force a specific ordered shape per triangle. As noted above, the realized ordered shape depends on the indices carrying the same sign relative to i<j<ℓ, and (−,+,−) can appear. A safe conditional is: if you commit to w=(+,+,−,−), it suffices to ensure that both (+,−,−) and (−,−,+) are allowed for each pair-type that appears among the Y_k of the instance. The stronger uniform Proposition 11 remains correct as stated, requiring all three permutations of (+,−,−) per (α,β).
- P03’s warning about misusing ε-only criteria is important. Always check the pair (ε,i0) with i0=τ(1) (Lemma 20). This prevents false positives.

What to keep and what to discard
- Keep and integrate: P01 Lemmas 21–23 (internal symmetries of F), P02 product-of-entries identity, P02 EX1, P03 F1. These are all fully rigorous and useful. Also keep the backtracking blueprint and parity pruning (they align with output.md Lemma 17).
- Discard or qualify: P01’s unconditional “two-checks suffice” and P02’s “weaker 2+2 selection” as general statements. Replace with the qualified variant for the fixed choice w=(+,+,−,−).

Actionable next steps (precise)
1) Implement IsO5 via the S-pair set (Lemma 20) using Lemmas 18–19; validate using the samples listed by P02 and unit tests already in notes/output. Also verify Cor. 20.1 (product-of-entries) on a random subset as a sanity check.
2) Populate F(+,+) and F(+,-) completely. Use Lemmas 21–23 to reduce the workload: per table, test the four representatives (+++), (+,−,−), (−,−,−), (+,−,+); the rest follow by the proved internal symmetries and, for α=β, central symmetry. Derive F(−,−), F(−,+) via Cor. 9.
3) Record and recheck the new forbidden entries: (−,+,+)∉F(+,+) (P03) and (++−)∉F(+,-) (P02). Cross-consistency: by Lemma 21, (+,−,−)∉F(+,+) follows from the first.
4) If both |{±1}^3\F(+,+)| and |{±1}^3\F(+,-)| are ≤1, conclude via Cor. 16.1. Otherwise, try the fixed 2+2 assignment w=(+,+,−,−): check that (+,−,−) ∈ F(+,+) and (+,−,−) ∈ F(+,-); by Lemma 23 this also covers (−,−,+). If this passes, the fixed 2+2 construction solves all instances. If not, run the small backtracking solver with parity pruning.
5) Archive the full F-tables and a small test suite demonstrating the internal symmetries (S3, S4, x↔z) and Lemma 21 on random entries.

Value added this round
- Structural reduction of F-table enumeration (strong, audit-ready).
- Two independent, explicit F-table exclusions with τ-witnesses.
- A robust debugging invariant (product-of-entries = sgn(τ)).
- Clarified limitations of ε-only heuristics and corrected an error about realized permutations under 2+2.

Overall: good partial progress; the next computational pass should decide the |A|=4 step quickly.

=== notes.md ===
Set‑up and notations (agreed baseline)
- 4‑hypertournament on finite V: equivalent to a function f:[V]^4→{±1}. For an ordered 4‑tuple (x1,x2,x3,x4) with underlying set S, we declare (x1,x2,x3,x4)∈R iff the permutation from the increasing ordering of S to (x1,…,x4) has sign equal to f(S). This satisfies (i) tuples have distinct entries, (ii) closure under even permutations, (iii) exactly one of (x1,x2,x3,x4) and (x2,x1,x3,x4) lies in R.
- For a 5‑set X, define its 5‑vector p(X)∈{±1}^X by p_x:=f(X\{x}). Isomorphisms act by p↦(ε_i(τ)·p_{τ^{-1}(i)}) with ε_i(τ)=sign of τ restricted to X\{τ^{-1}(i)}. The three isomorphism types on 5 points are denoted C5, H5, O5. For computation we may use representatives C5=(+,+,+,+,+), O5=(+,-,-,-,-), H5=(+,-,+,-,+); the orbit relation is determined by the above action (not by raw counts of pluses).

One‑point amalgamation reduction
- AP for H (class of finite 4‑hypertournaments with no induced O5) reduces to the one‑point case: Given A∈H, B=A∪{b}∈H, C=A∪{c}∈H with B∩C=A, existence of D on A∪{b,c} in H extending B and C implies full AP by iteratively adding the vertices of C\A to B.

CSP for the minimal nontrivial one‑point case |A|=4
- Fix A={1,2,3,4}, b=5, c=6. The only undetermined f‑values are the six cross 4‑sets X_{ij}={i,j,5,6} (1≤i<j≤4). Let variables x_{ij}:=f(X_{ij})∈{±1}.
- The only potentially new 5‑sets are Y_k:={5,6}∪(A\{k}) for k∈{1,2,3,4}. For each k, p(Y_k) has two fixed coordinates: p missing 6 equals p^B_k:=f_B({5}∪(A\{k})), and p missing 5 equals p^C_k:=f_C({6}∪(A\{k})); and three variable coordinates drawn from {x_{ij}} on the three pairs inside A\{k}:
  • Y_1 depends on {x_{23},x_{24},x_{34}}
  • Y_2 depends on {x_{13},x_{14},x_{34}}
  • Y_3 depends on {x_{12},x_{14},x_{24}}
  • Y_4 depends on {x_{12},x_{13},x_{23}}.
- Constraint: For each k, p(Y_k) must not lie in the O5‑orbit. This is the complete constraint system for the one‑point amalgam over A of size 4.

Base sizes |A|≤2 and |A|=3
- |A|≤2: There are no 5‑sets Y; any assignment to cross 4‑sets works, so one‑point amalgamation always succeeds.
- |A|=3: There is exactly one 5‑set Y=A∪{b,c}, with two fixed coordinates (those missing b and c) and three unknowns (those missing each a∈A). We expect (and plan to verify computationally) that for every (α,β)∈{±1}^2 at least one of the 8 assignments to the three unknowns avoids the O5 orbit. This settles one‑point amalgamation at size 3 once verified.

Switching: what it does and what it does not
- For ε:V→{±1}, define f^ε(S):=(∏_{v∈S}ε(v))·f(S). Then f^ε encodes another 4‑hypertournament.
- Caution: For a fixed 5‑set X, switching at a vertex v∈X flips the four coordinates of p(X) corresponding to the 4‑sets that contain v and leaves the coordinate “missing v” unchanged. This can change the 5‑type: e.g., (+,-,-,-,-) (an O5 representative) switches at the ‘+’ vertex to (+,+,+,+,+) (a C5 representative). Thus switching is not a valid normalization trick for fixed one‑point data (B,C) in H.

Computational plan (to settle |A|=3 and |A|=4)
- Step A: Compute the O5 orbit via the S5 action above; implement IsO5(p).
- Step B (|A|=3): For each (α,β), enumerate the 8 triples, test IsO5, and record that at least one choice avoids O5.
- Step C (|A|=4): Enumerate compatible (B,C) (both of type C5 or H5, agreeing on f(A)), form p^B_k,p^C_k (k=1..4), and brute‑force the 2^6 choices of x_{ij}, rejecting any assignment for which some Y_k is O5. Record either a counterexample or certify all cases pass.
- Precompute F(α,β)⊆{±1}^3: the allowed triples for a 5‑set with given two fixed coordinates. Then the |A|=4 CSP checks membership of the four triangle‑triples in F(p^B_k,p^C_k).

Constructive ansatz to test
- Try x_{ij}=w_iw_j with w_i:=p^B_i·p^C_i for i∈A. For T={i,j,k} this gives a triple (w_iw_j,w_iw_k,w_jw_k) of product +1. If this never yields O5 for any (p^B_k,p^C_k), it provides a uniform construction for all |A| (worth testing; not proved).
Addendum: explicit S5 action, corrections, and computation plan

1) Explicit ε-formula for the S5 action (implementation aid)
For τ ∈ S5 and i ∈ {1,…,5}, write j := τ^{-1}(i) and define
c_j(τ) := |{k<j : τ(k) > τ(j)}| + |{k>j : τ(k) < τ(j)}|.
Then the sign multiplier in the action p′_i = ε_i(τ)·p_{τ^{-1}(i)} equals
ε_i(τ) = sgn(τ)·(−1)^{c_j(τ)}.
Sketch of justification: Let τ′ be the induced bijection from [5]\{j} to [5]\{i}. Its inversion count is inv(τ′) = inv(τ) − c_j(τ) because the inversions of τ decompose into those not involving j (which biject with the inversions of τ′) and those involving j (counted by c_j). Hence sgn(τ′) = (−1)^{inv(τ′)} = (−1)^{inv(τ)−c_j} = sgn(τ)·(−1)^{c_j}. By definition ε_i(τ) = sgn(τ′). A immediate corollary is the product identity ∏_{i=1}^5 ε_i(τ) = sgn(τ), since Σ_j c_j(τ) = 2·inv(τ).

Practical note: This eliminates ambiguity about ε and supports a robust IsO5 enumerator.

2) Correction to the “fully aligned” claim
The statement “If p^B_k = p^C_k for all k then setting all x_{ij}=δ makes p(Y_k) constant δ for all k” is false unless the common pattern (p^B_k)_{k∈A} is itself constant with value δ. Counterexample: take p^B=p^C=(+,+,−,+) and δ=+. Then for k=3 the fixed coordinates are (−,−) while the three variables are +, so p(Y_3) is not constant. A correct (weaker) statement is: if p^B_k = p^C_k = δ for all k, then x_{ij}≡δ makes every p(Y_k) constant δ, hence non-O5.

3) F(α,β) tables: compute all four cases
Define F(α,β) ⊆ {±1}^3 as the set of triples (x,y,z) for which p=(α,β,x,y,z) is non-O5. Do not assume F(+,+)=F(−,−) or F(+,-)=F(−,+) a priori; compute all four cases. This is an 8×4=32-evaluation task. Record each F(α,β) explicitly along with any observed symmetries (e.g., invariance under permuting x,y,z).

Consequence: |A|=3 reduces to checking that for each (α,β) there exists at least one triple in F(α,β). Archive one such triple per case.

4) |A|=4 CSP protocol (profiles and ansatz)
- Use the already-recorded CSP with variables x_{ij} on the six edges of K4 and four constraints Y_k. For any concrete pair (B,C) over A with B∩C=A and both omitting O5, determine the four pairs (p^B_k,p^C_k) and require the corresponding triangle-triple to lie in F(p^B_k,p^C_k).
- Profiles to test early:
  • P1: p^B≡+, p^C≡+. The corrected alignment lemma (constant case) gives the assignment x_{ij}≡+.
  • P2: p^B≡+, p^C≡−. Try the perfect-matching assignment x_{12}=x_{34}=+, others −; check all four Y_k via IsO5.
  • P3: p^B≡+, p^C drawn from an H5 labeling consistent on A; try ansatz x_{ij}=w_i w_j with w_i=p^B_i p^C_i.
  • P4: both sides H5 aligned on A; by the corrected alignment lemma with δ=+, x_{ij}≡+ works if the common 4-bit pattern on A is constant +.
- Constructive ansatz: x_{ij}:=w_i w_j where w_i:=p^B_i p^C_i. For T={i,j,k}, the triple is (w_i w_j, w_i w_k, w_j w_k) with product +1. Test this uniformly across enumerated cases; if it always avoids O5, it suggests a uniform construction for general |A|.

5) Unit tests for IsO5
- p=(+,+,+,+,+) should classify non-O5; p=(+,−,−,−,−) should classify O5; p=(+,−,+,−,+) should classify non-O5 (H5). Also verify that for a transposition τ, ∏_i p′_i flips sign (product identity) and that orbit membership is invariant under the action.

6) Checklist for the next round
- Implement IsO5 with the ε-formula; report the size of the O5 orbit found by enumeration.
- Compute and list F(α,β) for all four cases; confirm |A|=3.
- Run the |A|=4 CSP on P1–P4 first, then extend to representatives modulo S4 on A; archive satisfying/unsatisfying assignments.
- Report whether the ansatz x_{ij}=w_i w_j succeeds in all tested instances.
Additional clarifications, small lemmas, and symmetry for the 5-vector orbit

1) Semantics of the fixed bits p^B_k and p^C_k (|A|=4)
For B on A∪{b} and k∈A, define p^B_k:=f_B({b}∪(A\{k})). On the 5-set A∪{b}, the 5-vector p has entries p_x=f((A∪{b})\{x}). Thus for k∈A, p^B_k coincides with the coordinate “missing k” of p on A∪{b}: it records whether the increasing 4-tuple on {b}∪(A\{k}) is in R_B. Analogously p^C_k is the coordinate “missing k” of the 5-vector on A∪{c}.

2) Necessary local exclusions in the opposite-fixed case (rigorous justification)
- With (α,β,x,y,z)=(+;−;−,−,−) we obtain the canonical O5 representative; hence this triple is forbidden for (α,β)=(+,-).
- By central symmetry of the O5 orbit (see 4) below), (−;+;+,+,+) is also O5; hence forbidden for (α,β)=(−,+).
These give immediate unit tests for any IsO5 implementation and constraints for F(+,-) and F(−,+).

3) Edge/triangle viewpoint and the structured ansatz
- Place the six variables x_{ij} on the edges of K4 on A. The constraint Y_k uses the triangle on T=A\{k}.
- Structured ansatz: pick w_i∈{±1} on the vertices and set x_{ij}:=w_i w_j. For any triangle {i,j,k}, the triple (w_iw_j,w_iw_k,w_jw_k) has product +1, realizing exactly (+++),(+−−),(−+−),(−−+).

4) Central symmetry of the O5 orbit and a consequence for F(α,β)
There exists τ∈S5, e.g. τ=(13), with ε_i(τ)=−1 for all i (check via Lemma 6: c_j(τ) is even for every j and sgn(τ)=−1). Hence for any 5-vector p, p∈O5 iff −p∈O5. As a consequence, for the local tables F(α,β)⊆{±1}^3 (defined by p=(α,β,x,y,z) non-O5), one has
F(−α,−β) = { (−x,−y,−z) : (x,y,z)∈F(α,β) }.
Therefore it suffices to compute F(+,+) and F(+,-); the other two cases follow by triplewise negation. Do not assume any further symmetries (e.g., permutations of x,y,z or F(+,-)=F(−,+)) without verification.

5) On classifying |A|=4 instances
The constraint at each k depends on the ordered pair (p^B_k,p^C_k)∈{++,−−,+−,−+}. Reduction to the pure eq/opp pattern E={k: p^B_k=p^C_k} is insufficient unless one proves F(+,+)=F(−,−) and F(+,-)=F(−,+). Use the full type-vector in {++,−−,+−,−+}^A. By 4), it is enough to compute and store F(+,+), F(+,-), and infer the other two by negation.

6) Implementation checklist (precise conventions)
- Fix, once and for all, an ordering of the five vertices of each Y_k with the first two positions corresponding to the coordinates “missing c” and “missing b”, respectively, and the last three to the vertices of A\{k} in increasing order. Use the same convention for constructing p=(α,β,x,y,z) when populating F(α,β).
- Implement IsO5 via Lemma 6. Unit tests: (+,+,+,+,+) is non-O5; (+,−,−,−,−) is O5; (+,−,+,−,+) is non-O5. Report the orbit size and verify closure under the action.
- Compute F(+,+), F(+,-); obtain F(−,−), F(−,+) by triplewise negation. Conclude |A|=3 by listing one admissible triple for each (α,β).
- For |A|=4, enumerate realizable type-vectors from actual pairs (B,C) (both C5/H5, agreeing on A), and brute-force 2^6 assignments to x_{ij}. Archive SAT witnesses or UNSAT certificates. Test the ansatz x_{ij}=w_i w_j with w_i=p^B_i p^C_i across the same cases.

These additions lock down the symmetry that underlies Claim N1, correct the eq/opp reduction, and make the forthcoming computations unambiguous and reusable.
Uniform 2+2− assignment and a corrected conditional reduction for |A|=4

Ordering convention for local F-tables
- For any 5-set Y_k={b,c}∪(A\{k}) with A={1,2,3,4} and i<j<ℓ the increasing order on A\{k}, we use the coordinate order
  p(Y_k) = (p_{\text{missing }c}, p_{\text{missing }b}, p_{\text{missing }i}, p_{\text{missing }j}, p_{\text{missing }\ell}).
- With this convention, F(α,β)⊆{±1}^3 is the set of ordered triples (x,y,z) such that (α,β,x,y,z) is non-O5.

Lemma A (2+2 vertex-sign ansatz yields (+−−)-type on every triangle).
- Let w_i∈{±1} (i∈A) have exactly two + and two −, and set x_{ij}:=w_i w_j. For each k, the triple (x,y,z) contributed by the three edges inside A\{k} is, up to permutation of its three coordinates, of the form (+,−,−).
- Proof. If k is from the + vertices, then A\{k} contains {+,−,−}; the pairwise products are (−,−,+). If k is from the − vertices, then A\{k} contains {+, +, −}; the pairwise products are (+,−,−). In either case the unordered triple has one + and two −. The order within (x,y,z) depends on the fixed coordinate convention but is a permutation of (+,−,−). ∎

Corrected conditional reduction for |A|=4
- Conditional Proposition (uniform 2+2 ansatz). Fix the above ordering convention. Suppose that for each (α,β)∈{++, +−, −+, −−}, all three permutations of (+,−,−) lie in F(α,β). Then for every one-point instance over |A|=4 there exists an amalgam D in H obtained by the uniform assignment x_{ij}=w_i w_j with some w having exactly two + and two − on A.
  • Proof. By Lemma A, for every k the ordered triple on Y_k is a permutation of (+,−,−). By hypothesis, this ordered triple is in F(p^B_k,p^C_k) for each k, hence none of the four Y_k is O5, and D∈H. ∎
- Unconditional subcase (equal-constant fixed pairs). If (p^B_k,p^C_k)=(δ,δ) for all k (with δ∈{±1}), then the constant assignment x_{ij}≡δ makes every p(Y_k) equal to (δ,δ,δ,δ,δ), which is ±C5 and therefore non-O5. Hence an amalgam exists in this subcase.

Hard local exclusion in the opposite-fixed case
- For (α,β)=(+,-), the triple (−,−,−) is forbidden: p=(+,-,−,−,−) is the canonical O5 representative. By central symmetry of the S5 action, (+++) is forbidden for (α,β)=(−,+) as well. These serve as unit checks for IsO5 and constraints in populating F.

Notes on earlier claims
- The claim “(+++) is forbidden in F(+,-)” has not been proved. The argument via “flipping one coordinate” is not valid under the S5 signed action. Treat this as a computational check when populating F.

Computational checklist (precise and minimal)
1) Implement IsO5 via Lemma 6; unit tests: (+,+,+,+,+) non-O5; (+,−,−,−,−) O5; (+,−,+,−,+) non-O5. Report the size of the O5 orbit and closure under the action.
2) Compute F(+,+) and F(+,-) completely (8 triples each) under the above ordering; use Corollary 9 to derive F(−,−) and F(−,+) by triplewise negation. Do not assume S3-invariance.
3) Test the 12 memberships: for each (α,β)∈{++, +−, −+, −−}, verify that all three permutations of (+,−,−) lie in F(α,β).
4) If step 3 passes, conclude by the conditional proposition that the |A|=4 one-point step is uniformly solvable by a 2+2 ansatz; with Lemma 2 this yields AP.
5) If step 3 fails, run the 2^6 CSP for the offending type-profile to search for a different satisfying assignment or produce an UNSAT certificate (listing, for each assignment, a Y_k showing O5).

Implementation detail retained: the structured ansatz yields triangle triples of product +1, hence it can never realize (−,+,+) or (−,−,−). Keep this in mind when interpreting F-tables and debugging assignments.
Updates: explicit |A|=3 solution, concrete |A|=4 tests, and a solvable subclass

Coordinate convention reminder (used below)
- For Y_k={b,c}∪(A\{k}) with A={1,2,3,4} and i<j<ℓ the increasing order on A\{k}, we encode
  p(Y_k) = (p_{missing c}, p_{missing b}, p_{missing i}, p_{missing j}, p_{missing ℓ}).
- Mapping of the last three coordinates to edge variables on K4[A]:
  • p_{missing i} = x_{jℓ},  p_{missing j} = x_{iℓ},  p_{missing ℓ} = x_{ij}.

|A|=3 one‑point amalgamation solved (constructive)
- Let A have size 3. For Y=A∪{b,c} write p(Y)=(α,β,x,y,z) in the above order, where α is fixed by B (missing c), β by C (missing b), and x,y,z are the cross 4‑sets. The following choices always avoid O5:
  • (α,β)=(+,+): take (x,y,z)=(+,+,+) → p(Y)=(+,+,+,+,+)=C5.
  • (α,β)=(−,−): take (x,y,z)=(−,−,−) → p(Y)=(−,−,−,−,−)=−C5.
  • (α,β)=(+,-): take (x,y,z)=(+,-,+) → p(Y)=(+,-,+,-,+)=H5.
  • (α,β)=(−,+): take (x,y,z)=(−,+,−) → p(Y)=(−,+,−,+,−)=−H5.
  Hence the one‑point extension over |A|=3 always exists in H.

Concrete |A|=4 test profiles for the 2+2 ansatz (w=(+,+,−,−), x_{ij}=w_i w_j)
- Triangles (Y_k):
  • k=1: (x_{23},x_{24},x_{34})=(−,−,+) → p(Y_1)=(p^B_1,p^C_1,−,−,+).
  • k=2: (x_{13},x_{14},x_{34})=(−,−,+) → p(Y_2)=(p^B_2,p^C_2,−,−,+).
  • k=3: (x_{12},x_{14},x_{24})=(+,-,−) → p(Y_3)=(p^B_3,p^C_3,+,−,−).
  • k=4: (x_{12},x_{13},x_{23})=(+,-,−) → p(Y_4)=(p^B_4,p^C_4,+,−,−).
- Profiles to check via IsO5 (the first two coordinates are specialized as follows):
  • P1: p^B≡+, p^C≡+ → test (+,+,−,−,+) and (+,+,+,−,−).
  • P2: p^B≡+, p^C≡− → test (+,−,−,−,+) and (+,−,+,−,−).
  • P3: p^B≡+, p^C=(+,-,+,-) (aligned H5 on A∪{c}) → same two vectors as P2.
A single IsO5 pass on these four vectors settles P1–P3 for the 2+2 ansatz.

A solvable subclass for |A|=4 via a “local H5 witness” pattern
- Prescribe for each k a local triple (x_{jℓ}, x_{iℓ}, x_{ij}) = (α_k, β_k, α_k), where (α_k,β_k)=(p^B_k,p^C_k) and i<j<ℓ enumerate A\{k}.
- Shared‑edge consistency forces:
  • α_1=α_2=α_3=α_4;  β_1=α_3;  β_4=α_2;  β_2=β_3.
- If the given one‑point data (B,C) satisfy these equalities, then for each k we get p(Y_k)=(α_k,β_k,α_k,β_k,α_k), which is ±C5 if α_k=β_k, else ±H5. Hence an amalgam exists for this subclass.

Caveat on the LLL heuristic
- The symmetric LLL condition e·p·(d+1)≤1 with d=3 would require p≤1/(4e)≈0.091. If |{±1}^3\F(α,β)|≤1 then p=1/8≈0.125, which does not meet the symmetric bound. Treat any LLL‑based argument as heuristic unless we deploy a sharper criterion tailored to our dependency graph.

Actionable checklist (minimal computation to unblock |A|=4)
1) Implement IsO5 (Lemma 6), run unit tests, and report the O5 orbit size.
2) Test the four 5‑vectors from P1–P3 above.
3) Compute F(+,+) and F(+,-) fully (8 triples each) under the fixed ordering; obtain the other two by triplewise negation. Archive the tables.
4) If all permutations of (+,−,−) lie in each F(α,β), invoke Proposition 11 (uniform 2+2). Otherwise, brute‑force the 2^6 CSP per realized 4‑type profile and record SAT witnesses or an UNSAT certificate.
New rigorous tools and corrections (to be used going forward)

1) Union‑bound feasibility for the |A|=4 CSP
- Statement. In the |A|=4 CSP with six edge variables x_{ij} and four triangle constraints Y_k, if for each k the local table F(p^B_k,p^C_k) forbids at most one ordered triple (i.e., |{±1}^3\F(p^B_k,p^C_k)| ≤ 1), then there exists a satisfying global assignment.
- Reason. Each forbidden triple for a fixed triangle rules out exactly 2^3 global assignments (the other 3 edges are free). With at most one forbidden triple per triangle, at most 4·2^3=32 of the 64 assignments are excluded. Hence at least 32 assignments remain.
- Consequence. If a small computation confirms |{±1}^3\F(+,+)| ≤ 1 and |{±1}^3\F(+,-)| ≤ 1 (the other two cases follow by triplewise negation; Cor. 9), the |A|=4 step follows immediately without any 6‑variable search.

2) Specialization of the S5 action to the O5 representative (implementation aid)
- For e_O=(+,-,-,-,-) and τ∈S5 with ε(τ)=(ε_1,…,ε_5), let i0:=τ(1). Then the image p′ under the signed action satisfies p′_i = ε_i if i=i0 and p′_i = −ε_i otherwise. Equivalently, p′ is obtained from ε by flipping all coordinates except i0. Thus p∈O5 iff ∃ε∈E:={ε(τ):τ∈S5} and i0 with p_i=−ε_i for i≠i0 and p_{i0}=ε_{i0}.
- Note. This enables a very compact IsO5: precompute E (120 evaluations) and check the 5·|E| candidates.

3) Parity invariant across the four triangles
- For any assignment x_{ij}∈{±1}, the product of the triangle‑products over the four Y_k equals +1. Equivalently, an odd number of triangles cannot have triple product −1. Reason: each x_{ij} appears in exactly two triangle‑products.

4) Distribution of triangle triples under vertex‑sign assignments
- If x_{ij}=w_i w_j with w∈{±1}^A, then on any triangle the triple is either (+++) (when the three w are equal) or a permutation of (+,−,−) (otherwise). In particular: 4+/0− (or 0+/4−) yields four (+++); 3+/1− (or 1+/3−) yields exactly one (+++); 2+/2− yields no (+++) and all four triangles are permutations of (+,−,−).

Corrections to prior claims
- False: “If T_B=C5 then (p^B_k)_{k∈A} is constant; if T_B=H5 then it is 2+2.” Counterexample: for a C5 5‑set, the 5‑vector equals ε(τ) for some τ; e.g., τ=(12) gives ε=(+,+,−,−,−), which is not constant on A. Do not use this classification to prune cases.
- Unproved (and currently unknown): (+++)∉F(+,-). The argument that tried to force this from Lemma 8 incorrectly treats the free index i0. We keep only the rigorously proved exclusion (---)∉F(+,-) (output.md Lemma 13). The status of (+++) in F(+,-) must be decided computationally.

Coordinate convention (reminder)
- For Y_k={b,c}∪(A\{k}) with A={1,2,3,4} and i<j<ℓ the increasing order on A\{k}, we encode p(Y_k)=(p_{missing c}, p_{missing b}, p_{missing i}, p_{missing j}, p_{missing ℓ}), with p_{missing i}=x_{jℓ}, p_{missing j}=x_{iℓ}, p_{missing ℓ}=x_{ij}.

Actionable checklist (minimal computation to unblock |A|=4)
- Implement IsO5 using Lemma 6; validate unit tests: (+,+,+,+,+) ∉O5; (+,−,−,−,−) ∈O5; (+,−,+,−,+) ∉O5. Also verify the sample ε(τ) values listed in prior notes.
- Compute F(+,+) and F(+,-) completely (8 triples each) under the fixed coordinate order; derive F(−,−), F(−,+) by triplewise negation. Report sizes and explicit complements.
- If both complements have size ≤1, conclude |A|=4 by the union‑bound lemma and hence AP via Lemma 2. If, stronger, both F tables are exactly “triple product +1,” record the uniform construction x_{ij}=w_i w_j and close.
- If not, test whether all permutations of (+,−,−) lie in F(+,+) and F(+,-); if yes, apply Proposition 11 (uniform 2+2). Otherwise brute‑force the 2^6 CSP on the realized profiles, using the parity invariant to prune, and archive SAT/UNSAT witnesses.
O5 membership: exact S‑criterion vs. ε‑only heuristics
- Exact criterion (to be used for IsO5). Let e_O=(+,-,-,-,-), and define the pair‑set
  S := { (ε(τ), i0=τ(1)) : τ ∈ S_5 },
  where ε(τ) is as in Lemma 6. Then for p∈{±1}^5,
  p ∈ O5 ⇔ ∃(ε,i0)∈S such that p_i = ε_i for i=i0 and p_i = −ε_i for i≠i0.
  Equivalently, p is obtained from ε by “flipping all coordinates except i0,” with (ε,i0) realized by the same τ. This is the specialization of the action to e_O and is both necessary and sufficient.

- ε‑only heuristics (use with caution). Two convenient tests are often useful but are not sufficient on their own:
  • Hamming‑1: Hamming(−p, ε) = 1 for some ε ∈ E := {ε(τ) : τ∈S_5}.
  • Inner‑product −3: Σ_i p_i ε_i = −3 for some ε∈E (equivalently to Hamming‑1).
  These conditions are necessary for O5 membership but not sufficient unless the unique discrepancy index i0 is consistent with i0=τ(1) for the same τ realizing ε. Hence, they can give false positives. Always validate by checking the pair (ε,i0)∈S.

ε‑cocycle and generators (implementation aids)
- Cocycle identity. For σ,τ∈S_5 and i∈[5]:
  ε_i(σ∘τ) = ε_i(σ) · ε_{σ^{-1}(i)}(τ).
  This follows by composing the signed actions (Lemma 6) and comparing with the action of σ∘τ.

- Adjacent transpositions. For s_k=(k k+1) (k=1,2,3,4),
  ε(s_k) has + at positions k and k+1 and − elsewhere.
  This is a direct computation from Lemma 6 via the c_j counts and is a robust generator datum for building E and S by BFS on the Cayley graph of S_5.

Practical S‑oracle blueprint
- Build S by BFS over right‑multiplication by s_k, storing for each state (τ) the pair (ε(τ), i0=τ(1)). Update via the cocycle and track i0′=τ(s_k(1)). Verify: |S|=120; sample ε values on generators; product identity ∏_i ε_i(τ)=sgn(τ) (Cor. 7).
- IsO5(p): return true iff ∃(ε,i0)∈S with p_i=ε_i for i=i0 and p_i=−ε_i otherwise.

Local F‑tables and the |A|=4 plan
- Compute F(+,+) and F(+,-) by 8 exact IsO5 calls each on p=(α,β,x,y,z) under the fixed coordinate order (reminder in output.md). Derive F(−,−) and F(−,+) by triplewise negation (Cor. 9). Confirm the |A|=3 witnesses (Proposition 14) show up as allowed entries in the appropriate tables.
- Decision routes:
  • If |{±1}^3\F(+,+)| ≤ 1 and |{±1}^3\F(+,-)| ≤ 1, conclude |A|=4 by Cor. 16.1.
  • If, stronger, all three permutations of (+,−,−) lie in F(+,+) and F(+,-), conclude by Proposition 11 (uniform 2+2).
  • Otherwise, run the 2^6 CSP per realized profile, pruning by the parity invariant (Lemma 17).

Unit checks for the oracle
- Mandatory: (+,−,−,−,−) ∈ O5; (+,+,+,+,+) ∉ O5; (+,−,+,−,+) ∉ O5. Also verify ε(s_k) as above and closure properties from Lemma 6/Cor. 7.

Caveat
- Do not treat “ε only” rules (Hamming‑1 or inner‑product −3) as definitive. They are helpful filters but must be validated against the S‑pair constraint to avoid false positives.
New internal symmetries for F(α,β), concrete exclusions, and a correction about 2+2 shapes

Internal S5-induced symmetries of the local tables
- Let F(α,β)⊆{±1}^3 be defined under the fixed coordinate convention: (x,y,z)∈F(α,β) iff (α,β,x,y,z) is non‑O5.
- Lemma 21 (swap of the fixed coordinates; central symmetry when α=β). For all α,β and all (x,y,z),
  (x,y,z)∈F(α,β) ⇔ (−x,−y,−z)∈F(β,α).
  In particular, F(α,α) is centrally symmetric: t∈F(α,α) ⇔ −t∈F(α,α).
  Sketch: Apply τ=(12) (ε=(+,+,−,−,−) by Lemma 19) and use O5‑invariance under A_τ.
- Lemma 22 (internal generators preserving (α,β)). Within a fixed table F(α,β), membership is preserved by the transformations
  • S3: (x,y,z)↦(−y,−x,z) (from τ=(34) + global sign symmetry),
  • S4: (x,y,z)↦(x,−z,−y) (from τ=(45) + global sign symmetry).
- Lemma 23 (swap of first and third triple coordinates). Within F(α,β), (x,y,z)∈F(α,β) ⇔ (z,y,x)∈F(α,β). Proof: compose S4, then S3, then S4.
- Consequence: The action generated by S3, S4, and (x,y,z)↦(z,y,x) preserves the triple‑product and partitions {±1}^3 into four orbits: for product +1, an orbit of size 3 {+++, +−−, −−+} and a fixed singleton {−+−}; for product −1, an orbit of size 3 {−−−, ++−, −++} and a fixed singleton {+−+}. Thus, per table, it suffices to test at most four representatives, e.g. (+++), (+−−), (−−−), (+−+). When α=β, the central symmetry of Lemma 21 reduces the representatives further.

Concrete forbidden triples (with explicit τ‑witnesses)
- In F(+,-): (++−) is forbidden. Witness: τ=(12)(34) has ε=(−,−,−,−,+) and i0=τ(1)=2. Then A_τ(e_O)=(+,−,+,+,−), i.e. (α,β,x,y,z)=(+,-,+,+,−) is O5, so (++−)∉F(+,-).
- In F(+,+): (−,+,+) is forbidden. Witness: τ=(13) has ε=(−,−,−,−,−) (cf. Lemma 8) and i0=3. Then A_τ(e_O)=(+,+,−,+,+), so (−,+,+)∉F(+,+). By Lemma 21 (α=β), (+,−,−) is also forbidden in F(+,+).

Correction about realized permutations under the 2+2 ansatz
- The 2+2 vertex‑sign ansatz (x_{ij}=w_i w_j with w having two + and two −) produces on each triangle a permutation of (+,−,−) (Lemma 10). However, contrary to an earlier claim, the specific permutation (−,+,−) can occur for some choices of w under our fixed coordinate order. Example: w=(+,-,+,-) and k=4 yield (x_{23},x_{13},x_{12})=(−,+,−).
- A safe specialization: if we commit to the fixed choice w=(+,+,−,−) (or symmetrically w=(−,−,+,+)), then one checks explicitly that Y_1,Y_2 realize (−,−,+) while Y_3,Y_4 realize (+,−,−). Under this restriction, Lemma 23 guarantees that the two realized shapes are equivalent within each F(α,β), reducing checks to a single representative per base table.

Minimal computation plan (refined by symmetries)
- Implement IsO5 via Lemma 20 and validate using the sample (ε,i0) pairs and the product invariant ∏ p_i = sgn(τ).
- Populate F(+,+), F(+,-) by testing only the four representatives (+++), (+−−), (−−−), (+−+) per table; recover the rest by Lemmas 21–23 and Cor. 9. Derive F(−,−), F(−,+) by Cor. 9.
- If |{±1}^3\F(+,+)|≤1 and |{±1}^3\F(+,-)|≤1, conclude by Cor. 16.1. Otherwise, try the fixed 2+2 choice w=(+,+,−,−) and check (+,−,−)∈F(+,+) and (+,−,−)∈F(+,-); if both hold, all four Y_k are allowed by Lemma 23. Failing that, run the tiny backtracking solver with parity pruning (Lemma 17).


=== output.md ===
Proposition 1 (Orientation function model).
For a finite set V, giving a 4‑hypertournament structure (V,R) satisfying: (i) all tuples in R have distinct entries; (ii) R is closed under even permutations of coordinates; (iii) for every 4‑tuple of distinct vertices (x1,x2,x3,x4), exactly one of (x1,x2,x3,x4) and (x2,x1,x3,x4) lies in R; is equivalent to giving an arbitrary function f:[V]^4→{±1}.
Proof. Given f, declare (x1,x2,x3,x4)∈R iff the permutation from the increasing ordering of S={x1,x2,x3,x4} to (x1,…,x4) has sign equal to f(S). This satisfies (i)–(iii) by construction. Conversely, given R with (i)–(iii), fix any 4‑set S and any increasing ordering s of S. By (iii), exactly one of s and its swap lies in R; define f(S)=+1 if s∈R and f(S)=−1 otherwise. By (ii) and (iii), membership of any ordered tuple from S depends only on the parity relative to s, so f is well defined and recovers R. ∎

Lemma 2 (One‑point amalgamation suffices for AP in H).
Let H be the class of finite 4‑hypertournaments omitting O5. Suppose that whenever A∈H and B=A∪{b}∈H and C=A∪{c}∈H with B∩C=A, there exists D∈H on A∪{b,c} extending both B and C. Then H has the amalgamation property.
Proof. Given B0,B1∈H over A, enumerate C\A as c1,…,ck and set A0:=A. Inductively, amalgamate Bi with Ai∪{ci} over Ai to obtain Bi+1 on Ai+1:=Ai∪{ci}. At each step, by hypothesis, all 5‑sets involving the new vertex ci avoid O5, and previously constructed parts are unchanged. After k steps we obtain an amalgam D∈H of B0 and C over A. ∎

Proposition 3 (CSP formulation of the |A|=4 one‑point step).
Let A={1,2,3,4}, b, c new. Given B on A∪{b} and C on A∪{c} in H that agree on A, any amalgam D on A∪{b,c} is determined on new 4‑sets by the six values x_{ij}:=f({i,j,b,c}) (1≤i<j≤4). The only new 5‑sets are Y_k:={b,c}∪(A\{k}) for k=1,2,3,4. Writing p^B_k:=f_B({b}∪(A\{k})) and p^C_k:=f_C({c}∪(A\{k})), the 5‑vector p(Y_k) has two fixed coordinates (missing c gives p^B_k; missing b gives p^C_k) and three coordinates equal to the x_{ij} for {i,j}⊂A\{k}. D∈H iff for each k, p(Y_k) is not in the O5 orbit.
Proof. All 4‑sets contained in B or C are already fixed. The only 4‑sets not contained in B or C are precisely the six X_{ij}={i,j,b,c}. The only new 5‑subsets of A∪{b,c} (relative to B and C) are those that contain both b and c; there are exactly four, the Y_k. Their p‑vectors depend on the listed values. Avoidance of O5 on all 5‑sets is thus equivalent to the stated four constraints. ∎

Corollary 4 (Trivial one‑point cases |A|≤2).
If |A|≤2, then one‑point amalgamation always succeeds in H.
Proof. When |A|≤2 there are no 3‑subsets of A, hence no 5‑sets of the form {b,c}∪T with T⊂A of size 3. Thus there are no new 5‑set constraints; any assignment to cross 4‑sets yields an amalgam in H. ∎

Fact 5 (Switching yields a 4‑hypertournament but may change 5‑types).
For ε:V→{±1}, define f^ε(S):=(∏_{v∈S}ε(v))·f(S). Then f^ε encodes a 4‑hypertournament. However, for a fixed 5‑set X, switching at v∈X flips the four coordinates of p(X) corresponding to 4‑sets containing v and leaves the coordinate “missing v” unchanged; this can change the isomorphism type on X (e.g., an O5 representative (+,-,-,-,-) switches at its ‘+’ vertex to (+,+,+,+,+), a C5 representative). ∎
Lemma 6 (Explicit formula for the S5 action on 5-vectors).
Let X be a 5-set equipped with an increasing labeling {1,2,3,4,5}. For τ∈S5 and i∈{1,…,5}, write j:=τ^{-1}(i) and define
c_j(τ) := |{k<j : τ(k) > τ(j)}| + |{k>j : τ(k) < τ(j)}|.
In the isomorphism action on p∈{±1}^X given by p′_i = ε_i(τ)·p_{τ^{-1}(i)}, the sign factor is
ε_i(τ) = sgn(τ)·(−1)^{c_j(τ)}.

Proof. Let τ′ be the induced bijection from [5]\{j} to [5]\{i}, obtained by deleting position j in the domain and value i in the codomain. By definition, ε_i(τ)=sgn(τ′). The inversions of τ split into two disjoint families: those not involving j (which correspond bijectively to inversions of τ′) and those involving j, whose number is c_j(τ) by definition. Hence inv(τ)=inv(τ′)+c_j(τ), so sgn(τ)= (−1)^{inv(τ)} = (−1)^{inv(τ′)+c_j(τ)} = sgn(τ′)·(−1)^{c_j(τ)} = ε_i(τ)·(−1)^{c_j(τ)}. Rearranging gives the claimed formula. ∎

Corollary 7 (Product identity for ε-factors).
For τ∈S5, one has ∏_{i=1}^5 ε_i(τ) = sgn(τ).

Proof. Using ε_i(τ) = sgn(τ)·(−1)^{c_{τ^{-1}(i)}(τ)} and the fact that each inversion contributes 1 to c_a and 1 to c_b, we have Σ_{j=1}^5 c_j(τ) = 2·inv(τ). Therefore ∏_{i=1}^5 ε_i(τ) = sgn(τ)^5 · (−1)^{Σ_j c_j(τ)} = sgn(τ)·(−1)^{2·inv(τ)} = sgn(τ). ∎
Lemma 8 (Central symmetry of the O5 orbit).
There exists τ∈S5 with ε_i(τ)=−1 for all i. In particular, for any 5-vector p one has p∈O5 if and only if −p∈O5. Thus the O5 orbit is closed under global sign reversal.

Proof. Take τ=(13) in one-line notation [3,2,1,4,5]. By Lemma 6, for j:=τ^{-1}(i), ε_i(τ)=sgn(τ)·(−1)^{c_j(τ)}. A direct count gives c_1(τ)=c_2(τ)=c_3(τ)=2 and c_4(τ)=c_5(τ)=0, so c_j(τ) is even for all j. Since sgn(τ)=−1, we get ε_i(τ)=−1 for every i. If q is in the O5 orbit, then so is R_τ(q)=−q∘τ^{−1}. As σ ranges over S5, the set {−R_σ(e1)} equals {R_{τσ}(e1):σ∈S5}, hence −O5=O5. ∎

Corollary 9 (Sign-flip symmetry for local tables F).
For F(α,β)⊆{±1}^3 defined by: (x,y,z)∈F(α,β) iff (α,β,x,y,z) is non-O5, one has
F(−α,−β) = { (−x,−y,−z) : (x,y,z)∈F(α,β) }.

Proof. (α,β,x,y,z) is non-O5 iff its global negation (−α,−β,−x,−y,−z) is non-O5 by Lemma 8. This is exactly the stated correspondence. ∎
Lemma 10 (2+2 vertex signs induce (+−−)-type on every triangle).
Let A={1,2,3,4} and choose w_i∈{±1} with exactly two plus and two minus. Define x_{ij}:=w_i w_j for 1≤i<j≤4. For each k∈A, on the triangle induced by A\{k} the ordered triple of edge-variables (x,y,z) (in any fixed coordinate convention) is a permutation of (+,−,−).

Proof. If k is one of the + vertices, then A\{k} contains one + and two −; the three pairwise products are (−,−,+). If k is one of the − vertices, then A\{k} contains two + and one −; the three pairwise products are (+,−,−). Thus in either case the unordered triple has signs {+ , − , −}. The ordering of (x,y,z) depends on the fixed convention but is a permutation of (+,−,−). ∎

Proposition 11 (Conditional |A|=4 amalgamation via a uniform 2+2 ansatz).
Fix a consistent ordering convention for the last three coordinates in the definition of F(α,β) (e.g., by increasing order of the three vertices in A\{k}). Suppose that for each (α,β)∈{++, +−, −+, −−}, all three permutations of (+,−,−) belong to F(α,β). Then for every one-point diagram over |A|=4 there exists an amalgam D∈H obtained by setting x_{ij}=w_i w_j for some choice of w with exactly two + and two − on A.

Proof. Choose any w with exactly two + and two − on A and set x_{ij}=w_i w_j. By Lemma 10, for each k the ordered triple contributed by the three edges in A\{k} is a permutation of (+,−,−). By hypothesis, this ordered triple lies in F(p^B_k,p^C_k) for every k, so no Y_k is of type O5. Therefore the resulting structure on A∪{b,c} is in H and extends both B and C. ∎

Proposition 12 (Equal-constant fixed pairs are solvable by a constant assignment).
In the |A|=4 one-point amalgamation problem, if (p^B_k,p^C_k)=(δ,δ) for all k∈A with a fixed δ∈{±1}, then there exists an amalgam D∈H obtained by setting x_{ij}≡δ.

Proof. With this assignment, for each k the 5-vector p(Y_k) equals (δ,δ,δ,δ,δ), which is ±C5. Since ±C5 is not in the O5 orbit, each Y_k is non-O5 and the amalgam lies in H. ∎

Lemma 13 (A hard local exclusion in the opposite-fixed case).
For (α,β)=(+,-), the triple (−,−,−) is forbidden: (x,y,z)=(−,−,−)∉F(+,-). Symmetrically, for (α,β)=(−,+), (+++)∉F(−,+).

Proof. For (α,β)=(+,-) and (x,y,z)=(−,−,−) one has p=(+,-,−,−,−), which is the canonical O5 representative; hence it is in the O5 orbit. By Lemma 8 (global sign-reversal is in the orbit), (−,+,+,+,+) is also in O5, yielding the symmetric statement. ∎
Proposition 14 (The one-point amalgamation over |A|=3 always succeeds, constructively).
Let A have size 3 and let B=A∪{b} and C=A∪{c} lie in H and agree on A. On Y:=A∪{b,c}, write p(Y)=(α,β,x,y,z) in the coordinate order (missing c, missing b, then missing the elements of A in increasing order). Then for each (α,β)∈{±1}^2 there is a choice of (x,y,z)∈{±1}^3 such that p(Y) is not in the O5 orbit, namely:
- If (α,β)=(+,+), take (x,y,z)=(+,+,+), so p(Y)=(+,+,+,+,+)=C5.
- If (α,β)=(−,−), take (x,y,z)=(−,−,−), so p(Y)=(−,−,−,−,−)=−C5.
- If (α,β)=(+,-), take (x,y,z)=(+,-,+), so p(Y)=(+,-,+,-,+)=H5.
- If (α,β)=(−,+), take (x,y,z)=(−,+,−), so p(Y)=(−,+,−,+,−)=−H5.
In all cases Y is non‑O5, hence there exists an amalgam D∈H on A∪{b,c} extending B and C.

Proof. The only new 5‑set is Y=A∪{b,c}. The displayed assignments set its 5‑vector equal to one of ±C5 or ±H5 in the fixed coordinate order, and these are not in the O5 orbit. There are no other new 5‑sets to check. Hence the extension lies in H. ∎

Proposition 15 (A solvable subclass for |A|=4 via a local H5 pattern with consistency).
Let A={1,2,3,4}, and let B=A∪{b} and C=A∪{c} lie in H and agree on A. For k∈A, write (α_k,β_k):=(p^B_k,p^C_k). Adopt the coordinate order
p(Y_k)=(p_{missing c},p_{missing b},p_{missing i},p_{missing j},p_{missing ℓ}) for Y_k={b,c}∪(A\{k}) with i<j<ℓ the increasing order on A\{k}. Suppose the type‑data satisfy the equalities
α_1=α_2=α_3=α_4,
β_1=α_3,
β_4=α_2,
β_2=β_3.
Then there exists an assignment to the six cross 4‑sets x_{ij}=f({i,j,b,c}) such that, for each k, p(Y_k) is ±C5 if α_k=β_k and ±H5 otherwise. In particular, an amalgam D∈H exists.

Proof. Define the triple of edge variables on Y_k by (x_{jℓ},x_{iℓ},x_{ij})=(α_k,β_k,α_k), where {i,j,ℓ}=A\{k} with i<j<ℓ. Each edge variable x_{ij} appears in exactly two such triples, corresponding to the two values of k∈A\{i,j}. The displayed equalities on the α_k and β_k are exactly those required to make these two prescriptions agree for every edge (a direct check using the mapping p_{missing i}=x_{jℓ}, p_{missing j}=x_{iℓ}, p_{missing ℓ}=x_{ij}). With this consistent assignment, p(Y_k)=(α_k,β_k,α_k,β_k,α_k), which is ±C5 if α_k=β_k and ±H5 otherwise. None of these are in the O5 orbit, so all four Y_k are non‑O5 and the resulting structure is an amalgam in H. ∎
Lemma 16 (Union‑bound feasibility for the |A|=4 CSP).
In the |A|=4 one‑point CSP (Proposition 3), suppose that for each k∈{1,2,3,4} the local table forbids at most one ordered triple, i.e., |{±1}^3\F(p^B_k,p^C_k)| ≤ 1. Then there exists an assignment to the six variables x_{ij} that satisfies all four constraints (so an amalgam in H exists).

Proof. There are 2^6=64 global assignments to the six variables. Fix k and a forbidden ordered triple t on its three local variables; the set of global assignments inducing t on that triangle has size 2^3 (the other three edge‑variables are free). Thus forbidding at most one triple per triangle eliminates at most 4·2^3=32 global assignments in total. Therefore at least 64−32=32 assignments remain that satisfy all four local constraints. ∎

Corollary 16.1 (A small‑table criterion for the |A|=4 step).
If the two base tables satisfy |{±1}^3\F(+,+)| ≤ 1 and |{±1}^3\F(+,-)| ≤ 1 (so, by Corollary 9, the same holds for F(−,−) and F(−,+) by triplewise negation), then for every one‑point diagram over |A|=4 there exists an amalgam D∈H.

Proof. For any instance, each Y_k uses one of the four pairs (p^B_k,p^C_k)∈{++,−−,+−,−+}; by the stated hypothesis and Corollary 9, each corresponding table forbids at most one triple. Apply Lemma 16. ∎

Lemma 17 (Global parity constraint across the four triangles).
In the |A|=4 CSP, for any assignment x_{ij}∈{±1}, the product of the triangle‑products over the four Y_k equals +1. Equivalently, an odd number of triangles cannot have triple‑product −1.

Proof. Each triangle‑product equals the product of its three edge‑variables. Multiplying the four triangle‑products together, each edge‑variable x_{ij} appears exactly twice (in the two triangles omitting i and j), hence contributes x_{ij}^2=1 to the total product. Therefore the total product is +1. ∎
Lemma 18 (ε‑cocycle for composition).
For σ,τ∈S_5 and i∈{1,2,3,4,5}, one has
ε_i(σ∘τ) = ε_i(σ) · ε_{σ^{-1}(i)}(τ).

Proof. Let A_ρ denote the signed action from Lemma 6: (A_ρ p)_i = ε_i(ρ) · p_{ρ^{-1}(i)}. Then (A_σ A_τ p)_i = ε_i(σ) · (A_τ p)_{σ^{-1}(i)} = ε_i(σ) · ε_{σ^{-1}(i)}(τ) · p_{τ^{-1}(σ^{-1}(i))}. On the other hand, A_{σ∘τ} p has i‑th coordinate ε_i(σ∘τ) · p_{(σ∘τ)^{-1}(i)}. Uniqueness of the action implies ε_i(σ∘τ) = ε_i(σ) · ε_{σ^{-1}(i)}(τ). ∎

Lemma 19 (ε for adjacent transpositions).
For s_k=(k k+1) with k∈{1,2,3,4}, the vector ε(s_k) has entries + at positions k and k+1 and − at the other three positions.

Proof. Write τ:=s_k. Using Lemma 6, ε_i(τ)=sgn(τ)·(−1)^{c_j(τ)} for j=τ^{-1}(i). A direct count shows that c_j(τ) is odd for j∉{k,k+1} and even for j∈{k,k+1}. Since sgn(τ)=−1, this yields ε_i(τ)=−1 at i∉{k,k+1} and ε_i(τ)=+1 at i∈{k,k+1}. ∎

Lemma 20 (O5‑image formula and exact pair‑set membership test).
Let e_O=(+,-,-,-,-). Define the pair‑set S:={ (ε(τ), i0=τ(1)) : τ∈S_5 }. For p∈{±1}^5, the following are equivalent:
(a) p lies in the O5 orbit (i.e., p = A_τ(e_O) for some τ∈S_5).
(b) There exists (ε,i0)∈S such that p_i=ε_i for i=i0 and p_i=−ε_i for i≠i0.
Equivalently, p is obtained from ε by flipping all coordinates except i0, with (ε,i0) realized by the same τ.

Proof. For (a)⇒(b): If p=A_τ(e_O), then for i with τ^{-1}(i)=1 one has p_i=ε_i(τ)·(+)=ε_i(τ), and for i with τ^{-1}(i)≠1 one has p_i=ε_i(τ)·(−)=−ε_i(τ). Writing i0:=τ(1) gives (b). For (b)⇒(a): Given (ε,i0)∈S, pick τ with ε(τ)=ε and τ(1)=i0. The same computation shows A_τ(e_O)=p. ∎
Corollary 20.1 (Product-of-entries identity for O5).
If p∈O5 with witness τ∈S_5 (i.e., p=A_τ(e_O)), then ∏_{i=1}^5 p_i = sgn(τ).

Proof. By Lemma 20, p is obtained from ε(τ) by flipping all coordinates except i0=τ(1). Thus ∏_i p_i = ε_{i0} · ∏_{i≠i0}(−ε_i) = (−1)^4 · ∏_i ε_i = ∏_i ε_i. By Corollary 7, ∏_i ε_i = sgn(τ). ∎

Lemma 21 (Swap of fixed coordinates; central symmetry when α=β).
For all α,β∈{±1} and all (x,y,z)∈{±1}^3,
(x,y,z) ∈ F(α,β) if and only if (−x,−y,−z) ∈ F(β,α).
In particular, F(α,α) is centrally symmetric: t∈F(α,α) ⇔ −t∈F(α,α).

Proof. Let τ=(12). By Lemma 19, ε(τ)=(+,+,−,−,−). For any p=(α,β,x,y,z), the signed action gives A_τ(p)=(β,α,−x,−y,−z). Since O5-orbit membership is invariant under A_τ, p is non‑O5 iff A_τ(p) is non‑O5. This yields the stated equivalence and the corollary for α=β. ∎

Lemma 22 (Internal generators preserving F(α,β)).
For all α,β and all (x,y,z), the following equivalences hold within the same table F(α,β):
- S3: (x,y,z)∈F(α,β) ⇔ (−y,−x,z)∈F(α,β).
- S4: (x,y,z)∈F(α,β) ⇔ (x,−z,−y)∈F(α,β).

Proof. For τ=(34), Lemma 19 gives ε(τ)=(−,−,+,+,−). Hence A_τ(α,β,x,y,z)=(−α,−β,y,x,−z). Applying Lemma 8 (global sign) yields (α,β,−y,−x,z), proving S3. For τ=(45), ε(τ)=(−,−,−,+,+) and A_τ(α,β,x,y,z)=(−α,−β,−x,z,y). Applying Lemma 8 gives (α,β,x,−z,−y), proving S4. ∎

Lemma 23 (Swap of first and third triple coordinates within F(α,β)).
For all α,β and all (x,y,z), (x,y,z)∈F(α,β) if and only if (z,y,x)∈F(α,β).

Proof. Start from (x,y,z), apply S4 to get (x,−z,−y); then apply S3 to get (z,−x,−y); then apply S4 again to get (z,y,x). Each step preserves membership in F(α,β) by Lemma 22. ∎

Lemma 24 (Two explicit forbidden ordered triples in the base tables).
(a) In F(+,-), the ordered triple (++−) is forbidden.
(b) In F(+,+), the ordered triple (−, +, +) is forbidden.

Proof. (a) Take τ=(12)(34), which is even. A direct computation gives ε(τ)=(−,−,−,−,+) and i0=τ(1)=2. By Lemma 20, A_τ(e_O)=flip_all_but_one(ε,2)=(+,−,+,+,−). Hence (α,β,x,y,z)=(+,-,+,+,−) is in O5, so (++−)∉F(+,-).
(b) Take τ=(13), for which Lemma 8 shows ε(τ)=(−,−,−,−,−). With i0=τ(1)=3, Lemma 20 yields A_τ(e_O)=(+,+,−,+,+). Thus (−,+,+)∉F(+,+). ∎


Current round tag: Round 0009 — 2025-08-27T20:16:43.894458Z
Return ONLY valid JSON with a single field:
{ "progress_md": "<your progress notes for this round>" }

Read output.md. If you spot gaps, errors, or missing justifications in output.md, point them out clearly inside progress_md.
