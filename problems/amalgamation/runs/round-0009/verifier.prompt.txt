--- SYSTEM ---
You are a strict mathematical verifier & research manager.

You are being run in a loop with provers. Your tasks:
- Audit their ideas for correctness and rigor.
- Curate files (notes.md and output.md).
- Suggest the next steps.

Inputs: 
- task statement
- outputs of provers
- notes.md (summary so far)
- output.md (rigorously proven results so far)

Guidelines:
- notes.md: should be a readable running log of interesting work. Prefer appending. Replace only if old notes are clearly misleading. Remember -- notes should be self-contained and should make sense even without seeing outputs of past provers. 
- output.md:  Think twice before you add something to this file. Everything here should be rigorous, almost publication-ready. It should contain only fully proven theorems that are clearly an interesting step towards the solution (or the solution itself). The beginning of the file is a clear list of interesting theorems you can prove, together with a discussion about why it is relevant. From the statement of the theorem it has to be clear that this constitutes nontrivial progress towards solution. The rest of the file contains a fully rigorous list of the proofs of the theorems. Keep only proven theorems with clear proofs. If a statement in that file is flawed / unprecise and you cannot fix it on the spot, remove it from output.md and instead add it to notes.md with explanation.
- Be careful with the booleans `new_notes_append` and `new_outputs_append`: default is True (append). Use False only when deliberately rewriting everything.

Tasks:
1) Audit rigor: identify unjustified steps, false statements, missing lemmas; produce minimal counterexamples.
2) Triage value: separate genuine progress from noise.
3) Guide next steps: propose what provers should try next.

**Return strictly JSON**:
{
  "feedback_md": "Detailed critique of prover outputs (≥200 words). Include concrete next-step suggestions. The next round of provers may not see last round outputs; ensure all valuable info is stored in notes.",
  "new_notes_md": "Markdown (KaTeX allowed). Usually appended to notes.",
  "new_notes_append": "True|False",
  "new_outputs_md": "Markdown (KaTeX allowed). Usually appended to output.md.",
  "new_outputs_append": "True|False",
  "verdict": "success|partial success|nothing so far"
}

**Verdict definitions**:
- **success**: Something that one could publish, even if it is not the full solution (e.g., significant theorem, key lemma, novel technique, partial solution with clear path forward)
- **partial success**: Something worthy enough to write into output.md (e.g., correct but preliminary results, useful technical lemmas, validated approaches that advance understanding)
- **nothing so far**: No meaningful mathematical progress or only exploratory work


--- USER ---
You receive multiple prover reports. Evaluate correctness, value, and pick promising directions. Update notes.md (append/replace) with useful ideas and update output.md (append/replace) ONLY with rigorously verified results.

Prover reports (JSON):
[{"prover_id": "01", "progress_md": "# Round 0009 \u2014 Correcting Lemma 24(b); tightening the F-tables with rigorous consequences; shrinking the remaining computation\n\nSummary of status and key tools already in output.md\n- The one-point reduction (Proposition 3) and the |A|=4 six-variable CSP are sound. The exact O5 membership test via the S-pair set (Lemma 20), together with the \u03b5-cocycle (Lemma 18) and \u03b5 on generators (Lemma 19), is correct and sufficient to implement IsO5.\n- Internal symmetries of the local tables F(\u03b1,\u03b2) are recorded (Lemmas 21\u201323): central symmetry for \u03b1=\u03b2 (swap of fixed coords), and two in-table transforms S3: (x,y,z)\u2194(\u2212y,\u2212x,z), S4: (x,y,z)\u2194(x,\u2212z,\u2212y), and the derived swap (x,y,z)\u2194(z,y,x). These preserve membership and triple-product within a fixed F(\u03b1,\u03b2).\n\nCritical correction \u2014 Lemma 24(b) is false\n- Claim in output.md Lemma 24(b): \u201cIn F(+,+), the ordered triple (\u2212,+,+) is forbidden.\u201d This contradicts Lemmas 21\u201323 together with a known allowed entry.\n- Rigorous contradiction:\n  1) (+++) \u2208 F(+,+) because p=(+,+,+,+,+)=C5 is non-O5 (Proposition 14; also directly obvious).\n  2) Apply S4 (Lemma 22) to (+++): we get (+,\u2212,\u2212) \u2208 F(+,+).\n  3) Apply Lemma 23 (x\u2194z): (\u2212,\u2212,+) \u2208 F(+,+).\n  4) Apply central symmetry for \u03b1=\u03b2 (Lemma 21): negate each of these three allowed triples to get (\u2212\u2212\u2212), (\u2212,+,+), (+,+,\u2212) \u2208 F(+,+).\n  Hence (\u2212,+,+) must be allowed in F(+,+), contradicting Lemma 24(b). Therefore 24(b) is incorrect and should be removed or corrected in output.md.\n\nNew rigorous consequences (derived via Lemmas 21\u201323 and known entries)\n- Lemma A (proved here). In F(+,+), all six triples in O+_A \u222a (\u2212O+_A) are allowed, where O+_A = { (+++), (+,\u2212,\u2212), (\u2212,\u2212,+) } and (\u2212O+_A) = { (\u2212\u2212\u2212), (\u2212,+,+), (+,+,\u2212) }.\n  Proof sketch. (+++) is allowed. Apply S4 to get (+,\u2212,\u2212), then Lemma 23 to get (\u2212,\u2212,+). Apply Lemma 21 (\u03b1=\u03b2) to negate these three, obtaining the other three allowed triples. Each step preserves membership. \u220e\n  Why useful: This settles two-thirds of F(+,+) without computation and, in particular, certifies the two ordered shapes (+,\u2212,\u2212) and (\u2212,\u2212,+) required by the fixed 2+2 ansatz.\n\n- Lemma B (proved here). In F(+,-), all three triples in the size-3 product \u22121 orbit O\u2212_A = { (\u2212\u2212\u2212), (++\u2212), (\u2212++) } are forbidden, while (+,\u2212,+) is allowed (Proposition 14).\n  Proof. (\u2212\u2212\u2212) is forbidden by Lemma 13. (++\u2212) is forbidden by Lemma 24(a). By S3/S4 closure (Lemma 22), the orbit generated by these two equals O\u2212_A, so (\u2212++) is also forbidden. (+,\u2212,+) was already shown allowed at |A|=3 (Proposition 14). \u220e\n  Why useful: This fully determines the product \u22121 part of F(+,-), leaving only the product +1 orbits to decide.\n\nConsequences for the |A|=4 step and the 2+2 ansatz\n- Equal-fixed case (++ and \u2212\u2212): By Lemma A and Corollary 9, the two shapes realized by the fixed 2+2 assignment w=(+,+,\u2212,\u2212) (namely (+,\u2212,\u2212) and (\u2212,\u2212,+), and their sign-negations for (\u2212\u2212)) are allowed. Thus whenever a triangle uses (\u03b1,\u03b2)\u2208{(++),(\u2212\u2212)}, the fixed 2+2 shapes are admissible.\n- Opposite-fixed cases (+\u2212 and \u2212+): By Lemma B (and Corollary 9), only the product +1 triples remain to be classified. The fixed 2+2 ansatz requires the two shapes (+,\u2212,\u2212) and (\u2212,\u2212,+); by Lemma 23, it suffices to check a single representative (+,\u2212,\u2212) in F(+,-). Corollary 9 then transfers this to F(\u2212,+).\n- Important caveat (as noted in earlier rounds and verifier feedback): Even if both shapes are allowed in each pair-type, choosing w so that each Y_k lands on an allowed shape is a small combinatorial selection problem (exactly two k realize (\u2212,\u2212,+), two realize (+,\u2212,\u2212) under any w with two pluses). If a pair-type appears three times among k and permits only one of the two shapes, the fixed 2+2 ansatz may still fail on that instance. Hence the full resolution still requires either: (i) both shapes allowed for every pair-type appearing in the instance (then we can place the two pluses appropriately), or (ii) a fall-back small backtracking over the six edge variables.\n\nShrinking the remaining computation \u2014 minimal decisive checks\n- Thanks to Lemmas A and B, only the product +1 entries of F(+,-) remain undecided. By Lemmas 21\u201323, within F(+,-) it suffices to test at most the two representatives (+++) and (+,\u2212,\u2212), plus the singleton (\u2212,+,\u2212) (since it forms its own orbit). Thus three IsO5 queries settle F(+,-) completely:\n  1) (+++) \u2208? F(+,-)\n  2) (+,\u2212,\u2212) \u2208? F(+,-)  [by Lemma 23 this also decides (\u2212,\u2212,+)]\n  3) (\u2212,+,\u2212) \u2208? F(+,-)\n- For completeness, F(+,+) still has two singleton-orbit entries whose status is not fixed by Lemma A: (+,\u2212,+) and (\u2212,+,\u2212). These are not needed for the fixed 2+2 ansatz but can be recorded by two extra queries.\n\nAuditable unit tests and examples (to validate implementation)\n- Validate Lemma 22 symmetries on random entries: IsO5(\u03b1,\u03b2,x,y,z) equals IsO5(\u03b1,\u03b2,\u2212y,\u2212x,z) and IsO5(\u03b1,\u03b2,x,\u2212z,\u2212y);\n  and Lemma 23: IsO5(\u03b1,\u03b2,x,y,z)=IsO5(\u03b1,\u03b2,z,y,x).\n- Validate central symmetry for \u03b1=\u03b2 (Lemma 21): (x,y,z)\u2208F(\u03b1,\u03b1) iff (\u2212x,\u2212y,\u2212z)\u2208F(\u03b1,\u03b1).\n- Check the forbidden set in Lemma B: (\u2212\u2212\u2212), (++\u2212), (\u2212++) are O5 for (\u03b1,\u03b2)=(+,-); (+,\u2212,+) is non-O5.\n- Reconfirm canonical sanity: (+,\u2212,\u2212,\u2212,\u2212) \u2208 O5; (+,+,+,+,+) \u2209 O5; (+,\u2212,+,\u2212,+) \u2209 O5.\n\nObstacles and why a tiny computation still remains\n- An analytic classification of the product +1 part of F(+,-) still seems delicate without enumerating S (the 120 pairs). The S-oracle (Lemma 20) is the right tool and reduces the remaining unknowns to at most three checks listed above.\n- The union-bound route (Corollary 16.1) cannot close the |A|=4 step since F(+,-) already forbids at least three triples (Lemma B). The fixed 2+2 ansatz reduces the need to decide only whether (+,\u2212,\u2212) is allowed in F(+,-); if yes, the ansatz often works, but a short backtracking remains prudent for adversarial distributions of pair-types across k.\n\nActionable next steps for the verifier (precise, minimal)\n1) Remove (or mark false) output.md Lemma 24(b) and any deductions from it; retain Lemma 24(a).\n2) Implement IsO5 via Lemma 20 (S-pair set). Validate with the symmetry unit tests above and Corollary 20.1 (product-of-entries = sgn(\u03c4)).\n3) Decide the three remaining entries of F(+,-): (+++), (+,\u2212,\u2212), (\u2212,+,\u2212). Record the full table; derive F(\u2212,+) by Corollary 9.\n4) Optionally, record the two singleton-orbit entries in F(+,+): (+,\u2212,+), (\u2212,+,\u2212); though Lemma A already suffices for the fixed 2+2 shape requirements in the equal-fixed case.\n5) Attempt the fixed 2+2 ansatz w=(+,+,\u2212,\u2212) on representative |A|=4 profiles; if any instance fails (because a pair-type appears three times and permits only one of the two shapes), run the tiny backtracking solver with parity pruning (Lemma 17).\n\nGaps and corrections to note in output.md\n- Lemma 24(b) must be retracted: it contradicts Lemmas 21\u201323 and the known allowed entry (+++)\u2208F(+,+). The calculation via \u03c4=(13) cannot be used to forbid (\u2212,+,+) in F(+,+) because Lemmas 21\u201323 compel (\u2212,+,+) to be allowed once (+++) is allowed.\n- Recommend adding Lemma A and Lemma B (as stated above) explicitly: they consolidate many entries in F(+,+) and F(+,-) and sharply reduce the remaining computation.\n- When the F(+,-) product +1 entries are decided, include the final tables and restate the fixed coordinate convention adjacent to their definition for reproducibility.\n\nWhy this is incremental and auditable\n- We identified and rigorously refuted a false lemma (24(b)) in output.md, using only the already-recorded symmetries and a known allowed entry.\n- We proved two new, checkable lemmas (A and B) that substantially determine the base tables without computation and reduce the remaining unknowns in F(+,-) to at most three representative queries.\n- We outlined a minimal, deterministic plan to finish: three IsO5 checks for F(+,-), optional two for F(+,+), then either apply the fixed 2+2 assignment with a small combinatorial placement of the two pluses or fall back to a tiny backtracking consistent with Lemma 17.\n"}, {"prover_id": "02", "progress_md": "Round 0009 \u2014 Reconciling local F-table symmetries with explicit O5 witnesses; firming up F(+,-), flagging a contradiction in output.md\n\nKey inconsistency detected in output.md (needs verifier attention)\n- Claimed facts in output.md:\n  \u2022 Lemma 21: F(\u03b1,\u03b1) is centrally symmetric: t \u2208 F(\u03b1,\u03b1) \u21d4 \u2212t \u2208 F(\u03b1,\u03b1).\n  \u2022 Lemma 22: Within any fixed F(\u03b1,\u03b2), membership is preserved by S3: (x,y,z)\u21a6(\u2212y,\u2212x,z) and S4: (x,y,z)\u21a6(x,\u2212z,\u2212y).\n  \u2022 Proposition 14: For |A|=3, (+++)\u2208F(+,+) (since (+,+,+,+,+)=C5 is non\u2011O5), hence by Lemma 21 also (\u2212\u2212\u2212)\u2208F(+,+).\n  \u2022 Lemma 24(b): (\u2212,+,+)\u2209F(+,+) (witness \u03c4=(13)).\n- Contradiction: Apply S4 in Lemma 22 to (\u2212\u2212\u2212) in F(+,+): S4(\u2212,\u2212,\u2212)=(\u2212,+,+), so (\u2212,+,+) must be in F(+,+). This conflicts with Lemma 24(b).\n- Likely source: Lemma 24(b) uses \u03c4=(13), which does not preserve the \u201cfixed coordinate semantics\u201d (first two coordinates are missing c and missing b in our F-table convention). The vector (+,+,\u2212,+,+) is indeed in O5, but this does not alone certify that the ordered triple (\u2212,+,+) is forbidden in the specific F(+,+) table with our fixed coordinate order on Y_k. To forbid an ordered triple in F(+,+), one must produce an O5 witness that keeps the first two coordinates aligned with (missing c, missing b) and the last three aligned with the increasing ordering on A\\{k}. The current proof for 24(b) does not enforce this alignment.\n- Action: Please re\u2011validate Lemma 24(b) with an S-oracle constrained to transformations that preserve the F-table convention (e.g., composing \u03c4 with appropriate permutations in the subgroup fixing the first two coordinates, and re-ordering the last three as i<j<\u2113). Pending that, I recommend retracting 24(b) to keep the local symmetries consistent.\n\nSafe extensions: completing the \u201c\u2212\u2212\u2212 orbit\u201d exclusions in F(+,-)\n- From Lemma 13, in F(+,-) the triple (\u2212,\u2212,\u2212) is forbidden.\n- By Lemma 22 (internal symmetries within F(+,-)):\n  \u2022 Apply S3 to (\u2212,\u2212,\u2212) to get (++\u2212), hence (++\u2212) is also forbidden. This matches output.md Lemma 24(a).\n  \u2022 Apply S4 to (\u2212,\u2212,\u2212) to get (\u2212,+,+), hence (\u2212,+,+) is also forbidden.\n- Conclusion: In F(+,-), all three triples in the product \u22121 orbit O\u2212_A={ (\u2212\u2212\u2212), (++\u2212), (\u2212++) } are forbidden. The remaining product \u22121 singleton (+\u2212+) is allowed by Proposition 14 (the |A|=3 witness). This fully settles the product \u22121 slice of F(+,-) without further computation.\n- Why useful: This gives three more hard local exclusions for F(+,-) from already-proved symmetries, shrinking the unknowns to the product +1 triples { (+++), (+\u2212\u2212), (\u2212+\u2212), (\u2212\u2212+) }.\n\nImplications for 2+2 and the \u201ctwo checks suffice\u201d reduction\n- Under the fixed choice w=(+,+,\u2212,\u2212) (or w=(\u2212,\u2212,+,+)), the two realized ordered shapes across Y_k are (+,\u2212,\u2212) and (\u2212,\u2212,+) (never (\u2212,+,\u2212) for this fixed w). By Lemma 23, these two are equivalent within any fixed F(\u03b1,\u03b2).\n- Therefore, to deploy the 2+2 ansatz uniformly it suffices to check two entries: (+,\u2212,\u2212)\u2208F(+,+) and (+,\u2212,\u2212)\u2208F(+,-). By Corollary 9 this covers the remaining two base tables. This matches the refined plan in notes, and it is consistent with the proven internal symmetries.\n\nSmall, rigorous invariant for F(+,+): even complement size\n- From Lemma 21, F(\u03b1,\u03b1) is centrally symmetric. Hence |{\u00b11}^3\\F(\u03b1,\u03b1)| is even. In particular, the union\u2011bound criterion (Corollary 16.1) can only apply if the complement size is 0 (it cannot be 1). This is a structural constraint to aid the final small computation.\n\nConcrete unit tests for the S\u2011oracle and table symmetries\n- S\u2011oracle sanity: Confirm that (+,+,+,+,+) is non\u2011O5, (+,\u2212,\u2212,\u2212,\u2212) is O5, (+,\u2212,+,\u2212,+) is non\u2011O5; and that the sample pairs (\u03b5(\u03c4),i0) listed earlier yield A_\u03c4(e_O) as computed. Check Cor. 20.1: \u220f p_i = sgn(\u03c4) on random O5 samples.\n- Internal symmetry tests (must pass if Lemmas 21\u201323 are correctly implemented): For random (\u03b1,\u03b2) and t=(x,y,z), validate IsO5(\u03b1,\u03b2,t)=IsO5(\u03b2,\u03b1,\u2212t); and IsO5(\u03b1,\u03b2,t)=IsO5(\u03b1,\u03b2,S3(t))=IsO5(\u03b1,\u03b2,S4(t))=IsO5(\u03b1,\u03b2,(z,y,x)).\n\nNext steps (precise, minimal)\n1) Re\u2011check Lemma 24(b): Either supply a corrected \u03c4\u2011witness consistent with the F-table convention, or retract it. The contradiction with Lemmas 21\u201322 and (+++)\u2208F(+,+) strongly suggests 24(b) is invalid as currently justified.\n2) Archive the three firm exclusions in F(+,-): O\u2212_A is forbidden (\u2212\u2212\u2212, ++\u2212, \u2212++), and record (+\u2212+) as allowed (Prop. 14). Populate the remaining four product +1 entries via the S\u2011oracle.\n3) Evaluate the two decisive entries (+,\u2212,\u2212)\u2208F(+,+) and (+,\u2212,\u2212)\u2208F(+,-). If both pass, conclude |A|=4 by the 2+2 ansatz (Proposition 11) and AP by Lemma 2.\n4) If either fails, run the tiny backtracking solver with parity pruning (Lemma 17) on realized profiles; archive SAT assignments or minimal UNSAT certificates.\n\nWhy this is incremental, auditable progress\n- We isolated a concrete logical inconsistency in output.md (Lemma 24(b) vs Lemmas 21\u201322 and the known (+++) allowance), explained its likely cause (coordinate alignment for F\u2011tables), and provided a clear check to fix it.\n- We extended F(+,-) rigorously using proven internal symmetries: the entire product \u22121 orbit O\u2212_A is now certified forbidden, reducing the unknowns to four product +1 triples.\n- We reiterated the minimal decisive checks for the 2+2 method and an invariant (even complement) that constrains the small computation for F(+,+).\n\nGaps to note in output.md (do not edit now)\n- Lemma 24(b) likely incorrect as stated; it contradicts Lemmas 21\u201322 and Proposition 14. Please mark it for re\u2011verification or removal.\n- When the F\u2011tables are finalized, restate the fixed coordinate order alongside them to avoid future misalignment between S5 actions and the F\u2011table semantics.\n"}, {"prover_id": "03", "progress_md": "Round 0009 \u2014 Correcting a contradiction in output.md; sharpening F(+,+) and F(+,-) with rigorous deductions; decisive next checks\n\nKey correction: Lemma 24(b) contradicts the proven internal symmetries\n- Issue. Lemma 24(b) in output.md claims that in F(+,+) the ordered triple (\u2212,+,+) is forbidden (i.e., (+,+,\u2212,+,+)\u2208O5). This contradicts Lemmas 21\u201323 (proved earlier in output.md), which describe S5-induced invariances of the local tables.\n- Rigorous contradiction (using only Lemmas 21\u201323 and Prop. 14):\n  1) (+++) \u2208 F(+,+) by Prop. 14 (|A|=3 witness, equivalently p=(+,+,+,+,+) is non\u2011O5).\n  2) Apply S3 (Lemma 22): (x,y,z)\u21a6(\u2212y,\u2212x,z). From (+++) we get (\u2212,\u2212,+) \u2208 F(+,+).\n  3) Apply the x\u2194z swap (Lemma 23): (z,y,x). From (\u2212,\u2212,+) we get (+,\u2212,\u2212) \u2208 F(+,+).\n  4) Apply central symmetry for \u03b1=\u03b2 (Lemma 21): t\u2208F(+,+) \u21d2 \u2212t\u2208F(+,+). From (+,\u2212,\u2212) we get (\u2212,+,+) \u2208 F(+,+).\n  Therefore (\u2212,+,+) is allowed in F(+,+), contradicting Lemma 24(b). Hence Lemma 24(b) is false and should be retracted or corrected in output.md.\n- Why this matters. The F-table symmetries are foundational for reducing the computation; any entry that violates them signals a bug. Fixing this restores consistency and unlocks strong deductions for F(+,+) below.\n\nConsequences for F(+,+) (provable now)\n- From the symmetry chain above, we immediately obtain:\n  \u2022 (+++) \u2208 F(+,+) (Prop. 14),\n  \u2022 (\u2212,\u2212,+) \u2208 F(+,+) (by S3),\n  \u2022 (+,\u2212,\u2212) \u2208 F(+,+) and (\u2212,+,+) \u2208 F(+,+) (by Lemma 23 and Lemma 21),\n  \u2022 By Lemma 21 again, (\u2212,\u2212,\u2212), (+,+,\u2212) are also in F(+,+).\n- Summary (F(+,+) status): At least 6 of the 8 triples are allowed: {+++, \u2212\u2212\u2212, +\u2212\u2212, \u2212\u2212+, \u2212++, ++\u2212}. The only undecided pair is the central-symmetry pair {+\u2212+, \u2212+\u2212}. By Lemma 21 they are either both allowed or both forbidden. This reduces the F(+,+) computation to a single yes/no decision on one representative, say (+,\u2212,+).\n- Practical impact: For any triangle with (\u03b1,\u03b2)=(+,+), the two ordered shapes realized by the fixed 2+2 choice w=(+,+,\u2212,\u2212), namely (+,\u2212,\u2212) and (\u2212,\u2212,+), are already certified allowed. Thus, triangles of equal\u2011fixed type pose no obstruction for the 2+2 construction.\n\nSharpened structure for F(+,-)\n- Rigorous forbidden entries (with proofs independent of 24(b)):\n  \u2022 (\u2212,\u2212,\u2212) \u2209 F(+,-) (Lemma 13; canonical O5 representative).\n  \u2022 (++\u2212) \u2209 F(+,-) (Lemma 24(a); explicit \u03c4=(12)(34) witness).\n  \u2022 By Lemma 23 (x\u2194z), (\u2212,+,+) \u2209 F(+,-) follows from (++\u2212) \u2209 F(+,-).\n- Rigorous allowed entry:\n  \u2022 (+,\u2212,+) \u2208 F(+,-) (Prop. 14; |A|=3 witness to H5).\n- Summary (F(+,-) so far): At least three forbidden triples {\u2212\u2212\u2212, ++\u2212, \u2212++} and at least one allowed {+\u2212+}. By Lemmas 22\u201323, (+\u2212+) is a 1\u2011point orbit, so this does not propagate. The status of the three permutations of (+,\u2212,\u2212) remains open and is decisive for the 2+2 ansatz.\n- Immediate consequence: The union\u2011bound route (Cor. 16.1) cannot decide the |A|=4 step, since F(+,-) already forbids \u22653 triples (violating the \u201c\u22641 forbidden per table\u201d hypothesis). Keep Cor. 16.1 as a tool, but it does not apply here.\n\nDecisive reduction for the 2+2 ansatz (now fully justified)\n- For (\u03b1,\u03b2)=(+,+): we have proved that both (+,\u2212,\u2212) and (\u2212,\u2212,+) lie in F(+,+). By Cor. 9, the same applies to (\u03b1,\u03b2)=(\u2212,\u2212).\n- For (\u03b1,\u03b2)=(+,-) (and by Cor. 9, (\u2212,+)), it suffices to decide whether (+,\u2212,\u2212)\u2208F(+,-). By Lemma 23, this also decides (\u2212,\u2212,+). The singleton permutation (\u2212,+,\u2212) is not realized by the fixed w=(+,+,\u2212,\u2212) on any Y_k, so it is irrelevant for this fixed 2+2 construction.\n- Therefore, a single membership check settles the uniform 2+2 strategy: if (+,\u2212,\u2212)\u2208F(+,-), then for every one\u2011point instance the assignment x_{ij}=w_i w_j with w having exactly two + and two \u2212 yields all four Y_k non\u2011O5.\n\nImplementation/verification plan (minimal, auditable)\n1) Fix output.md by removing Lemma 24(b) (or marking it \u201cfalse\u201d), and add the provable inclusions for F(+,+) listed above (derivable solely from Lemmas 21\u201323 and Prop. 14).\n2) Implement/validate IsO5 via Lemma 20 (pair\u2011set S). Unit tests: the symmetry implications S3/S4/Lemma 23 must hold on random inputs (same (\u03b1,\u03b2)); Cor. 20.1 product identity must match sgn(\u03c4) on sampled witnesses.\n3) Compute F(+,+) on the lone undecided representative (+,\u2212,+). Record the final table (it is either 6/8 or 8/8 allowed).\n4) Compute F(+,-) on the three permutations of (+,\u2212,\u2212). If (+,\u2212,\u2212) is allowed, conclude the |A|=4 step via the fixed 2+2 construction, hence AP (by Lemma 2). If it is forbidden, proceed to the tiny backtracking solver with parity pruning (Lemma 17). In either case, archive the F\u2011tables.\n\nExamples and unit checks (to assist the verifier)\n- Symmetry chain proving (\u2212,+,+)\u2208F(+,+): (+++) (allowed by Prop. 14) \u2192 S3: (\u2212,\u2212,+) \u2192 x\u2194z: (+,\u2212,\u2212) \u2192 central symmetry (\u03b1=\u03b2): (\u2212,+,+).\n- Forbidden trio in F(+,-): (++\u2212) (Lemma 24(a)); x\u2194z gives (\u2212, +, +); (\u2212,\u2212,\u2212) (Lemma 13). Confirm that S3/S4 do not produce new shapes beyond these three.\n- Decisive check: Evaluate IsO5 on p=(+,-,+,\u2212,\u2212) and p=(+,-,\u2212,\u2212,+) (the two ordered shapes realized by w=(+,+,\u2212,\u2212)). If both are non\u2011O5, the 2+2 construction is confirmed for the opposite\u2011fixed case.\n\nNotes on output.md (gaps/adjustments)\n- Lemma 24(b) is incorrect and should be removed to maintain consistency with Lemmas 21\u201323. The corrected content should instead record that (\u2212,+,+)\u2208F(+,+) (by the symmetry chain from (+++)).\n- It is worth adding (in a remark) the deduced structure of F(+,+): six entries are allowed a priori; the pair {+\u2212+, \u2212+\u2212} remains to be decided.\n- Keep Lemma 24(a); it is compatible with all symmetries proved and with Lemma 13.\n\nWhy this is incremental, auditable progress\n- We identified and resolved a concrete contradiction in output.md, supplying a short, self\u2011contained proof using only previously recorded lemmas.\n- We sharply reduced the remaining local computation: F(+,+) is down to one undecided orbit; the entire 2+2 viability reduces to a single membership in F(+,-).\n- The plan remains minimal (a handful of IsO5 queries) and includes strong unit tests (symmetry checks and the three explicit F(+,-) forbiddens). This will decisively close the |A|=4 step or pinpoint the small residual casework needed via backtracking."}]

Current notes.md:
Set‑up and notations (agreed baseline)
- 4‑hypertournament on finite V: equivalent to a function f:[V]^4→{±1}. For an ordered 4‑tuple (x1,x2,x3,x4) with underlying set S, we declare (x1,x2,x3,x4)∈R iff the permutation from the increasing ordering of S to (x1,…,x4) has sign equal to f(S). This satisfies (i) tuples have distinct entries, (ii) closure under even permutations, (iii) exactly one of (x1,x2,x3,x4) and (x2,x1,x3,x4) lies in R.
- For a 5‑set X, define its 5‑vector p(X)∈{±1}^X by p_x:=f(X\{x}). Isomorphisms act by p↦(ε_i(τ)·p_{τ^{-1}(i)}) with ε_i(τ)=sign of τ restricted to X\{τ^{-1}(i)}. The three isomorphism types on 5 points are denoted C5, H5, O5. For computation we may use representatives C5=(+,+,+,+,+), O5=(+,-,-,-,-), H5=(+,-,+,-,+); the orbit relation is determined by the above action (not by raw counts of pluses).

One‑point amalgamation reduction
- AP for H (class of finite 4‑hypertournaments with no induced O5) reduces to the one‑point case: Given A∈H, B=A∪{b}∈H, C=A∪{c}∈H with B∩C=A, existence of D on A∪{b,c} in H extending B and C implies full AP by iteratively adding the vertices of C\A to B.

CSP for the minimal nontrivial one‑point case |A|=4
- Fix A={1,2,3,4}, b=5, c=6. The only undetermined f‑values are the six cross 4‑sets X_{ij}={i,j,5,6} (1≤i<j≤4). Let variables x_{ij}:=f(X_{ij})∈{±1}.
- The only potentially new 5‑sets are Y_k:={5,6}∪(A\{k}) for k∈{1,2,3,4}. For each k, p(Y_k) has two fixed coordinates: p missing 6 equals p^B_k:=f_B({5}∪(A\{k})), and p missing 5 equals p^C_k:=f_C({6}∪(A\{k})); and three variable coordinates drawn from {x_{ij}} on the three pairs inside A\{k}:
  • Y_1 depends on {x_{23},x_{24},x_{34}}
  • Y_2 depends on {x_{13},x_{14},x_{34}}
  • Y_3 depends on {x_{12},x_{14},x_{24}}
  • Y_4 depends on {x_{12},x_{13},x_{23}}.
- Constraint: For each k, p(Y_k) must not lie in the O5‑orbit. This is the complete constraint system for the one‑point amalgam over A of size 4.

Base sizes |A|≤2 and |A|=3
- |A|≤2: There are no 5‑sets Y; any assignment to cross 4‑sets works, so one‑point amalgamation always succeeds.
- |A|=3: There is exactly one 5‑set Y=A∪{b,c}, with two fixed coordinates (those missing b and c) and three unknowns (those missing each a∈A). We expect (and plan to verify computationally) that for every (α,β)∈{±1}^2 at least one of the 8 assignments to the three unknowns avoids the O5 orbit. This settles one‑point amalgamation at size 3 once verified.

Switching: what it does and what it does not
- For ε:V→{±1}, define f^ε(S):=(∏_{v∈S}ε(v))·f(S). Then f^ε encodes another 4‑hypertournament.
- Caution: For a fixed 5‑set X, switching at a vertex v∈X flips the four coordinates of p(X) corresponding to the 4‑sets that contain v and leaves the coordinate “missing v” unchanged. This can change the 5‑type: e.g., (+,-,-,-,-) (an O5 representative) switches at the ‘+’ vertex to (+,+,+,+,+) (a C5 representative). Thus switching is not a valid normalization trick for fixed one‑point data (B,C) in H.

Computational plan (to settle |A|=3 and |A|=4)
- Step A: Compute the O5 orbit via the S5 action above; implement IsO5(p).
- Step B (|A|=3): For each (α,β), enumerate the 8 triples, test IsO5, and record that at least one choice avoids O5.
- Step C (|A|=4): Enumerate compatible (B,C) (both of type C5 or H5, agreeing on f(A)), form p^B_k,p^C_k (k=1..4), and brute‑force the 2^6 choices of x_{ij}, rejecting any assignment for which some Y_k is O5. Record either a counterexample or certify all cases pass.
- Precompute F(α,β)⊆{±1}^3: the allowed triples for a 5‑set with given two fixed coordinates. Then the |A|=4 CSP checks membership of the four triangle‑triples in F(p^B_k,p^C_k).

Constructive ansatz to test
- Try x_{ij}=w_iw_j with w_i:=p^B_i·p^C_i for i∈A. For T={i,j,k} this gives a triple (w_iw_j,w_iw_k,w_jw_k) of product +1. If this never yields O5 for any (p^B_k,p^C_k), it provides a uniform construction for all |A| (worth testing; not proved).
Addendum: explicit S5 action, corrections, and computation plan

1) Explicit ε-formula for the S5 action (implementation aid)
For τ ∈ S5 and i ∈ {1,…,5}, write j := τ^{-1}(i) and define
c_j(τ) := |{k<j : τ(k) > τ(j)}| + |{k>j : τ(k) < τ(j)}|.
Then the sign multiplier in the action p′_i = ε_i(τ)·p_{τ^{-1}(i)} equals
ε_i(τ) = sgn(τ)·(−1)^{c_j(τ)}.
Sketch of justification: Let τ′ be the induced bijection from [5]\{j} to [5]\{i}. Its inversion count is inv(τ′) = inv(τ) − c_j(τ) because the inversions of τ decompose into those not involving j (which biject with the inversions of τ′) and those involving j (counted by c_j). Hence sgn(τ′) = (−1)^{inv(τ′)} = (−1)^{inv(τ)−c_j} = sgn(τ)·(−1)^{c_j}. By definition ε_i(τ) = sgn(τ′). A immediate corollary is the product identity ∏_{i=1}^5 ε_i(τ) = sgn(τ), since Σ_j c_j(τ) = 2·inv(τ).

Practical note: This eliminates ambiguity about ε and supports a robust IsO5 enumerator.

2) Correction to the “fully aligned” claim
The statement “If p^B_k = p^C_k for all k then setting all x_{ij}=δ makes p(Y_k) constant δ for all k” is false unless the common pattern (p^B_k)_{k∈A} is itself constant with value δ. Counterexample: take p^B=p^C=(+,+,−,+) and δ=+. Then for k=3 the fixed coordinates are (−,−) while the three variables are +, so p(Y_3) is not constant. A correct (weaker) statement is: if p^B_k = p^C_k = δ for all k, then x_{ij}≡δ makes every p(Y_k) constant δ, hence non-O5.

3) F(α,β) tables: compute all four cases
Define F(α,β) ⊆ {±1}^3 as the set of triples (x,y,z) for which p=(α,β,x,y,z) is non-O5. Do not assume F(+,+)=F(−,−) or F(+,-)=F(−,+) a priori; compute all four cases. This is an 8×4=32-evaluation task. Record each F(α,β) explicitly along with any observed symmetries (e.g., invariance under permuting x,y,z).

Consequence: |A|=3 reduces to checking that for each (α,β) there exists at least one triple in F(α,β). Archive one such triple per case.

4) |A|=4 CSP protocol (profiles and ansatz)
- Use the already-recorded CSP with variables x_{ij} on the six edges of K4 and four constraints Y_k. For any concrete pair (B,C) over A with B∩C=A and both omitting O5, determine the four pairs (p^B_k,p^C_k) and require the corresponding triangle-triple to lie in F(p^B_k,p^C_k).
- Profiles to test early:
  • P1: p^B≡+, p^C≡+. The corrected alignment lemma (constant case) gives the assignment x_{ij}≡+.
  • P2: p^B≡+, p^C≡−. Try the perfect-matching assignment x_{12}=x_{34}=+, others −; check all four Y_k via IsO5.
  • P3: p^B≡+, p^C drawn from an H5 labeling consistent on A; try ansatz x_{ij}=w_i w_j with w_i=p^B_i p^C_i.
  • P4: both sides H5 aligned on A; by the corrected alignment lemma with δ=+, x_{ij}≡+ works if the common 4-bit pattern on A is constant +.
- Constructive ansatz: x_{ij}:=w_i w_j where w_i:=p^B_i p^C_i. For T={i,j,k}, the triple is (w_i w_j, w_i w_k, w_j w_k) with product +1. Test this uniformly across enumerated cases; if it always avoids O5, it suggests a uniform construction for general |A|.

5) Unit tests for IsO5
- p=(+,+,+,+,+) should classify non-O5; p=(+,−,−,−,−) should classify O5; p=(+,−,+,−,+) should classify non-O5 (H5). Also verify that for a transposition τ, ∏_i p′_i flips sign (product identity) and that orbit membership is invariant under the action.

6) Checklist for the next round
- Implement IsO5 with the ε-formula; report the size of the O5 orbit found by enumeration.
- Compute and list F(α,β) for all four cases; confirm |A|=3.
- Run the |A|=4 CSP on P1–P4 first, then extend to representatives modulo S4 on A; archive satisfying/unsatisfying assignments.
- Report whether the ansatz x_{ij}=w_i w_j succeeds in all tested instances.
Additional clarifications, small lemmas, and symmetry for the 5-vector orbit

1) Semantics of the fixed bits p^B_k and p^C_k (|A|=4)
For B on A∪{b} and k∈A, define p^B_k:=f_B({b}∪(A\{k})). On the 5-set A∪{b}, the 5-vector p has entries p_x=f((A∪{b})\{x}). Thus for k∈A, p^B_k coincides with the coordinate “missing k” of p on A∪{b}: it records whether the increasing 4-tuple on {b}∪(A\{k}) is in R_B. Analogously p^C_k is the coordinate “missing k” of the 5-vector on A∪{c}.

2) Necessary local exclusions in the opposite-fixed case (rigorous justification)
- With (α,β,x,y,z)=(+;−;−,−,−) we obtain the canonical O5 representative; hence this triple is forbidden for (α,β)=(+,-).
- By central symmetry of the O5 orbit (see 4) below), (−;+;+,+,+) is also O5; hence forbidden for (α,β)=(−,+).
These give immediate unit tests for any IsO5 implementation and constraints for F(+,-) and F(−,+).

3) Edge/triangle viewpoint and the structured ansatz
- Place the six variables x_{ij} on the edges of K4 on A. The constraint Y_k uses the triangle on T=A\{k}.
- Structured ansatz: pick w_i∈{±1} on the vertices and set x_{ij}:=w_i w_j. For any triangle {i,j,k}, the triple (w_iw_j,w_iw_k,w_jw_k) has product +1, realizing exactly (+++),(+−−),(−+−),(−−+).

4) Central symmetry of the O5 orbit and a consequence for F(α,β)
There exists τ∈S5, e.g. τ=(13), with ε_i(τ)=−1 for all i (check via Lemma 6: c_j(τ) is even for every j and sgn(τ)=−1). Hence for any 5-vector p, p∈O5 iff −p∈O5. As a consequence, for the local tables F(α,β)⊆{±1}^3 (defined by p=(α,β,x,y,z) non-O5), one has
F(−α,−β) = { (−x,−y,−z) : (x,y,z)∈F(α,β) }.
Therefore it suffices to compute F(+,+) and F(+,-); the other two cases follow by triplewise negation. Do not assume any further symmetries (e.g., permutations of x,y,z or F(+,-)=F(−,+)) without verification.

5) On classifying |A|=4 instances
The constraint at each k depends on the ordered pair (p^B_k,p^C_k)∈{++,−−,+−,−+}. Reduction to the pure eq/opp pattern E={k: p^B_k=p^C_k} is insufficient unless one proves F(+,+)=F(−,−) and F(+,-)=F(−,+). Use the full type-vector in {++,−−,+−,−+}^A. By 4), it is enough to compute and store F(+,+), F(+,-), and infer the other two by negation.

6) Implementation checklist (precise conventions)
- Fix, once and for all, an ordering of the five vertices of each Y_k with the first two positions corresponding to the coordinates “missing c” and “missing b”, respectively, and the last three to the vertices of A\{k} in increasing order. Use the same convention for constructing p=(α,β,x,y,z) when populating F(α,β).
- Implement IsO5 via Lemma 6. Unit tests: (+,+,+,+,+) is non-O5; (+,−,−,−,−) is O5; (+,−,+,−,+) is non-O5. Report the orbit size and verify closure under the action.
- Compute F(+,+), F(+,-); obtain F(−,−), F(−,+) by triplewise negation. Conclude |A|=3 by listing one admissible triple for each (α,β).
- For |A|=4, enumerate realizable type-vectors from actual pairs (B,C) (both C5/H5, agreeing on A), and brute-force 2^6 assignments to x_{ij}. Archive SAT witnesses or UNSAT certificates. Test the ansatz x_{ij}=w_i w_j with w_i=p^B_i p^C_i across the same cases.

These additions lock down the symmetry that underlies Claim N1, correct the eq/opp reduction, and make the forthcoming computations unambiguous and reusable.
Uniform 2+2− assignment and a corrected conditional reduction for |A|=4

Ordering convention for local F-tables
- For any 5-set Y_k={b,c}∪(A\{k}) with A={1,2,3,4} and i<j<ℓ the increasing order on A\{k}, we use the coordinate order
  p(Y_k) = (p_{\text{missing }c}, p_{\text{missing }b}, p_{\text{missing }i}, p_{\text{missing }j}, p_{\text{missing }\ell}).
- With this convention, F(α,β)⊆{±1}^3 is the set of ordered triples (x,y,z) such that (α,β,x,y,z) is non-O5.

Lemma A (2+2 vertex-sign ansatz yields (+−−)-type on every triangle).
- Let w_i∈{±1} (i∈A) have exactly two + and two −, and set x_{ij}:=w_i w_j. For each k, the triple (x,y,z) contributed by the three edges inside A\{k} is, up to permutation of its three coordinates, of the form (+,−,−).
- Proof. If k is from the + vertices, then A\{k} contains {+,−,−}; the pairwise products are (−,−,+). If k is from the − vertices, then A\{k} contains {+, +, −}; the pairwise products are (+,−,−). In either case the unordered triple has one + and two −. The order within (x,y,z) depends on the fixed coordinate convention but is a permutation of (+,−,−). ∎

Corrected conditional reduction for |A|=4
- Conditional Proposition (uniform 2+2 ansatz). Fix the above ordering convention. Suppose that for each (α,β)∈{++, +−, −+, −−}, all three permutations of (+,−,−) lie in F(α,β). Then for every one-point instance over |A|=4 there exists an amalgam D in H obtained by the uniform assignment x_{ij}=w_i w_j with some w having exactly two + and two − on A.
  • Proof. By Lemma A, for every k the ordered triple on Y_k is a permutation of (+,−,−). By hypothesis, this ordered triple is in F(p^B_k,p^C_k) for each k, hence none of the four Y_k is O5, and D∈H. ∎
- Unconditional subcase (equal-constant fixed pairs). If (p^B_k,p^C_k)=(δ,δ) for all k (with δ∈{±1}), then the constant assignment x_{ij}≡δ makes every p(Y_k) equal to (δ,δ,δ,δ,δ), which is ±C5 and therefore non-O5. Hence an amalgam exists in this subcase.

Hard local exclusion in the opposite-fixed case
- For (α,β)=(+,-), the triple (−,−,−) is forbidden: p=(+,-,−,−,−) is the canonical O5 representative. By central symmetry of the S5 action, (+++) is forbidden for (α,β)=(−,+) as well. These serve as unit checks for IsO5 and constraints in populating F.

Notes on earlier claims
- The claim “(+++) is forbidden in F(+,-)” has not been proved. The argument via “flipping one coordinate” is not valid under the S5 signed action. Treat this as a computational check when populating F.

Computational checklist (precise and minimal)
1) Implement IsO5 via Lemma 6; unit tests: (+,+,+,+,+) non-O5; (+,−,−,−,−) O5; (+,−,+,−,+) non-O5. Report the size of the O5 orbit and closure under the action.
2) Compute F(+,+) and F(+,-) completely (8 triples each) under the above ordering; use Corollary 9 to derive F(−,−) and F(−,+) by triplewise negation. Do not assume S3-invariance.
3) Test the 12 memberships: for each (α,β)∈{++, +−, −+, −−}, verify that all three permutations of (+,−,−) lie in F(α,β).
4) If step 3 passes, conclude by the conditional proposition that the |A|=4 one-point step is uniformly solvable by a 2+2 ansatz; with Lemma 2 this yields AP.
5) If step 3 fails, run the 2^6 CSP for the offending type-profile to search for a different satisfying assignment or produce an UNSAT certificate (listing, for each assignment, a Y_k showing O5).

Implementation detail retained: the structured ansatz yields triangle triples of product +1, hence it can never realize (−,+,+) or (−,−,−). Keep this in mind when interpreting F-tables and debugging assignments.
Updates: explicit |A|=3 solution, concrete |A|=4 tests, and a solvable subclass

Coordinate convention reminder (used below)
- For Y_k={b,c}∪(A\{k}) with A={1,2,3,4} and i<j<ℓ the increasing order on A\{k}, we encode
  p(Y_k) = (p_{missing c}, p_{missing b}, p_{missing i}, p_{missing j}, p_{missing ℓ}).
- Mapping of the last three coordinates to edge variables on K4[A]:
  • p_{missing i} = x_{jℓ},  p_{missing j} = x_{iℓ},  p_{missing ℓ} = x_{ij}.

|A|=3 one‑point amalgamation solved (constructive)
- Let A have size 3. For Y=A∪{b,c} write p(Y)=(α,β,x,y,z) in the above order, where α is fixed by B (missing c), β by C (missing b), and x,y,z are the cross 4‑sets. The following choices always avoid O5:
  • (α,β)=(+,+): take (x,y,z)=(+,+,+) → p(Y)=(+,+,+,+,+)=C5.
  • (α,β)=(−,−): take (x,y,z)=(−,−,−) → p(Y)=(−,−,−,−,−)=−C5.
  • (α,β)=(+,-): take (x,y,z)=(+,-,+) → p(Y)=(+,-,+,-,+)=H5.
  • (α,β)=(−,+): take (x,y,z)=(−,+,−) → p(Y)=(−,+,−,+,−)=−H5.
  Hence the one‑point extension over |A|=3 always exists in H.

Concrete |A|=4 test profiles for the 2+2 ansatz (w=(+,+,−,−), x_{ij}=w_i w_j)
- Triangles (Y_k):
  • k=1: (x_{23},x_{24},x_{34})=(−,−,+) → p(Y_1)=(p^B_1,p^C_1,−,−,+).
  • k=2: (x_{13},x_{14},x_{34})=(−,−,+) → p(Y_2)=(p^B_2,p^C_2,−,−,+).
  • k=3: (x_{12},x_{14},x_{24})=(+,-,−) → p(Y_3)=(p^B_3,p^C_3,+,−,−).
  • k=4: (x_{12},x_{13},x_{23})=(+,-,−) → p(Y_4)=(p^B_4,p^C_4,+,−,−).
- Profiles to check via IsO5 (the first two coordinates are specialized as follows):
  • P1: p^B≡+, p^C≡+ → test (+,+,−,−,+) and (+,+,+,−,−).
  • P2: p^B≡+, p^C≡− → test (+,−,−,−,+) and (+,−,+,−,−).
  • P3: p^B≡+, p^C=(+,-,+,-) (aligned H5 on A∪{c}) → same two vectors as P2.
A single IsO5 pass on these four vectors settles P1–P3 for the 2+2 ansatz.

A solvable subclass for |A|=4 via a “local H5 witness” pattern
- Prescribe for each k a local triple (x_{jℓ}, x_{iℓ}, x_{ij}) = (α_k, β_k, α_k), where (α_k,β_k)=(p^B_k,p^C_k) and i<j<ℓ enumerate A\{k}.
- Shared‑edge consistency forces:
  • α_1=α_2=α_3=α_4;  β_1=α_3;  β_4=α_2;  β_2=β_3.
- If the given one‑point data (B,C) satisfy these equalities, then for each k we get p(Y_k)=(α_k,β_k,α_k,β_k,α_k), which is ±C5 if α_k=β_k, else ±H5. Hence an amalgam exists for this subclass.

Caveat on the LLL heuristic
- The symmetric LLL condition e·p·(d+1)≤1 with d=3 would require p≤1/(4e)≈0.091. If |{±1}^3\F(α,β)|≤1 then p=1/8≈0.125, which does not meet the symmetric bound. Treat any LLL‑based argument as heuristic unless we deploy a sharper criterion tailored to our dependency graph.

Actionable checklist (minimal computation to unblock |A|=4)
1) Implement IsO5 (Lemma 6), run unit tests, and report the O5 orbit size.
2) Test the four 5‑vectors from P1–P3 above.
3) Compute F(+,+) and F(+,-) fully (8 triples each) under the fixed ordering; obtain the other two by triplewise negation. Archive the tables.
4) If all permutations of (+,−,−) lie in each F(α,β), invoke Proposition 11 (uniform 2+2). Otherwise, brute‑force the 2^6 CSP per realized 4‑type profile and record SAT witnesses or an UNSAT certificate.
New rigorous tools and corrections (to be used going forward)

1) Union‑bound feasibility for the |A|=4 CSP
- Statement. In the |A|=4 CSP with six edge variables x_{ij} and four triangle constraints Y_k, if for each k the local table F(p^B_k,p^C_k) forbids at most one ordered triple (i.e., |{±1}^3\F(p^B_k,p^C_k)| ≤ 1), then there exists a satisfying global assignment.
- Reason. Each forbidden triple for a fixed triangle rules out exactly 2^3 global assignments (the other 3 edges are free). With at most one forbidden triple per triangle, at most 4·2^3=32 of the 64 assignments are excluded. Hence at least 32 assignments remain.
- Consequence. If a small computation confirms |{±1}^3\F(+,+)| ≤ 1 and |{±1}^3\F(+,-)| ≤ 1 (the other two cases follow by triplewise negation; Cor. 9), the |A|=4 step follows immediately without any 6‑variable search.

2) Specialization of the S5 action to the O5 representative (implementation aid)
- For e_O=(+,-,-,-,-) and τ∈S5 with ε(τ)=(ε_1,…,ε_5), let i0:=τ(1). Then the image p′ under the signed action satisfies p′_i = ε_i if i=i0 and p′_i = −ε_i otherwise. Equivalently, p′ is obtained from ε by flipping all coordinates except i0. Thus p∈O5 iff ∃ε∈E:={ε(τ):τ∈S5} and i0 with p_i=−ε_i for i≠i0 and p_{i0}=ε_{i0}.
- Note. This enables a very compact IsO5: precompute E (120 evaluations) and check the 5·|E| candidates.

3) Parity invariant across the four triangles
- For any assignment x_{ij}∈{±1}, the product of the triangle‑products over the four Y_k equals +1. Equivalently, an odd number of triangles cannot have triple product −1. Reason: each x_{ij} appears in exactly two triangle‑products.

4) Distribution of triangle triples under vertex‑sign assignments
- If x_{ij}=w_i w_j with w∈{±1}^A, then on any triangle the triple is either (+++) (when the three w are equal) or a permutation of (+,−,−) (otherwise). In particular: 4+/0− (or 0+/4−) yields four (+++); 3+/1− (or 1+/3−) yields exactly one (+++); 2+/2− yields no (+++) and all four triangles are permutations of (+,−,−).

Corrections to prior claims
- False: “If T_B=C5 then (p^B_k)_{k∈A} is constant; if T_B=H5 then it is 2+2.” Counterexample: for a C5 5‑set, the 5‑vector equals ε(τ) for some τ; e.g., τ=(12) gives ε=(+,+,−,−,−), which is not constant on A. Do not use this classification to prune cases.
- Unproved (and currently unknown): (+++)∉F(+,-). The argument that tried to force this from Lemma 8 incorrectly treats the free index i0. We keep only the rigorously proved exclusion (---)∉F(+,-) (output.md Lemma 13). The status of (+++) in F(+,-) must be decided computationally.

Coordinate convention (reminder)
- For Y_k={b,c}∪(A\{k}) with A={1,2,3,4} and i<j<ℓ the increasing order on A\{k}, we encode p(Y_k)=(p_{missing c}, p_{missing b}, p_{missing i}, p_{missing j}, p_{missing ℓ}), with p_{missing i}=x_{jℓ}, p_{missing j}=x_{iℓ}, p_{missing ℓ}=x_{ij}.

Actionable checklist (minimal computation to unblock |A|=4)
- Implement IsO5 using Lemma 6; validate unit tests: (+,+,+,+,+) ∉O5; (+,−,−,−,−) ∈O5; (+,−,+,−,+) ∉O5. Also verify the sample ε(τ) values listed in prior notes.
- Compute F(+,+) and F(+,-) completely (8 triples each) under the fixed coordinate order; derive F(−,−), F(−,+) by triplewise negation. Report sizes and explicit complements.
- If both complements have size ≤1, conclude |A|=4 by the union‑bound lemma and hence AP via Lemma 2. If, stronger, both F tables are exactly “triple product +1,” record the uniform construction x_{ij}=w_i w_j and close.
- If not, test whether all permutations of (+,−,−) lie in F(+,+) and F(+,-); if yes, apply Proposition 11 (uniform 2+2). Otherwise brute‑force the 2^6 CSP on the realized profiles, using the parity invariant to prune, and archive SAT/UNSAT witnesses.
O5 membership: exact S‑criterion vs. ε‑only heuristics
- Exact criterion (to be used for IsO5). Let e_O=(+,-,-,-,-), and define the pair‑set
  S := { (ε(τ), i0=τ(1)) : τ ∈ S_5 },
  where ε(τ) is as in Lemma 6. Then for p∈{±1}^5,
  p ∈ O5 ⇔ ∃(ε,i0)∈S such that p_i = ε_i for i=i0 and p_i = −ε_i for i≠i0.
  Equivalently, p is obtained from ε by “flipping all coordinates except i0,” with (ε,i0) realized by the same τ. This is the specialization of the action to e_O and is both necessary and sufficient.

- ε‑only heuristics (use with caution). Two convenient tests are often useful but are not sufficient on their own:
  • Hamming‑1: Hamming(−p, ε) = 1 for some ε ∈ E := {ε(τ) : τ∈S_5}.
  • Inner‑product −3: Σ_i p_i ε_i = −3 for some ε∈E (equivalently to Hamming‑1).
  These conditions are necessary for O5 membership but not sufficient unless the unique discrepancy index i0 is consistent with i0=τ(1) for the same τ realizing ε. Hence, they can give false positives. Always validate by checking the pair (ε,i0)∈S.

ε‑cocycle and generators (implementation aids)
- Cocycle identity. For σ,τ∈S_5 and i∈[5]:
  ε_i(σ∘τ) = ε_i(σ) · ε_{σ^{-1}(i)}(τ).
  This follows by composing the signed actions (Lemma 6) and comparing with the action of σ∘τ.

- Adjacent transpositions. For s_k=(k k+1) (k=1,2,3,4),
  ε(s_k) has + at positions k and k+1 and − elsewhere.
  This is a direct computation from Lemma 6 via the c_j counts and is a robust generator datum for building E and S by BFS on the Cayley graph of S_5.

Practical S‑oracle blueprint
- Build S by BFS over right‑multiplication by s_k, storing for each state (τ) the pair (ε(τ), i0=τ(1)). Update via the cocycle and track i0′=τ(s_k(1)). Verify: |S|=120; sample ε values on generators; product identity ∏_i ε_i(τ)=sgn(τ) (Cor. 7).
- IsO5(p): return true iff ∃(ε,i0)∈S with p_i=ε_i for i=i0 and p_i=−ε_i otherwise.

Local F‑tables and the |A|=4 plan
- Compute F(+,+) and F(+,-) by 8 exact IsO5 calls each on p=(α,β,x,y,z) under the fixed coordinate order (reminder in output.md). Derive F(−,−) and F(−,+) by triplewise negation (Cor. 9). Confirm the |A|=3 witnesses (Proposition 14) show up as allowed entries in the appropriate tables.
- Decision routes:
  • If |{±1}^3\F(+,+)| ≤ 1 and |{±1}^3\F(+,-)| ≤ 1, conclude |A|=4 by Cor. 16.1.
  • If, stronger, all three permutations of (+,−,−) lie in F(+,+) and F(+,-), conclude by Proposition 11 (uniform 2+2).
  • Otherwise, run the 2^6 CSP per realized profile, pruning by the parity invariant (Lemma 17).

Unit checks for the oracle
- Mandatory: (+,−,−,−,−) ∈ O5; (+,+,+,+,+) ∉ O5; (+,−,+,−,+) ∉ O5. Also verify ε(s_k) as above and closure properties from Lemma 6/Cor. 7.

Caveat
- Do not treat “ε only” rules (Hamming‑1 or inner‑product −3) as definitive. They are helpful filters but must be validated against the S‑pair constraint to avoid false positives.
New internal symmetries for F(α,β), concrete exclusions, and a correction about 2+2 shapes

Internal S5-induced symmetries of the local tables
- Let F(α,β)⊆{±1}^3 be defined under the fixed coordinate convention: (x,y,z)∈F(α,β) iff (α,β,x,y,z) is non‑O5.
- Lemma 21 (swap of the fixed coordinates; central symmetry when α=β). For all α,β and all (x,y,z),
  (x,y,z)∈F(α,β) ⇔ (−x,−y,−z)∈F(β,α).
  In particular, F(α,α) is centrally symmetric: t∈F(α,α) ⇔ −t∈F(α,α).
  Sketch: Apply τ=(12) (ε=(+,+,−,−,−) by Lemma 19) and use O5‑invariance under A_τ.
- Lemma 22 (internal generators preserving (α,β)). Within a fixed table F(α,β), membership is preserved by the transformations
  • S3: (x,y,z)↦(−y,−x,z) (from τ=(34) + global sign symmetry),
  • S4: (x,y,z)↦(x,−z,−y) (from τ=(45) + global sign symmetry).
- Lemma 23 (swap of first and third triple coordinates). Within F(α,β), (x,y,z)∈F(α,β) ⇔ (z,y,x)∈F(α,β). Proof: compose S4, then S3, then S4.
- Consequence: The action generated by S3, S4, and (x,y,z)↦(z,y,x) preserves the triple‑product and partitions {±1}^3 into four orbits: for product +1, an orbit of size 3 {+++, +−−, −−+} and a fixed singleton {−+−}; for product −1, an orbit of size 3 {−−−, ++−, −++} and a fixed singleton {+−+}. Thus, per table, it suffices to test at most four representatives, e.g. (+++), (+−−), (−−−), (+−+). When α=β, the central symmetry of Lemma 21 reduces the representatives further.

Concrete forbidden triples (with explicit τ‑witnesses)
- In F(+,-): (++−) is forbidden. Witness: τ=(12)(34) has ε=(−,−,−,−,+) and i0=τ(1)=2. Then A_τ(e_O)=(+,−,+,+,−), i.e. (α,β,x,y,z)=(+,-,+,+,−) is O5, so (++−)∉F(+,-).
- In F(+,+): (−,+,+) is forbidden. Witness: τ=(13) has ε=(−,−,−,−,−) (cf. Lemma 8) and i0=3. Then A_τ(e_O)=(+,+,−,+,+), so (−,+,+)∉F(+,+). By Lemma 21 (α=β), (+,−,−) is also forbidden in F(+,+).

Correction about realized permutations under the 2+2 ansatz
- The 2+2 vertex‑sign ansatz (x_{ij}=w_i w_j with w having two + and two −) produces on each triangle a permutation of (+,−,−) (Lemma 10). However, contrary to an earlier claim, the specific permutation (−,+,−) can occur for some choices of w under our fixed coordinate order. Example: w=(+,-,+,-) and k=4 yield (x_{23},x_{13},x_{12})=(−,+,−).
- A safe specialization: if we commit to the fixed choice w=(+,+,−,−) (or symmetrically w=(−,−,+,+)), then one checks explicitly that Y_1,Y_2 realize (−,−,+) while Y_3,Y_4 realize (+,−,−). Under this restriction, Lemma 23 guarantees that the two realized shapes are equivalent within each F(α,β), reducing checks to a single representative per base table.

Minimal computation plan (refined by symmetries)
- Implement IsO5 via Lemma 20 and validate using the sample (ε,i0) pairs and the product invariant ∏ p_i = sgn(τ).
- Populate F(+,+), F(+,-) by testing only the four representatives (+++), (+−−), (−−−), (+−+) per table; recover the rest by Lemmas 21–23 and Cor. 9. Derive F(−,−), F(−,+) by Cor. 9.
- If |{±1}^3\F(+,+)|≤1 and |{±1}^3\F(+,-)|≤1, conclude by Cor. 16.1. Otherwise, try the fixed 2+2 choice w=(+,+,−,−) and check (+,−,−)∈F(+,+) and (+,−,−)∈F(+,-); if both hold, all four Y_k are allowed by Lemma 23. Failing that, run the tiny backtracking solver with parity pruning (Lemma 17).


Current output.md (if any):
Proposition 1 (Orientation function model).
For a finite set V, giving a 4‑hypertournament structure (V,R) satisfying: (i) all tuples in R have distinct entries; (ii) R is closed under even permutations of coordinates; (iii) for every 4‑tuple of distinct vertices (x1,x2,x3,x4), exactly one of (x1,x2,x3,x4) and (x2,x1,x3,x4) lies in R; is equivalent to giving an arbitrary function f:[V]^4→{±1}.
Proof. Given f, declare (x1,x2,x3,x4)∈R iff the permutation from the increasing ordering of S={x1,x2,x3,x4} to (x1,…,x4) has sign equal to f(S). This satisfies (i)–(iii) by construction. Conversely, given R with (i)–(iii), fix any 4‑set S and any increasing ordering s of S. By (iii), exactly one of s and its swap lies in R; define f(S)=+1 if s∈R and f(S)=−1 otherwise. By (ii) and (iii), membership of any ordered tuple from S depends only on the parity relative to s, so f is well defined and recovers R. ∎

Lemma 2 (One‑point amalgamation suffices for AP in H).
Let H be the class of finite 4‑hypertournaments omitting O5. Suppose that whenever A∈H and B=A∪{b}∈H and C=A∪{c}∈H with B∩C=A, there exists D∈H on A∪{b,c} extending both B and C. Then H has the amalgamation property.
Proof. Given B0,B1∈H over A, enumerate C\A as c1,…,ck and set A0:=A. Inductively, amalgamate Bi with Ai∪{ci} over Ai to obtain Bi+1 on Ai+1:=Ai∪{ci}. At each step, by hypothesis, all 5‑sets involving the new vertex ci avoid O5, and previously constructed parts are unchanged. After k steps we obtain an amalgam D∈H of B0 and C over A. ∎

Proposition 3 (CSP formulation of the |A|=4 one‑point step).
Let A={1,2,3,4}, b, c new. Given B on A∪{b} and C on A∪{c} in H that agree on A, any amalgam D on A∪{b,c} is determined on new 4‑sets by the six values x_{ij}:=f({i,j,b,c}) (1≤i<j≤4). The only new 5‑sets are Y_k:={b,c}∪(A\{k}) for k=1,2,3,4. Writing p^B_k:=f_B({b}∪(A\{k})) and p^C_k:=f_C({c}∪(A\{k})), the 5‑vector p(Y_k) has two fixed coordinates (missing c gives p^B_k; missing b gives p^C_k) and three coordinates equal to the x_{ij} for {i,j}⊂A\{k}. D∈H iff for each k, p(Y_k) is not in the O5 orbit.
Proof. All 4‑sets contained in B or C are already fixed. The only 4‑sets not contained in B or C are precisely the six X_{ij}={i,j,b,c}. The only new 5‑subsets of A∪{b,c} (relative to B and C) are those that contain both b and c; there are exactly four, the Y_k. Their p‑vectors depend on the listed values. Avoidance of O5 on all 5‑sets is thus equivalent to the stated four constraints. ∎

Corollary 4 (Trivial one‑point cases |A|≤2).
If |A|≤2, then one‑point amalgamation always succeeds in H.
Proof. When |A|≤2 there are no 3‑subsets of A, hence no 5‑sets of the form {b,c}∪T with T⊂A of size 3. Thus there are no new 5‑set constraints; any assignment to cross 4‑sets yields an amalgam in H. ∎

Fact 5 (Switching yields a 4‑hypertournament but may change 5‑types).
For ε:V→{±1}, define f^ε(S):=(∏_{v∈S}ε(v))·f(S). Then f^ε encodes a 4‑hypertournament. However, for a fixed 5‑set X, switching at v∈X flips the four coordinates of p(X) corresponding to 4‑sets containing v and leaves the coordinate “missing v” unchanged; this can change the isomorphism type on X (e.g., an O5 representative (+,-,-,-,-) switches at its ‘+’ vertex to (+,+,+,+,+), a C5 representative). ∎
Lemma 6 (Explicit formula for the S5 action on 5-vectors).
Let X be a 5-set equipped with an increasing labeling {1,2,3,4,5}. For τ∈S5 and i∈{1,…,5}, write j:=τ^{-1}(i) and define
c_j(τ) := |{k<j : τ(k) > τ(j)}| + |{k>j : τ(k) < τ(j)}|.
In the isomorphism action on p∈{±1}^X given by p′_i = ε_i(τ)·p_{τ^{-1}(i)}, the sign factor is
ε_i(τ) = sgn(τ)·(−1)^{c_j(τ)}.

Proof. Let τ′ be the induced bijection from [5]\{j} to [5]\{i}, obtained by deleting position j in the domain and value i in the codomain. By definition, ε_i(τ)=sgn(τ′). The inversions of τ split into two disjoint families: those not involving j (which correspond bijectively to inversions of τ′) and those involving j, whose number is c_j(τ) by definition. Hence inv(τ)=inv(τ′)+c_j(τ), so sgn(τ)= (−1)^{inv(τ)} = (−1)^{inv(τ′)+c_j(τ)} = sgn(τ′)·(−1)^{c_j(τ)} = ε_i(τ)·(−1)^{c_j(τ)}. Rearranging gives the claimed formula. ∎

Corollary 7 (Product identity for ε-factors).
For τ∈S5, one has ∏_{i=1}^5 ε_i(τ) = sgn(τ).

Proof. Using ε_i(τ) = sgn(τ)·(−1)^{c_{τ^{-1}(i)}(τ)} and the fact that each inversion contributes 1 to c_a and 1 to c_b, we have Σ_{j=1}^5 c_j(τ) = 2·inv(τ). Therefore ∏_{i=1}^5 ε_i(τ) = sgn(τ)^5 · (−1)^{Σ_j c_j(τ)} = sgn(τ)·(−1)^{2·inv(τ)} = sgn(τ). ∎
Lemma 8 (Central symmetry of the O5 orbit).
There exists τ∈S5 with ε_i(τ)=−1 for all i. In particular, for any 5-vector p one has p∈O5 if and only if −p∈O5. Thus the O5 orbit is closed under global sign reversal.

Proof. Take τ=(13) in one-line notation [3,2,1,4,5]. By Lemma 6, for j:=τ^{-1}(i), ε_i(τ)=sgn(τ)·(−1)^{c_j(τ)}. A direct count gives c_1(τ)=c_2(τ)=c_3(τ)=2 and c_4(τ)=c_5(τ)=0, so c_j(τ) is even for all j. Since sgn(τ)=−1, we get ε_i(τ)=−1 for every i. If q is in the O5 orbit, then so is R_τ(q)=−q∘τ^{−1}. As σ ranges over S5, the set {−R_σ(e1)} equals {R_{τσ}(e1):σ∈S5}, hence −O5=O5. ∎

Corollary 9 (Sign-flip symmetry for local tables F).
For F(α,β)⊆{±1}^3 defined by: (x,y,z)∈F(α,β) iff (α,β,x,y,z) is non-O5, one has
F(−α,−β) = { (−x,−y,−z) : (x,y,z)∈F(α,β) }.

Proof. (α,β,x,y,z) is non-O5 iff its global negation (−α,−β,−x,−y,−z) is non-O5 by Lemma 8. This is exactly the stated correspondence. ∎
Lemma 10 (2+2 vertex signs induce (+−−)-type on every triangle).
Let A={1,2,3,4} and choose w_i∈{±1} with exactly two plus and two minus. Define x_{ij}:=w_i w_j for 1≤i<j≤4. For each k∈A, on the triangle induced by A\{k} the ordered triple of edge-variables (x,y,z) (in any fixed coordinate convention) is a permutation of (+,−,−).

Proof. If k is one of the + vertices, then A\{k} contains one + and two −; the three pairwise products are (−,−,+). If k is one of the − vertices, then A\{k} contains two + and one −; the three pairwise products are (+,−,−). Thus in either case the unordered triple has signs {+ , − , −}. The ordering of (x,y,z) depends on the fixed convention but is a permutation of (+,−,−). ∎

Proposition 11 (Conditional |A|=4 amalgamation via a uniform 2+2 ansatz).
Fix a consistent ordering convention for the last three coordinates in the definition of F(α,β) (e.g., by increasing order of the three vertices in A\{k}). Suppose that for each (α,β)∈{++, +−, −+, −−}, all three permutations of (+,−,−) belong to F(α,β). Then for every one-point diagram over |A|=4 there exists an amalgam D∈H obtained by setting x_{ij}=w_i w_j for some choice of w with exactly two + and two − on A.

Proof. Choose any w with exactly two + and two − on A and set x_{ij}=w_i w_j. By Lemma 10, for each k the ordered triple contributed by the three edges in A\{k} is a permutation of (+,−,−). By hypothesis, this ordered triple lies in F(p^B_k,p^C_k) for every k, so no Y_k is of type O5. Therefore the resulting structure on A∪{b,c} is in H and extends both B and C. ∎

Proposition 12 (Equal-constant fixed pairs are solvable by a constant assignment).
In the |A|=4 one-point amalgamation problem, if (p^B_k,p^C_k)=(δ,δ) for all k∈A with a fixed δ∈{±1}, then there exists an amalgam D∈H obtained by setting x_{ij}≡δ.

Proof. With this assignment, for each k the 5-vector p(Y_k) equals (δ,δ,δ,δ,δ), which is ±C5. Since ±C5 is not in the O5 orbit, each Y_k is non-O5 and the amalgam lies in H. ∎

Lemma 13 (A hard local exclusion in the opposite-fixed case).
For (α,β)=(+,-), the triple (−,−,−) is forbidden: (x,y,z)=(−,−,−)∉F(+,-). Symmetrically, for (α,β)=(−,+), (+++)∉F(−,+).

Proof. For (α,β)=(+,-) and (x,y,z)=(−,−,−) one has p=(+,-,−,−,−), which is the canonical O5 representative; hence it is in the O5 orbit. By Lemma 8 (global sign-reversal is in the orbit), (−,+,+,+,+) is also in O5, yielding the symmetric statement. ∎
Proposition 14 (The one-point amalgamation over |A|=3 always succeeds, constructively).
Let A have size 3 and let B=A∪{b} and C=A∪{c} lie in H and agree on A. On Y:=A∪{b,c}, write p(Y)=(α,β,x,y,z) in the coordinate order (missing c, missing b, then missing the elements of A in increasing order). Then for each (α,β)∈{±1}^2 there is a choice of (x,y,z)∈{±1}^3 such that p(Y) is not in the O5 orbit, namely:
- If (α,β)=(+,+), take (x,y,z)=(+,+,+), so p(Y)=(+,+,+,+,+)=C5.
- If (α,β)=(−,−), take (x,y,z)=(−,−,−), so p(Y)=(−,−,−,−,−)=−C5.
- If (α,β)=(+,-), take (x,y,z)=(+,-,+), so p(Y)=(+,-,+,-,+)=H5.
- If (α,β)=(−,+), take (x,y,z)=(−,+,−), so p(Y)=(−,+,−,+,−)=−H5.
In all cases Y is non‑O5, hence there exists an amalgam D∈H on A∪{b,c} extending B and C.

Proof. The only new 5‑set is Y=A∪{b,c}. The displayed assignments set its 5‑vector equal to one of ±C5 or ±H5 in the fixed coordinate order, and these are not in the O5 orbit. There are no other new 5‑sets to check. Hence the extension lies in H. ∎

Proposition 15 (A solvable subclass for |A|=4 via a local H5 pattern with consistency).
Let A={1,2,3,4}, and let B=A∪{b} and C=A∪{c} lie in H and agree on A. For k∈A, write (α_k,β_k):=(p^B_k,p^C_k). Adopt the coordinate order
p(Y_k)=(p_{missing c},p_{missing b},p_{missing i},p_{missing j},p_{missing ℓ}) for Y_k={b,c}∪(A\{k}) with i<j<ℓ the increasing order on A\{k}. Suppose the type‑data satisfy the equalities
α_1=α_2=α_3=α_4,
β_1=α_3,
β_4=α_2,
β_2=β_3.
Then there exists an assignment to the six cross 4‑sets x_{ij}=f({i,j,b,c}) such that, for each k, p(Y_k) is ±C5 if α_k=β_k and ±H5 otherwise. In particular, an amalgam D∈H exists.

Proof. Define the triple of edge variables on Y_k by (x_{jℓ},x_{iℓ},x_{ij})=(α_k,β_k,α_k), where {i,j,ℓ}=A\{k} with i<j<ℓ. Each edge variable x_{ij} appears in exactly two such triples, corresponding to the two values of k∈A\{i,j}. The displayed equalities on the α_k and β_k are exactly those required to make these two prescriptions agree for every edge (a direct check using the mapping p_{missing i}=x_{jℓ}, p_{missing j}=x_{iℓ}, p_{missing ℓ}=x_{ij}). With this consistent assignment, p(Y_k)=(α_k,β_k,α_k,β_k,α_k), which is ±C5 if α_k=β_k and ±H5 otherwise. None of these are in the O5 orbit, so all four Y_k are non‑O5 and the resulting structure is an amalgam in H. ∎
Lemma 16 (Union‑bound feasibility for the |A|=4 CSP).
In the |A|=4 one‑point CSP (Proposition 3), suppose that for each k∈{1,2,3,4} the local table forbids at most one ordered triple, i.e., |{±1}^3\F(p^B_k,p^C_k)| ≤ 1. Then there exists an assignment to the six variables x_{ij} that satisfies all four constraints (so an amalgam in H exists).

Proof. There are 2^6=64 global assignments to the six variables. Fix k and a forbidden ordered triple t on its three local variables; the set of global assignments inducing t on that triangle has size 2^3 (the other three edge‑variables are free). Thus forbidding at most one triple per triangle eliminates at most 4·2^3=32 global assignments in total. Therefore at least 64−32=32 assignments remain that satisfy all four local constraints. ∎

Corollary 16.1 (A small‑table criterion for the |A|=4 step).
If the two base tables satisfy |{±1}^3\F(+,+)| ≤ 1 and |{±1}^3\F(+,-)| ≤ 1 (so, by Corollary 9, the same holds for F(−,−) and F(−,+) by triplewise negation), then for every one‑point diagram over |A|=4 there exists an amalgam D∈H.

Proof. For any instance, each Y_k uses one of the four pairs (p^B_k,p^C_k)∈{++,−−,+−,−+}; by the stated hypothesis and Corollary 9, each corresponding table forbids at most one triple. Apply Lemma 16. ∎

Lemma 17 (Global parity constraint across the four triangles).
In the |A|=4 CSP, for any assignment x_{ij}∈{±1}, the product of the triangle‑products over the four Y_k equals +1. Equivalently, an odd number of triangles cannot have triple‑product −1.

Proof. Each triangle‑product equals the product of its three edge‑variables. Multiplying the four triangle‑products together, each edge‑variable x_{ij} appears exactly twice (in the two triangles omitting i and j), hence contributes x_{ij}^2=1 to the total product. Therefore the total product is +1. ∎
Lemma 18 (ε‑cocycle for composition).
For σ,τ∈S_5 and i∈{1,2,3,4,5}, one has
ε_i(σ∘τ) = ε_i(σ) · ε_{σ^{-1}(i)}(τ).

Proof. Let A_ρ denote the signed action from Lemma 6: (A_ρ p)_i = ε_i(ρ) · p_{ρ^{-1}(i)}. Then (A_σ A_τ p)_i = ε_i(σ) · (A_τ p)_{σ^{-1}(i)} = ε_i(σ) · ε_{σ^{-1}(i)}(τ) · p_{τ^{-1}(σ^{-1}(i))}. On the other hand, A_{σ∘τ} p has i‑th coordinate ε_i(σ∘τ) · p_{(σ∘τ)^{-1}(i)}. Uniqueness of the action implies ε_i(σ∘τ) = ε_i(σ) · ε_{σ^{-1}(i)}(τ). ∎

Lemma 19 (ε for adjacent transpositions).
For s_k=(k k+1) with k∈{1,2,3,4}, the vector ε(s_k) has entries + at positions k and k+1 and − at the other three positions.

Proof. Write τ:=s_k. Using Lemma 6, ε_i(τ)=sgn(τ)·(−1)^{c_j(τ)} for j=τ^{-1}(i). A direct count shows that c_j(τ) is odd for j∉{k,k+1} and even for j∈{k,k+1}. Since sgn(τ)=−1, this yields ε_i(τ)=−1 at i∉{k,k+1} and ε_i(τ)=+1 at i∈{k,k+1}. ∎

Lemma 20 (O5‑image formula and exact pair‑set membership test).
Let e_O=(+,-,-,-,-). Define the pair‑set S:={ (ε(τ), i0=τ(1)) : τ∈S_5 }. For p∈{±1}^5, the following are equivalent:
(a) p lies in the O5 orbit (i.e., p = A_τ(e_O) for some τ∈S_5).
(b) There exists (ε,i0)∈S such that p_i=ε_i for i=i0 and p_i=−ε_i for i≠i0.
Equivalently, p is obtained from ε by flipping all coordinates except i0, with (ε,i0) realized by the same τ.

Proof. For (a)⇒(b): If p=A_τ(e_O), then for i with τ^{-1}(i)=1 one has p_i=ε_i(τ)·(+)=ε_i(τ), and for i with τ^{-1}(i)≠1 one has p_i=ε_i(τ)·(−)=−ε_i(τ). Writing i0:=τ(1) gives (b). For (b)⇒(a): Given (ε,i0)∈S, pick τ with ε(τ)=ε and τ(1)=i0. The same computation shows A_τ(e_O)=p. ∎
Corollary 20.1 (Product-of-entries identity for O5).
If p∈O5 with witness τ∈S_5 (i.e., p=A_τ(e_O)), then ∏_{i=1}^5 p_i = sgn(τ).

Proof. By Lemma 20, p is obtained from ε(τ) by flipping all coordinates except i0=τ(1). Thus ∏_i p_i = ε_{i0} · ∏_{i≠i0}(−ε_i) = (−1)^4 · ∏_i ε_i = ∏_i ε_i. By Corollary 7, ∏_i ε_i = sgn(τ). ∎

Lemma 21 (Swap of fixed coordinates; central symmetry when α=β).
For all α,β∈{±1} and all (x,y,z)∈{±1}^3,
(x,y,z) ∈ F(α,β) if and only if (−x,−y,−z) ∈ F(β,α).
In particular, F(α,α) is centrally symmetric: t∈F(α,α) ⇔ −t∈F(α,α).

Proof. Let τ=(12). By Lemma 19, ε(τ)=(+,+,−,−,−). For any p=(α,β,x,y,z), the signed action gives A_τ(p)=(β,α,−x,−y,−z). Since O5-orbit membership is invariant under A_τ, p is non‑O5 iff A_τ(p) is non‑O5. This yields the stated equivalence and the corollary for α=β. ∎

Lemma 22 (Internal generators preserving F(α,β)).
For all α,β and all (x,y,z), the following equivalences hold within the same table F(α,β):
- S3: (x,y,z)∈F(α,β) ⇔ (−y,−x,z)∈F(α,β).
- S4: (x,y,z)∈F(α,β) ⇔ (x,−z,−y)∈F(α,β).

Proof. For τ=(34), Lemma 19 gives ε(τ)=(−,−,+,+,−). Hence A_τ(α,β,x,y,z)=(−α,−β,y,x,−z). Applying Lemma 8 (global sign) yields (α,β,−y,−x,z), proving S3. For τ=(45), ε(τ)=(−,−,−,+,+) and A_τ(α,β,x,y,z)=(−α,−β,−x,z,y). Applying Lemma 8 gives (α,β,x,−z,−y), proving S4. ∎

Lemma 23 (Swap of first and third triple coordinates within F(α,β)).
For all α,β and all (x,y,z), (x,y,z)∈F(α,β) if and only if (z,y,x)∈F(α,β).

Proof. Start from (x,y,z), apply S4 to get (x,−z,−y); then apply S3 to get (z,−x,−y); then apply S4 again to get (z,y,x). Each step preserves membership in F(α,β) by Lemma 22. ∎

Lemma 24 (Two explicit forbidden ordered triples in the base tables).
(a) In F(+,-), the ordered triple (++−) is forbidden.
(b) In F(+,+), the ordered triple (−, +, +) is forbidden.

Proof. (a) Take τ=(12)(34), which is even. A direct computation gives ε(τ)=(−,−,−,−,+) and i0=τ(1)=2. By Lemma 20, A_τ(e_O)=flip_all_but_one(ε,2)=(+,−,+,+,−). Hence (α,β,x,y,z)=(+,-,+,+,−) is in O5, so (++−)∉F(+,-).
(b) Take τ=(13), for which Lemma 8 shows ε(τ)=(−,−,−,−,−). With i0=τ(1)=3, Lemma 20 yields A_τ(e_O)=(+,+,−,+,+). Thus (−,+,+)∉F(+,+). ∎
