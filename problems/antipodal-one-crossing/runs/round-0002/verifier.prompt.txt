--- SYSTEM ---
You are a strict mathematical verifier & research manager.

You are being run in a loop with provers. Your tasks:
- Audit their ideas for correctness and rigor.
- Curate files (notes.md and output.md).
- Suggest the next steps.

Inputs: 
- task statement
- outputs of provers
- notes.md (summary so far)
- output.md (rigorously proven results so far)

Guidelines:
- notes.md: should be a readable running log of interesting work. Prefer appending. Replace only if old notes are clearly misleading. Remember -- notes should be self-contained and should make sense even without seeing outputs of past provers. 
- output.md:  Think twice before you add something to this file. Everything here should be rigorous, almost publication-ready. It should contain only fully proven theorems that are clearly an interesting step towards the solution (or the solution itself). The beginning of the file is a clear list of interesting theorems you can prove, together with a discussion about why it is relevant. From the statement of the theorem it has to be clear that this constitutes nontrivial progress towards solution. The rest of the file contains a fully rigorous list of the proofs of the theorems. Keep only proven theorems with clear proofs. If a statement in that file is flawed / unprecise and you cannot fix it on the spot, remove it from output.md and instead add it to notes.md with explanation.
- Be careful with the booleans `new_notes_append` and `new_outputs_append`: default is True (append). Use False only when deliberately rewriting everything.

Tasks:
1) Audit rigor: identify unjustified steps, false statements, missing lemmas; produce minimal counterexamples.
2) Triage value: separate genuine progress from noise.
3) Guide next steps: propose what provers should try next.

**Return strictly JSON**:
{
  "feedback_md": "Detailed critique of prover outputs (≥200 words). Include concrete next-step suggestions. The next round of provers may not see last round outputs; ensure all valuable info is stored in notes.",
  "new_notes_md": "Markdown (KaTeX allowed). Usually appended to notes.",
  "new_notes_append": "True|False",
  "new_outputs_md": "Markdown (KaTeX allowed). Usually appended to output.md.",
  "new_outputs_append": "True|False",
  "verdict": "success|partial success|nothing so far"
}

**Verdict definitions**:
- **success**: Something that one could publish, even if it is not the full solution (e.g., significant theorem, key lemma, novel technique, partial solution with clear path forward)
- **partial success**: Something worthy enough to write into output.md (e.g., correct but preliminary results, useful technical lemmas, validated approaches that advance understanding)
- **nothing so far**: No meaningful mathematical progress or only exploratory work


--- USER ---
You receive multiple prover reports. Evaluate correctness, value, and pick promising directions. Update notes.md (append/replace) with useful ideas and update output.md (append/replace) ONLY with rigorously verified results.

Prover reports (JSON):
[{"prover_id": "01", "progress_md": "## Audit of output.md and context\n- Theorem A (KG(n,3) spectral bound) is correct and useful to certify that vertex-wise constraints alone cannot push b below 1/2: for n\u22656, b \u2264 1/2 + 3/(2(n\u22123)). A small bookkeeping remark: the identity \u201cglobal b is the average of b_v over v\u201d uses that the number of v-neighbor pairs is \u00bd\u00b7C(n,3)\u00b7C(n\u22123,3), independent of v.\n- Note that substituting this bound into Dvo\u0159\u00e1k\u2019s formula yields E[switches] \u2264 (3/8 + 1/(8(n\u22123)) + o(1))\u00b7n, which is a slightly weaker upper bound than 3/8 + o(1) (the +1/(8(n\u22123)) is positive). This is not an improvement, but it cleanly quantifies the o(1) term achievable from per-vertex information alone.\n- Lemma B (monochromatic-star count) is correct. It will be a useful input to quantify biases at vertices.\n\n## New idea: quantify both-good boundary savings via a per-vertex bias parameter\nWe isolate the exact contribution of \u201cboth-good\u201d v-neighbor pairs, improving Dvo\u0159\u00e1k\u2019s generic 1/2 bound by a vertex-level bias term that can later be lower-bounded in structural cases.\n\nDefinition (preferred color distribution at v among good Q3). For a vertex v, for each good Q3(v,K) and the map f1 used inside that Q3, define c_v(K) \u2208 {R,B} as the color of the first edge at v along (v, f1(v,w)). Let t_v be the number of good Q3 containing v and let\n\\[ p_v := \\mathbb{P}_{K\\mid v,\\,\\text{good}}\\big[c_v(K)=\\R\\big] = r_v^{(g)}/t_v,\\quad u_v := |2p_v\u22121|. \\]\nHere r_v^{(g)} counts K with c_v(K)=R. By Lemma 8 and the definition of f1, c_v(K) is well defined (ties are broken deterministically within f1).\n\nLemma (both-good boundary disagreement at v). Among pairs of good v-neighbor Q3\u2019s (disjoint triples) chosen uniformly, the probability that their f1-preferred colors at v differ is\n\\[ \\le \\frac{1}{2} - \\frac{u_v^2}{2} + O\\!\\left(\\frac{1}{n}\\right). \\]\nSketch. If we sampled two good triples uniformly without replacement from the t_v good triples, the exact fraction of disagreeing unordered pairs would be r_v^{(g)}(t_v\u2212r_v^{(g)})/\\binom{t_v}{2} = \\frac{t_v}{t_v\u22121}\\cdot 2p_v(1\u2212p_v) = \\frac{t_v}{t_v\u22121}\\cdot\\left(\\frac{1}{2} \u2212 \\frac{u_v^2}{2}\\right). Restricting to v-neighbors excludes pairs that share a direction; for each fixed good Q3 there are at most O(n^2) \u201cforbidden\u201d partners (share \u22651 extra direction), so among \\Theta(n^3) good triples this exclusion perturbs the pair distribution by O(1/n). Hence the bound follows.\n\nCorollary (refined a-term). Writing a for the probability that two random neighboring Q3\u2019s (sharing one vertex) are both good, the boundary-change probability in the both-good case satisfies\n\\[ \\mathbb{P}[\\text{boundary switch}\\mid \\text{both good}] \\le \\frac{1}{2} - \\frac{1}{2}\\,\\mathbb{E}_v[u_v^2] + O\\!\\left(\\frac{1}{n}\\right). \\]\nConsequently, Dvo\u0159\u00e1k\u2019s expected-switch bound improves to\n\\[ \\mathbb{E}[\\text{switches}] \\le \\Big( \\tfrac{1}{3} + \\tfrac{b}{12} + \\tfrac{a}{3}\\big( \\tfrac{1}{2} - \\tfrac{1}{2}\\,\\mathbb{E}_v[u_v^2] + O(\\tfrac{1}{n})\\big) + o(1) \\Big) n \n= \\Big( \\tfrac{1}{3} + \\tfrac{b}{12} + \\tfrac{a}{6} - \\tfrac{a}{6}\\,\\mathbb{E}_v[u_v^2] + o(1) \\Big) n. \\]\nThis cleanly isolates a quantitative source of savings: any universal lower bound on \\(\\mathbb{E}_v[u_v^2]\\) yields a constant improvement over 3/8.\n\nWhy useful here. This replaces the crude 1/2 in the a-term by 1/2 \u2212 (1/2)\u00b7E_v[u_v^2] + o(1). It is fully compatible with Dvo\u0159\u00e1k\u2019s framework and reduces the problem to exhibiting a nontrivial global bias among preferred colors at vertices, or to a dichotomy: either E_v[u_v^2] is bounded away from zero (immediate gain) or a \u201cnear-balanced\u201d structure holds that we can try to exploit to force b \u2264 1/2 \u2212 \u03b3.\n\n## A conditional special case: degree-biased colorings force savings\nLink u_v to the edge-color degree imbalance at v using star-good triples.\n- Let x_v := r_v/n be the red-degree fraction at v. Among good triples, at least the monochromatic-star triples contribute, and for those c_v(K) equals the star color at v. Thus\n  \\[ p_v \\ge \\frac{\\binom{r_v}{3}}{t_v},\\quad 1-p_v \\ge \\frac{\\binom{n-r_v}{3}}{t_v},\\quad t_v \\ge \\binom{r_v}{3}+\\binom{n-r_v}{3}. \\]\n- Hence \\(u_v \\ge \\dfrac{\\big|\\binom{r_v}{3} - \\binom{n-r_v}{3}\\big|}{\\binom{r_v}{3}+\\binom{n-r_v}{3}}\\). For x_v = 1/2 + \\eta with |\\eta| \u226a 1, a Taylor expansion gives \\(u_v \\gtrsim 6|\\eta| + O(\\eta^3)\\).\n- Therefore, if a positive fraction \\(\\rho\\) of vertices satisfy |x_v \u2212 1/2| \u2265 \\eta\u2080, then \\(\\mathbb{E}_v[u_v^2] \\ge c\\,\\rho\\,\\eta_0^2\\) for some absolute c > 0. Plugging into the corollary gives a concrete improvement \\(\\delta \\ge c'\\,a\\,\\rho\\,\\eta_0^2\\).\nThis yields an auditable gain in the \u201cdegree-biased\u201d regime. The hard case is the \u201cglobally balanced\u201d regime where x_v \u2248 1/2 for most v.\n\n## Obstacles and where the improvement must come from in the balanced regime\n- There may exist colorings with x_v \u2248 1/2 for all (or almost all) vertices, killing the above degree-based bias. In this regime, any gain must come from structural constraints coupling the c_v(K) labels across different K (4-cycle/face consistency) and from the interaction between good and bad Q3\u2019s (parameter b).\n- The spectral KG(n,3) bound shows that cuts G_v\u2282C([n],3) alone do not force b < 1/2. We must exploit cross-vertex and cross-triple constraints inherently present in the cube that the Kneser abstraction discards.\n\n## Concrete, checkable next steps\n1) Formalize and add the \u201cboth-good refinement\u201d lemma to output.md. It is self-contained and only uses counting over t_v and the O(n^2)-exclusion argument already present implicitly in Dvo\u0159\u00e1k\u2019s proof. This yields a parameterized improvement term \u2212(a/6)\u00b7E_v[u_v^2]\u00b7n.\n2) Quantify the degree-bias case: write a short lemma proving u_v \u2265 c\u00b7|2x_v\u22121| for star-driven minima (as above), with explicit c from exact binomial ratios, and derive the resulting \u03b4 in terms of the density of vertices with |2x_v\u22121| \u2265 \u03b7.\n3) Begin the LP relaxation in the balanced case (x_v \u2248 1/2):\n   - Variables: for a fixed v, frequencies over Q3 isomorphism classes with a marked vertex and their c_v labels; frequencies over pairs of disjoint triples at v and their joint c_v labels; optionally include a minimal set of Q6-face constraints encoding compatibility between the two Q3\u2019s via shared 4-cycles not passing through v.\n   - Constraints: (i) normalization and marginalization; (ii) the fraction of good Q3 at v is \u2265 \u03c4_v \u2265 1/4 \u2212 3/(4n); (iii) Dvo\u0159\u00e1k\u2019s Lemma 9 filters for bad Q3; (iv) symmetry under color swap and coordinate permutations.\n   - Objective: maximize b subject to these constraints and u_v \u2264 \u03b5 for all v (the \u201cbalanced\u201d regime). If the optimum yields b \u2264 1/2 \u2212 \u03b3 for some absolute \u03b3, we obtain the desired dichotomy.\n4) Enumeration task for Q3 classes: catalog all 2-colorings of Q3 up to automorphism; for each class and marked vertex, determine \u201cgood/bad\u201d and, for good, list all minimal-change geodesics\u2019 starting colors at the marked vertex. This table will supply exact constraints for (3).\n\n## Sanity checks and small examples\n- For any v, if all good Q3\u2019s containing v are anchored at v (monochromatic star), then u_v = |2x_v\u22121| and the both-good disagreement probability at v equals 1/2 \u2212 (2x_v\u22121)^2/2 + O(1/n), giving a clear deviation from 1/2 when x_v\u22601/2.\n- In a random coloring (each edge red/blue with prob 1/2 independently), heuristic suggests u_v concentrates near 0 and b\u22481/2, matching the expectation that our improvement must come from worst-case structural constraints rather than average-case randomness. The LP aims exactly at the worst-case.\n\n## Why this is incremental, auditable progress\n- The both-good refinement is a precise, verifiable tightening of a step in Dvo\u0159\u00e1k\u2019s estimate; it cleanly introduces a measurable parameter u_v that future steps can bound from below.\n- The conditional degree-bias improvement gives a family of explicit special cases yielding an immediate \u03b4.\n- The LP setup is concrete: it targets the balanced regime where the degree-based route fails, and it encodes local consistency that the Kneser graph abstraction ignores. Numerical experimentation on this relaxation can expose a positive margin \u03b3 and guide a combinatorial proof.\n\n## Open gaps to flag explicitly\n- output.md currently does not include the both-good refinement; adding it will make transparent how vertex-level biases translate to reduced switches.\n- We do not yet have a universal lower bound on E_v[u_v^2]. Establishing a dichotomy (either E_v[u_v^2] \u2265 \u03b40 or b \u2264 1/2 \u2212 \u03b30) via the LP is the key next milestone.\n"}, {"prover_id": "02", "progress_md": "## Round 0002 \u2014 Anchored-good leverage on the a-term; explicit anchored\u2013anchored counts; and an LP skeleton for b\n\nReading and audit\n- I re-read output.md (Theorem A and Lemma B) and Dvo\u0159\u00e1k (EJC 2020). The spectral Kneser bound is correct; the resulting substitution into Dvo\u0159\u00e1k\u2019s formula numerically gives a slightly worse constant than 3/8 (since b \u2264 1/2 + 3/(2(n\u22123))), but this is fine as an explicit o(1) term. Lemma B\u2019s asymptotics \u03c4_v \u2265 1/4 \u2212 3/(4n) + O(1/n^2) are correct (I checked the expansion for even n).\n- No changes to output.md are proposed, but I note this nuance: \u201crefines to (3/8 + 1/(8(n\u22123)) + o(1))\u00b7n\u201d means making the o(1) term explicit; it is not an improvement on 3/8.\n\nIdea: Use anchored-good pairs to lower the both-good boundary switch probability below 1/2 by a vertex-bias dependent amount\n- Motivation: In Dvo\u0159\u00e1k\u2019s analysis the \u201cboth-good\u201d boundary switch probability was bounded by 1/2 + o(1). However, within the anchored-good subclass (good Q3\u2019s with a monochromatic star at the shared vertex), the color at the shared vertex chosen by f1 is forced to be the star color. This creates an explicit bias for two disjoint anchored-good cubes depending on the local red degree r_v at the shared vertex v.\n\nExplicit counting for anchored\u2013anchored pairs at a fixed vertex v\n- Let r = r_v and b = n \u2212 r. For an ordered v-neighbor pair of Q3\u2019s (K1,K2) (disjoint 3-sets), consider the event A that both are anchored at v (i.e., the three incident edges at v within each Ki have the same color). Then the exact counts are:\n  \u2022 #disjoint ordered pairs with both anchored red: C(r,3)\u00b7C(r\u22123,3).\n  \u2022 #disjoint ordered pairs with both anchored blue: C(b,3)\u00b7C(b\u22123,3).\n  \u2022 #disjoint ordered pairs with one anchored red and the other blue: C(r,3)\u00b7C(b\u22123,3) + C(b,3)\u00b7C(r\u22123,3).\n  \u2022 Total #disjoint ordered pairs: C(n,3)\u00b7C(n\u22123,3).\n- Consequently, the anchored\u2013anchored v-probability is\n  H(r,n) := P_v[A] = [ C(r,3)C(r\u22123,3) + C(b,3)C(b\u22123,3) ] / [ C(n,3)C(n\u22123,3) ].\n  Observation: H(r,n) is symmetric in r\u2194b, minimized (empirically and by Taylor expansion) around r\u2248n/2, and for r=n/2 we have H \u2248 1/32 + O(1/n).\n- Note: Since \u201canchored\u201d implies \u201cgood\u201d (Lemma 8), H(r,n) is a contribution to the both-good probability a at v. Averaging over v gives a universal lower bound a \u2265 E_v[H(r_v,n)]. I will formalize the minimization of H at r\u2248n/2 in a separate lemma next round; numerically, H(n/2,n) \u2192 1/32.\n\nAnchored\u2013anchored disagreement probability below 1/2 (precise expansion)\n- For the same v and conditioning on A, let \u03c3_i\u2208{R,B} be the star color at v in Q3(v,Ki) (this is exactly the color of the first edge at v chosen by f1 in an anchored-good cube). The conditional probability of disagreement is\n  P_v[\u03c3_1\u2260\u03c3_2 | A] = [ C(r,3)C(b\u22123,3) + C(b,3)C(r\u22123,3) ] / [ C(r,3)C(r\u22123,3) + C(b,3)C(b\u22123,3) + C(r,3)C(b\u22123,3) + C(b,3)C(r\u22123,3) ].\n- As n\u2192\u221e, with x = r/n and t = x\u22121/2, a direct Taylor expansion gives\n  P_v[\u03c3_1\u2260\u03c3_2 | A] = 1/2 \u2212 (9/2) t^2 + O(1/n + t^4).\n  Sketch: Use C(r,3) \u223c x^3 C(n,3) and similarly for the (\u00b7\u22123) terms to reduce the ratio to 2x^3(1\u2212x)^3/(x^3+(1\u2212x)^3)^2 up to O(1/n), then expand around x=1/2 to obtain 1/2 \u2212 (9/2)t^2 + O(t^4).\n- Consequence: For vertices with |t|\u2265\u03b7>0, the both-good boundary switch probability (within anchored\u2013anchored pairs) is strictly < 1/2 by \u03a9(\u03b7^2).\n\nAveraging over vertices and integrating into Dvo\u0159\u00e1k\u2019s boundary analysis\n- Let T_v := (r_v/n \u2212 1/2)^2. Then at the boundary step contributing the (both-good) term, we can refine Dvo\u0159\u00e1k\u2019s 1/2 bound as follows. Writing A_v for the anchored\u2013anchored indicator at v and using that A_v implies both-good, we have\n  P[boundary switch | both-good] \u2264 1/2 \u2212 E_v[ (9/2)\u00b7T_v \u00b7 P_v[A] ] + O(1/n).\n  Here the expectation is over the random shared vertex v (uniform) and random v-neighbor pair.\n- Therefore, the boundary contribution in the a-term decreases by at least \u0394_a := (9/2)\u00b7E_v[ T_v \u00b7 H(r_v,n) ] + O(1/n). Since H(r_v,n) \u2273 1/32 around the balanced regime, a coarse but explicit averaged gain is\n  \u0394_a \u2265 (9/64)\u00b7E_v[T_v] + O(1/n),\n  provided we certify that H(r,n) is minimized at r\u2248n/2 (to be proved next round). This yields the refined expected-switch bound\n  E[switches] \u2264 (1/3 + b/12 + (1/2)a/3)\u00b7n \u2212 (\u0394_a/3)\u00b7n + o(n).\n- Interpretation: Whenever the mean square degree-imbalance E_v[T_v] is bounded away from 0, the both-good boundary term improves by a constant multiple of E_v[T_v], giving a linear gain. This sets up a natural dichotomy: either (Unbalanced case) E_v[T_v] \u2265 \u03c4>0, yielding a constant improvement via the a-term, or (Balanced case) E_v[T_v] is small, in which case we must force b \u2264 1/2 \u2212 \u03b3 using cross-cube constraints.\n\nWhy useful here\n- This quantifies and isolates an unconditional source of improvement for the a-term that Dvo\u0159\u00e1k bounded by 1/2. It is small if and only if the coloring is nearly degree-balanced at every vertex; this sharply delineates the hard regime for subsequent b-analysis.\n\nLP skeleton for bounding b under local consistency (balanced-degree regime)\n- Variables (at a typical vertex v; all frequencies are with respect to a uniform random 3-set K and, where relevant, uniform random disjoint pair K,L):\n  1) Star-type frequencies at v: x_{3R}, x_{2R1B}, x_{1R2B}, x_{3B}, with x_{3R}+x_{2R1B}+x_{1R2B}+x_{3B}=1 and x_{3R} = E[C(r_v,3)]/C(n,3), etc.\n  2) 4-cycle types at v for unordered pairs {i,j}: variables y_t for the small set of 2-color isomorphism classes of a 4-cycle (monochromatic, two-adjacent, two-opposite, alternating). These enforce consistency among triples sharing {i,j}.\n  3) Q3 pattern types at v: for each isomorphism class of 2-colored Q3 with a marked vertex v, a variable z_\u03c0, along with a flag good/bad (by Dvo\u0159\u00e1k\u2019s definition) and, for good, the f1-chosen color at v.\n- Constraints:\n  \u2022 Marginalization: z_\u03c0 summed over \u03c0 projecting to a given 4-cycle type equals the corresponding y_t; and summing z_\u03c0 over all \u03c0 whose three incident edge colors at v equal a given star-type yields x_{\u00b7}.\n  \u2022 4-cycle consistency: Across the four Q3\u2019s through a fixed {i,j} at v (varying the third direction k), their projections on the 4-cycle must agree with y_t, and the joint frequencies for pairs (k,k\u2032) must be compatible.\n  \u2022 Badness filters: The subset of \u03c0 labeled bad must satisfy Lemma 9\u2019s structural condition at v and at the opposite vertex (existence of 1-switch antipodal geodesics with specified endpoint colors).\n  \u2022 Symmetry: Assume deg_R(v)=deg_B(v) (balanced regime) to reduce variables and focus on the hardest case.\n- Objective: Maximize b_v, the frequency of mixed (good\u2013bad) among disjoint pairs (K,L), computed as a linear form in z_\u03c0 (and their pairwise products via a standard linearization trick on the disjoint-pair distribution). Any universal optimum b_v \u2264 1/2 \u2212 \u03b3 gives the desired \u03b3 for b.\n- Auditable next step: Explicitly enumerate the 4-cycle isomorphism classes (there are 4) and the Q3 pattern classes up to Aut(Q3) with marks (modest; can be done by hand or small script), encode the LP, and solve numerically in the balanced case. The outcome will either exhibit \u03b3>0 or produce an extremal local statistics candidate to analyze combinatorially.\n\nExamples/sanity checks\n- Balanced case r_v = n/2: H(r,n) \u2248 1/32 and P_v[\u03c3_1\u2260\u03c3_2|A] \u2248 1/2 (no anchored\u2013anchored gain), matching the expansion with t=0.\n- Unbalanced case r_v = (1/2+0.1)n: t=0.1 gives P_v[\u03c3_1\u2260\u03c3_2|A] \u2248 1/2 \u2212 0.045, a substantial drop. Combined with H\u22481/32, this yields a \u2248 0.0014 absolute reduction in the both-good boundary switch probability at v; across \u0398(n) boundaries this is a linear gain.\n\nObstacles and open points\n- Proving that H(r,n) is minimized at r\u2248n/2 for all n\u22656 (intuitively clear; needs a short discrete convexity or rearrangement proof). I will address this rigorously next round.\n- Extending the anchored\u2013anchored bias to non-anchored good cubes requires Q3-type enumeration and analysis of f1\u2019s choice in those classes.\n- The LP must keep the state space small enough to be tractable; careful exploitation of symmetry will be crucial.\n\nNext steps (checkable deliverables)\n1) Prove: For n\u22656 and all 3\u2264r\u2264n\u22123, H(r,n) \u2265 H(\u230an/2\u230b,n) = 2\u00b7C(\u230an/2\u230b,3)\u00b7C(\u230an/2\u230b\u22123,3) / [ C(n,3)C(n\u22123,3) ] = 1/32 + O(1/n).\n   - Approach: Write F(m)=C(m,3)C(m\u22123,3) and show F(m)+F(n\u2212m) is minimized at m\u2248n/2 by discrete convexity or rearrangement.\n2) Formalize the anchored\u2013anchored improvement in the a-term: derive the precise inequality\n   E[switches] \u2264 (1/3 + b/12 + (1/2)a/3)\u00b7n \u2212 ( (9/2)\u00b7E_v[T_v\u00b7H(r_v,n)]/3 )\u00b7n + o(n),\n   and document all conditioning steps cleanly.\n3) Q3 pattern work: enumerate Q3 2-coloring classes with a marked vertex; identify good/bad and (for good) the f1-chosen color at the mark; produce a table to feed the LP.\n4) Build and solve the first LP relaxation in the balanced regime to test if b \u2264 1/2 \u2212 \u03b3 holds under 4-cycle and badness constraints.\n\nWhy this is progress\n- We obtain explicit, verifiable formulas for anchored\u2013anchored frequencies and their bias, giving a concrete, structural improvement in the both-good boundary term whenever degree variance is non-negligible. This cleanly reduces the problem to the balanced regime, where the LP program can plausibly show b<1/2 due to 4-cycle consistency and badness structure. The steps above are incremental and individually checkable."}]

Current notes.md:
Context and target in Dvořák’s framework
- Dvořák’s modified-geodesic scheme yields the bound E[switches] ≤ (1/3 + b/12 + o(1))·n, where b is the probability that two uniformly random neighboring Q3’s (sharing exactly one vertex) have mixed types (one good, one bad). Because p cancels via p = a + b/2, any constant improvement over 3/8 must either prove b ≤ 1/2 − γ for some absolute γ>0, or reduce the 1/2 bound in the a-term (both-good case).

Why naive block-density does not imply expansion (correct counterexample)
- Brainstorm claim (now rejected): “If a color occupies at least an ε-fraction of each block boundary δS_J for (1−θ) of the blocks, then that color has conductance Ω(ε).” This is false without further structure (e.g., endpoint balance and degree spread).
- Construction (valid undirected 2-coloring): Fix j:[n]→[n] such that j(i)≠i for all i. For each i-edge {x, x⊕e_i}, let y be the endpoint with y_i=0 and color the edge blue iff y_{j(i)}=1; otherwise red. Then for each i, exactly half of the i-edges are blue (so β_J=1/2 for every block J). Yet the blue subgraph can be extremely sparse at many vertices; e.g., if j(1)=2 and j(i)=1 for all i≥2, then for a vertex v, deg_B(v) = (n−1)·[v_1=1] + [v_2=1]. In particular, all vertices with (v_1,v_2)=(0,0) are isolated. Thus block-level edge-density alone does not imply connectivity, let alone conductance.
- Separate but related flaw: Even if a block J has aggregate blue-density β_J = 1/2+ε, one can realize this with each direction i∈J having density 1/2+ε. A geodesic that uses each direction exactly once then sees ≈(1/2−ε)|J| minority edges on average, not O(ε|J|). Any O(ε|J|) claim must extract stronger inner-block structure (e.g., many near-monochromatic directions).

Vertex-wise Kneser-graph formulation and spectral bound
- For a fixed vertex v, Q3’s through v correspond to 3-subsets of [n]. Two Q3’s are v-neighbors iff their 3-sets are disjoint; this is the Kneser graph KG(n,3). If G_v⊆C([n],3) is the set of “good” triples at v, then b_v is the fraction of edges in KG(n,3) crossing the cut (G_v, its complement). The parameter b equals the average of b_v over v, up to negligible normalization.
- Spectral MAX-CUT bound in KG(n,3): KG(n,3) is d-regular with d= C(n−3,3), and its least eigenvalue is −C(n−4,2). Hence for any cut, the crossing-edge fraction is ≤ 1/2 − λ_min/(2d) = 1/2 + 3/(2(n−3)). Therefore b ≤ 1/2 + 3/(2(n−3)). This recovers Dvořák’s b ≤ 1/2 + o(1) and makes the o(1) term explicit.

Per-vertex monochromatic-star lower bound (useful bookkeeping)
- For a vertex v with red degree r_v, the fraction of 3-subsets K such that the three edges at v in directions K are monochromatic equals [C(r_v,3) + C(n−r_v,3)] / C(n,3). This is minimized near r_v≈n/2; explicitly: for n even it equals 2·C(n/2,3)/C(n,3), and for n odd it equals [C((n−1)/2,3)+C((n+1)/2,3)]/C(n,3). Asymptotically this is 1/4 − 3/(4n) + O(1/n^2). This sharpened estimate alone cannot beat 3/8 but is a clean input for any refined accounting of the a-term.

Promising directions to reduce b or the a-term
- LP/SDP relaxation for b: Model local pattern frequencies around v (1-edge colors; 4-cycle types; Q3-types with the f1-chosen color), enforce marginal and 4-cycle consistency, and maximize b. Any universal optimum < 1/2 indicates a path to a combinatorial proof.
- Good–good boundary improvement: Enumerate good Q3 classes, fix canonical tie-breaking for f1, and measure the disagreement probability at v between two disjoint good Q3’s. If it is ≤ 1/2 − η for some η>0, the a-term improves by η.
- Structural lemmas: Seek negative correlation between “badness” indicators for disjoint triples at v, induced by 4-cycle constraints and the forbidden patterns of bad Q3’s. Any quantified negative correlation lowers b below the vertexwise MAX-CUT upper bound.

What to avoid or strengthen
- Avoid relying on block-level densities without per-direction endpoint balance and degree-spread conditions. Any block-phase lemma should explicitly include such hypotheses (e.g., each direction in a good block has bias ≥ε and each vertex has ≥ρ·|J| majority-color incident edges within that block).

Current output.md (if any):
List of proven intermediate results
- Theorem A (Spectral upper bound on the parameter b in Dvořák’s scheme).
- Lemma B (Per-vertex lower bound on monochromatic-star triples).

Theorem A (Spectral upper bound on b)
Statement. Let Q_n be the n-dimensional hypercube with an arbitrary 2-coloring of its edges, and let b denote the probability that two uniformly random neighboring 3-cubes (Q3’s) are of mixed type (one good, one bad) in the sense of Dvořák’s construction. Then for all n ≥ 6,

b ≤ 1/2 + 3/(2(n−3)).

Consequently, Dvořák’s expected switch bound refines to
E[switches] ≤ (1/3 + 1/24 + 1/(8(n−3)) + o(1))·n = (3/8 + 1/(8(n−3)) + o(1))·n.

Proof. Fix a vertex v of Q_n. Q3’s through v correspond bijectively to 3-subsets K ⊆ [n] (the chosen directions), and two such Q3’s are v-neighbors if and only if the 3-sets are disjoint. Thus, the v-neighborhood relation is the Kneser graph KG(n,3) on vertex-set C([n],3), which is d-regular with degree d = C(n−3,3). Let G_v ⊆ C([n],3) be the set of “good” triples at v. The fraction b_v of v-neighbor pairs that are mixed equals the fraction of edges in KG(n,3) crossing the cut (G_v, C([n],3) \ G_v). The global parameter b is the average of b_v over all v (this is a direct consequence of the definition of “neighboring Q3’s” as sharing exactly one vertex; each ordered choice of the shared vertex v and a disjoint pair of triples contributes equally).

For any d-regular graph with adjacency matrix A and least eigenvalue λ_min, the size of any cut is at most |E|·(1/2 − λ_min/(2d)). This follows from the identity that, for a ±1 vector s indicating a cut, the number of crossing edges equals |E|/2 − (1/4) s^T A s, combined with s^T A s ≥ λ_min · s^T s = λ_min · |V| and |E| = d|V|/2. The Kneser graph KG(n,3) has spectrum { C(n−3,3), −C(n−4,2), n−5, −1 } (standard; see e.g. Lovász, 1979), so λ_min = −C(n−4,2). Hence every cut in KG(n,3) has crossing-edge fraction at most 1/2 − (−C(n−4,2))/(2 C(n−3,3)) = 1/2 + C(n−4,2)/(2 C(n−3,3)) = 1/2 + 3/(2(n−3)). Therefore b_v ≤ 1/2 + 3/(2(n−3)) for each v, and averaging gives the same bound for b. The stated corollary for E[switches] follows by substitution into Dvořák’s expression. ∎

Lemma B (Per-vertex lower bound on monochromatic-star triples)
Statement. Let v be a vertex of Q_n and let r_v be the number of red edges incident to v (so n − r_v are blue). The fraction of 3-sets K ⊆ [n] such that the three edges at v with directions K are monochromatic equals

τ_v = [ C(r_v,3) + C(n − r_v,3) ] / C(n,3).

In particular, τ_v is minimized when r_v ∈ {⌊n/2⌋, ⌈n/2⌉}. For n even, the minimum equals 2·C(n/2,3)/C(n,3); for n odd, it equals [C((n−1)/2,3) + C((n+1)/2,3)]/C(n,3). As n→∞, uniformly in v,
	τ_v ≥ 1/4 − 3/(4n) + O(1/n^2).

Proof. Among all 3-sets K, exactly C(r_v,3) of them consist of three red directions at v, and exactly C(n − r_v,3) consist of three blue directions at v. There are C(n,3) total 3-sets, so the fraction is τ_v as stated. Define g(r) = C(r,3) + C(n − r,3) for integer r. Then g(r+1) − g(r) = C(r,2) − C(n − r − 1,2), which is negative for r < (n−1)/2 and positive for r > (n−1)/2; hence g is minimized at r ∈ {⌊n/2⌋, ⌈n/2⌉}. Substituting these values yields the explicit minima. The asymptotic expansion follows by a routine Taylor expansion of the ratio of polynomials in n. ∎
