--- SYSTEM ---
You are a strict mathematical verifier & research manager.

You are being run in a loop with provers. Your tasks:
- Audit their ideas for correctness and rigor.
- Curate files (notes.md and output.md).
- Suggest the next steps.

Inputs: 
- task statement
- outputs of provers
- notes.md (summary so far)
- output.md (rigorously proven results so far)

Guidelines:
- notes.md: should be a readable running log of interesting work. Prefer appending. Replace only if old notes are clearly misleading. Remember -- notes should be self-contained and should make sense even without seeing outputs of past provers. 
- output.md:  Think twice before you add something to this file. Everything here should be rigorous, almost publication-ready. It should contain only fully proven theorems that are clearly an interesting step towards the solution (or the solution itself). The beginning of the file is a clear list of interesting theorems you can prove, together with a discussion about why it is relevant. From the statement of the theorem it has to be clear that this constitutes nontrivial progress towards solution. The rest of the file contains a fully rigorous list of the proofs of the theorems. Keep only proven theorems with clear proofs. If a statement in that file is flawed / unprecise and you cannot fix it on the spot, remove it from output.md and instead add it to notes.md with explanation.
- Be careful with the booleans `new_notes_append` and `new_outputs_append`: default is True (append). Use False only when deliberately rewriting everything.

Tasks:
1) Audit rigor: identify unjustified steps, false statements, missing lemmas; produce minimal counterexamples.
2) Triage value: separate genuine progress from noise.
3) Guide next steps: propose what provers should try next.

**Return strictly JSON**:
{
  "feedback_md": "Detailed critique of prover outputs (≥200 words). Include concrete next-step suggestions. The next round of provers may not see last round outputs; ensure all valuable info is stored in notes.",
  "new_notes_md": "Markdown (KaTeX allowed). Usually appended to notes.",
  "new_notes_append": "True|False",
  "new_outputs_md": "Markdown (KaTeX allowed). Usually appended to output.md.",
  "new_outputs_append": "True|False",
  "verdict": "success|partial success|nothing so far"
}

**Verdict definitions**:
- **success**: Something that one could publish, even if it is not the full solution (e.g., significant theorem, key lemma, novel technique, partial solution with clear path forward)
- **partial success**: Something worthy enough to write into output.md (e.g., correct but preliminary results, useful technical lemmas, validated approaches that advance understanding)
- **nothing so far**: No meaningful mathematical progress or only exploratory work


--- USER ---
You receive multiple prover reports. Evaluate correctness, value, and pick promising directions. Update notes.md (append/replace) with useful ideas and update output.md (append/replace) ONLY with rigorously verified results.

Prover reports (JSON):
[{"prover_id": "01", "progress_md": "## Round 0003 \u2014 Anchored\u2013anchored refinement, unconditional a-lower bound, and integrating a quantitative gain into Dvo\u0159\u00e1k\u2019s boundary term\n\nStatus and quick audit of output.md\n- Theorem A (KG(n,3) spectral MAX-CUT bound for b) and Lemma B (monochromatic-star fraction \u03c4_v) look correct and useful as book-keeping tools. Note: The numerical corollary \u201c(3/8 + 1/(8(n\u22123)) + o(1))\u00b7n\u201d is not an improvement on 3/8; it only makes the o(1) explicit.\n- Lemma C (pair-sampling under disjointness) and Corollary D (both-good disagreement at v equals 1/2 \u2212 u_v^2/2 \u00b1 O(1/n)) are in good shape; the O(n^2/t) error with t=\u0398(n^3) yields O(1/n) as intended.\n- Missing ingredients to be added later: (i) an explicit import/citation that \u201canchored at v \u21d2 good Q3\u201d (Dvo\u0159\u00e1k Lemma 8) to justify t_v=\u0398(n^3) uniformly; (ii) a clean integration of Corollary D into Dvo\u0159\u00e1k\u2019s expected-switch calculation (it currently appears only as a local bound at v); and (iii) a refined anchored\u2013anchored counting lemma with exact formulas and asymptotics (see below).\n- Important correction (for our ongoing notes): in Dvo\u0159\u00e1k\u2019s proof, the expected number of switches inside a Q3-block is 1 \u2212 p/2 (not 1 \u2212 p^2). The final bound (1/3 + b/12 + o(1))\u00b7n comes from 1 \u2212 p/2 + (b/2 + (1/2 + o(1))a) and p = a + b/2.\n\nKey new lemmas and quantitative refinements (ready to curate next)\n1) Anchored\u2013anchored pair mass at a vertex and its minimizer.\n- Fix a vertex v with r red and b:=n\u2212r blue incident edges. For an ordered disjoint pair of 3-sets (K,L) at v, both cubes Q3(v,K) and Q3(v,L) are anchored at v iff the three edges at v in the directions of K are monochromatic, and likewise for L. The exact anchored\u2013anchored ordered-pair count equals\n  C(r,3)C(r\u22123,3) + 2 C(r,3)C(b,3) + C(b,3)C(b\u22123,3),\n  and the denominator (all ordered disjoint pairs) equals C(n,3)C(n\u22123,3). Thus the anchored\u2013anchored probability at v is\n  H(r,n) = [C(r,3)C(r\u22123,3) + 2 C(r,3)C(b,3) + C(b,3)C(b\u22123,3)] / [C(n,3)C(n\u22123,3)].\n- As n\u2192\u221e with x=r/n, H(r,n) = (x^3 + (1\u2212x)^3)^2 + O(1/n), which is minimized at x=1/2 (since s(x):=x^3+(1\u2212x)^3 is minimized at 1/2). Hence for all large n, H(r,n) \u2265 1/16 \u2212 O(1/n), with equality asymptotically at r\u2248n/2. Next step: give a discrete proof (monotonicity of H(r+1,n)\u2212H(r,n) changing sign at \u230an/2\u230b) valid for all n\u22656.\n\n2) Unconditional lower bound on a (both cubes good).\n- \u201cAnchored at v \u21d2 good\u201d (Dvo\u0159\u00e1k Lemma 8) implies that anchored\u2013anchored pairs are a subset of both-good pairs. Therefore, averaging over v and the (uniform) choice of a v-neighbor pair,\n  a \u2265 E_v[H(r_v,n)].\n- Using the asymptotic from (1), we obtain a uniform, absolute lower bound:\n  a \u2265 1/16 \u2212 O(1/n).\n- Strengthening: One can avoid asymptotics by a direct application of Lemma C to the anchored-triple set T_v (of size t_v^anc = C(r_v,3)+C(n\u2212r_v,3)): for a random disjoint pair from all triples, P[both anchored at v] = \u03c4_v^2 \u00b1 O(1/n). Since \u03c4_v is minimized at r_v\u2248n/2 and \u03c4_v \u2265 1/4 \u2212 3/(4n) (Lemma B), the anchored\u2013anchored mass at v is \u2265 (1/4 \u2212 3/(4n))^2 \u2212 O(1/n), yielding the same absolute bound a \u2265 1/16 \u2212 O(1/n).\n\n3) Anchored\u2013anchored disagreement probability and its quadratic drop from 1/2.\n- Conditioning on both being anchored at v, the exact disagreement probability equals\n  P_v[disagree | anchored] = 2 C(r,3) C(b,3) / [C(r,3)C(r\u22123,3) + 2 C(r,3)C(b,3) + C(b,3)C(b\u22123,3)].\n- As n\u2192\u221e with x=r/n and t=x\u22121/2,\n  P_v[disagree | anchored] = 2x^3(1\u2212x)^3 / (x^3+(1\u2212x)^3)^2 + O(1/n)\n                           = 1/2 \u2212 18 t^2 + O(t^4 + 1/n).\n  Thus, for vertices with degree imbalance |x\u22121/2|\u2265\u03b7, anchored\u2013anchored pairs alone produce a drop below 1/2 of order \u2126(\u03b7^2).\n\nIntegrating into Dvo\u0159\u00e1k\u2019s boundary step (unconditional quantitative gain)\n- In Dvo\u0159\u00e1k\u2019s calculation, the boundary contribution across the k\u22121 junctions is bounded by (b/2 + (1/2 + o(1)) a)\u00b7(n/3). Using (2)\u2013(3), we can refine the both-good (a-term) contribution without invoking any additional structure:\n  \u2022 Let J denote the event \u201cat a random junction, the two neighboring Q3\u2019s are both anchored at their shared vertex.\u201d By the above, P[J] = E_v[\u03c4_v^2] \u00b1 O(1/n) \u2265 (1/16 \u2212 o(1)).\n  \u2022 On J, the boundary switch probability is 1/2 \u2212 18 E_v[(x_v\u22121/2)^2 | J] + o(1); off J but still in the both-good case we keep the crude 1/2 bound.\n  \u2022 Therefore, the unconditional both-good boundary-switch probability drops from (1/2)\u00b7a by at least\n    \u0394_total \u2265 18\u00b7E_v[(x_v\u22121/2)^2 \u00b7 1_J] \u2212 o(1) = 18\u00b7E_v[T_v\u00b7\u03c4_v^2] \u2212 o(1),\n    where T_v:=(x_v\u22121/2)^2 and we used P[J | v] = \u03c4_v^2 \u00b1 O(1/n).\n- Consequently, the expected number of switches satisfies the refined inequality\n  E[switches] \u2264 [ (1 \u2212 p/2) + (b/2 + (1/2)a \u2212 \u0394_total) ]\u00b7(n/3) + o(n)\n               = (1/3 + b/12)\u00b7n \u2212 (\u0394_total/3)\u00b7n + o(n).\n- Using \u03c4_v \u2265 1/4 \u2212 O(1/n), we obtain a clean unconditional corollary:\n  E[switches] \u2264 (1/3 + b/12)\u00b7n \u2212 6\u00b7E_v[T_v]\u00b7(1/16 \u2212 o(1))\u00b7n + o(n)\n               = (1/3 + b/12)\u00b7n \u2212 (3/8)\u00b7E_v[T_v]\u00b7n + o(n).\n  Thus, in any coloring with nontrivial mean-square degree imbalance E_v[T_v] \u2265 \u03b5, we gain a linear improvement of magnitude (3\u03b5/8 \u2212 o(1))\u00b7n over the baseline (1/3 + b/12)\u00b7n. The balanced-degree regime (E_v[T_v] \u2248 0) remains the hard case, where we must force b \u2264 1/2 \u2212 \u03b3 via structural constraints.\n\nWhy useful here\n- The anchored\u2013anchored analysis yields two robust facts: an absolute lower bound a \u2265 1/16 \u2212 o(1), and a quantitative drop of the both-good boundary switch probability by a term \u2265 18\u00b7E_v[T_v\u00b7\u03c4_v^2] \u2212 o(1). These are unconditional and compatible with Dvo\u0159\u00e1k\u2019s scheme. They give an explicit, checkable source of savings whenever degree variance is non-negligible, sharply isolating the balanced-degree regime for further work on b.\n\nExamples and sanity checks\n- Perfectly balanced degrees (r_v \u2261 n/2): \u03c4_v \u2248 1/4, H \u2248 1/16, P[disagree | anchored] = 1/2; our refinement produces no gain, as expected.\n- Biased degrees (say x_v \u2261 1/2+0.1 on a positive fraction of vertices): T_v = 0.01. Then P[disagree | anchored] \u2248 1/2 \u2212 0.18, and \u03c4_v \u2248 0.251..., so \u0394_total \u2273 18\u00b70.01\u00b7(0.25)^2 \u2248 0.01125, giving an absolute reduction of about 0.00375\u00b7n switches after the (1/3) factor\u2014substantial at scale.\n\nObstacles and open technical points\n- Discrete minimization: Provide a self-contained proof (no asymptotics) that H(r,n) is minimized at r\u2208{\u230an/2\u230b,\u2308n/2\u2309} for all n\u22656.\n- Weighting caveat: The \u201cboth-good\u201d boundary probability is an average over vertices weighted by the mass of both-good v-neighbor pairs. We sidestepped this by extracting an unconditional \u0394_total via anchored\u2013anchored pairs. A stronger refinement (using Corollary D\u2019s u_v) should control the conditional drop 1/2 \u2212 P[switch | both-good] by a weighted average of u_v^2; formalizing a lower bound on the weighted mean in terms of E_v[u_v^2] would further improve the statement. A natural route is to show Cov(t_v^2, u_v^2) \u2265 0 (t_v is the count of good triples at v), yielding a weighted-average \u2265 uniform-average inequality.\n- Balanced regime: We still need to push b \u2264 1/2 \u2212 \u03b3 using local consistency (4-cycles, badness structure). This remains the central challenge.\n\nNext steps (concrete, auditable)\n1) Curate two new lemmas into output.md:\n   - Lemma E (Anchored\u2013anchored mass and a\u22651/16 \u2212 O(1/n)) with a short proof via Lemma C and Lemma B.\n   - Lemma F (Anchored\u2013anchored disagreement probability and the 1/2 \u2212 18t^2 expansion), with a precise derivation as above.\n   Then state the refined global inequality: E[switches] \u2264 (1/3 + b/12)\u00b7n \u2212 (\u0394_total/3)\u00b7n + o(n), with \u0394_total \u2265 18\u00b7E_v[T_v\u00b7\u03c4_v^2] \u2212 o(1).\n2) Prove discrete minimization of H(r,n): Show H(r+1,n)\u2212H(r,n) changes sign exactly once at \u230an/2\u230b (discrete convexity of r\u21a6C(r,3) and a careful telescoping argument on the product terms).\n3) Balanced-degree regime LP: Begin the LP in the symmetric case r_v\u2261n/2. Variables: frequencies of 4-cycle types at v; frequencies of Q3 pattern classes with a marked vertex and their f1-start color. Constraints: marginalization, 4-cycle consistency, Dvo\u0159\u00e1k badness filter (Lemma 9). Objective: maximize b subject to these constraints. Deliverable: a numerical upper bound strictly below 1/2 (even \u03b3\u224810^{-3} would be compelling).\n4) Enumerate Q3 types with a marked vertex (up to automorphism), classify good/bad and, for good, the f1-start color at the mark. This feeds (3) and also allows a refined both-good analysis beyond anchored cubes.\n\nWhy this is progress\n- We obtained an absolute lower bound a\u22651/16\u2212o(1) and a concrete, unconditional reduction \u0394_total in the both-good boundary term proportional to the mean-square degree imbalance. These are new, testable refinements within Dvo\u0159\u00e1k\u2019s framework. They carve out the balanced regime as the sole obstruction and set up the LP attack on b \u2264 1/2 \u2212 \u03b3 under local consistency constraints.\n"}, {"prover_id": "02", "progress_md": "Round 0003 \u2014 Correcting a key mis-citation (p vs. p/2), anchoring-based refinement of the a-term, exact anchored\u2013anchored counts, uniformity of boundary vertices, and a clean global inequality\n\nSummary and audit of output.md\n- Sound pieces: Theorem A (KG(n,3) spectral MAX-CUT for b), Lemma B (monochromatic-star fraction), Lemma C + Corollary D (pair-sampling under disjointness and the u_v parameter) are correct and useful.\n- Missing explicit import: output.md uses in the Remark that \u201canchored-at-v cubes are good,\u201d but does not restate/prove it. This is Dvo\u0159\u00e1k\u2019s Lemma 8. I recommend adding it as a self-contained lemma (I provide a short proof sketch below) so we can invoke it to ensure t_v = \u0398(n^3) uniformly in v.\n- Important correction (from the PDF): In Dvo\u0159\u00e1k\u2019s proof, the expected number of color changes inside a Q3-block contributes 1 \u2212 p/2 per block (not 1 \u2212 p^2). This is essential for the cancellation to give (1/3 + b/12 + o(1))\u00b7n. Some of my Round 0001 notes used 1 \u2212 p^2; that was an error. All refinements below use the correct 1 \u2212 p/2 baseline.\n\nNew, checkable lemmas/propositions to add\n1) Lemma E (Anchored at v implies good; Dvo\u0159\u00e1k\u2019s Lemma 8). If at some vertex of a Q3 the three incident edges are monochromatic, then the Q3 is good.\n- Utility here: Guarantees that \u201canchored\u201d cubes are a subset of good, allowing us to quantify a nontrivial anchored\u2013anchored submass within the both-good case.\n- Proof sketch (as in Dvo\u0159\u00e1k): Assume 000 has all three blue edges. If all edges in the opposite square are red, we immediately have three monochromatic antipodal geodesics disjoint from 000\u2013111 and one blue antipodal geodesic through 000, totaling \u22642 changes. If some edge there is blue, a short case-check (as in the paper) creates two disjoint monochromatic antipodal geodesics, forcing goodness by the definition. This can be restated verbatim from Lemma 8 in the EJC note.\n\n2) Lemma F (Exact anchored\u2013anchored counts at a fixed vertex and the disagreement probability).\n- Setup: Fix v. Let r=r_v be the red degree, b=n\u2212r. Consider ordered pairs (K,L) of v-neighbor Q3\u2019s (disjoint 3-sets). Say a Q3 is \u201canchored red at v\u201d if all three edges at v in that Q3 are red, and analogously for blue.\n- Exact counts:\n  \u2022 Both anchored red: C(r,3)\u00b7C(r\u22123,3).\n  \u2022 Both anchored blue: C(b,3)\u00b7C(b\u22123,3).\n  \u2022 One anchored red, one anchored blue: 2\u00b7C(r,3)\u00b7C(b,3).\n  \u2022 Total ordered disjoint pairs: C(n,3)\u00b7C(n\u22123,3).\n- Therefore, the anchored\u2013anchored probability (at v) is\n  H(r,n) = [ C(r,3)C(r\u22123,3) + 2C(r,3)C(b,3) + C(b,3)C(b\u22123,3) ] / [ C(n,3)C(n\u22123,3) ].\n- Conditional disagreement probability among anchored pairs at v (star colors \u03c31,\u03c32 at v):\n  P_v[\u03c31\u2260\u03c32 | anchored at v] = 2C(r,3)C(b,3) / [ C(r,3)C(r\u22123,3) + 2C(r,3)C(b,3) + C(b,3)C(b\u22123,3) ].\n- Asymptotics: With x=r/n and t=x\u22121/2, as n\u2192\u221e,\n  \u2022 H(r,n) = (x^3+(1\u2212x)^3)^2 + O(1/n) after normalizing by the denominator, hence H minimized at x=1/2 and H(1/2,n) = 1/16 + O(1/n).\n  \u2022 P_v[\u03c31\u2260\u03c32 | anchored] = 2x^3(1\u2212x)^3 / (x^3+(1\u2212x)^3)^2 + O(1/n) = 1/2 \u2212 18t^2 + O(t^4 + 1/n).\n- Why useful: This gives an explicit, vertex-wise, anchored-driven bias away from 1/2 in the both-good boundary step, proportional to t^2 and with anchored mass H(r,n).\n\n3) Proposition G (Uniformity of the shared boundary vertex under the random-geodesic scheme).\n- Claim: In Dvo\u0159\u00e1k\u2019s random antipodal geodesic model (uniform start vertex v0 and uniform coordinate permutation), for any fixed j in {1,\u2026,k\u22121}, the shared vertex v3j at the j-th boundary is uniformly distributed over V(Q_n). Consequently, any bounded function \u03c6(v) satisfies E[\u03c6(v3j)] = E_v[\u03c6(v)], the uniform average over vertices.\n- Proof sketch: v3j = v0 \u2295 S where S is a uniformly random j-th 3-subset of coordinates from the permutation. For any fixed y, the number of (v0,S) pairs producing y equals the number of (v0,S) pairs producing 0 (by translation invariance), so y is equiprobable. Averaging over j (uniformly in {1,\u2026,k\u22121}) preserves uniformity. This justifies replacing boundary-vertex averages by uniform E_v[\u00b7].\n\nRefined global bound integrating anchoring\n- Boundary switch step: For a fixed boundary j with shared vertex v=v3j, the color-change probability is bounded by\n  P[switch at boundary j] \u2264 b/2 + a/2 \u2212 E_v[ (1/2 \u2212 P_v[\u03c31\u2260\u03c32 | anchored at v]) \u00b7 H(r_v,n) ] + o(1).\n  Here \u03c3i is the f1-chosen color at v for the i-th Q3; for anchored-good cubes, \u03c3i equals the star color at v, and \u201canchored \u21d2 good\u201d ensures we can subtract the anchored improvement unconditionally. The o(1) comes from the O(1/n) error in Lemma F and the negligible pairs sharing more than one vertex (as in Dvo\u0159\u00e1k).\n- Using Lemma F\u2019s expansion, write T_v := (r_v/n \u2212 1/2)^2. Then\n  (1/2 \u2212 P_v[\u03c31\u2260\u03c32 | anchored]) = 18T_v + O(T_v^2 + 1/n).\n  Thus the anchored savings per boundary satisfy\n  \u0394_anchor := E_v[ (1/2 \u2212 P_v[\u03c31\u2260\u03c32 | anchored]) \u00b7 H(r_v,n) ] \u2265 18\u00b7E_v[ T_v\u00b7H(r_v,n) ] + O(1/n).\n- Interior Q3 step: The correct baseline is 1 \u2212 p/2 per block. Summing over blocks and boundaries (k\u2248n/3) and inserting p=a+b/2 gives the refined expectation\n  E[switches] \u2264 (n/3)\u00b7[ (1 \u2212 p/2) + (a/2 + b/2) \u2212 \u0394_anchor + o(1) ]\n                  = (n/3)\u00b7[ 1 + b/4 \u2212 \u0394_anchor + o(1) ]\n                  = (1/3 + b/12 \u2212 (1/3)\u00b7\u0394_anchor + o(1))\u00b7n.\n- Consequence (unbalanced-degree regime): Since H is minimized at balance with H(1/2,n)=1/16+O(1/n), we obtain the explicit inequality\n  E[switches] \u2264 (1/3 + b/12 \u2212 6\u00b7E_v[T_v]\u00b7(1/16 + O(1/n)) + o(1))\u00b7n\n              = (1/3 + b/12 \u2212 (3/8)\u00b7E_v[T_v] + o(1))\u00b7n.\n  Therefore, if the mean-square degree-imbalance E_v[T_v] \u2265 \u03c4 for some absolute \u03c4>0, we get a linear improvement \u03b4 \u2265 (3/8)\u00b7\u03c4.\n- Hard case isolated: The only regime where this anchored refinement fails to give a constant gain is the \u201cbalanced\u201d one with E_v[T_v]\u21920. This exactly isolates where we must force b \u2264 1/2 \u2212 \u03b3 via additional structure (4-cycles, Q3-type constraints), matching the LP plan from Round 0002.\n\nSmall discrete convexity fact (to be added; proof next round)\n- Claim: For n\u22658, H(r,n) is minimized at r\u2208{\u230an/2\u230b,\u2308n/2\u2309}.\n- Rationale: The leading term is proportional to (C(r,3)+C(n\u2212r,3))^2, whose base C(r,3)+C(n\u2212r,3) is discrete-convex and minimized at balance (Lemma B). The (\u22123)-shifts in C(r\u22123,3) produce O(1/n) corrections that preserve the minimizer for n large. I will provide a clean discrete argument (or a short rearrangement bound) next round.\n\nExamples and sanity checks\n- Balanced coloring (deg_R(v)\u2261n/2): H\u22481/16 and P[\u03c31\u2260\u03c32 | anchored]\u22481/2, so \u0394_anchor\u22480 and the bound reverts to Dvo\u0159\u00e1k\u2019s 1/3 + b/12 (no gain here), exactly as expected.\n- Degree-biased coloring: If a fixed fraction \u03c1 of vertices have |r_v/n \u2212 1/2|\u2265\u03b7, then E_v[T_v]\u2265\u03c1\u03b7^2 and the anchored refinement yields a gain \u2265(3/8)\u03c1\u03b7^2 on the constant in front of n (up to o(1)).\n\nObstacles\n- We have not yet added \u201canchored implies good\u201d as a formal lemma to output.md; current remarks rely on it tacitly. This should be included explicitly (with proof or precise citation) to make the error bounds uniform.\n- The minimization of H(r,n) at balance requires a short but explicit discrete argument; while clear asymptotically, I will supply a fully discrete proof to avoid asymptotic handwaving.\n- Balanced regime: The anchored refinement yields no improvement when E_v[T_v] is tiny. Here we must execute the LP/SDP program to show b \u2264 1/2 \u2212 \u03b3 using 4-cycle and Q3-type consistency.\n\nNext steps (auditable)\n1) Add Lemma E (\u201canchored \u21d2 good\u201d) to output.md with a short proof (or explicit citation to Dvo\u0159\u00e1k\u2019s Lemma 8).\n2) Add Lemma F to output.md: exact anchored\u2013anchored counts and the asymptotic expansion P_v[\u03c31\u2260\u03c32 | anchored] = 1/2 \u2212 18T_v + O(T_v^2 + 1/n). Provide the elementary calculation.\n3) Add Proposition G to output.md: uniformity of shared boundary vertex under the random-geodesic model. This justifies averaging over v.\n4) State and prove the refined global inequality: E[switches] \u2264 (1/3 + b/12 \u2212 6\u00b7E_v[T_v\u00b7H(r_v,n)] + o(1))\u00b7n. This cleanly quantifies the anchored-driven savings.\n5) Prove the discrete minimization: H(r,n) minimized at r\u2248n/2 (all n\u22658). Conclude E_v[T_v\u00b7H(r_v,n)] \u2265 (1/16\u2212O(1/n))\u00b7E_v[T_v].\n6) Balanced-regime LP: Start with the deg_R(v)=n/2 symmetric case; enumerate Q3 2-colorings with a marked vertex, tag good/bad and f1-start color at the mark, encode 4-cycle consistency, and maximize b. Numerical solution will guide an analytic \u03b3>0.\n\nWhy this advances the program\n- We corrected a crucial mis-citation (1 \u2212 p/2 vs. 1 \u2212 p^2) and derived a rigorous, quantified refinement that converts degree variance into a linear constant gain via anchored\u2013anchored pairs, with fully explicit counts.\n- This yields an immediate \u03b4-improvement in a large and natural structural regime (nontrivial degree variance), and narrows the hard case to the near-balanced regime, for which we have a concrete LP plan.\n\nGaps explicitly flagged for output.md\n- Include Lemma E (anchored \u21d2 good) explicitly.\n- Incorporate Lemma F and Proposition G to formalize the anchored-based refinement and the uniformity of boundary-vertex averaging.\n- Update any place where 1 \u2212 p^2 was (mis)used to the correct 1 \u2212 p/2.\n"}]

Current notes.md:
Context and target in Dvořák’s framework
- Dvořák’s modified-geodesic scheme yields the bound E[switches] ≤ (1/3 + b/12 + o(1))·n, where b is the probability that two uniformly random neighboring Q3’s (sharing exactly one vertex) have mixed types (one good, one bad). Because p cancels via p = a + b/2, any constant improvement over 3/8 must either prove b ≤ 1/2 − γ for some absolute γ>0, or reduce the 1/2 bound in the a-term (both-good case).

Why naive block-density does not imply expansion (correct counterexample)
- Brainstorm claim (now rejected): “If a color occupies at least an ε-fraction of each block boundary δS_J for (1−θ) of the blocks, then that color has conductance Ω(ε).” This is false without further structure (e.g., endpoint balance and degree spread).
- Construction (valid undirected 2-coloring): Fix j:[n]→[n] such that j(i)≠i for all i. For each i-edge {x, x⊕e_i}, let y be the endpoint with y_i=0 and color the edge blue iff y_{j(i)}=1; otherwise red. Then for each i, exactly half of the i-edges are blue (so β_J=1/2 for every block J). Yet the blue subgraph can be extremely sparse at many vertices; e.g., if j(1)=2 and j(i)=1 for all i≥2, then for a vertex v, deg_B(v) = (n−1)·[v_1=1] + [v_2=1]. In particular, all vertices with (v_1,v_2)=(0,0) are isolated. Thus block-level edge-density alone does not imply connectivity, let alone conductance.
- Separate but related flaw: Even if a block J has aggregate blue-density β_J = 1/2+ε, one can realize this with each direction i∈J having density 1/2+ε. A geodesic that uses each direction exactly once then sees ≈(1/2−ε)|J| minority edges on average, not O(ε|J|). Any O(ε|J|) claim must extract stronger inner-block structure (e.g., many near-monochromatic directions).

Vertex-wise Kneser-graph formulation and spectral bound
- For a fixed vertex v, Q3’s through v correspond to 3-subsets of [n]. Two Q3’s are v-neighbors iff their 3-sets are disjoint; this is the Kneser graph KG(n,3). If G_v⊆C([n],3) is the set of “good” triples at v, then b_v is the fraction of edges in KG(n,3) crossing the cut (G_v, its complement). The parameter b equals the average of b_v over v, up to negligible normalization.
- Spectral MAX-CUT bound in KG(n,3): KG(n,3) is d-regular with d= C(n−3,3), and its least eigenvalue is −C(n−4,2). Hence for any cut, the crossing-edge fraction is ≤ 1/2 − λ_min/(2d) = 1/2 + 3/(2(n−3)). Therefore b ≤ 1/2 + 3/(2(n−3)). This recovers Dvořák’s b ≤ 1/2 + o(1) and makes the o(1) term explicit.

Per-vertex monochromatic-star lower bound (useful bookkeeping)
- For a vertex v with red degree r_v, the fraction of 3-subsets K such that the three edges at v in directions K are monochromatic equals [C(r_v,3) + C(n−r_v,3)] / C(n,3). This is minimized near r_v≈n/2; explicitly: for n even it equals 2·C(n/2,3)/C(n,3), and for n odd it equals [C((n−1)/2,3)+C((n+1)/2,3)]/C(n,3). Asymptotically this is 1/4 − 3/(4n) + O(1/n^2). This sharpened estimate alone cannot beat 3/8 but is a clean input for any refined accounting of the a-term.

Promising directions to reduce b or the a-term
- LP/SDP relaxation for b: Model local pattern frequencies around v (1-edge colors; 4-cycle types; Q3-types with the f1-chosen color), enforce marginal and 4-cycle consistency, and maximize b. Any universal optimum < 1/2 indicates a path to a combinatorial proof.
- Good–good boundary improvement: Enumerate good Q3 classes, fix canonical tie-breaking for f1, and measure the disagreement probability at v between two disjoint good Q3’s. If it is ≤ 1/2 − η for some η>0, the a-term improves by η.
- Structural lemmas: Seek negative correlation between “badness” indicators for disjoint triples at v, induced by 4-cycle constraints and the forbidden patterns of bad Q3’s. Any quantified negative correlation lowers b below the vertexwise MAX-CUT upper bound.

What to avoid or strengthen
- Avoid relying on block-level densities without per-direction endpoint balance and degree-spread conditions. Any block-phase lemma should explicitly include such hypotheses (e.g., each direction in a good block has bias ≥ε and each vertex has ≥ρ·|J| majority-color incident edges within that block).
Refinement of the both-good boundary step via per-vertex bias
- For a fixed vertex v, let G_v ⊆ C([n],3) denote the collection of 3-sets K for which Q3(v,K) is “good” in Dvořák’s sense. Fix a deterministic tie-breaking for f1 inside each good Q3. Define c_v(K) ∈ {R,B} as the color of the first edge at v along the f1-path inside Q3(v,K). Let t_v = |G_v|, p_v := |{K∈G_v : c_v(K)=R}|/t_v, and u_v := |2p_v − 1|.
- Sampling heuristic made precise: If we pick two good v-neighbor Q3’s uniformly at random (i.e., two disjoint K,L ∈ G_v, unordered), the event “boundary switch occurs” equals [c_v(K) ≠ c_v(L)]. The disjointness constraint perturbs the color distribution only by O(1/n) since each K forbids only O(n^2) partners while t_v = Θ(n^3) (once we know a constant fraction of triples are good at v).

A general pair-sampling lemma (usable abstractly)
- Let T ⊆ C([n],3) be any subset of size t, and c: T → {R,B} any labeling. Let p = |{K∈T: c(K)=R}|/t. If we draw an unordered pair {K,L} uniformly from all disjoint pairs with K,L∈T, then
  P[c(K) ≠ c(L)] = 2p(1−p) ± O(n^2/t).
  Proof idea: For any fixed K, the “forbidden” set S_K = {L∈T: L∩K≠∅} has size O(n^2), so conditioning L to be disjoint from K changes its color distribution by at most O(|S_K|/t) = O(n^2/t). Averaging over K and expanding E[disagree|K] shows that the deviation from 2p(1−p) is bounded by the average of these perturbations.
- Application to both-good pairs at v: Taking T = G_v yields
  P_v[boundary switch | both-good at v] = 1/2 − u_v^2/2 ± O(n^2/t_v).
  By “anchored implies good” (imported from Dvořák) and Lemma B, t_v ≥ (1/4 − O(1/n))·C(n,3) = Θ(n^3), so the error is O(1/n). Note the global “both-good” boundary probability is a weighted average of the per-v quantities with weights proportional to the mass of both-good pairs at v.

Degree imbalance induces bias in c_v via anchored triples
- Let r_v be the red degree at v and x_v = r_v/n. Among all triples K with monochromatic stars at v (anchored at v), c_v(K) is forced to be the star color. Consequently, even ignoring non-anchored good triples one gets
  u_v ≥ |C(r_v,3) − C(n−r_v,3)| / (C(r_v,3) + C(n−r_v,3)).
  For x_v = 1/2 + η with |η| ≪ 1, this gives u_v ≥ 6|η| + O(η^3). Therefore, if a positive fraction ρ of vertices satisfy |x_v − 1/2| ≥ η_0, then E_v[u_v^2] ≥ c·ρ·η_0^2 for some absolute c>0.

Corrected anchored–anchored counts at a fixed vertex
- For r=r_v and b=n−r, the number of ordered v-neighbor pairs (K,L) with both cubes anchored at v equals
  C(r,3)C(r−3,3) + 2C(r,3)C(b,3) + C(b,3)C(b−3,3).
  Among these, the pairs with disagreeing star colors at v are exactly the mixed-color ones, counted by 2C(r,3)C(b,3). Therefore,
  P_v[disagree | both anchored at v] = 2C(r,3)C(b,3) / [C(r,3)C(r−3,3) + 2C(r,3)C(b,3) + C(b,3)C(b−3,3)].
  As n→∞ with x=r/n and t=x−1/2,
  P_v[disagree | anchored] = 2x^3(1−x)^3/(x^3+(1−x)^3)^2 + O(1/n) = 1/2 − 18t^2 + O(t^4 + 1/n).
  In particular, at balance (x=1/2) the anchored–anchored disagreement probability is 1/2 and the anchored–anchored pair probability is ≈(x^3+(1−x)^3)^2 = (1/4)^2 = 1/16 (up to O(1/n)), not 1/32.

Dichotomy and plan
- Unbalanced regime: If E_v[(x_v−1/2)^2] is bounded below, then E_v[u_v^2] is bounded below, and the both-good boundary term drops by a constant (via the pair-sampling lemma), yielding a linear improvement. Anchored–anchored pairs certify this effect concretely.
- Balanced regime: When x_v≈1/2 for most v, we must leverage structural constraints (4-cycle consistency, interaction of good/bad patterns across pairs) to bound b<1/2. Proceed with the proposed LP using: star-type frequencies, 4-cycle types, Q3-types-with-marked-v and their f1-start labels, symmetry constraints, and Dvořák’s characterization of bad cubes.

Immediate technical tasks
- Import or re-prove “anchored at v ⇒ good” to firm up the O(1/n) error uniformly.
- Prove that the anchored–anchored probability is minimized at r≈n/2 for all n≥6 (discrete convexity of F(m)=C(m,3)C(m−3,3) plus symmetry).
- Enumerate Q3 2-coloring classes with marked v; for each good class determine the f1-start at v. This feeds the LP for b in the balanced regime.


Current output.md (if any):
List of proven intermediate results
- Theorem A (Spectral upper bound on the parameter b in Dvořák’s scheme).
- Lemma B (Per-vertex lower bound on monochromatic-star triples).

Theorem A (Spectral upper bound on b)
Statement. Let Q_n be the n-dimensional hypercube with an arbitrary 2-coloring of its edges, and let b denote the probability that two uniformly random neighboring 3-cubes (Q3’s) are of mixed type (one good, one bad) in the sense of Dvořák’s construction. Then for all n ≥ 6,

b ≤ 1/2 + 3/(2(n−3)).

Consequently, Dvořák’s expected switch bound refines to
E[switches] ≤ (1/3 + 1/24 + 1/(8(n−3)) + o(1))·n = (3/8 + 1/(8(n−3)) + o(1))·n.

Proof. Fix a vertex v of Q_n. Q3’s through v correspond bijectively to 3-subsets K ⊆ [n] (the chosen directions), and two such Q3’s are v-neighbors if and only if the 3-sets are disjoint. Thus, the v-neighborhood relation is the Kneser graph KG(n,3) on vertex-set C([n],3), which is d-regular with degree d = C(n−3,3). Let G_v ⊆ C([n],3) be the set of “good” triples at v. The fraction b_v of v-neighbor pairs that are mixed equals the fraction of edges in KG(n,3) crossing the cut (G_v, C([n],3) \ G_v). The global parameter b is the average of b_v over all v (this is a direct consequence of the definition of “neighboring Q3’s” as sharing exactly one vertex; each ordered choice of the shared vertex v and a disjoint pair of triples contributes equally).

For any d-regular graph with adjacency matrix A and least eigenvalue λ_min, the size of any cut is at most |E|·(1/2 − λ_min/(2d)). This follows from the identity that, for a ±1 vector s indicating a cut, the number of crossing edges equals |E|/2 − (1/4) s^T A s, combined with s^T A s ≥ λ_min · s^T s = λ_min · |V| and |E| = d|V|/2. The Kneser graph KG(n,3) has spectrum { C(n−3,3), −C(n−4,2), n−5, −1 } (standard; see e.g. Lovász, 1979), so λ_min = −C(n−4,2). Hence every cut in KG(n,3) has crossing-edge fraction at most 1/2 − (−C(n−4,2))/(2 C(n−3,3)) = 1/2 + C(n−4,2)/(2 C(n−3,3)) = 1/2 + 3/(2(n−3)). Therefore b_v ≤ 1/2 + 3/(2(n−3)) for each v, and averaging gives the same bound for b. The stated corollary for E[switches] follows by substitution into Dvořák’s expression. ∎

Lemma B (Per-vertex lower bound on monochromatic-star triples)
Statement. Let v be a vertex of Q_n and let r_v be the number of red edges incident to v (so n − r_v are blue). The fraction of 3-sets K ⊆ [n] such that the three edges at v with directions K are monochromatic equals

τ_v = [ C(r_v,3) + C(n − r_v,3) ] / C(n,3).

In particular, τ_v is minimized when r_v ∈ {⌊n/2⌋, ⌈n/2⌉}. For n even, the minimum equals 2·C(n/2,3)/C(n,3); for n odd, it equals [C((n−1)/2,3) + C((n+1)/2,3)]/C(n,3). As n→∞, uniformly in v,
	τ_v ≥ 1/4 − 3/(4n) + O(1/n^2).

Proof. Among all 3-sets K, exactly C(r_v,3) of them consist of three red directions at v, and exactly C(n − r_v,3) consist of three blue directions at v. There are C(n,3) total 3-sets, so the fraction is τ_v as stated. Define g(r) = C(r,3) + C(n − r,3) for integer r. Then g(r+1) − g(r) = C(r,2) − C(n − r − 1,2), which is negative for r < (n−1)/2 and positive for r > (n−1)/2; hence g is minimized at r ∈ {⌊n/2⌋, ⌈n/2⌉}. Substituting these values yields the explicit minima. The asymptotic expansion follows by a routine Taylor expansion of the ratio of polynomials in n. ∎
Lemma C (Pair-sampling stability under a disjointness constraint)
Statement. Let n≥6 and let T⊆C([n],3) be any subset of 3-sets of size t=|T|. Fix any labeling c: T→{R,B} and write p := |{K∈T : c(K)=R}|/t. If an unordered pair {K,L} is drawn uniformly from all pairs with K,L∈T and K∩L=∅, then

P[c(K)≠c(L)] = 2p(1−p) ± C·(n^2/t),

for some absolute constant C>0 (independent of n and T).

Proof. For K∈T, let T_K := {L∈T : L∩K=∅} and write q(K) := |{L∈T_K : c(L)=R}|/|T_K|. Let s(K):=1 if c(K)=R and 0 otherwise. If we generate a random unordered disjoint pair by first sampling K uniformly from T and then sampling L uniformly from T_K (and finally forgetting the order), its law is within a factor 2 of the uniform law on unordered disjoint pairs, so computing the disagreement probability under this sequential scheme suffices up to a harmless constant normalization (which cancels in the final equality below).

For fixed K, the probability of disagreement equals s(K)·(1−q(K)) + (1−s(K))·q(K). Averaging over K gives

P[c(K)≠c(L)] = E_K[q(K)] + E_K[s(K)] − 2E_K[q(K)·s(K)].

Let p = E_K[s(K)] and write q(K)=p+δ(K). Then

P[c(K)≠c(L)] = 2p(1−p) + E_K[δ(K)·(1−2s(K))].

Hence |P[c(K)≠c(L)] − 2p(1−p)| ≤ E_K[|δ(K)|]. It remains to bound |δ(K)| uniformly. For any K, all elements of T that are excluded from T_K (including K itself) lie in the set S_K := {L∈T : L∩K≠∅}∪{K}. Since K is a 3-set, the number of 3-sets intersecting K is at most 3·C(n−1,2) + 3·(n−1) + 1 = O(n^2). Therefore, removing S_K from T perturbs the color fraction by at most |S_K|/t ≤ C′·n^2/t for some absolute C′, i.e., |δ(K)| ≤ C′·n^2/t. Averaging over K yields the claimed bound with C=C′. ∎

Corollary D (Refined both-good disagreement at a fixed vertex)
Statement. Fix a vertex v. Let G_v⊆C([n],3) be the set of “good” triples at v (in Dvořák’s scheme), let t_v=|G_v|, and define c_v:G_v→{R,B} as the color of the first edge at v selected by f1 inside Q3(v,K). Set p_v := |{K∈G_v : c_v(K)=R}|/t_v and u_v := |2p_v−1|. Then, when {K,L} is drawn uniformly from unordered pairs of disjoint elements of G_v,

P[c_v(K)≠c_v(L)] = 1/2 − u_v^2/2 ± C·(n^2/t_v),

with the same absolute constant C as in Lemma C. In particular, if t_v ≥ δ·C(n,3) for some absolute δ>0 (as ensured once one imports that every monochromatic star at v is good), then the error term is O(1/n).

Proof. Apply Lemma C with T=G_v and p=p_v; observe that 2p_v(1−p_v) = 1/2 − u_v^2/2. ∎

Remark (Applicability in Dvořák’s framework). By standard facts in the modified-geodesic scheme (anchored-at-v cubes are good), Lemma B implies t_v ≥ [C(r_v,3)+C(n−r_v,3)], whence t_v = Θ(n^3) uniformly in v. Thus the error term in the corollary is O(1/n).

