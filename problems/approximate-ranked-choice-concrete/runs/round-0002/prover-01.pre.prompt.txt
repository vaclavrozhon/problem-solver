=== SYSTEM ===
You are a research mathematician. 

You are being run in a loop with a verifier that checks rigor. Your goal is to make **incremental, auditable progress**. You are not expected to solve the problem at once, but to generate new, testable ideas.

Inputs: 
- task statement 
- notes.md (informal progress & exploratory work; optional) 
- proofs.md (rigorously proven results & detailed proofs; optional) 
- output.md (main results summary only; optional) 
- summary of past rounds (optional) 
- possibly some reference papers.

What counts as progress:
- Extract small lemmas/heuristics from literature and state them cleanly with one-line "why useful here".
- Explore small examples & try to break your own claims with toy counterexamples.
- Prove special cases or nontrivial bounds.
- If an approach fails, explain crisply why.
- Point out flaws in notes.md, proofs.md, or output.md (but do not rewrite these files yourself).

**Discipline.** 
- Read notes, outputs, summaries carefully before proposing new work. 
- Reference papers if relevant, but focus on *incremental, checkable steps*. 
- Do not output Markdown code fences, only raw JSON. 
- Length: at least ~200 words. 
- Organize your reasoning with short headings (Ideas, Examples, Obstacles, Next steps), make clear what your claims are and how they are supported. 
- Remember: the verifier curates notes and outputs, you only suggest.

**Output**: Write your analysis as Markdown that includes both informal reasoning and any rigorous proofs. The verifier will decide what goes into notes.md, proofs.md, and output.md.

**Return strictly JSON**:
{
  "content": "Your complete analysis in Markdown (KaTeX allowed). Include reasoning, examples, proofs, failed attempts, intuitions - everything for the verifier to review."
}


=== USER ===
=== Task (txt) ===

# Problem Statement

We consider the problem of estimating the winner in an election run under **Ranked Choice Voting** (also known as *Instant-Runoff Voting*).  

Suppose there are \(K\) candidates. Each voter submits a complete ranking of these candidates. The voting rule proceeds in rounds: in each round, every ballot is assigned to the top-ranked candidate who is still in contention. The candidate with the smallest number of votes is eliminated (with ties broken according to a fixed deterministic rule), and this candidate is crossed out from all ballots. The process repeats until only one candidate remains, who is declared the winner.

Our goal is not to compute the exact winner from the full set of ballots, but rather to estimate a *robust* winner from a random sample of ballots. To make this precise, we introduce the notion of an **ε-winner**. A candidate \(c\) is called an ε-winner of an election profile if it is possible to add at most an ε-fraction of additional ballots to the election so that \(c\) becomes the winner under Ranked Choice Voting. In other words, \(c\) is “close” to being the true winner, in the sense that a small perturbation of the electorate would make \(c\) win. There may be more ε-winners. The real winner is ε-winner for any ε. 

The sampling model is as follows. We assume there is a large population of voters, each ballot drawn independently from the empirical distribution of this population. The algorithm does not see all the ballots; instead, it may sample ballots at random, with replacement. The task of the algorithm is: given parameters \(\varepsilon\) and \(\delta\), and access to at most \(m\) random ballots, output a candidate \(\hat{c}\) such that with probability at least \(1-\delta\), the candidate \(\hat{c}\) is an ε-winner of the true election.

There is a natural algorithm for this problem: Sample a subset of votes and run the ranked-choice algorithm on them; output the winner. How many samples are needed for this algorithm to succeed? We seek the best possible upper and lower bound. 



=== Notes ===

# Research Notes



# Certificates and sampling for IRV ε-winners

- Notation: For S⊆C, a∈S, p_a(S)=Pr[top_S(ballot)=a]. Adding ε mass of c-first ballots increases c’s tallies by ε for every S containing c and leaves others’ tallies unchanged (compare absolute counts; normalization is irrelevant for elimination).

- Correct sufficient certificate (uniform): If for every nonempty S⊇{c} we have p_c(S) ≥ min_{a∈S\{c}} p_a(S) − ε (with tie-breaking known and either strict margins or reserved slack), then after adding ε mass of c-first ballots, c is never strictly below the minimum and hence cannot be eliminated; thus c wins.

- Caveat on single-chain certificates: Verifying inequalities only along one elimination chain of opponents is insufficient for K≥4, because the actual post-augmentation elimination path may visit sets not on the chosen chain. Therefore the earlier Lemma 1 (single-chain witness) is not a valid sufficient condition in general.

- K=3 case: There are only two relevant sets containing c (C and {c,x}). A union bound over the 9 quantities {p_a(S)}_{a∈S} yields uniform deviation, and adding ε mass to the sample winner ĉ suffices with ε=2α.

- Adaptivity: For sample-run IRV, one can control all top-of-set frequencies uniformly by a union bound over K·2^{K−1} indicators; this is exponential computationally but only linear in K in the sample size via the log term.

- Two-phase certification idea: Use a holdout sample to compute B̃(c)=max_{S⊇{c}}(min_{a∈S\{c}} p̃_a(S)−p̃_c(S)). If B̃(c)≤ε/2 (and uniform deviation ≤ε/4), then c is an ε-winner. This avoids chain-dependence but may be computationally heavy.

- Lower bounds: K=2 needs m=Ω((1/ε^2)·log(1/δ)). A Fano construction suggests m=Ω((log K)/ε^2) for identifying a unique ε/4-winner among K candidates; to be formalized with explicit IRV distributions.

- Next steps: (i) Provide a minimal counterexample demonstrating failure of single-chain certificates for K≥4 (or a proof that extra conditions suffice). (ii) Finalize the K=3 theorem with corrected constants and full tie handling. (iii) Either analyze the one-phase algorithm via a uniform bound that implies ε-winning, or switch to a two-phase max-deficit certificate. (iv) Complete the Fano lower bound.



=== Current Output ===

# Main Results



- K=3 upper bound (natural algorithm): If m ≥ (2/ε^2)·ln(18/δ), then with probability ≥ 1−δ the sample IRV winner is an ε-winner.
- Baseline lower bound (K=2): Any algorithm needs m = Ω((1/ε^2)·log(1/δ)).
- General K: a single-chain certificate is insufficient; a correct sufficient certificate must hold uniformly over all S⊇{c}. Establishing tight bounds for the natural algorithm when K≥4 remains open.


=== Round 1 Summary ===

This round analyzed sample complexity and certificates for finding an ε-winner under IRV. Main positive result: for K=3, running IRV on m ≥ (2/ε^2)·ln(18/δ) i.i.d. ballots yields the sample winner ĉ which is an ε-winner with probability ≥1−δ (Hoeffding + union bound over 9 top-of-set events). We proved a correct uniform sufficient certificate: if for every S⊇{c}, p_c(S) ≥ min_{a∈S\{c}} p_a(S) − ε then c is an ε-winner. We also found the previously proposed single-chain certificate is unsound for K≥4 (the elimination path after augmentation can visit sets off the chosen chain). Lower bounds: K=2 requires m = Ω((1/ε^2)·log(1/δ)); a Fano-type construction suggests m = Ω((log K)/ε^2) to identify a unique ε-winner among K (to be formalized). Two practical approaches were proposed—(i) one-phase uniform control (union bound over K·2^{K−1} top-of-set indicators, computationally exponential but adds only Θ(K) in the log factor of m), and (ii) a two-phase holdout max-deficit certificate (correct but computationally heavy). Citations: Research Notes; Current Proofs.


=== Previous Round Feedback ===

High-level: There’s a solid start (clean notation, sampling model, and a plausible analysis path). The K=3 case is essentially correct up to constants, but the general “chain certificate” (Lemma 1) is not yet rigorous for K≥4. Proposition 3 depends on Lemma 1 and therefore is not currently justified. Below are specific audits and suggested next steps.

1) Lemma 1 (chain certificate): The proof only checks inequalities along one prescribed chain S_K ⊃ S_{K−1} ⊃ … ⊃ S_2. IRV’s actual elimination path after adding ε mass to c is uniquely determined by tallies and the fixed tie-breaking rule and generally need not follow that chain. Showing that c is not eliminated along one particular chain does not imply c survives the actual path unless one proves that, for every set S encountered along the actual path, c’s tally is ≥ the minimum among others. The current argument does not establish that property for sets not on the chosen chain. Thus, for K≥4 the lemma is not a valid sufficient condition as stated. A correct sufficient certificate would require: for every S⊇{c}, p_c(S) ≥ min_{a∈S\{c}} p_a(S) − ε (plus a tie-handling convention). This is stronger (2^{K−1} checks) but correct.

2) K=3 bound (Proposition 2): The approach is sound, but the stated constant is off. With α=√(ln(18/δ)/(2m)), enforcing 2α ≤ ε gives m ≥ (2/ε^2)·ln(18/δ), not (8/ε^2). The proof should also explicitly note that we add ε mass of c-first ballots (compare absolute tallies, not renormalized shares), so others’ counts are unchanged for all S containing c.

3) Split-sample bound (Proposition 3): Conditioning on the phase-1 chain does remove adaptivity in estimation, but relying only on comparisons versus b̂_t along that single chain does not guarantee ĉ survives the actual (post-augmentation) elimination path for K≥4. To fix this, the phase-2 verification must ensure, for every round-set S that may be encountered by the elimination rule under the augmented profile, that p_c(S)+ε ≥ min_{a≠c} p_a(S). A computationally heavy but valid approach is to verify this for all S⊇{ĉ} on the holdout sample (uniform deviation via Hoeffding + union bound over K·2^{K−1} indicators).

4) Lower bounds: The K=2 Le Cam lower bound is correct in order. The Fano sketch is plausible; it needs an explicit IRV-compatible construction and the proof that each instance has a unique ε/4-winner.

Concrete next steps:
- Repair Lemma 1 or replace it with a correct certificate (uniform over all S⊇{c}). Provide a minimal counterexample or proof of impossibility of single-chain certificates for K≥4.
- Finalize and write a rigorous proof for K=3 with corrected constants and explicit tie handling.
- For general K, either: (a) analyze the natural one-phase algorithm via a uniform union bound over all (S,a) to control adaptivity and then prove a statement that connects these uniform bounds to ε-winner status; or (b) adopt a two-phase “certify-by-max-deficit” algorithm: on holdout, compute B̃(c)=max_{S⊇{c}}(min_{a∈S\{c}} p̃_a(S)−p̃_c(S)), and output any c with B̃(c) ≤ ε/2.
- Formalize the Ω((log K)/ε^2) Fano lower bound.
