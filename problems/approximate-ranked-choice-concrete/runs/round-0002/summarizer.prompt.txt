=== SYSTEM ===
You are a research **summarizer**. Summarize this *last round only* for a human log.

Include:
- 3–7 bullet **Highlights** (facts learned, reductions, counterexamples, partial bounds).
- 1–3 **Open questions / TODOs** for the next round.
- 1–3 **Citations to files** you relied on (e.g. round files or papers by name).

**Return strictly JSON**:
{
  "summary_md": "Readable summary of the round (≤200 words)",
  "highlights": [],
  "next_questions": []
}

=== USER ===
=== prover-01 ===

## Audit of current output and quick fixes

- Additive-ballot normalization: Correctly used as P′ = (P + α Q)/(1+α) throughout Theorem 1 and Lemma 2. Good.
- Tie-breaking: Theorem 1 implicitly ensures strict positivity of all margins in P′, so tie-breaking becomes irrelevant; this should be stated explicitly in the proof (to avoid any dependence on the fixed rule once the certificate fires).
- Counting identity U: A simpler and fully explicit combinatorial proof would help. See Lemma A below.
- Certify-or-abstain vs. unconditional guarantee: Theorem 1 proves a certify-or-abstain statement. It does not, and cannot, guarantee that the natural algorithm outputs an ε-winner w.p. ≥ 1−δ uniformly over all P without further assumptions on true margins. This gap relative to the problem’s “succeed” phrasing should be flagged in output.md.
- K=3 corollary: The statement is sound; an explicit list of the O(1) functionals and a concrete constant in the sample bound would strengthen it. See Corollary B below.

## Ideas

1) Parametric path certificate (one-line why useful). A sharpened version of Theorem 1 that decouples the empirical slack τ and the uniform deviation η, yielding a data-dependent certificate and explicit α ≤ ε. This lets the algorithm compute a guaranteed ε̂ from the sample: ε̂ := max{0, min(τ−η, ε)}.

2) Minimal α accounting (one-line why useful). Given uniform deviation bound η and observed margins, upper bound the minimal α (for the single-ranking Q) needed to realize σ on the true P. This quantifies robustness and can yield tighter guarantees than the fixed “2ε” trigger.

3) Clean combinatorial proof of U = K(K−1) 2^{K−2} (one-line why useful). Streamlines Lemma 1’s union bound and removes reliance on the binomial-moment identity.

4) K=3 lower bound via Le Cam (one-line why useful). Establishes Ω((log(1/δ))/ε^2) necessity for any method, matching our upper bound’s ε, δ dependence in the simplest nontrivial case.

## Statements and proofs/sketches

Lemma A (Counting of path functionals). Let F = { (A,y,x): A⊆[K], |A|≥2, y≠x∈A }. Then |F| = U = K(K−1) 2^{K−2}.
Proof. For each ordered pair (y,x) with y≠x (K(K−1) choices), any A that contains both y and x is formed by choosing an arbitrary subset of the remaining K−2 candidates, so 2^{K−2} choices. Multiply.

Lemma C (Parametric path-wise certificate). Fix σ=(e_1,…,e_{K−1},w) produced by IRV on the sample S. Suppose a uniform concentration event holds: |d_{r,y}(S) − d_{r,y}(P)| ≤ η for all r,y. Let τ := min_{r,y} d_{r,y}(S). If τ > η, then for any α ∈ [0, τ−η], the same σ is feasible on P′:=(P+αQ)/(1+α) where Q is the point mass on ranking (w, e_{K−1}, …, e_1); in particular, w is an (τ−η)-winner for P.
Reason. For y≠w, d_{r,y}(P′) = d_{r,y}(P)/(1+α) ≥ (τ−η)/(1+α) > 0. For y=w, d_{r,w}(P′) = (d_{r,w}(P)+α)/(1+α) ≥ (τ−η+α)/(1+α) > 0. Hence all feasibility inequalities are strictly positive, so σ executes on P′ and w wins.

Corollary B (Explicit K=3 certificate with constants). Let K=3, S be an m-sample, and suppose S’s elimination order is (e,o,w). Define
- First round: M1 := min{ score_o(S;[3]) − score_e(S;[3]), score_w(S;[3]) − score_e(S;[3]) }.
- Final pair: M2 := Pr_S[w ≻ o] − Pr_S[o ≻ w].
Let τ := min{M1, M2}. If m ≥ (1/(2η^2)) (log(12) + log(1/δ)) and τ ≥ η + ε, then w is an ε-winner w.p. ≥ 1−δ. In particular, taking η=ε yields m ≥ (1/(2ε^2))(log 12 + log(1/δ)) and the simple trigger “all three margins ≥ 2ε.”
Sketch. The class has at most 6 functionals (two first-round differences, one pairwise difference, and their negatives). Apply Hoeffding+union bound with 2U ≤ 12. Then apply Lemma C with τ−η ≥ ε.

Example check (K=3). Let P place mass p_A = 0.51 on w≻o≻e and p_B = 0.49 on o≻w≻e. Then round 1 eliminates e (score_e=0), and in the final pair M2 = 0.02. With ε=0.01, η=0.01, τ=0.02, the certificate fires; adding α=0.01 of Q = (w,o,e) yields d_{2,w}(P′) = (0.02+0.01)/1.01 > 0 while d_{1,o}, d_{1,w} shrink but stay positive.

Lemma D (Minimal α upper bound from sample). Under the uniform deviation bound η and given σ from S, define τ := min_{r,y} d_{r,y}(S). Then any α ≤ τ−η suffices to realize σ on P′ with Q as above. In particular, the data-driven bound α∗ := (τ−η)_+ is feasible and α∗ ≤ ε whenever τ ≥ η + ε.
Proof. Immediate from Lemma C.

Lemma E (K=3 Le Cam lower bound). Fix ε ∈ (0, 1/6). Consider two electorates on K=3 supported on {A: w≻o≻e, B: o≻w≻e}: P_+ with P_+(A)=1/2+ε, P_+(B)=1/2−ε; P_- with P_-(A)=1/2−ε, P_-(B)=1/2+ε. Then for target ε (same symbol) and any algorithm that, from m i.i.d. ballots, outputs a candidate who is an ε-winner of the true election with probability ≥ 1−δ for both P_+ and P_-, it must hold that m ≥ c log(1/δ)/ε^2 for an absolute constant c>0.
Why sets of ε-winners are disjoint. Under P_+, e is eliminated immediately (score_e=0). The final pair margin is M2=2ε in favor of w. For ε<1/6, any α≤ε leaves round-1 elimination unchanged, and to make o beat w in the final pair requires α≥M2=2ε. Thus under P_+, the only ε-winner is w. Symmetrically, under P_- the only ε-winner is o. Hence any algorithm must identify which world it is in (binary testing). Information bound. The observations reduce to m i.i.d. draws from a Bernoulli with mean 1/2±ε (indicator of A). Standard tail or KL bounds (KL(P_+||P_-) ≈ 8ε^2 for small ε) imply m ≥ c log(1/δ)/ε^2 is necessary for error ≤ δ.

## Obstacles and open items

- Uniform-in-P success of the natural algorithm: Without assumptions on true path margins, no fixed m can guarantee that the sample winner is an ε-winner w.p. ≥ 1−δ uniformly over all electorates. Our results are certify-or-abstain; quantifying the rate at which the abstain event occurs requires margin conditions.
- K-dependence lower bounds: While the union bound suggests an O(K/ε^2) price for certification, a matching lower bound requires constructing a packing of electorates whose ε-winner sets are nearly disjoint and whose induced ballot laws are pairwise close. Ensuring IRV consistency across many rounds while “hiding” the critical inequality remains delicate.
- Tight α accounting when some d_{r,w}(S) are small: Lemma C tolerates small d_{r,w} using the +α boost, but for y≠w margins shrink by 1/(1+α). Balancing these may lead to slightly stronger, round-dependent α choices if one enriches Q beyond a single ranking; this complicates composition and is left open.

## Next steps

1) Integrate Lemma C (parametric certificate) and Lemma A (counting) into output.md, clarifying tie-breaking.
2) Flesh out Lemma E with explicit constants via KL(P_+||P_-) and Chernoff bounds; include a short proof that e is not an ε-winner in either instance for ε<1/6.
3) K=3: Provide an explicit list of the three functionals and compute the exact m bound m ≥ (1/(2ε^2))(log(12)+log(1/δ)).
4) Toward K-dependent lower bounds: attempt a family where the first-round loser is unique but “hidden” among Θ(K) candidates by perturbing first-choice rates by ±ε while keeping later rounds fixed; analyze disjointness of ε-winner sets and pairwise divergences.
5) Empirical margin estimator: recommend reporting ε̂ := max{0, τ−η} as a certified tolerance derived from the sample, together with m and δ; this is immediately supported by Lemma C.



=== prover-02 ===

Ideas
- Parametrized certificate (decoupling accuracy and robustness). Introduce two knobs: a concentration radius γ for the uniform deviation event and a target robustness α (the amount of added ballots). If along the empirical path σ we have all margins d_{r,y}(S) ≥ α + γ, then on the uniform event |d_{r,y}(S) − d_{r,y}(P)| ≤ γ we get d_{r,y}(P) ≥ α. Mixing with Q (the single ranking R = (w, e_{K−1}, …, e_1)) at level α yields, for all r,y≠w, d_{r,y}(P′) = d_{r,y}(P)/(1+α) ≥ α/(1+α) > 0 and for y = w, d_{r,w}(P′) ≥ (α+α)/(1+α) > 0. Hence σ is feasible in P′ and w is an α-winner. This strictly generalizes the 2ε→ε threshold in the current output.
- Clean separation of roles: choose γ via uniform Hoeffding over U = K(K−1)2^{K−2} functionals; choose α ≤ ε as the robustness budget we certify. Then a one-line certify-or-abstain condition: min_{r,y} d_{r,y}(S) ≥ α+γ.
- Counting identity proof sketch. U = Σ_{A} |A|(|A|−1) over nonempty A with |A|≥2. Let S ∼ Bin(K, 1/2) be the size of a uniformly random subset; E[S(S−1)] = K(K−1)E[Z_1Z_2] with Z_i ∼ Ber(1/2) iid, hence K(K−1)2^{K}·(1/4)/2^{K} = K(K−1)/4. Multiplying by the number of subsets 2^K and dividing by 4 yields U = K(K−1)2^{K−2}. Alternatively, double-count ordered pairs (y,x) and subsets containing them.

Examples
- K=3 lower-bound instance (Le Cam two-point). Candidates a,b,c. Fix a robust first-round elimination of c by setting first-place shares a: (1−s)/2, b: (1−s)/2, c: s with s ∈ (0, 1/3). Choose distributions supported on the six rankings with all masses identical except on types with c on top:
  • P+: r_1 = P[c ≻ a ≻ b] = s/2 + ε, r_2 = P[c ≻ b ≻ a] = s/2 − ε.
  • P−: r_1 = s/2 − ε, r_2 = s/2 + ε.
  Keep p_1+p_2 = q_1+q_2 = (1−s)/2 and split these arbitrarily (identically under P+ and P−) so first-round shares match exactly. Then c is eliminated first under both. Final decision equals the a vs b pairwise majority: margin m_ab(P±) = r_1 − r_2 = ±2ε. Thus under P+, a is the IRV winner; under P−, b is the IRV winner; moreover, under P−, a is not an ε-winner (since mixing with α=ε yields margin (−2ε+ε)/(1+ε) < 0). The total variation between P+ and P− equals 2ε; the KL satisfies KL(P+||P−) = (s/2+ε)log((s/2+ε)/(s/2−ε)) + (s/2−ε)log((s/2−ε)/(s/2+ε)) ≤ c_s ε^2 with c_s = 8/s for ε ≤ s/4 (from Taylor’s theorem and convexity). Hence, by Le Cam, any algorithm that outputs an ε-winner with error ≤ δ must use m ≥ (1/c_s)·Ω(log(1/δ))/ε^2 = Ω((log(1/δ))/ε^2).
- Toy certificate check (K=4). Suppose the empirical path is e_1=4, e_2=3, e_3=2 with winner w=1, and the per-round empirical margins are 0.08, 0.06, 0.05. With γ = 0.02 (from m via Lemma 1) and α = 0.03 ≤ ε, we have min margin 0.05 ≥ α+γ, so certification triggers; after mixing, all non-w margins shrink to ≥ α/(1+α) ≈ 0.029 > 0.

Obstacles and gaps
- Current output’s Theorem 1 fixes α = ε and requires d_{r,y}(S) ≥ 2ε. This is correct under the additive model, but the dependence on ε is somewhat rigid. The parametrized version above allows any α ≤ ε and any γ achieved by m.
- Success probability of the “always output empirical winner” algorithm cannot be bounded uniformly over all P without a gap assumption on P (e.g., Γ := min_{r,y} d_{r,y}(P) ≥ margin). The certificate yields a standard gap-dependent guarantee: if Γ ≥ α + 2γ, then with probability ≥ 1−δ (the uniform event) the algorithm’s sample path has min margin ≥ α + γ and we certify an α-winner. This gap-dependence should be stated explicitly.
- Constants in Lemma 1. The output uses a generic C. A precise instantiation: with m ≥ (2/γ^2)(log(2U) + log(1/δ)), we get uniform deviation ≤ γ by Hoeffding plus union bound (accounting for signs). This can be threaded through the parametrized certificate to produce an explicit m.

Formal lemmas (ready to add to output)
- Lemma (Parametrized certificate). Fix α ∈ (0,1/2) and γ ∈ (0,1/2). On the event sup_{A,y≠x} |(score_y(S;A)−score_x(S;A))−(score_y(P;A)−score_x(P;A))| ≤ γ, if along the empirical IRV path σ we have min_{r,y} d_{r,y}(S) ≥ α + γ, then the empirical winner w is an α-winner for P.
- Theorem (Gap-dependent guarantee). Suppose Γ := min_{r,y} d_{r,y}(P) ≥ α + 2γ. If m ≥ (2/γ^2)(log(2U) + log(1/δ)), then with probability ≥ 1−δ the empirical winner w is an α-winner for P.
- Lemma (K=3 Le Cam lower bound). For any δ ∈ (0,1/3) and ε ≤ s/4 with s ∈ (0,1/3), there exist P+, P− as above such that any algorithm using m samples that, with probability ≥ 1−δ, outputs an ε-winner must satisfy m ≥ c (log(1/δ))/ε^2, where c = s/32 (by the bound KL(P+||P−) ≤ 8ε^2/s and Bretagnolle–Huber inequality). In particular, for a fixed constant s (e.g., s = 1/4), we get m = Ω((log(1/δ))/ε^2).

Next steps
- Insert the parametrized certificate and gap-dependent theorem into output.md with full proofs (including the algebra with normalization (P+αQ)/(1+α)).
- Finalize the K=3 lower bound with explicit constants (verify KL bound rigorously: use second derivative at 0 equals 4/(s/2) and convexity to upper bound for |ε| ≤ s/4).
- K-dependence lower bound sketch to formalize: construct a packing of M ≈ exp(Θ(K)) instances by choosing one round/competitor y* at which the true margin is ±2ε, while all other constraints have slack Ω(1). Apply Fano to obtain m ≥ Ω((log M)/ε^2) = Ω(K/ε^2) under a prior. As a stepping stone, prove at least an Ω((log K)/ε^2) bound by packing over O(K) choices of the critical constraint.
- Tighten constants in the uniform bound via Bernstein/Chernoff (the top-among-A indicators have variance ≤ p(1−p)); document whether this yields meaningful gains in m for moderate K.

Notes on gaps in current output.md
- Add the parametrized version to avoid hard-coding 2ε and to clearly separate γ (from m,δ,K) and the target α ≤ ε.
- State and prove the gap-dependent guarantee explicitly; currently it is implicit.
- For Corollary 2 (K=3), list the exact finite set of functionals needed and compute U_K=3 = 12 to justify the m = O((log(1/δ))/ε^2) claim with an explicit constant.


=== Verifier Feedback ===

Overall, the current output establishes a clean and essentially correct certify-or-abstain guarantee for the natural IRV sampler using a uniform concentration argument over the family of top-among-A score differences. The key ingredients (uniform Hoeffding + union bound over U = K(K−1)2^{K−2} functionals, and a single added ranking Q to realize the observed path) are sound. The proof of Theorem 1 is correct under the additive-ballot model and handles adaptivity by uniform concentration. A minor but important clarity fix: once strict positivity of all d_{r,y}(P′) is achieved, tie-breaking becomes irrelevant—this should be stated explicitly.

The counting identity for U is correct; a short combinatorial proof (ordered pairs (y,x) times subsets containing them) streamlines the presentation. The parametric strengthening proposed by both provers (decoupling the empirical slack τ := min d_{r,y}(S) and the uniform deviation η (or γ)) is a worthwhile addition: it yields a data-dependent certified robustness α̂ = (τ − η)_+ and strictly generalizes the 2ε → ε trigger used in Theorem 1.

On lower bounds, the K=3 two-point construction is solid and directly shows Ω((log(1/δ))/ε^2) samples are necessary. Be careful to prove that, under P_+, only w is an ε-winner (and under P_− only o is), uniformly over all added distributions Q with α ≤ ε. This follows because: (i) e remains the unique first-round loser for all α ≤ ε < 1/3, and (ii) the final pairwise margin can only be reduced by at most α in the numerator before renormalization, so flipping a 2ε margin requires α ≥ 2ε. For the information bound, it is cleaner to use Bretagnolle–Huber (or Chernoff) to get m ≥ c log(1/δ)/ε^2 with an explicit c depending on s.

What to add to output.md now: (1) a short remark clarifying tie-breaking irrelevance once strict inequalities hold; (2) a combinatorial proof of the counting identity U; (3) a parametrized certificate theorem with proof; (4) a gap-dependent success theorem; (5) a K=3 corollary with explicit functionals and constants; (6) a K=3 Le Cam-style lower bound with explicit constants. These are all rigorous and build upon the existing content. Avoid making unconditional success claims for the empirical winner without margin assumptions.

Next steps for provers:
- Generalize the data-dependent certificate into a simple certify-or-abstain procedure computing α̂ = (τ − γ)_+ with γ chosen from m, δ, K; prove its correctness (done) and document its practical use.
- Tighten constants via Bernstein/Freedman (variance-sensitive) if desired, and document whether it meaningfully reduces m for moderate K.
- Push on K-dependent lower bounds: construct a packing where a single round’s critical inequality is perturbed among Θ(K) alternatives while others have constant slack; then apply Fano to show m ≥ Ω((log K)/ε^2) or even Ω(K/ε^2) under a prior.
- For K=3, explicitly list the three functionals used and finalize the constants in the Hoeffding/union bound; include both-sided deviation accounting (factor 2) to avoid ambiguity.
- Consider whether mixtures of a few rankings (not just one) could further reduce the certified α; if pursued, be explicit about composition under renormalization to keep proofs airtight.