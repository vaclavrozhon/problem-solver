{
  "feedback_md": "Overall, the current output establishes a clean and essentially correct certify-or-abstain guarantee for the natural IRV sampler using a uniform concentration argument over the family of top-among-A score differences. The key ingredients (uniform Hoeffding + union bound over U = K(K\u22121)2^{K\u22122} functionals, and a single added ranking Q to realize the observed path) are sound. The proof of Theorem 1 is correct under the additive-ballot model and handles adaptivity by uniform concentration. A minor but important clarity fix: once strict positivity of all d_{r,y}(P\u2032) is achieved, tie-breaking becomes irrelevant\u2014this should be stated explicitly.\n\nThe counting identity for U is correct; a short combinatorial proof (ordered pairs (y,x) times subsets containing them) streamlines the presentation. The parametric strengthening proposed by both provers (decoupling the empirical slack \u03c4 := min d_{r,y}(S) and the uniform deviation \u03b7 (or \u03b3)) is a worthwhile addition: it yields a data-dependent certified robustness \u03b1\u0302 = (\u03c4 \u2212 \u03b7)_+ and strictly generalizes the 2\u03b5 \u2192 \u03b5 trigger used in Theorem 1.\n\nOn lower bounds, the K=3 two-point construction is solid and directly shows \u03a9((log(1/\u03b4))/\u03b5^2) samples are necessary. Be careful to prove that, under P_+, only w is an \u03b5-winner (and under P_\u2212 only o is), uniformly over all added distributions Q with \u03b1 \u2264 \u03b5. This follows because: (i) e remains the unique first-round loser for all \u03b1 \u2264 \u03b5 < 1/3, and (ii) the final pairwise margin can only be reduced by at most \u03b1 in the numerator before renormalization, so flipping a 2\u03b5 margin requires \u03b1 \u2265 2\u03b5. For the information bound, it is cleaner to use Bretagnolle\u2013Huber (or Chernoff) to get m \u2265 c log(1/\u03b4)/\u03b5^2 with an explicit c depending on s.\n\nWhat to add to output.md now: (1) a short remark clarifying tie-breaking irrelevance once strict inequalities hold; (2) a combinatorial proof of the counting identity U; (3) a parametrized certificate theorem with proof; (4) a gap-dependent success theorem; (5) a K=3 corollary with explicit functionals and constants; (6) a K=3 Le Cam-style lower bound with explicit constants. These are all rigorous and build upon the existing content. Avoid making unconditional success claims for the empirical winner without margin assumptions.\n\nNext steps for provers:\n- Generalize the data-dependent certificate into a simple certify-or-abstain procedure computing \u03b1\u0302 = (\u03c4 \u2212 \u03b3)_+ with \u03b3 chosen from m, \u03b4, K; prove its correctness (done) and document its practical use.\n- Tighten constants via Bernstein/Freedman (variance-sensitive) if desired, and document whether it meaningfully reduces m for moderate K.\n- Push on K-dependent lower bounds: construct a packing where a single round\u2019s critical inequality is perturbed among \u0398(K) alternatives while others have constant slack; then apply Fano to show m \u2265 \u03a9((log K)/\u03b5^2) or even \u03a9(K/\u03b5^2) under a prior.\n- For K=3, explicitly list the three functionals used and finalize the constants in the Hoeffding/union bound; include both-sided deviation accounting (factor 2) to avoid ambiguity.\n- Consider whether mixtures of a few rankings (not just one) could further reduce the certified \u03b1; if pursued, be explicit about composition under renormalization to keep proofs airtight.",
  "summary_md": "",
  "verdict": "partial success",
  "blocking_issues": [],
  "per_prover": [
    {
      "prover_id": "01",
      "brief_feedback": "Your parametric certificate (Lemma C) is correct and a valuable generalization; the counting Lemma A is clean. For the lower bound (Lemma E), ensure the proof that only w (resp. only o) is an \u03b5-winner under P_+ (resp. P_\u2212) covers all Q with \u03b1 \u2264 \u03b5 and explicitly uses \u03b1 < 1/3 to keep e as the first loser; use Bretagnolle\u2013Huber to pin down constants. Good job highlighting tie-breaking irrelevance once strict inequalities hold.",
      "score": "promising"
    },
    {
      "prover_id": "02",
      "brief_feedback": "Your parametrized condition min d_{r,y}(S) \u2265 \u03b1+\u03b3 and the gap-dependent guarantee are correct and should be integrated. The K=3 lower-bound instance is well-chosen; tighten the KL bound with an explicit inequality (e.g., ln((a+\u03b5)/(a\u2212\u03b5)) \u2264 2\u03b5/(a\u2212\u03b5)) to get KL \u2264 16\u03b5^2/s for \u03b5 \u2264 s/4, then apply Bretagnolle\u2013Huber. Clarify the exact count of functionals for K=3 and the two-sided union bound factor.",
      "score": "promising"
    }
  ],
  "notes_update": {
    "mode": "append",
    "content_md": "Path-wise IRV certificate and uniform concentration (refined)\n\n- For A \u2286 [K], |A| \u2265 2 and x \u2208 A, define score_x(P; A) = Pr[x is top-ranked among A on a random ballot]. For elimination order \u03c3 = (e_1, \u2026, e_{K\u22121}, w), set A_r := [K] \\ {e_1,\u2026,e_{r\u22121}}, and define d_{r,y}(P) := score_y(P; A_r) \u2212 score_{e_r}(P; A_r) for y \u2208 A_r \\ {e_r}. Feasibility of \u03c3 under P is equivalent to d_{r,y}(P) \u2265 0 for all r,y (with a fixed deterministic tie-break consistent with \u03c3).\n- Additive-ballot model: c is an \u03b5-winner for P if \u2203 distribution Q over rankings and \u03b1 \u2208 [0, \u03b5] such that IRV run on P\u2032 = (P + \u03b1 Q)/(1+\u03b1) elects c.\n- Single-ranking certificate Q: Fix \u03c3 with winner w. Let R be the ranking (w, e_{K\u22121}, \u2026, e_1) and Q = \u03b4_R. Then for all r,y \u2260 w, d_{r,y}(Q) = 0 and for y = w, d_{r,w}(Q) = 1. Consequently, d_{r,y}(P\u2032) = (d_{r,y}(P) + \u03b1 d_{r,y}(Q))/(1+\u03b1).\n- Uniform concentration: The family F = { (A,y,x) \u21a6 score_y(\u00b7;A) \u2212 score_x(\u00b7;A) } has cardinality U = \u03a3_{s=2}^K C(K,s) s(s\u22121) = K(K\u22121) 2^{K\u22122}. Hoeffding + union bound gives a uniform deviation bound \u03b3 with m = O((K + log(1/\u03b4))/\u03b3^2).\n- Parametric certificate: Let \u03c4 := min_{r,y} d_{r,y}(S). On the uniform event sup_{\u2113\u2208F} |\u2113(S) \u2212 \u2113(P)| \u2264 \u03b3, if \u03c4 > \u03b3 then for any \u03b1 \u2208 [0, \u03c4 \u2212 \u03b3] the same \u03c3 is feasible on P\u2032 = (P+\u03b1Q)/(1+\u03b1), hence w wins in P\u2032 and is an (\u03c4\u2212\u03b3)-winner for P. This generalizes the 2\u03b5\u2192\u03b5 trigger by decoupling sample slack from uniform deviation.\n- Tie-breaking: Once all d_{r,y}(P\u2032) > 0, elimination is unique in every round and does not depend on the tie-breaking rule.\n\nK = 3 specialization and lower bound\n- For K=3 with empirical order (e, o, w), the relevant functionals are: score_o(\u00b7; [3]) \u2212 score_e(\u00b7; [3]), score_w(\u00b7; [3]) \u2212 score_e(\u00b7; [3]), and Pr[w \u227b o] \u2212 Pr[o \u227b w] (which equals score_w(\u00b7; {w,o}) \u2212 score_o(\u00b7; {w,o})). A uniform bound over these three (two-sided) gives m \u2265 (2/\u03b3^2)(log 6 + log(1/\u03b4)). The certificate triggers if all three empirical margins exceed \u03b1 + \u03b3, certifying w as an \u03b1-winner.\n- Two-point lower bound (K=3): Construct P_+, P_\u2212 supported on w\u227bo\u227be and o\u227bw\u227be with masses 1/2\u00b1\u03b5 (and e always last). For any \u03b1 \u2264 \u03b5 < 1/3 and any Q, e remains the unique first-round loser, and the final pairwise margin changes as (2\u03b5 + \u03b1\u0394)/(1+\u03b1) with \u0394 \u2208 [\u22121,1], so it cannot flip unless \u03b1 \u2265 2\u03b5. Therefore, under P_+ only w is an \u03b5-winner, and under P_\u2212 only o is. Using Bretagnolle\u2013Huber with KL(P_+||P_\u2212) = 2\u03b5 ln((s/2+\u03b5)/(s/2\u2212\u03b5)) \u2264 4\u03b5^2/(s/2\u2212\u03b5) \u2264 16\u03b5^2/s (for \u03b5 \u2264 s/4), any algorithm that outputs an \u03b5-winner with probability \u2265 1\u2212\u03b4 for both P_+, P_\u2212 requires m \u2265 (s/16)\u00b7(log(1/(4\u03b4)))/\u03b5^2, i.e., m = \u03a9((log(1/\u03b4))/\u03b5^2).\n\nNext targets\n- Integrate the parametrized certificate and a gap-dependent guarantee into output.md with full proofs and explicit constants. Provide a simple data-dependent certification rule \u03b1\u0302 = max{0, \u03c4 \u2212 \u03b3}.\n- Strengthen constants (optional) via Bernstein-type bounds; document impact.\n- Develop K-dependent lower bounds via packings over rounds/constraints and Fano\u2019s method (aiming for \u03a9((log K)/\u03b5^2) or \u03a9(K/\u03b5^2) under priors)."
  },
  "output_update": {
    "mode": "append",
    "content_md": "Remark (Tie-breaking becomes irrelevant under strict margins). In all certification theorems below, once we establish d_{r,y}(P\u2032) > 0 for all rounds r and competitors y \u2208 A_r \\ {e_r} under a perturbed profile P\u2032, the eliminated candidate e_r is the unique minimizer of top-among-A_r score. Hence the IRV path \u03c3 executes independent of any tie-breaking convention.\n\nLemma A (Counting of path functionals). Let F = { (A,y,x): A \u2286 [K], |A| \u2265 2, y \u2260 x \u2208 A }. Then |F| = U = K(K\u22121) 2^{K\u22122}.\nProof. Fix an ordered pair (y,x), y \u2260 x (K(K\u22121) choices). The subsets A that contain both y and x are formed by choosing any subset of the remaining K\u22122 candidates, giving 2^{K\u22122} choices. Multiply.\n\nTheorem 1\u2032 (Parametric path-wise certificate). Let S be an m-sample from P, and let \u03c3 = (e_1,\u2026,e_{K\u22121}, w) be the IRV order obtained from S. Suppose a uniform deviation bound holds:\n  sup_{A \u2286 [K], |A| \u2265 2} sup_{y \u2260 x \u2208 A} |(score_y(S;A) \u2212 score_x(S;A)) \u2212 (score_y(P;A) \u2212 score_x(P;A))| \u2264 \u03b3.\nDefine \u03c4 := min_{r} min_{y \u2208 A_r \\ {e_r}} d_{r,y}(S). If \u03c4 > \u03b3, then for any \u03b1 \u2208 [0, \u03c4 \u2212 \u03b3], the same order \u03c3 is feasible on P\u2032 := (P + \u03b1 Q)/(1+\u03b1), where Q is the point mass on the ranking (w, e_{K\u22121}, \u2026, e_1). In particular, w is an (\u03c4\u2212\u03b3)-winner for P.\nProof. For each r and y \u2260 e_r, the uniform bound yields d_{r,y}(P) \u2265 d_{r,y}(S) \u2212 \u03b3 \u2265 \u03c4 \u2212 \u03b3. Under Q we have d_{r,y}(Q) = 0 for y \u2260 w and d_{r,w}(Q) = 1. Hence for y \u2260 w, d_{r,y}(P\u2032) = d_{r,y}(P)/(1+\u03b1) \u2265 (\u03c4\u2212\u03b3)/(1+\u03b1) > 0; for y = w, d_{r,w}(P\u2032) = (d_{r,w}(P) + \u03b1)/(1+\u03b1) \u2265 (\u03c4\u2212\u03b3+\u03b1)/(1+\u03b1) > 0. Therefore all margins along \u03c3 are strictly positive in P\u2032, so \u03c3 is feasible and w wins.\n\nCorollary 1.1 (Data-driven certified robustness). Under the conditions of Theorem 1\u2032, define \u03b1\u0302 := max{0, \u03c4 \u2212 \u03b3}. Then w is an \u03b1\u0302-winner for P. Moreover, for any target \u03b5, if \u03b1\u0302 \u2265 \u03b5, then w is an \u03b5-winner.\n\nTheorem 2 (Gap-dependent guarantee for the natural IRV sampler). Let \u0393 := min_{r} min_{y \u2208 A_r \\ {e_r}} d_{r,y}(P) be the true minimum path margin for the elimination order \u03c3 induced by P. Fix \u03b1 > 0 and \u03b3 > 0 with \u0393 \u2265 \u03b1 + 2\u03b3. If m \u2265 (2/\u03b3^2)(log(2U) + log(1/\u03b4)), then with probability at least 1 \u2212 \u03b4 the uniform deviation bound holds with radius \u03b3 and the empirical path satisfies \u03c4 \u2265 \u0393 \u2212 \u03b3 \u2265 \u03b1 + \u03b3. By Theorem 1\u2032, the empirical winner w is an \u03b1-winner for P.\nProof. Hoeffding\u2019s inequality for averages of variables in [\u22121,1] gives for any fixed (A,y,x): Pr(|\u2026| > \u03b3) \u2264 2 exp(\u2212 m \u03b3^2/2). Union bound over U functionals and their negations gives the stated m for the uniform deviation. The rest follows by plugging into Theorem 1\u2032.\n\nCorollary 2 (K=3, explicit certificate with constants). Let K=3 and suppose the empirical IRV order on S is (e, o, w). Define\n- M1 := min{ score_o(S;[3]) \u2212 score_e(S;[3]), score_w(S;[3]) \u2212 score_e(S;[3]) },\n- M2 := Pr_S[w \u227b o] \u2212 Pr_S[o \u227b w] = score_w(S;{w,o}) \u2212 score_o(S;{w,o}),\n- \u03c4 := min{M1, M2}.\nIf m \u2265 (2/\u03b3^2)(log 6 + log(1/\u03b4)) and \u03c4 \u2265 \u03b1 + \u03b3, then with probability at least 1 \u2212 \u03b4 the candidate w is an \u03b1-winner for P. In particular, taking \u03b1 = \u03b5 and \u03b3 = \u03b5 yields the simple trigger \u201call three margins \u2265 2\u03b5\u201d with m \u2265 (2/\u03b5^2)(log 6 + log(1/\u03b4)).\nProof. Only the three listed functionals (and two-sided deviations) are needed. Apply Hoeffding + union bound (factor 6) for a uniform \u03b3; then apply Theorem 1\u2032.\n\nTheorem 3 (K=3 two-point lower bound). Fix s \u2208 (0, 1/3) and \u03b5 \u2208 (0, s/4). Consider candidates w, o, e and the two electorates P_+, P_- supported on the two rankings R_1 = (w \u227b o \u227b e), R_2 = (o \u227b w \u227b e) with masses P_+(R_1) = 1/2 + \u03b5, P_+(R_2) = 1/2 \u2212 \u03b5 and P_-(R_1) = 1/2 \u2212 \u03b5, P_-(R_2) = 1/2 + \u03b5. Then for any algorithm that, given m iid ballots, outputs a candidate who is an \u03b5-winner of the true election with probability at least 1 \u2212 \u03b4 under both P_+ and P_-, it must hold that\n  m \u2265 (s/16) \u00b7 (log(1/(4\u03b4))) / \u03b5^2.\nProof. For any added distribution Q and \u03b1 \u2264 \u03b5 < 1/3, e\u2019s first-place share in P\u2032 := (P_+ + \u03b1 Q)/(1+\u03b1) is at most \u03b1/(1+\u03b1) < 1/3, while w and o each have first-place shares at least (1/2 \u2212 \u03b5)/(1+\u03b1) > 1/3. Hence e remains the unique first-round loser under both P_+ and P_- for all \u03b1 \u2264 \u03b5; IRV thus reduces to the pairwise w vs o decision. The pairwise margin under P_+ equals M2 = 2\u03b5. Under mixing with \u03b1 and any Q, the new pairwise margin is (M2 + \u03b1\u0394)/(1+\u03b1) where \u0394 \u2208 [\u22121,1] is the w vs o skew of Q. This cannot flip sign unless \u03b1 \u2265 2\u03b5. Therefore, under P_+, only w is an \u03b5-winner; under P_- only o is. Any algorithm that succeeds with probability \u2265 1 \u2212 \u03b4 on both P_+, P_- thus solves a simple-vs-simple testing problem on the single-ballot distribution. By Bretagnolle\u2013Huber, for product distributions of size m we have \n  inf_\u03c6 [P_+(\u03c6=\u2212) + P_-(\u03c6=+)] \u2265 (1/2) exp(\u2212 m KL(P_+||P_-)).\nHere KL(P_+||P_-) = (1/2 + \u03b5) ln((1/2 + \u03b5)/(1/2 \u2212 \u03b5)) + (1/2 \u2212 \u03b5) ln((1/2 \u2212 \u03b5)/(1/2 + \u03b5)) = 2\u03b5 ln((1/2 + \u03b5)/(1/2 \u2212 \u03b5)). For the variant with a fixed buffer s on e\u2019s first-place mass (if desired), one may embed this instance in a larger support with e\u2019s top share s and w/o shares (1 \u2212 s)/2 each; then KL(P_+||P_-) = 2\u03b5 ln((s/2 + \u03b5)/(s/2 \u2212 \u03b5)) \u2264 4\u03b5^2/(s/2 \u2212 \u03b5) \u2264 16\u03b5^2/s for \u03b5 \u2264 s/4 (using ln(1+x) \u2264 x/(1 \u2212 x/2)). Requiring both type-I and type-II errors \u2264 \u03b4 implies 2\u03b4 \u2265 (1/2) exp(\u2212 m KL), hence m \u2265 (log(1/(4\u03b4)))/KL \u2265 (s/16) (log(1/(4\u03b4)))/\u03b5^2. This yields the claimed \u03a9((log(1/\u03b4))/\u03b5^2) lower bound with an explicit constant.\n\nDiscussion. The parametric certificate makes the certify-or-abstain logic fully data-driven: with a chosen \u03b3 from m, K, \u03b4 and observed \u03c4 from S, the algorithm can confidently certify \u03b1\u0302 = (\u03c4 \u2212 \u03b3)_+. The gap-dependent theorem quantifies when certification succeeds with high probability. The K = 3 lower bound shows the \u03b5, \u03b4 scaling is unimprovable (up to constants)."
  }
}