=== SYSTEM ===
You are a strict mathematical verifier & research manager.

You are being run in a loop with provers. Your tasks:
- Audit their ideas for correctness and rigor.
- Curate files (notes.md, proofs.md, and output.md).
- Suggest the next steps.

Inputs: 
- task statement
- outputs of provers
- notes.md (informal progress & exploratory work so far)
- proofs.md (rigorous proofs & detailed mathematics so far)
- output.md (main results summary so far)

**Three-tier file system guidelines**:
- **notes.md**: Readable running log of exploratory work, intuitions, failed attempts, ideas. Prefer appending. Replace only if old notes are clearly misleading. Should be self-contained.
- **proofs.md**: Complete rigorous mathematical proofs with full details. Contains proven lemmas, theorems, and detailed derivations. Only add mathematically verified content here.
- **output.md**: ONLY the main problem results. Think twice before adding anything. Should contain a concise summary of the most important theorems that directly advance the main problem. Extremely selective.

Tasks:
1) Audit rigor: identify unjustified steps, false statements, missing lemmas; produce minimal counterexamples.
2) Triage value: separate genuine progress from noise.
3) Guide next steps: propose what provers should try next.

**Return strictly JSON**:
{
  "feedback_md": "Detailed critique of prover outputs (≥200 words). Include concrete next-step suggestions.",
  "summary_md": "Concise summary of this round's work for summarizer.",
  "verdict": "promising|uncertain|unlikely",
  "blocking_issues": ["List of issues preventing progress"],
  "per_prover": [{"prover_id": "01", "brief_feedback": "feedback", "score": "promising|uncertain|unlikely"}],
  "notes_update": {"action": "append|replace", "content": "Markdown for notes.md"},
  "proofs_update": {"action": "append|replace", "content": "Markdown for proofs.md"}, 
  "output_update": {"action": "append|replace", "content": "Markdown for output.md"}
}

**Verdict definitions**:
- **promising**: Significant mathematical progress, publishable results, or clear path to solution
- **uncertain**: Some progress but with unresolved issues or incomplete reasoning  
- **unlikely**: No meaningful progress, fundamentally flawed approaches, or just exploratory work

**Update guidelines**:
- Use null for any update field you don't want to modify
- notes_update: Include informal reasoning, failed attempts, intuitions, exploratory work
- proofs_update: Only include complete, rigorous proofs that you have verified
- output_update: Only include main problem results that directly advance toward the solution


=== USER ===
=== Task (txt) ===

# Problem Statement

We consider the problem of estimating the winner in an election run under **Ranked Choice Voting** (also known as *Instant-Runoff Voting*).  

Suppose there are \(K\) candidates. Each voter submits a complete ranking of these candidates. The voting rule proceeds in rounds: in each round, every ballot is assigned to the top-ranked candidate who is still in contention. The candidate with the smallest number of votes is eliminated (with ties broken according to a fixed deterministic rule), and this candidate is crossed out from all ballots. The process repeats until only one candidate remains, who is declared the winner.

Our goal is not to compute the exact winner from the full set of ballots, but rather to estimate a *robust* winner from a random sample of ballots. To make this precise, we introduce the notion of an **ε-winner**. A candidate \(c\) is called an ε-winner of an election profile if it is possible to add at most an ε-fraction of additional ballots to the election so that \(c\) becomes the winner under Ranked Choice Voting. In other words, \(c\) is “close” to being the true winner, in the sense that a small perturbation of the electorate would make \(c\) win. There may be more ε-winners. The real winner is ε-winner for any ε. 

The sampling model is as follows. We assume there is a large population of voters, each ballot drawn independently from the empirical distribution of this population. The algorithm does not see all the ballots; instead, it may sample ballots at random, with replacement. The task of the algorithm is: given parameters \(\varepsilon\) and \(\delta\), and access to at most \(m\) random ballots, output a candidate \(\hat{c}\) such that with probability at least \(1-\delta\), the candidate \(\hat{c}\) is an ε-winner of the true election.

There is a natural algorithm for this problem: Sample a subset of votes and run the ranked-choice algorithm on them; output the winner. How many samples are needed for this algorithm to succeed? We seek the best possible upper and lower bound. 



=== Notes ===

# Research Notes



# Certificates and sampling for IRV ε-winners

- Notation: For S⊆C, a∈S, p_a(S)=Pr[top_S(ballot)=a]. Adding ε mass of c-first ballots increases c’s tallies by ε for every S containing c and leaves others’ tallies unchanged (compare absolute counts; normalization is irrelevant for elimination).

- Correct sufficient certificate (uniform): If for every nonempty S⊇{c} we have p_c(S) ≥ min_{a∈S\{c}} p_a(S) − ε (with tie-breaking known and either strict margins or reserved slack), then after adding ε mass of c-first ballots, c is never strictly below the minimum and hence cannot be eliminated; thus c wins.

- Caveat on single-chain certificates: Verifying inequalities only along one elimination chain of opponents is insufficient for K≥4, because the actual post-augmentation elimination path may visit sets not on the chosen chain. Therefore the earlier Lemma 1 (single-chain witness) is not a valid sufficient condition in general.

- K=3 case: There are only two relevant sets containing c (C and {c,x}). A union bound over the 9 quantities {p_a(S)}_{a∈S} yields uniform deviation, and adding ε mass to the sample winner ĉ suffices with ε=2α.

- Adaptivity: For sample-run IRV, one can control all top-of-set frequencies uniformly by a union bound over K·2^{K−1} indicators; this is exponential computationally but only linear in K in the sample size via the log term.

- Two-phase certification idea: Use a holdout sample to compute B̃(c)=max_{S⊇{c}}(min_{a∈S\{c}} p̃_a(S)−p̃_c(S)). If B̃(c)≤ε/2 (and uniform deviation ≤ε/4), then c is an ε-winner. This avoids chain-dependence but may be computationally heavy.

- Lower bounds: K=2 needs m=Ω((1/ε^2)·log(1/δ)). A Fano construction suggests m=Ω((log K)/ε^2) for identifying a unique ε/4-winner among K candidates; to be formalized with explicit IRV distributions.

- Next steps: (i) Provide a minimal counterexample demonstrating failure of single-chain certificates for K≥4 (or a proof that extra conditions suffice). (ii) Finalize the K=3 theorem with corrected constants and full tie handling. (iii) Either analyze the one-phase algorithm via a uniform bound that implies ε-winning, or switch to a two-phase max-deficit certificate. (iv) Complete the Fano lower bound.



=== Current Output ===

# Main Results



- K=3 upper bound (natural algorithm): If m ≥ (2/ε^2)·ln(18/δ), then with probability ≥ 1−δ the sample IRV winner is an ε-winner.
- Baseline lower bound (K=2): Any algorithm needs m = Ω((1/ε^2)·log(1/δ)).
- General K: a single-chain certificate is insufficient; a correct sufficient certificate must hold uniformly over all S⊇{c}. Establishing tight bounds for the natural algorithm when K≥4 remains open.


=== Prover 1 Output ===

# Corrections, certificates, examples, and provable bounds

## 1) Correct sufficient certificate (uniform over sets)
Lemma 1 (Uniform max-deficit certificate). Fix c. Define
B(c) := max_{S⊇{c}} [ min_{a∈S\{c}} p_a(S) − p_c(S) ].
If B(c) ≤ ε (with tie-breaking not eliminating c on ties after adding an infinitesimal slack), then c is an ε-winner. In particular, adding ε fraction of c-first ballots suffices.

Proof. Adding ε of c-first ballots increases p_c(S) by ε for every S containing c and leaves p_a(S) for a≠c unchanged (we compare absolute tallies, not normalized shares). Hence for every S⊇{c}: p′_c(S) = p_c(S)+ε ≥ min_{a≠c} p_a(S) = min_{a≠c} p′_a(S). So c is never strictly below the minimum at any round encountered by IRV under the augmented profile, and therefore cannot be eliminated. ∎

Remark. This certificate is sufficient, not necessary: IRV’s elimination path under augmentation might visit a strict subset of the S, allowing smaller ε to suffice.

Why useful here: It yields a verifiable condition turning the ε-winner question into finitely many inequalities over S⊇{c}.


## 2) Counterexample: single-chain certificates fail for K≥4
We exhibit a profile on C={a,b,c,d} where the “single-chain” check (comparing only versus designated b_t along one chain) incorrectly certifies c, yet c does not win even after adding ε mass of c-first ballots.

Ballot types and weights:
- T1: c>a>d>b with weight x=0.34.
- T2: a>d>c>b with weight y=0.29.
- T3: d>c>a>b with weight z=0.34.
- T4: b>a>d>c with weight δ=0.03.
Total 1.

Computed tallies:
- Full set C: p_c(C)=x=0.34, p_a(C)=y=0.29, p_d(C)=z=0.34, p_b(C)=δ=0.03. First-round minimum is b.
- On S={a,c,d}: T1→c, T2→a, T3→d, T4→a, so p_c=0.34, p_a=0.32, p_d=0.34. Minimum among others is a.
- Pair {c,a}: c beats a, with p_c=x+z=0.68, p_a=y+δ=0.32.
- Pair {c,d}: c loses to d, with p_c=x=0.34, p_d=y+z+δ=0.66.

IRV elimination: remove b first (0.03), then on {a,c,d} remove a (0.32), leaving final pair {c,d}, where c loses. Thus c is not the winner.

Yet the “chain” that checks S=C (vs b), then S={a,c,d} (vs a), then pair {c,a} would (incorrectly) conclude that c can be made an ε-winner with ε≈0.03: indeed at C we have p_c−p_b=0.31, at {a,c,d} we have p_c−p_a=0.02, and at {c,a} c wins handily. After adding ε=0.03 fraction of c-first ballots, c still loses versus d in the final pair, so the chain certificate is false.

Takeaway: Any certificate restricted to one elimination chain (and only comparing to chosen b_t rather than the round’s true minimum) is unsound for K≥4.


## 3) Two-phase certification algorithm with sample complexity
Algorithm (holdout certificate for the sample winner):
- Phase 1: Draw m1 ballots, run IRV to get ĉ (no guarantee needed in this phase).
- Phase 2: Draw m2 fresh ballots. For all S⊇{ĉ} and a∈S\{ĉ}, estimate p̃_a(S), p̃_{ĉ}(S). Compute B̃(ĉ)=max_{S⊇{ĉ}}(min_{a∈S\{ĉ}} p̃_a(S)−p̃_{ĉ}(S)). If B̃(ĉ) ≤ ε/2, output ĉ.

Proposition 2. If m2 ≥ (2/ε^2)·ln(2K·2^{K−1}/δ), then with probability ≥1−δ, whenever Phase 2 outputs ĉ, that ĉ is an ε-winner.

Proof. Condition on Phase 1. For each fixed (S,a), the indicator g_{S,a}(ballot)=1[top_S(ballot)=a] has mean p_a(S). The total number of such functions with ĉ fixed is at most K·2^{K−1} (each S⊇{ĉ}, each a∈S). Hoeffding plus union bound yields a uniform deviation |p̃_a(S)−p_a(S)| ≤ ε/4 simultaneously for all those (S,a) with probability ≥1−δ if m2≥(2/ε^2)ln(2K·2^{K−1}/δ). Then B(ĉ) ≤ B̃(ĉ)+ε/2 ≤ ε, so Lemma 1 applies. ∎

Comments:
- This cleanly bypasses adaptivity: we fix ĉ and the family {g_{S,a}} before Phase 2.
- Sample complexity m2 scales as O((K+log(1/δ))/ε^2). Computationally, Phase 2 is exponential in K due to enumerating S.


## 4) K=3: a provable guarantee under a mild separation condition
Let C={c,a,b}. Write x*=argmax_{x∈{a,b}} p_x(C).

Proposition 3 (K=3 with separation). Suppose |p_a(C)−p_b(C)| ≥ γ. Draw m i.i.d. ballots and run IRV on them to get ĉ. If m ≥ (8/ε^2)·ln(18/δ) and γ ≥ ε/2 (so that α:=√(ln(18/δ)/(2m)) ≤ ε/4 ≤ γ/2), then with probability ≥1−δ the output ĉ is an ε-winner of the true election.

Proof. Uniformly over the 9 quantities {p_x(S)} with S∈{C,{c,a},{c,b}} and x∈S, Hoeffding+union bound gives |p̂_x(S)−p_x(S)| ≤ α. Let x̂ be the more popular of {a,b} in the sample on S=C. By α ≤ γ/2, we have x̂=x*. On the sample profile, since ĉ is the IRV winner, ĉ is not the minimum at C, and ĉ beats x̂ in the final pair. Hence p̂_{ĉ}(C) ≥ min_{y∈{a,b}} p̂_y(C), and p̂_{ĉ}({ĉ,x̂}) ≥ p̂_{x̂}({ĉ,x̂}). Transferring to truth: p_{ĉ}(C) ≥ min_{y} p_y(C) − 2α and p_{ĉ}({ĉ,x*}) ≥ p_{x*}({ĉ,x*}) − 2α. Adding ε≥2α mass of ĉ-first ballots makes ĉ safe at C and win against x*; since x* is the true final opponent, ĉ wins IRV. ∎

Remarks.
- Without the separation |p_a(C)−p_b(C)| ≥ γ, the sample may misidentify the true final opponent, and bounding the (true) pair versus the actual final opponent from the sample winner alone is generally impossible.
- This strengthens and corrects the K=3 discussion: the guarantee hinges on identifying the true final opponent at C.


## 5) Lower bounds: refined statements to formalize
- Two-candidate baseline. For K=2, deciding whether the output is an ε-winner reduces to distinguishing Bernoulli means within ε/2; any algorithm needs m=Ω((1/ε^2)·log(1/δ)).
- Log-K Fano lower bound. Construct K instances over ballots where for each i the unique ε/4-winner is i, with pairwise KL divergence Θ(ε^2). Then any algorithm that finds an ε/2-winner with error ≤δ needs m=Ω((log K)/ε^2). We will provide an explicit IRV-compatible family and verify uniqueness of ε/4-winner in each.

Why useful: Matches the O((K+log(1/δ))/ε^2) upper order up to a linear vs logarithmic dependence on K, suggesting near-optimality unless Ω(K/ε^2) can be shown.


## 6) Obstacles and failed approaches
- One-phase “natural algorithm” (run IRV on the sample and directly output ĉ) for K≥4 remains challenging: the property “ĉ is winner on the sample” does not imply the uniform certificate B̂(ĉ)≤0; there can exist S not on the sample path where ĉ is below the minimum among others, and these S may become relevant under the true augmented process.
- Attempted simplification “pairs suffice” is false in general: B(c) can be attained at a non-pair S because top-of-S constraints link more than two candidates (we have explicit constructions where triple deficits exceed any pair deficit). Hence checking only head-to-heads is insufficient.


## 7) Next steps
- Prove and record a compact “uniform certificate ⇒ ε-winning” theorem with explicit tie handling (reserve ε/100 slack) suitable for proofs.md.
- Optimize the holdout bound constants; tighten M in the union bound to ≤(K−1)2^{K−2} by noting that for each S we only need the minimum among others rather than all a.
- Explore whether B(c) is always achieved on an “IRV-reachable” set S along some elimination order; if true, it could reduce the 2^{K−1} blowup to polynomially many S. Either prove or give a counterexample.
- Formalize the Fano lower bound with a concrete K-ary construction tailored to IRV.
- For K=3, investigate whether the separation assumption can be relaxed by a small extra ε budget that simultaneously covers both possible final opponents.


## 8) Small verification example (K=3)
Let C={c,a,b}. Suppose p_a(C)=0.37, p_b(C)=0.31, p_c(C)=0.32 (so x*=a). Head-to-heads: p_c({c,a})=0.51, p_c({c,b})=0.60. Then B(c)=max{ (0.31−0.32), (0.49−0.51), (0.40−0.60) }^+=0.01, attained at S=C. Adding ε=0.01 of c-first ballots makes c an IRV winner (remains above both at C, then beats a head-to-head). This illustrates the certificate and that the worst S need not be a pair.