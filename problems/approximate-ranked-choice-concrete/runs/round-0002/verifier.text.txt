{"feedback_md":"Strong progress. You correctly abandoned the single-chain witness and replaced it with a uniform max-deficit certificate B(c). That certificate (when used with strict slack) is sound and neatly captures the ε-winner notion. Your K≥4 counterexample is convincing and directly refutes chain-only checks; note it is even stronger than stated: in your instance the chain inequalities hold with ε=0, yet c still loses, so single-chain certifications can fail catastrophically.\n\nThe two-phase (holdout) certification algorithm is on solid footing. Minor refinements: (i) count the functions more tightly as M = (K−1)·2^{K−2} (for others) plus 2^{K−1} (for c), so M ≤ (K+1)·2^{K−2}; (ii) state the guarantee with a strict threshold to avoid tie-handling issues: if uniform deviation ≤ ε/4 and B̃(ĉ) ≤ ε/2 − ξ, then B(ĉ) ≤ ε − ξ and ĉ is an ε-winner. If you want to use the threshold ε/2 exactly, you must additionally assume the tie-breaking rule will not eliminate ĉ when equality occurs after adding ε.\n\nYour K=3 result with separation is well-motivated: correctly identifying the final opponent x* is needed if you only verify the sample’s final pair. The constant m ≥ (8/ε^2)·ln(18/δ) follows from enforcing α ≤ ε/4; the logic that x* is the true final opponent if c survives the first round is correct. The proof cleanly yields strict margins, so tie issues are avoided.\n\nLower bounds: K=2 (Le Cam) is fine. The Fano Ω((log K)/ε^2) plan is promising but needs a concrete IRV-compatible family and a uniqueness proof for the ε/4-winner.\n\nNext steps:\n- Formalize the holdout theorem with the tightened M and explicit strict-threshold tie handling.\n- Move the K=3-with-separation theorem into proofs; remove the earlier unconditional K=3 bound.\n- Either analyze the one-phase algorithm via a uniform-over-all-S deviation argument that implies B̂(ĉ) small, or design a computationally lighter certificate family than all S (e.g., prove B(c) is attained on an IRV-reachable S).\n- Complete the Fano construction.\n","summary_md":"Replaced the flawed chain certificate with a correct uniform max-deficit certificate B(c). Gave a concrete K≥4 counterexample showing chain-based checks can fail even with ε=0. Proved a two-phase holdout certification guarantee (with sample complexity via Hoeffding + union bound), and a K=3 theorem under a separation assumption ensuring the sample identifies the correct final opponent. Clarified tie-handling by requiring strict slack. Updated proofs and main results accordingly; general K one-phase analysis remains open.","verdict":"uncertain","blocking_issues":["Chain-based ε-certificates are invalid for K≥4; need uniform-over-S or a provably sufficient reduced family.","Tie-breaking at equality requires strict slack or explicit assumptions; current statements must encode this.","General-K analysis of the one-phase natural algorithm remains unresolved.","Fano-type Ω((log K)/ε^2) lower bound not yet formalized with explicit IRV instances."],"per_prover":[{"prover_id":"01","brief_feedback":"Good fixes: uniform certificate is sound (with strict slack), strong K≥4 counterexample, solid two-phase certification, and a clean K=3 result under separation. Tighten the union-bound count, encode strict thresholds to avoid tie issues, and formalize the Fano lower bound. Remove the earlier unconditional K=3 claim.","score":"promising"}],"notes_update":{"action":"append","content":"## Refinements and validations\n\n- Single-chain certificates fail (explicit K=4 counterexample). Ballot types and weights:\n  T1: c>a>d>b (0.34), T2: a>d>c>b (0.29), T3: d>c>a>b (0.34), T4: b>a>d>c (0.03). First round eliminates b; then on {a,c,d} eliminate a; final pair {c,d} with c losing 0.34 vs 0.66. Chain checks against b then a and the pair {c,a} all pass (even with ε=0), yet c does not win. Hence chain-only witnesses are unsound for K≥4.\n\n- Uniform max-deficit certificate. Define B(c)=max_{S⊇{c}} (min_{a∈S\\{c}} p_a(S) − p_c(S)). If B(c) < ε, then adding ε mass of c-first ballots makes c safe in every S and thus an ε-winner. If only B(c) ≤ ε, either assume the tie-breaking never eliminates c on equality or require a strict slack.\n\n- Two-phase holdout certification. Phase 1: pick ĉ by running IRV on m1 samples. Phase 2: estimate all p_a(S) for S⊇{ĉ} and a∈S on an independent holdout of size m2. With Hoeffding + union bound over M = (K−1)·2^{K−2} (others) plus 2^{K−1} (ĉ) indicators, uniform deviation ≤ ε/4 holds if m2 ≥ (2/ε^2)·ln(2M/δ). If B̃(ĉ) ≤ ε/2 − ξ, then B(ĉ) ≤ ε − ξ and ĉ is an ε-winner. Threshold ε/2 without slack requires favorable tie-breaking on equality.\n\n- K=3 with separation. If |p_a(C) − p_b(C)| ≥ γ and m ≥ (8/ε^2)·ln(18/δ) with γ ≥ ε/2 (so α ≤ ε/4 ≤ γ/2), then the sample more-popular opponent x̂ equals the true x*, and the sample winner ĉ is an ε-winner with probability ≥ 1−δ by verifying safety at C and a head-to-head win versus x*.\n\n- Open directions: (i) Reduce the family of S needed for certification (are worst-case S IRV-reachable?). (ii) One-phase analysis via uniform deviations that imply B̂(ĉ) small. (iii) Complete the Fano Ω((log K)/ε^2) lower bound with an explicit IRV family.\n"},"proofs_update":{"action":"replace","content":"Preliminaries. Let C be the K candidates. For nonempty S⊆C and a∈S, let p_a(S)=Pr[top_S(ballot)=a], where top_S(x) is the highest-ranked candidate from S on ballot x. Adding ε fraction of c-first ballots increases p_c(S) by ε for every S⊇{c} and leaves p_a(S) for a≠c unchanged (we compare absolute tallies).\n\nLemma (Uniform certificate). Fix c∈C and define B(c)=max_{S⊇{c}} (min_{a∈S\\{c}} p_a(S) − p_c(S)). If B(c) < ε, then c is an ε-winner. If B(c) ≤ ε and, whenever equality holds after adding ε, the tie-breaking rule does not eliminate c among tied minima, then c is an ε-winner.\nProof. After adding ε of c-first ballots, for any S⊇{c} we have p'_c(S)=p_c(S)+ε ≥ min_{a∈S\\{c}} p_a(S) = min_{a∈S\\{c}} p'_a(S). If the inequalities are strict, c is never strictly below the round minimum and thus never eliminated; with favorable tie-breaking at equality, the same conclusion holds. Hence c wins IRV eventually. ∎\n\nProposition (Two-phase holdout certification). Consider the following algorithm: Phase 1 draws m1 ballots and runs IRV to obtain ĉ. Phase 2 draws m2 fresh ballots and, for every S⊇{ĉ} and a∈S, estimates p̃_a(S). Define B̃(ĉ)=max_{S⊇{ĉ}} (min_{a∈S\\{ĉ}} p̃_a(S) − p̃_{ĉ}(S)). If m2 ≥ (2/ε^2)·ln(2M/δ), where M = (K−1)·2^{K−2} + 2^{K−1}, then with probability at least 1−δ (over Phase 2), simultaneously |p̃_a(S)−p_a(S)| ≤ ε/4 for all required (S,a). On this event, if B̃(ĉ) ≤ ε/2 − ξ for any ξ>0, then B(ĉ) ≤ ε − ξ and, by the lemma, ĉ is an ε-winner. If instead B̃(ĉ) ≤ ε/2 exactly, then B(ĉ) ≤ ε; to conclude ĉ is an ε-winner one additionally requires that the tie-breaking rule will not eliminate ĉ at equality after adding ε.\nProof. Hoeffding’s inequality with a union bound over the M indicator functions for a≠ĉ plus the 2^{K−1} functions for p_{ĉ}(S) yields the stated uniform deviation. Then for any S⊇{ĉ}, min_{a≠ĉ} p_a(S) − p_{ĉ}(S) ≤ min_{a≠ĉ} p̃_a(S) − p̃_{ĉ}(S) + ε/2. Taking maxima over S gives B(ĉ) ≤ B̃(ĉ)+ε/2. The conclusion follows from the lemma. ∎\n\nTheorem (K=3, natural algorithm under separation). Let C={c,a,b} and suppose |p_a(C)−p_b(C)| ≥ γ. Draw m i.i.d. ballots, run IRV with the fixed tie-breaking rule on the sample, and let ĉ be the sample winner. If m ≥ (8/ε^2)·ln(18/δ) and γ ≥ ε/2, then with probability at least 1−δ, ĉ is an ε-winner.\nProof. For S∈{C,{ĉ,a},{ĉ,b}} and x∈S there are 9 quantities p_x(S). By Hoeffding and a union bound, with probability ≥1−δ, |p̂_x(S)−p_x(S)| ≤ α where α=√(ln(18/δ)/(2m)) ≤ ε/4. Let x* be the more popular of {a,b} at S=C in truth, and x̂ the same in the sample. Since α ≤ γ/2, x̂=x*. In the sample, ĉ is not the minimum at C and ĉ beats x̂ in the final pair; thus p̂_{ĉ}(C) ≥ min_{y∈{a,b}} p̂_y(C) and p̂_{ĉ}({ĉ,x*}) ≥ p̂_{x*}({ĉ,x*}). Transferring to truth: p_{ĉ}(C) ≥ min_{y} p_y(C) − 2α and p_{ĉ}({ĉ,x*}) ≥ p_{x*}({ĉ,x*}) − 2α. Adding ε mass of ĉ-first ballots increases ĉ’s tallies by ε on both sets, yielding margins at least ε−2α ≥ ε/2 > 0. Hence ĉ is not eliminated at C and defeats x* head-to-head, so ĉ wins IRV. ∎\n\nLower bound (K=2). Any algorithm that outputs an ε-winner with error probability at most δ requires m = Ω((1/ε^2)·log(1/δ)) samples in the worst case.\nProof sketch. Reduce to distinguishing Bernoulli means 1/2±ε/2 on m samples; Le Cam’s method gives the bound since the total variation between the product measures is e^{−Θ(mε^2)}. ∎\n"},"output_update":{"action":"replace","content":"Main results to date:\n\n- K=3 (natural algorithm, with separation). If |p_a(C)−p_b(C)| ≥ ε/2 and m ≥ (8/ε^2)·ln(18/δ), then with probability at least 1−δ the sample IRV winner ĉ is an ε-winner.\n\n- Two-phase holdout certification (general K). Draw m1 ballots to select ĉ by running IRV; then on an independent holdout of size m2 ≥ (2/ε^2)·ln(2M/δ), with M=(K−1)·2^{K−2}+2^{K−1}, compute B̃(ĉ)=max_{S⊇{ĉ}}(min_{a∈S\\{ĉ}} p̃_a(S)−p̃_{ĉ}(S)). If B̃(ĉ) ≤ ε/2 − ξ (for any ξ>0), then with probability at least 1−δ, ĉ is an ε-winner.\n\n- Baseline lower bound (K=2). Any algorithm needs m = Ω((1/ε^2)·log(1/δ)).\n\nOpen: Tight guarantees for the one-phase natural algorithm when K≥4 without separation assumptions."}}