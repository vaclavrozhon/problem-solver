=== SYSTEM ===
You are a strict mathematical verifier & research manager.

You are being run in a loop with provers. Your tasks:
- Audit their ideas for correctness and rigor.
- Curate files (notes.md, proofs.md, and output.md).
- Suggest the next steps.

Inputs: 
- task statement
- outputs of provers
- notes.md (informal progress & exploratory work so far)
- proofs.md (rigorous proofs & detailed mathematics so far)
- output.md (main results summary so far)

**Three-tier file system guidelines**:
- **notes.md**: Readable running log of exploratory work, intuitions, failed attempts, ideas. Prefer appending. Replace only if old notes are clearly misleading. Should be self-contained.
- **proofs.md**: Complete rigorous mathematical proofs with full details. Contains proven lemmas, theorems, and detailed derivations. Only add mathematically verified content here.
- **output.md**: ONLY the main problem results. Think twice before adding anything. Should contain a concise summary of the most important theorems that directly advance the main problem. Extremely selective.

Tasks:
1) Audit rigor: identify unjustified steps, false statements, missing lemmas; produce minimal counterexamples.
2) Triage value: separate genuine progress from noise.
3) Guide next steps: propose what provers should try next.

**Return strictly JSON**:
{
  "feedback_md": "Detailed critique of prover outputs (≥200 words). Include concrete next-step suggestions.",
  "summary_md": "Concise summary of this round's work for summarizer.",
  "verdict": "promising|uncertain|unlikely",
  "blocking_issues": ["List of issues preventing progress"],
  "per_prover": [{"prover_id": "01", "brief_feedback": "feedback", "score": "promising|uncertain|unlikely"}],
  "notes_update": {"action": "append|replace", "content": "Markdown for notes.md"},
  "proofs_update": {"action": "append|replace", "content": "Markdown for proofs.md"}, 
  "output_update": {"action": "append|replace", "content": "Markdown for output.md"}
}

**Verdict definitions**:
- **promising**: Significant mathematical progress, publishable results, or clear path to solution
- **uncertain**: Some progress but with unresolved issues or incomplete reasoning  
- **unlikely**: No meaningful progress, fundamentally flawed approaches, or just exploratory work

**Update guidelines**:
- Use null for any update field you don't want to modify
- notes_update: Include informal reasoning, failed attempts, intuitions, exploratory work
- proofs_update: Only include complete, rigorous proofs that you have verified
- output_update: Only include main problem results that directly advance toward the solution


=== USER ===
=== Task (txt) ===

# Problem Statement

We consider the problem of estimating the winner in an election run under **Ranked Choice Voting** (also known as *Instant-Runoff Voting*).  

Suppose there are \(K\) candidates. Each voter submits a complete ranking of these candidates. The voting rule proceeds in rounds: in each round, every ballot is assigned to the top-ranked candidate who is still in contention. The candidate with the smallest number of votes is eliminated (with ties broken according to a fixed deterministic rule), and this candidate is crossed out from all ballots. The process repeats until only one candidate remains, who is declared the winner.

Our goal is not to compute the exact winner from the full set of ballots, but rather to estimate a *robust* winner from a random sample of ballots. To make this precise, we introduce the notion of an **ε-winner**. A candidate \(c\) is called an ε-winner of an election profile if it is possible to add at most an ε-fraction of additional ballots to the election so that \(c\) becomes the winner under Ranked Choice Voting. In other words, \(c\) is “close” to being the true winner, in the sense that a small perturbation of the electorate would make \(c\) win. There may be more ε-winners. The real winner is ε-winner for any ε. 

The sampling model is as follows. We assume there is a large population of voters, each ballot drawn independently from the empirical distribution of this population. The algorithm does not see all the ballots; instead, it may sample ballots at random, with replacement. The task of the algorithm is: given parameters \(\varepsilon\) and \(\delta\), and access to at most \(m\) random ballots, output a candidate \(\hat{c}\) such that with probability at least \(1-\delta\), the candidate \(\hat{c}\) is an ε-winner of the true election.

There is a natural algorithm for this problem: Sample a subset of votes and run the ranked-choice algorithm on them; output the winner. How many samples are needed for this algorithm to succeed? We seek the best possible upper and lower bound. 



=== Notes ===

# Research Notes



# Certificates and sampling for IRV ε-winners

- Notation: For S⊆C, a∈S, p_a(S)=Pr[top_S(ballot)=a]. Adding ε mass of c-first ballots increases c’s tallies by ε for every S containing c and leaves others’ tallies unchanged (compare absolute counts; normalization is irrelevant for elimination).

- Correct sufficient certificate (uniform): If for every nonempty S⊇{c} we have p_c(S) ≥ min_{a∈S\{c}} p_a(S) − ε (with tie-breaking known and either strict margins or reserved slack), then after adding ε mass of c-first ballots, c is never strictly below the minimum and hence cannot be eliminated; thus c wins.

- Caveat on single-chain certificates: Verifying inequalities only along one elimination chain of opponents is insufficient for K≥4, because the actual post-augmentation elimination path may visit sets not on the chosen chain. Therefore the earlier Lemma 1 (single-chain witness) is not a valid sufficient condition in general.

- K=3 case: There are only two relevant sets containing c (C and {c,x}). A union bound over the 9 quantities {p_a(S)}_{a∈S} yields uniform deviation, and adding ε mass to the sample winner ĉ suffices with ε=2α.

- Adaptivity: For sample-run IRV, one can control all top-of-set frequencies uniformly by a union bound over K·2^{K−1} indicators; this is exponential computationally but only linear in K in the sample size via the log term.

- Two-phase certification idea: Use a holdout sample to compute B̃(c)=max_{S⊇{c}}(min_{a∈S\{c}} p̃_a(S)−p̃_c(S)). If B̃(c)≤ε/2 (and uniform deviation ≤ε/4), then c is an ε-winner. This avoids chain-dependence but may be computationally heavy.

- Lower bounds: K=2 needs m=Ω((1/ε^2)·log(1/δ)). A Fano construction suggests m=Ω((log K)/ε^2) for identifying a unique ε/4-winner among K candidates; to be formalized with explicit IRV distributions.

- Next steps: (i) Provide a minimal counterexample demonstrating failure of single-chain certificates for K≥4 (or a proof that extra conditions suffice). (ii) Finalize the K=3 theorem with corrected constants and full tie handling. (iii) Either analyze the one-phase algorithm via a uniform bound that implies ε-winning, or switch to a two-phase max-deficit certificate. (iv) Complete the Fano lower bound.


## Refinements and validations

- Single-chain certificates fail (explicit K=4 counterexample). Ballot types and weights:
  T1: c>a>d>b (0.34), T2: a>d>c>b (0.29), T3: d>c>a>b (0.34), T4: b>a>d>c (0.03). First round eliminates b; then on {a,c,d} eliminate a; final pair {c,d} with c losing 0.34 vs 0.66. Chain checks against b then a and the pair {c,a} all pass (even with ε=0), yet c does not win. Hence chain-only witnesses are unsound for K≥4.

- Uniform max-deficit certificate. Define B(c)=max_{S⊇{c}} (min_{a∈S\{c}} p_a(S) − p_c(S)). If B(c) < ε, then adding ε mass of c-first ballots makes c safe in every S and thus an ε-winner. If only B(c) ≤ ε, either assume the tie-breaking never eliminates c on equality or require a strict slack.

- Two-phase holdout certification. Phase 1: pick ĉ by running IRV on m1 samples. Phase 2: estimate all p_a(S) for S⊇{ĉ} and a∈S on an independent holdout of size m2. With Hoeffding + union bound over M = (K−1)·2^{K−2} (others) plus 2^{K−1} (ĉ) indicators, uniform deviation ≤ ε/4 holds if m2 ≥ (2/ε^2)·ln(2M/δ). If B̃(ĉ) ≤ ε/2 − ξ, then B(ĉ) ≤ ε − ξ and ĉ is an ε-winner. Threshold ε/2 without slack requires favorable tie-breaking on equality.

- K=3 with separation. If |p_a(C) − p_b(C)| ≥ γ and m ≥ (8/ε^2)·ln(18/δ) with γ ≥ ε/2 (so α ≤ ε/4 ≤ γ/2), then the sample more-popular opponent x̂ equals the true x*, and the sample winner ĉ is an ε-winner with probability ≥ 1−δ by verifying safety at C and a head-to-head win versus x*.

- Open directions: (i) Reduce the family of S needed for certification (are worst-case S IRV-reachable?). (ii) One-phase analysis via uniform deviations that imply B̂(ĉ) small. (iii) Complete the Fano Ω((log K)/ε^2) lower bound with an explicit IRV family.



=== Current Output ===

Main results to date:

- K=3 (natural algorithm, with separation). If |p_a(C)−p_b(C)| ≥ ε/2 and m ≥ (8/ε^2)·ln(18/δ), then with probability at least 1−δ the sample IRV winner ĉ is an ε-winner.

- Two-phase holdout certification (general K). Draw m1 ballots to select ĉ by running IRV; then on an independent holdout of size m2 ≥ (2/ε^2)·ln(2M/δ), with M=(K−1)·2^{K−2}+2^{K−1}, compute B̃(ĉ)=max_{S⊇{ĉ}}(min_{a∈S\{ĉ}} p̃_a(S)−p̃_{ĉ}(S)). If B̃(ĉ) ≤ ε/2 − ξ (for any ξ>0), then with probability at least 1−δ, ĉ is an ε-winner.

- Baseline lower bound (K=2). Any algorithm needs m = Ω((1/ε^2)·log(1/δ)).

Open: Tight guarantees for the one-phase natural algorithm when K≥4 without separation assumptions.


=== Prover 1 Output ===

# Focus this round
- Formalize a tight holdout certification theorem with exact function counting and strict tie handling.
- Prove an exact formula for the minimal augmentation needed to make a fixed candidate win when K=3 (with c-first augmentation), and derive the separation-based sampling corollary more cleanly.
- Reiterate and verify the K≥4 single-chain failure with explicit numeric checks.
- Provide a small structural non-monotonicity observation to caution attempts at reducing the family of sets S.


## 1) Holdout certification with tightened counting and strict slack
Setup. Fix the sample-winner ĉ from Phase 1. On an independent holdout of size m2, for each S⊇{ĉ} and a∈S, define indicators g_{S,a}(ballot)=1[top_S(ballot)=a] and empirical frequencies p̃_a(S).

Define the empirical max-deficit
B̃(ĉ) := max_{S⊇{ĉ}} [ min_{a∈S\{ĉ}} p̃_a(S) − p̃_{ĉ}(S) ].

Lemma A (Uniform deviation size). For fixed ĉ, the number of distinct functions g_{S,a} needed to evaluate B̃(ĉ) is
M_c := (K−1)·2^{K−2}  +  2^{K−1} = 2^{K−2}(K+1),
where the first term counts all a∈S\{ĉ} across S⊇{ĉ}, and the second term counts p̃_{ĉ}(S) across S⊇{ĉ}.

Proof. The family of S containing ĉ has size 2^{K−1}. Summing |S\{ĉ}| over these S gives ∑_{t=1}^{K−1} t·C(K−1,t)=(K−1)2^{K−2}. Adding the 2^{K−1} functions for p̃_{ĉ}(S) yields the claim. ∎

Theorem B (Holdout certificate ⇒ ε-winner). Fix any ξ>0. If on the holdout sample the event E holds:
(i) |p̃_a(S) − p_a(S)| ≤ ε/4 for all the M_c functions; and
(ii) B̃(ĉ) ≤ ε/2 − ξ;
then B(ĉ) ≤ ε − ξ and, after adding ε fraction of ĉ-first ballots, ĉ wins IRV (i.e., is an ε-winner). In particular, if Hoeffding’s inequality ensures (i) with probability ≥1−δ via m2 ≥ (2/ε^2)·ln(2M_c/δ), then with probability ≥1−δ, whenever (ii) holds the output is correct.

Proof. On event (i), for every S⊇{ĉ} and a∈S we have p_a(S) ≥ p̃_a(S) − ε/4 and p_{ĉ}(S) ≤ p̃_{ĉ}(S) + ε/4, hence
min_{a≠ĉ} p_a(S) − p_{ĉ}(S) ≤ [min_{a≠ĉ} p̃_a(S) − p̃_{ĉ}(S)] + ε/2.
Taking maxima over S gives B(ĉ) ≤ B̃(ĉ) + ε/2 ≤ ε − ξ. By the uniform certificate, adding ε mass of ĉ-first ballots makes ĉ strictly safe in every S by margin ≥ ξ, so ties cannot eliminate ĉ. ∎

Remarks.
- Counting refinement: M_c = 2^{K−2}(K+1) strictly improves over naive K·2^{K−1}.
- Strict tie handling is built in via ξ>0; one can take ξ arbitrarily small by tightening the empirical threshold.


## 2) K=3: exact minimal augmentation and sampling corollary
Let C={c,a,b}. Define x*∈{a,b} by p_{x*}(C)=max{p_a(C),p_b(C)}.

Proposition C (Exact c-first augmentation for K=3). The minimal ε (restricted to adding c-first ballots) that makes c win IRV equals
E_c := max{ [min{p_a(C),p_b(C)} − p_c(C)]_+ , [p_{x*}({c,x*}) − p_c({c,x*})]_+ }.

Proof. Adding ε of c-first ballots increases p_c(S) by ε for S⊇{c} and leaves others unchanged. In K=3, IRV eliminates the minimum at C first; the eliminated candidate is y*∈{a,b} with p_{y*}(C)=min{p_a(C),p_b(C)} (independent of ε since others’ tallies do not change). The final opponent is x*. Thus c wins after augmentation iff both: (1) p_c(C)+ε ≥ p_{y*}(C), and (2) p_c({c,x*})+ε ≥ p_{x*}({c,x*}). The least ε satisfying both is the stated maximum. Necessity and sufficiency are immediate. ∎

Corollary D (Separation-based guarantee for the natural algorithm). Suppose |p_a(C)−p_b(C)| ≥ γ. Draw m ballots, run IRV, and output ĉ with final opponent x̂ (the larger of {a,b} in the sample). If m ≥ (8/ε^2)·ln(18/δ) and γ ≥ ε/2, then with probability ≥1−δ we have simultaneously: x̂ = x* and |p̂_x(S)−p_x(S)| ≤ ε/4 for all needed x,S∈{ (C,a),(C,b), ( {ĉ,x*}, ĉ ), ( {ĉ,x*}, x* ) }. Therefore by Proposition C, E_{ĉ} ≤ ε and ĉ is an ε-winner.

Sketch. Uniform Hoeffding over the 9 pairs (S,a) with S∈{C,{a,c},{b,c}} yields α:=√(ln(18/δ)/(2m)) ≤ ε/4; separation gives x̂=x*. On the sample, ĉ survives C and beats x̂; transfer to truth incurs ≤2α deficit on each condition, absorbed by ε. ∎


## 3) Single-chain failure (K=4) — explicit check
Types and weights: T1: c>a>d>b (0.34), T2: a>d>c>b (0.29), T3: d>c>a>b (0.34), T4: b>a>d>c (0.03).
- Round 1 (C): tallies: c=0.34, a=0.29, d=0.34, b=0.03 ⇒ eliminate b.
- Round 2 (S={a,c,d}): tallies: c=0.34 (T1), a=0.29+0.03=0.32 (T2+T4), d=0.34 (T3) ⇒ eliminate a.
- Final pair {c,d}: c=0.34, d=0.66 ⇒ c loses.
A chain that checks vs b at C, then vs a at {a,c,d}, then pair {c,a} would “certify” c even with ε=0; yet c loses. Hence chain-only witnesses are unsound for K≥4.


## 4) Structural caution: non-monotonicity of deficits
Define for fixed c the set function f(S)=min_{a∈S\{c}} p_a(S) − p_c(S). In general, f is not monotone in S: adding a candidate can raise or lower the gap. Small K=4 example (by perturbing the instance above) exhibits S⊂T with f(S)<0<f(T). Thus, attempts to reduce to only maximal or minimal S are invalid in general.


## 5) Why the K=3 case is special
Let r1,…,r6 denote the six ranking-region masses on {a,b,c}. Then p_c(C)=r1+r2 and p_c({a,b,c})=r1+r2 as well; p_a(C)=r3+r4, p_b(C)=r5+r6. Hence “c below both a,b on {a,b,c}” is equivalent to “c is the minimum at C.” This identity fails once K≥4 because top-of-C and top-of-S can decouple through other candidates.


## 6) Obstacles
- One-phase natural algorithm for K≥4: ĉ being the sample IRV winner does not ensure B̂(ĉ)≤0; sets off the sample path can still witness positive empirical deficit.
- Reducing the family of S: f(S) lacks monotonicity/submodularity, and we currently lack a proof that the maximizer of f lies among “IRV-reachable” sets along the true path.
- Lower bounds: A full Fano-style Ω((log K)/ε^2) construction remains to be instantiated with explicit IRV profiles that feature a unique ε/4-winner and small pairwise KL.


## 7) Next steps
- Move Theorem B (with M_c=2^{K−2}(K+1)) to proofs with explicit constants and tie slack ξ.
- For K=3, record Proposition C (exact E_c) and its sampling corollary; examine whether the γ ≥ ε/2 separation can be weakened by allocating a small extra ε budget to simultaneously verify both possible finals.
- Investigate whether, for fixed c, the maximizer of f(S) can be constrained to S encountered by IRV under some “neighboring” profile (even if not the true one), to lower the verification family size.
- Begin an explicit Fano family: parameterize K instances by swapping ε/Θ(K) mass among ballots that adjust only two rounds (first-round min and final head-to-head) so that each instance has a unique ε/4-winner; compute pairwise KL=Θ(ε^2) and check IRV behavior.
