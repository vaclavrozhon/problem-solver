=== SYSTEM ===
You are a research **summarizer**. Summarize this *last round only* for a human log.

Include:
- 3–7 bullet **Highlights** (facts learned, reductions, counterexamples, partial bounds).
- 1–3 **Open questions / TODOs** for the next round.
- 1–3 **Citations to files** you relied on (e.g. round files or papers by name).

**Return strictly JSON**:
{
  "summary_md": "Readable summary of the round (≤200 words)",
  "highlights": [],
  "next_questions": []
}

=== USER ===
=== prover-01 ===

## Gaps in output.md
- The LP approach is stated but lacks a precise, sample-to-decision bound (no explicit Lipschitz/sensitivity constant). This blocks turning it into a polynomial-sample certifier.
- For K = 3, an exact minimal-augmentation formula allowing mixed added ballots is missing; only a counterexample to c-first exactness is given.

## Ideas
- Give an explicit LP for a fixed elimination order π, derive its dual, and prove a coarse but explicit Lipschitz bound O(K^2) for the optimal value with respect to uniform perturbations of the RHS tallies b = {t_a(S_j)}. This yields a polynomial-in-K sample bound for any fixed π.
- For K = 3 and target winner c, derive a closed-form expression for the exact minimal added mass under each of the two feasible “first elimination” strategies (eliminate a first vs eliminate b first), then take the minimum. This uses only t_a({a,b,c}) and pairwise t_c({c,a}), t_c({c,b}).

## Results (checkable lemmas/propositions)

Lemma 1 (LP for a fixed elimination order and its dual).
Fix π ∈ Perm(C), and let S_j = {π(j),…,π(K)}. Introduce variables y(r) ≥ 0 for each full ranking r, and set total mass ||y||_1 = ∑_r y(r). For each j ∈ {1,…,K−1} and a ∈ S_j \ {π(j)}, define the constraint
∑_r y(r) [1[top_{S_j}(r)=a] − 1[top_{S_j}(r)=π(j)]] ≥ t_{π(j)}(S_j) − t_a(S_j).
Minimize ||y||_1 subject to all constraints and y ≥ 0. Denote the optimal value by v_π(t).
Its dual is
maximize ∑_{j} ∑_{a≠π(j)} λ_{j,a} [t_{π(j)}(S_j) − t_a(S_j)]
subject to for all rankings r: ∑_{j} (λ_{j, top_{S_j}(r)} − λ_{j,π(j)} 1[top_{S_j}(r)=π(j)]) ≤ 1, and λ ≥ 0.
Why useful: v_π(t) gives the exact minimal augmentation to realize π, and the dual yields sensitivity bounds.

Lemma 2 (Coarse sensitivity bound for fixed π).
Let M = ∑_{j=1}^{K−1} (|S_j|−1) = K(K−1)/2 be the number of constraints. If the RHS vector b = {t_{π(j)}(S_j) − t_a(S_j)} is perturbed by at most τ in sup norm, then v_π changes by at most M τ: for all b,b′ with ||b−b′||_∞ ≤ τ,
|v_π(b) − v_π(b′)| ≤ M τ.
Proof sketch: Given a primal feasible y for b, to satisfy b′ ≥ b coordinate-wise by ≤ τ, add for each constraint (j,a) an extra τ mass on any ranking r with top_{S_j}(r)=a and top_{S_j}(r)≠π(j). This increases that constraint’s LHS by τ without decreasing any other; summing over all M constraints adds total mass M τ and yields feasibility for b′. Symmetrically for b ≥ b′. Thus the optimal value is M-Lipschitz in ||·||_∞.
Why useful: Converts uniform estimation error τ of the involved tallies into ≤ M τ error in the LP optimum; gives a polynomial-in-K sample bound for certifying a fixed π.

Proposition 3 (Exact minimal augmentation for K = 3 via two strategies).
Let C = {a,b,c} and target winner c. Define first-round deficits against a:
D_b := [t_a({a,b,c}) − t_b({a,b,c})]_+, D_c := [t_a({a,b,c}) − t_c({a,b,c})]_+.
Define pairwise deficit of c vs b: m_{cb} := [t_b({c,b}) − t_c({c,b})]_+ (similarly m_{ca} for c vs a).
Then the exact minimal added mass needed to make c win under IRV equals
min{ φ_a, φ_b }, where
φ_a = max{ D_b + D_c, m_{cb} + 2 D_b },
φ_b = max{ D_a′ + D_c′, m_{ca} + 2 D_a′ },
with D_a′ := [t_b({a,b,c}) − t_a({a,b,c})]_+, D_c′ := [t_b({a,b,c}) − t_c({a,b,c})]_+.
Proof sketch: Consider strategy “eliminate a first.” In the first round, using only b-first and c-first additions (a-first is never optimal since it raises the opposing side of the inequalities), the constraints are y_b ≥ D_b and y_c ≥ D_c, where y_x is the mass of x-first added ballots (these fully characterize top_{S} increments for S={a,b,c}). In the final between c and b, any b-first ballot ranks b over c, and any c-first ballot ranks c over b, hence the net pairwise margin change is y_c − y_b. To ensure c wins vs b, we need y_c − y_b ≥ m_{cb}. Minimizing y_b + y_c under y_b ≥ D_b, y_c ≥ D_c, y_c − y_b ≥ m_{cb} yields y_b = D_b, y_c = max{D_c, m_{cb} + D_b}, and total mass φ_a = max{D_b + D_c, m_{cb} + 2 D_b}. Feasibility is realized by choosing b>c>a for b-first and c>b>a for c-first additions (and adding an arbitrarily small slack to break ties). The symmetric argument gives φ_b.
Why useful: This gives an exact, closed-form characterization at K=3 using only five observable tallies, enabling tighter certifiers and sharper lower bounds/benchmarks.

Corollary 4 (Sample complexity for K = 3 sandwiched certifier).
To decide whether min{φ_a, φ_b} ≤ ε with probability ≥ 1−δ, it suffices to estimate t_a({a,b,c}) for a ∈ {a,b,c} and t_c({c,a}), t_c({c,b}) within ±τ = Θ(ε), which requires m = Θ((log(1/δ))/ε^2) samples by Hoeffding. The map (these five scalars) ↦ min{φ_a,φ_b} is Lipschitz with constant ≤ 6 (sup norm), so choosing τ = ε/12 leaves 2τ safety margin.

## Examples / sanity checks
- Counterexample in notes: a=0.38, b=0.35, c=0.27 with m_{cb}=0 (c beats b head-to-head). D_b=0.03, D_c=0.11, so φ_a = max{0.14, 0 + 0.06} = 0.14, matching the exhibited 0.14 construction and strictly less than the c-first certificate 0.20.
- Symmetric case: if c trails both in pairwise (m_{cb}, m_{ca} > 0) and a leads first round by Δ over both opponents (D_b=D_c=Δ), then φ_a = max{2Δ, m_{cb} + 2Δ}. If m_{cb} ≥ 0, φ_a = m_{cb} + 2Δ; eliminating b first analogously yields φ_b = m_{ca} + 2Δ; choose the smaller.

## Obstacles / caveats
- Lemma 2’s Lipschitz constant M = K(K−1)/2 is crude and likely very loose; improving it (e.g., to O(K)) would strengthen sample bounds for the LP approach.
- The LP-based certifier still requires selecting or searching over elimination orders π; naive enumeration is infeasible. A data-driven pruning of candidate orders is needed.
- For K > 3, deriving similarly clean closed forms seems challenging; however, the fixed-π LP and Lemma 2 already provide a path to polynomial-in-K sample complexity per candidate order.

## Next steps
- Prove rigorously that a-first additions are dominated in the K=3 optimization (tightening Proposition 3’s proof) and document tie-breaking slack handling.
- Extend the K=3 formula to include the case where c’s pairwise ties occur; incorporate an explicit ξ > 0 slack and show limits as ξ → 0^+ recover the stated form.
- For general K and fixed π, attempt to improve the Lipschitz constant using the dual by bounding sup_{λ feasible} ||λ||_1, potentially via combinatorial properties of the top_{S_j} structure (aim for O(K)).
- Design a two-tier algorithm: (i) run the c-first certificate; (ii) if inconclusive, infer a shortlist of plausible first eliminations or orders from estimated t_a(S) (e.g., candidates with small first-round deficits), and solve the corresponding LPs with confidence intervals propagated using Lemma 2.
- Explore K-dependent lower bounds using Fano/packing over profiles differing on disjoint sets of S’s tallies; start with top-of-triplet events to get Ω((log K)/ε^2).



=== prover-02 ===

## Ideas
- K = 3 exact minimal-augmentation with mixed additions: Give a closed-form expression for the minimum total added mass to make a target candidate c win that allows mixtures of c-first and one other candidate-first ballots. This addresses the counterexample and yields a sharper, sample-efficient certifier in the 3-candidate case.
- LP for a fixed elimination order π: formalize primal and dual, isolate the sensitivity constant as sup ||λ||₁ over the dual feasible region; prove a tight, small bound for K = 3 and lay out what remains for general K.

## Lemma (K = 3: exact two-type reduction for a targeted first elimination)
Setup: Candidates {a,b,c}. We seek to make c the IRV winner by forcing a to be eliminated in round 1 and then ensuring c defeats b in the final. Let γ > 0 be an arbitrarily small slack (to remove tie-breaking dependence). Define tallies under the baseline profile P:
- First-round shares: t_x(abc) for x ∈ {a,b,c}.
- Pairwise shares on {b,c}: t_b(bc), t_c(bc).
Let A := [t_a(abc) − t_c(abc) + γ]_+, B := [t_a(abc) − t_b(abc) + γ]_+, D := t_b(bc) − t_c(bc) + γ. Consider only adding mass in two types: c-first ballots (amount α ≥ 0) and b-first ballots (amount β ≥ 0). Then the elimination constraints t'_a + γ ≤ t'_b and t'_a + γ ≤ t'_c become
- β ≥ B,
- α ≥ A,
and the final-round constraint t'_c(bc) ≥ t'_b(bc) + γ becomes
- α − β ≥ D.
The minimum total added mass α + β equals

ε_a^*(P) = min_{α,β ≥ 0} {α + β : α ≥ A, β ≥ B, α − β ≥ D} = B + max{A, B + D}.

Moreover, for this targeted strategy (eliminate a first), an optimal augmentation exists supported on only c-first and b-first ballots; any a-first ballots are strictly dominated.

Why useful here: This yields an exact minimal mass for the “eliminate a first, then beat b” strategy and, together with the symmetric expression for eliminating b first, gives a tight K = 3 certification strictly stronger than the c-first certificate.

Proof sketch: The constraints follow from linearity:
- First-round: α increases t_c(abc) by α; β increases t_b(abc) by β; t_a(abc) unchanged.
- Final bc: α adds entirely to t_c(bc); β adds entirely to t_b(bc).
Thus α ≥ A, β ≥ B, and α − β ≥ D are necessary and sufficient for this strategy. Minimizing α + β under α ≥ max{A, β + D} and β ≥ B is achieved at the smallest β, namely β = B, giving α = max{A, B + D}. Hence ε_a^* = B + max{A, B + D}.
Dominance of a-first: Any unit of a-first mass decreases both t_b(abc) − t_a(abc) and t_c(abc) − t_a(abc) by 1, while its effect on bc pairwise is either +1 (if a-first ranks c ≻ b) or −1 (if a-first ranks b ≻ c). In the +1 case, one c-first ballot strictly improves both elimination margins and matches/improves the bc margin, so a-first is dominated by c-first. In the −1 case, one b-first ballot strictly improves the relevant elimination margin and matches the bc effect, so a-first is dominated by b-first. Therefore, a-first ballots are never optimal for the targeted elimination of a.

## Corollary (K = 3: exact minimal augmentation for c)
Let ε_A(P) := f_c(P) = max{ [min{t_a(abc), t_b(abc)} − t_c(abc)]_+, [t_a(ac) − t_c(ac)]_+, [t_b(bc) − t_c(bc)]_+ } (the c-first certificate specialized to K = 3). Define ε_a^* as above and ε_b^* symmetrically (targeting b’s first-round elimination). Then the true minimal added mass to make c win equals

ε^*(P;c) = min{ ε_A(P), ε_a^*(P), ε_b^*(P) }.

Why: Any winning plan in K = 3 must either (i) ensure c survives round 1 and beats the round-2 opponent (captured by ε_A), or (ii) force elimination of a in round 1 and then beat b (ε_a^*), or (iii) force elimination of b in round 1 and then beat a (ε_b^*). The two-type reduction shows (ii) and (iii) have exact costs, and a-first mass is never helpful under (ii) or (iii). Hence the minimum over these three strategies is exact.

Verification on the counterexample: With t_a(abc)=0.38, t_b(abc)=0.35, t_c(abc)=0.27, and t_c(bc) − t_b(bc)=0.10 (so D = −0.10), we get A = 0.11, B = 0.03, and ε_a^* = 0.03 + max{0.11, 0.03 − 0.10} = 0.14, matching the exhibited augmentation (α,β)=(0.11,0.03).

## Sampling complexity for the K = 3 certifier
To compute ε_A, ε_a^*, ε_b^* within ±2τ, it suffices to estimate the five numbers t_a(abc), t_b(abc), t_c(abc), t_b(bc), t_c(bc) within ±τ. Hoeffding + union bound over 5 events yields m = O((log(1/δ))/τ^2). A sound certifier: compute the plug-in values and declare c an ε-winner if min{ĥε_A, ĥε_a^*, ĥε_b^*} ≤ ε − 2τ. This provides a K = 3 sample bound m = Θ((log(1/δ))/ε^2), improving on the general K-dependent union bound.

## LP for a fixed elimination order π: primal/dual and sensitivity hook
Primal (fixed π ending in c, slack γ>0): variables y(r) ≥ 0; minimize ∥y∥₁ subject to, for each round j and each a ∈ S_j\{π(j)}:

(t_a(S_j) − t_{π(j)}(S_j)) + ∑_r y(r)(1[top_{S_j}(r)=a] − 1[top_{S_j}(r)=π(j)]) ≥ γ.

Dual: maximize ∑_{j} ∑_{a≠π(j)} λ_{j,a} (γ − (t_a(S_j) − t_{π(j)}(S_j))) subject to, for every ranking r,

∑_{j} ∑_{a≠π(j)} λ_{j,a} (1[top_{S_j}(r)=a] − 1[top_{S_j}(r)=π(j)]) ≤ 1, and λ ≥ 0.

Sensitivity: Let g_{j,a} := γ − (t_a(S_j) − t_{π(j)}(S_j)). The optimal value v(g) = max_{λ∈Λ} g^T λ is 1-Lipschitz in g with respect to the norm ∥·∥_Λ defined by sup_{λ∈Λ} |·^T λ|. A crude bound is |v(g+Δg) − v(g)| ≤ (sup_{λ∈Λ} ∥λ∥₁) ∥Δg
∥_∞. Thus, a uniform sample bound follows once we upper-bound R_K := sup_{λ∈Λ} ∥λ∥₁ by poly(K).

- For K = 3 targeted elimination (as above), the two-type reduction collapses Λ to a 2-variable dual, yielding R_3 ≤ 2 and recovering the Θ((log(1/δ))/ε^2) sample complexity.
- For general K, deriving an explicit bound R_K = poly(K) remains open. The main obstacle is coupling across rounds in the column constraints (each ranking contributes at most one +1 per round and at most one −(∑_a λ_{j,a}) when it tops the round-j loser), so max-over-round arguments must respect consistency of tops across S_j induced by a single ranking.

## Obstacles and gaps relative to output.md
- Output.md has a sufficient c-first certificate and uniform convergence; it does not yet capture the exact mixed-addition minimality for K = 3. The above lemma/corollary fill this gap with a simple, closed-form expression matching the counterexample.
- The LP approach is noted in the notes/output but lacks a rigorous sensitivity bound. We have formalized the dual; bounding sup ∥λ∥₁ by poly(K) is the key missing step.

## Next steps
1) Formalize and prove the K = 3 corollary in full detail (including the symmetric ε_b^* case) and add the sampling-based certifier with its tight sample complexity to output.md.
2) Explore whether an analogous two-type (or few-type) reduction holds for K = 4 when targeting a specific first elimination and then relying on c-first thereafter; even a provable upper bound would be useful.
3) For the LP sensitivity, attempt to construct a canonical dual feasible λ with controlled ∥λ∥₁ (e.g., geometric decay along rounds) that achieves a constant-factor approximation to the optimum; this would imply a polynomial Lipschitz constant for an approximate value function and suffice for sample complexity via a bicriteria certifier.
4) Investigate whether M_c(P) can be bounded within a constant factor by the maximum over |S| ∈ {2,3} (if true, this would reduce the exponential dependence in the union bound). Try to find a counterexample or proof using elimination-path structure.



=== Verifier Feedback ===

Overall, there is substantial progress, especially on the K = 3 case. However, a few rigor and correctness issues must be addressed before incorporating everything into output.md.

1) LP formulation and sensitivity.
- Prover 01: The stated dual in Lemma 1 is incorrect. There is no dual variable λ_{j,π(j)}; the correct dual constraint for each ranking r is ∑_{j}∑_{a≠π(j)} λ_{j,a} (1[top_{S_j}(r)=a] − 1[top_{S_j}(r)=π(j)]) ≤ 1 with λ ≥ 0, and the dual objective is ∑_{j,a} λ_{j,a}·(γ − (t_a(S_j) − t_{π(j)}(S_j))) if we move the baseline tallies to the RHS with slack γ > 0. Prover 02’s dual matches this standard form.
- Prover 01: Lemma 2’s M = K(K−1)/2 Lipschitz/sensitivity bound obtained by fixing constraints independently (adding τ mass per constraint) is not valid. Adding mass for one constraint can decrease other constraints’ LHS when the added ranking tops the round-j′ loser π(j′). The claimed “without decreasing any other” feature does not generally hold. A valid route is the dual-norm sensitivity: |v(b+Δ) − v(b)| ≤ (sup_{λ∈Λ} ||λ||_1) ||Δ||_∞. Establishing a poly(K) bound for sup ||λ||_1 remains the key open step. For K = 3, this constant is small (≤ 2) under the two-variable reduction.

2) K = 3 exact minimal augmentation.
- Prover 01’s Proposition 3 gives a correct closed form for the strategy “eliminate a first” (and symmetrically for “eliminate b first”) and matches the counterexample. However, the proof sketch needs a rigorous dominance argument excluding a-first ballots and a clean handling of tie-breaking via a small slack γ > 0.
- Prover 02 provides precisely these missing pieces: a two-type reduction with γ-slack, the linear constraints α ≥ A, β ≥ B, and α − β ≥ D, and the exact optimum α + β = B + max{A, B + D}. The dominance argument that a-first ballots are never optimal is sound: if an a-first ballot ranks c≻b, it is dominated by a c-first ballot; if it ranks b≻c, it is dominated by a b-first ballot. This yields an exact formula for each targeted first elimination, hence the global minimum for c is min{ε_a^*, ε_b^*}.
- Prover 02’s corollary includes ε_A (the c-first certificate specialized to K = 3) inside a minimum with ε_a^*, ε_b^*. This is redundant: any c-wins path must eliminate either a or b first, and ε_a^*, ε_b^* are exact for those two possibilities. Moreover, one can check ε_A ≥ min{ε_a^*, ε_b^*}, so min{ε_A, ε_a^*, ε_b^*} = min{ε_a^*, ε_b^*}. Including ε_A is harmless but unnecessary.

3) Sampling complexity for K = 3.
- Both provers converge on the key point: one needs only five numbers (the three first-round shares and two pairwise tallies) to evaluate ε^*(P;c) for K = 3. Thus a Hoeffding + union bound with m = Θ((log(1/δ))/ε^2) suffices. A coarse Lipschitz bound of ≤ 6 for the plug-in map is fine; any constant works with appropriate safety margin.

Action items for the next round:
- We will add to output.md a rigorous K = 3 theorem with γ-slack, the two-type reduction, the exact formulas ε_a^*(γ), ε_b^*(γ), and the limit as γ→0^+. Include the sampling corollary specialized to K = 3.
- Keep the general c-first certificate and uniform convergence results already in output.md (they are correct and broadly applicable), but do not add Prover 01’s Lemma 2; instead, add the correct primal/dual LP statement to notes and mark the sensitivity bound as open (per Prover 02).
- Next steps: (i) attempt to bound sup_{λ∈Λ} ||λ||_1 by poly(K), starting with structured dual constructions; (ii) explore whether a few-type reduction extends to K = 4 for targeted first eliminations; (iii) develop K-dependent lower bounds via packing over triplet/top-of-S events.