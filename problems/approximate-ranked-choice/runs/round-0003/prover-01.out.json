{
  "content": "# Ideas\n- Extend the K = 3 \u201ctwo-type\u201d reduction to general K: to force a specific final (c vs y), it suffices to add only c-first and y-first ballots. Then all other candidates can be eliminated in ascending order of their baseline first-place shares without ever adding ballots that top them. This yields a closed-form, data-driven sufficient condition that uses only O(K) tallies (first-round shares and K \u2212 1 pairwise tallies against c), giving a polynomial-in-K sampling bound.\n- For K = 4 this collapses to a simple B + max{A, B + D} formula analogous to K = 3 (with A, B taken as maxima across the two nonfinal opponents). For general K, A and B become maxima across the K \u2212 2 nonfinal opponents.\n- Sampling: Hoeffding + union bound over at most 2K \u2212 1 quantities yields m = \u0398((log K + log(1/\u03b4))/\u03b5^2) to certify this two-type condition.\n- Lower bound sketch (for this two-type condition): distinguishing whether there exists a y with near-threshold pairwise margin vs c among K \u2212 1 options needs \u03a9((log K)/\u03b5^2) samples via Fano/best-arm identification. This matches the log K factor in the sampling upper bound for the two-type certificate.\n\n# Theorem (General K two-type certificate for forcing a c vs y final)\nLet C be a set of K \u2265 3 candidates, fix target c \u2208 C and a designated opponent y \u2208 C \\ {c}. Write first-round shares p_x := t_x(C) for x \u2208 C, and the pairwise tally t_c({c,y}) against y. Fix a deterministic tie-breaking rule and a slack \u03b3 > 0 (to enforce strict inequalities). Consider adding only two types of ballots: c-first (amount \u03b1 \u2265 0) and y-first (amount \u03b2 \u2265 0). Define\n- A*(y,\u03b3) := max_{w \u2208 C\\{c,y}} [ p_w \u2212 p_c + \u03b3 ]_+,\n- B*(y,\u03b3) := max_{w \u2208 C\\{c,y}} [ p_w \u2212 p_y + \u03b3 ]_+,\n- D(y,\u03b3) := t_y({c,y}) \u2212 t_c({c,y}) + \u03b3.\nThen the following are equivalent:\n1) There exists (\u03b1,\u03b2) with \u03b1,\u03b2 \u2265 0 and \u03b1 + \u03b2 \u2264 \u03b5 such that, under IRV with the augmented profile, every w \u2208 C\\{c,y} is eliminated before both c and y (in some order sorted by increasing p_w), and in the final round c defeats y by a strict margin (hence the tie-breaking rule is irrelevant).\n2) The inequalities\n   \u03b1 \u2265 A*(y,\u03b3),   \u03b2 \u2265 B*(y,\u03b3),   and   \u03b1 \u2212 \u03b2 \u2265 D(y,\u03b3)\n   hold. Moreover, the minimum total mass \u03b1 + \u03b2 satisfying these is\n   \u03b5_{2type}(y,\u03b3; c) = B*(y,\u03b3) + max{ A*(y,\u03b3), B*(y,\u03b3) + D(y,\u03b3) }.\nConsequently, a sound sufficient condition that c is an \u03b5-winner is that there exists y \u2208 C\\{c} with \u03b5_{2type}(y,\u03b3; c) \u2264 \u03b5; equivalently,\n  \u03b5_{2type}(\u03b3; c) := min_{y\u2260c} \u03b5_{2type}(y,\u03b3; c) \u2264 \u03b5.\nFor K = 3 this coincides with the exact minimal augmentation \u03b5^*(\u03b3; c) from the notes; for K \u2265 4 it is an efficiently checkable sufficient certificate.\n\nProof.\nSufficiency. If \u03b1 \u2265 A*(y,\u03b3) and \u03b2 \u2265 B*(y,\u03b3), then for every w \u2208 C\\{c,y} we have p_w \u2264 p_c + \u03b1 \u2212 \u03b3 and p_w \u2264 p_y + \u03b2 \u2212 \u03b3. Since we add no ballots that top any w, all p_w remain at their baseline values. Therefore, among the survivors at any round containing {c,y} and some subset W of C\\{c,y}, the unique loser is the w \u2208 W with minimal baseline p_w, because c and y each strictly exceed every p_w by at least \u03b3. Thus the nonfinal candidates are eliminated in nondecreasing order of their baseline first-round shares, independent of tie-breaking. When only {c,y} remain, the pairwise margin is (t_c({c,y}) + \u03b1) \u2212 (t_y({c,y}) + \u03b2) = \u2212D(y,\u03b3) + \u03b3 + (\u03b1 \u2212 \u03b2). The constraint \u03b1 \u2212 \u03b2 \u2265 D(y,\u03b3) guarantees a strict final-round win for c.\nNecessity. Consider any feasible augmentation with only c-first and y-first ballots that achieves the claimed elimination pattern. Fix any w \u2208 C\\{c,y}. At the round when w is eliminated (which must occur before either c or y), both c and y must strictly exceed w\u2019s tally. Because added ballots only contribute to c or y, w\u2019s tally is p_w; hence p_c + \u03b1 \u2265 p_w + \u03b3 and p_y + \u03b2 \u2265 p_w + \u03b3, equivalently \u03b1 \u2265 [p_w \u2212 p_c + \u03b3]_+ and \u03b2 \u2265 [p_w \u2212 p_y + \u03b3]_+. The final-round constraint \u03b1 \u2212 \u03b2 \u2265 D(y,\u03b3) is obviously necessary. Minimization of \u03b1 + \u03b2 over these halfspace constraints is the same 2-variable linear program as in K = 3, with solution \u03b1 = max{A*(y,\u03b3), B*(y,\u03b3) + D(y,\u03b3)} and \u03b2 = B*(y,\u03b3), yielding the stated optimum B* + max{A*, B* + D}. \u220e\n\nRemarks.\n- Dominance of two types: allowing any added ballot whose top among the current survivors ever equals some w \u2208 C\\{c,y} can only increase w\u2019s tally at some round and thus can never help eliminate w earlier; such ballots are weakly dominated by reallocating their mass to c-first or y-first ballots.\n- K = 3 specialization: C\\{c,y} has a single element a; then A* = [p_a \u2212 p_c + \u03b3]_+, B* = [p_a \u2212 p_y + \u03b3]_+, D(y,\u03b3) is the pairwise deficit vs y, recovering the earlier exact formula.\n\n# Corollary (Sampling for the two-type certificate)\nTo evaluate \u03b5_{2type}(\u03b3; c), one needs only: the K first-round shares {p_x}_{x\u2208C} and the K \u2212 1 pairwise tallies {t_c({c,y})}_{y\u2260c}. Fix \u03c4 > 0. With m \u2265 c0 (log(2K) + log(1/\u03b4))/\u03c4^2 i.i.d. ballots (for a universal constant c0), Hoeffding\u2019s inequality and a union bound yield, with probability \u2265 1 \u2212 \u03b4, a uniform sup error \u2264 \u03c4 simultaneously for these quantities. The map (p, {t_c({c,y})}) \u21a6 \u03b5_{2type}(\u03b3; c) is Lipschitz with constant at most 6 in the sup norm (A*, B*, D are each 2-Lipschitz). Therefore, the plug-in decision \u201cdeclare c an \u03b5-winner if min_{y\u2260c} \\widehat{\u03b5}_{2type}(y,\u03b3; c) \u2264 \u03b5 \u2212 6\u03c4\u201d is correct with probability \u2265 1 \u2212 \u03b4. Taking \u03c4 = \u0398(\u03b5) gives m = \u0398((log K + log(1/\u03b4))/\u03b5^2).\n\n# Example (K = 4)\nLet C = {a,b,c,d}, target c. First-round shares: p_a = 0.20, p_b = 0.26, p_c = 0.25, p_d = 0.29. Choose y = b, so W = {a,d}. Then\n- A* = max{0.20 \u2212 0.25, 0.29 \u2212 0.25} = 0.04,\n- B* = max{0.20 \u2212 0.26, 0.29 \u2212 0.26} = 0.03.\nIf t_c({b,c}) = 0.49 (so D = 0.51 \u2212 0.49 = 0.02 for \u03b3 \u2192 0^+), the two-type cost is\n  \u03b5_{2type}(b; c) = 0.03 + max{0.04, 0.03 + 0.02} = 0.08.\nThus adding \u03b1 = 0.05 of c-first and \u03b2 = 0.03 of b-first ballots forces elimination of a and d before c,b and makes c beat b in the final.\n\n# Lower bound sketch for the two-type certifier (log K factor is necessary)\nConsider instances where (i) all nonfinal opponents are safely below both c and every y in first-round shares (so A* = B* = 0), and (ii) exactly one opponent y* satisfies t_c({c,y*}) = 1/2 \u2212 \u03b5 while all other y have t_c({c,y}) \u2264 1/2 \u2212 2\u03b5. Then c is an \u03b5-winner via the two-type certificate iff \u201c\u2203 y with t_c({c,y}) \u2265 1/2 \u2212 \u03b5\u201d. Distinguishing H0: \u2200y, t_c({c,y}) \u2264 1/2 \u2212 2\u03b5 from H1: \u2203! y*, t_c({c,y*}) = 1/2 \u2212 \u03b5 while the rest are 1/2 \u2212 2\u03b5 reduces to a best-arm identification problem over K \u2212 1 Bernoulli means separated by \u03b5. Standard Fano (or change-of-measure for multiple alternatives) implies m = \u03a9((log K)/\u03b5^2) samples are necessary (to keep both false positive and false negative probabilities below a constant). Hence the log K term in the sampling bound above is information-theoretically unavoidable for certifying this two-type condition.\n\n# Obstacles and why this helps\n- This two-type certificate is exact for K = 3 and gives a simple, auditable sufficient condition for general K that depends on only O(K) tallies, yielding m = \u0398((log K + log(1/\u03b4))/\u03b5^2). It strictly strengthens the c-first-only certificate in many K \u2265 4 instances (because it can leverage a \u201cfriendly\u201d opponent y with a favorable pairwise margin), yet remains computationally trivial.\n- It is not generally optimal for K \u2265 4: additional ballot types can, in principle, reduce the required mass by finely steering intermediate-round eliminations. Providing a separation example is an immediate next step.\n- The fixed-order LP approach remains the path to exact optimality for general K; its sample complexity analysis hinges on bounding sup_{\u03bb\u2208\u039b} ||\u03bb||_1 in the dual, which is open. The two-type result can be viewed as a low-dimensional, order-free relaxation with a clean stability analysis.\n\n# Next steps\n- Incorporate this general-K two-type certificate and its sampling corollary into notes.md (as a sufficient, efficiently checkable condition) and into output.md (as an algorithmic upper bound on sample complexity).\n- Construct and analyze a K = 4 counterexample where adding a third ballot type strictly improves over the two-type bound.\n- Formalize the lower bound above via an explicit ranking distribution that keeps A* = B* = 0 while toggling a single pairwise margin; then apply Fano to obtain \u03a9((log K)/\u03b5^2) rigorously.\n- Pursue the dual-based sensitivity bound for the fixed-order LP; even a coarse polynomial bound would immediately yield a polynomial-in-K sample complexity for exact certification of a chosen elimination order.\n"
}