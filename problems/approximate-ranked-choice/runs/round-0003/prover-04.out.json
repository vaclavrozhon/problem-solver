{
  "content": "# Ideas\n\n- General-K two-type certificate (final-pair strategy). For a target c and a chosen pivot b, eliminate all other candidates first (in a data-independent order determined by baseline tallies), using only c-first and b-first added ballots. This yields a closed-form sufficient bound \u03b5_b^*(\u03b3) analogous to the K=3 exact formula.\n- Dominance lemma for fixed elimination path: for that path, c-first and b-first ballots dominate any other added ranking in improving all constraints; thus restricting to two types is w.l.o.g. for that path.\n- Sampling under a separation condition via sample-splitting: identify the \u201cminimal-of-others\u201d chain with one subsample, then estimate the required tallies with another; overall sample complexity polynomial in K when the chain margins are bounded away from 0.\n- Tight Lipschitz bound for K=3 plug-in map: L \u2264 6 in sup norm.\n\n# General-K two-type final-pair certificate\n\nSetup. Candidate set C, |C|=K\u22653. For any nonempty S\u2286C and a\u2208S, t_a(S):=Pr[top among S is a]. Fix target c\u2208C and choose a pivot b\u2208C\\{c}. Fix slack \u03b3>0 to enforce strict separations.\n\nDefine the chain of remaining sets and the \u201cminimal-of-others\u201d sequence:\n- S_1 := C.\n- For j=1,\u2026,K\u22122: pick\n  e_j \u2208 argmin_{e \u2208 S_j \\ {b,c}} t_e(S_j), and set S_{j+1} := S_j \\ {e_j}.\n  (Break ties by the fixed deterministic rule; \u03b3>0 will make them irrelevant.)\n\nDefine the cumulative deficits\n- A_b(\u03b3) := max_{1\u2264j\u2264K\u22122} [ t_{e_j}(S_j) \u2212 t_c(S_j) + \u03b3 ]_+.\n- B_b(\u03b3) := max_{1\u2264j\u2264K\u22122} [ t_{e_j}(S_j) \u2212 t_b(S_j) + \u03b3 ]_+.\n- D_{b,c}(\u03b3) := t_b({b,c}) \u2212 t_c({b,c}) + \u03b3.\n\nTheorem (two-type final-pair certificate). If we add \u03b1\u22650 mass of c-first ballots and \u03b2\u22650 mass of b-first ballots with\n- \u03b1 \u2265 A_b(\u03b3),\n- \u03b2 \u2265 B_b(\u03b3), and\n- \u03b1 \u2212 \u03b2 \u2265 D_{b,c}(\u03b3),\nthen along the elimination path S_1,\u2026,S_{K\u22121} the candidates e_1,\u2026,e_{K\u22122} are eliminated in order, and in the final {b,c} round, c beats b by \u03b3; hence c is the IRV winner. Moreover, among such two-type additions, the minimum total mass is\n  \u03b5_b^*(\u03b3) = B_b(\u03b3) + max{ A_b(\u03b3), B_b(\u03b3) + D_{b,c}(\u03b3) }.\nFinally, define \u03b5^{cert}(\u03b3;c) := min_{b\u2260c} \u03b5_b^*(\u03b3) and \u03b5^{cert}(c) := lim_{\u03b3\u21920^+} \u03b5^{cert}(\u03b3;c).\n\nProof (sketch). Under added \u03b1,\u03b2 of c-first and b-first ballots, for each j the updated tallies on S_j are t'_c(S_j)=t_c(S_j)+\u03b1, t'_b(S_j)=t_b(S_j)+\u03b2, and t'_x(S_j)=t_x(S_j) for every x\u2208S_j\\{b,c}. By construction, e_j is the (tie-broken) minimal among S_j\\{b,c}. The constraints \u03b1 \u2265 A_b(\u03b3) and \u03b2 \u2265 B_b(\u03b3) ensure t'_c(S_j) > t'_{e_j}(S_j) and t'_b(S_j) > t'_{e_j}(S_j); as the other \u201cothers\u201d exceed or tie e_j already and are unchanged, e_j is strictly the unique minimal in S_j and is eliminated. Iterating yields S_{K\u22121}={b,c}. In the final, each c-first ballot contributes +1 to t'_c({b,c}), each b-first contributes +1 to t'_b({b,c}), so \u03b1\u2212\u03b2 \u2265 D_{b,c}(\u03b3) enforces a strict c win. Minimizing \u03b1+\u03b2 over the polyhedron {\u03b1\u2265A, \u03b2\u2265B, \u03b1\u2212\u03b2\u2265D} is achieved at \u03b2=B and \u03b1=max{A,B+D}, giving \u03b5_b^*(\u03b3) as stated.\n\nRemark. For K=3 this recovers the exact formula in the notes (A=[p_a\u2212p_c+\u03b3]_+, B=[p_a\u2212p_b+\u03b3]_+, D=t_b({b,c})\u2212t_c({b,c})+\u03b3), and \u03b5^*(\u03b3;c)=min_b \u03b5_b^*(\u03b3).\n\n# Dominance of two types for a fixed path\n\nLemma (two-type suffices for fixed path). Fix c, b, \u03b3 and a specific elimination path e_1,\u2026,e_{K\u22122}. Consider the LP minimizing ||y||_1 over nonnegative measures y on rankings subject to, for every j,\n- t'_c(S_j) \u2265 t'_{e_j}(S_j) + \u03b3,\n- t'_b(S_j) \u2265 t'_{e_j}(S_j) + \u03b3,\nand final-round t'_c({b,c}) \u2265 t'_b({b,c}) + \u03b3. There is an optimal y supported on two rankings: a c-first ranking and a b-first ranking, and its cost equals B_b(\u03b3)+max{A_b(\u03b3), B_b(\u03b3)+D_{b,c}(\u03b3)}.\n\nProof (outline). Each constraint\u2019s LHS is affine in y with coefficients 1[top_{S_j}(r)=c] or 1[top_{S_j}(r)=b]; any ranking r with top_{S_j}(r)\u2209{c,b} contributes 0 to the corresponding constraint. A c-first ranking contributes 1 to all c-vs-e_j constraints (every j) and +1 to the final c\u2212b margin; similarly b-first contributes 1 to all b-vs-e_j constraints and \u22121 to the final margin. Thus, for any r, replacing y(r) by an equal mass on c-first (if r ranks c\u227bb) or b-first (if r ranks b\u227bc) weakly improves all constraints coordinatewise. Hence an optimal solution exists with support on these two types, and its optimal value is the 2-variable minimum stated above.\n\n# Example (K=4)\n\nLet C={a,b,c,d}, target c, pivot b. Suppose\n- First-round: t_a(C)=0.26, t_b(C)=0.24, t_c(C)=0.22, t_d(C)=0.28.\n- After removing a: on S_2={b,c,d}, t_d(S_2)=0.33, t_b(S_2)=0.37, t_c(S_2)=0.35.\n- Pairwise: t_c({b,c})=0.55, t_b({b,c})=0.45.\nTake \u03b3\u21920. Then e_1=a (minimal among {a,d}), e_2=d. Compute\n- A_b = max{0.26\u22120.22, 0.33\u22120.35, 0}_+ = 0.04.\n- B_b = max{0.26\u22120.24, 0.33\u22120.37, 0}_+ = 0.02.\n- D_{b,c} = 0.45 \u2212 0.55 = \u22120.10.\nThus \u03b5_b^* = 0.02 + max{0.04, \u22120.08} = 0.06. Adding \u03b1=0.04 of c-first and \u03b2=0.02 of b-first ensures elimination of a then d and a c-over-b final.\n\n# Sampling with separation via sample-splitting (general K)\n\nSeparation assumption. Along the chain S_1,\u2026,S_{K\u22121} for a fixed b, let\n  \u03bc_j := min_{x\u2208S_j\\{b,c,e_j}} ( t_x(S_j) \u2212 t_{e_j}(S_j) ), and \u03bc := min_j \u03bc_j.\nAssume \u03bc>0 (the minimal-of-others is separated from the second-minimal by at least \u03bc at every round).\n\nAlgorithm.\n- Stage 1 (identify chain): Draw m_1 ballots. For j=1,\u2026,K\u22122, compute empirical tallies on S_j^hat recursively (starting from S_1^hat=C) and set e_j^hat to the empirical argmin over S_j^hat\\{b,c}.\n- Stage 2 (estimate deficits): Independently draw m_2 ballots. For the sets S_j^true (the true chain) we do not know their identity, but if Stage 1 succeeds (i.e., e_j^hat=e_j for all j), then S_j^hat=S_j. On Stage 2 data, estimate t_{e_j}(S_j), t_b(S_j), t_c(S_j) for all j, and t_b({b,c}), t_c({b,c}). Form A_b, B_b, D_{b,c} and \u03b5_b^*.\n- Decision: If min_b \\, \\widehat{\u03b5}_b^*(\u03b3) \u2264 \u03b5 \u2212 2\u03c4, return c.\n\nGuarantee. There exist absolute constants c_1,c_2 such that the following suffices:\n- m_1 \u2265 c_1 (log(K/\u03b4)) / \u03bc^2 ensures P(Stage 1 identifies the true chain for that b) \u2265 1\u2212\u03b4/2 (Hoeffding + union bound across \u2264K steps and \u2264K candidates per step).\n- m_2 \u2265 c_2 (log( (3(K\u22122)+2)/\u03b4 )) / \u03c4^2 ensures that, conditional on Stage 1 success, all needed tallies are within \u00b1\u03c4 simultaneously with probability \u22651\u2212\u03b4/2.\nThen P(\u03b5_b^*(\u03b3) \u2264 \\widehat{\u03b5}_b^*(\u03b3)+2\u03c4) \u2265 1\u2212\u03b4, so the decision is sound: if declared, c is an \u03b5-winner.\n\nRemarks.\n- This yields m = O( (log(K/\u03b4))/\u03bc^2 + (log(K/\u03b4))/\u03b5^2 ). When \u03bc is small (nearly tied \u201cothers\u201d), Stage 1 may fail; one can fall back to the c-first certificate (Theorem 2 in notes) which has exponential-in-K uniform estimation but no separation requirement.\n- Extending a polynomial-sample, distribution-free guarantee for a general fixed elimination order remains open; it relates to bounding sup_{\u03bb\u2208\u039b} ||\u03bb||_1 in the LP dual (see notes).\n\n# K=3 Lipschitz constant for the plug-in map\n\nLet for K=3 and fixed c with opponent b and \u201cother\u201d a,\n  \u03b5_a^*(\u03b3) = B_\u03b3 + max{A_\u03b3, B_\u03b3 + D_\u03b3},\nwith A_\u03b3=[p_a \u2212 p_c + \u03b3]_+, B_\u03b3=[p_a \u2212 p_b + \u03b3]_+, D_\u03b3=t_b({b,c}) \u2212 t_c({b,c}) + \u03b3. Then the map (p_a,p_b,p_c,t_b({b,c}),t_c({b,c})) \u21a6 \u03b5_a^*(\u03b3) is 6-Lipschitz in the sup norm: for any perturbation of these five inputs by at most \u03c4 in sup norm, |\u0394\u03b5_a^*(\u03b3)| \u2264 6\u03c4.\n\nProof. Piecewise linear analysis: If max selects A_\u03b3, then \u03b5=B_\u03b3+A_\u03b3 and the l_1 norm of any subgradient is \u2264 4. If max selects B_\u03b3+D_\u03b3, then \u03b5=2B_\u03b3+D_\u03b3 and the l_1 norm of any subgradient is \u2264 6. Hence global sup-norm Lipschitz constant \u2264 6.\n\n# Obstacles\n\n- Dual sensitivity bound. For the general fixed-order LP, showing sup_{\u03bb\u2208\u039b} ||\u03bb||_1 = poly(K) (hence polynomial sample complexity for certifying that fixed order) remains open. Naive per-constraint \u201cadditive mass\u201d arguments fail because a single ranking can worsen other constraints.\n- General-K exact minimal augmentation likely requires mixed-type additions beyond two types and/or changing the elimination path; our two-type certificate is sufficient but not necessarily tight for K\u22654.\n\n# Next steps\n\n- Formalize the general-K two-type certificate (statement above) into proofs.md; add the K=4 example.\n- Develop the two-stage sampling theorem under a clean chain-separation condition \u03bc, and integrate a fallback to the c-first certifier when \u03bc is tiny.\n- Attempt to tighten the K=3 Lipschitz constant (6\u21924) or provide an exact value.\n- Pursue bounding sup_{\u03bb\u2208\u039b} ||\u03bb||_1 by constructing structured dual solutions and adversarial rankings; even bounds like O(K) would suffice for polynomial sample guarantees per fixed order.\n- Explore whether allowing two pivots (three-type scheme: c-first and two opponent-first types) yields a strictly stronger certificate with similar O(K^2) statistics.\n"
}