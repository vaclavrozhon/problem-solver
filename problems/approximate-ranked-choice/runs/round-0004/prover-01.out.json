{
  "content": "# Ideas\n- Formalize and prove the general-K chain-based two-type certificate (pivot b), including exact minimization over two types and a clean dominance argument excluding other types for this targeted strategy.\n- Provide a safe data-driven sampling procedure via sample splitting: use one half to build the chain (e_j) and verify stability margins; use the other half to estimate only O(K^2) necessary top-of-S tallies and the pairwise t_c({b,c}).\n- Prove a Lipschitz/stability lemma ensuring the empirical chain equals the true chain when minimal gaps exceed 2\u03c4, and bound the plug-in error of the mass formula by \u2264 6\u03c4.\n- Record a crisp counterexample to the invalid first-round-only two-type claim, demonstrating the need for subset tallies t_w(S) beyond p_x.\n- Give a clean \u03a9((log K)/\u03b5^2) lower bound for the two-type certificate via a reduction to best-arm identification over pairwise c-vs-y.\n\n# General-K chain-based two-type certificate (formal statement and proof)\nLet C be a set of K \u2265 3 candidates, fix a target c \u2208 C and a pivot b \u2208 C\\{c}, and fix a deterministic tie-breaking rule. For any nonempty S \u2286 C and a \u2208 S, let t_a(S) = Pr[top_S(r) = a] under the population distribution over full rankings. Introduce a slack \u03b3 > 0 to enforce strict separations. Define the chain of remaining sets by S_1 := C and, for j = 1,\u2026,K\u22122,\n- e_j := argmin_{e \u2208 S_j\\{b,c}} t_e(S_j) (ties broken by the election\u2019s rule),\n- S_{j+1} := S_j\\{e_j}.\nDefine\nA_b(\u03b3) := max_{1\u2264j\u2264K\u22122} [ t_{e_j}(S_j) \u2212 t_c(S_j) + \u03b3 ]_+,\nB_b(\u03b3) := max_{1\u2264j\u2264K\u22122} [ t_{e_j}(S_j) \u2212 t_b(S_j) + \u03b3 ]_+,\nD_{b,c}(\u03b3) := t_b({b,c}) \u2212 t_c({b,c}) + \u03b3.\nConsider augmentations restricted to two ballot types: c-first with total mass \u03b1 \u2265 0, and b-first with total mass \u03b2 \u2265 0. Then the following hold.\n\nTheorem (Chain-based two-type certificate).\n- Feasibility: If \u03b1 \u2265 A_b(\u03b3), \u03b2 \u2265 B_b(\u03b3), and \u03b1 \u2212 \u03b2 \u2265 D_{b,c}(\u03b3), then under IRV with the augmented profile: e_1,\u2026,e_{K\u22122} are eliminated (in that order), and in the final round c strictly defeats b; in particular c is elected and tie-breaking is irrelevant.\n- Optimality over two types: Among augmentations supported only on c-first and b-first ballots, the minimum total added mass achieving the above eliminations and final is\n  \u03b5^{(2)}_{b}(\u03b3; c) = B_b(\u03b3) + max{ A_b(\u03b3), B_b(\u03b3) + D_{b,c}(\u03b3) }.\n- Global two-type certificate for c: \u03b5^{(2)}(\u03b3; c) := min_{b\u2260c} \u03b5^{(2)}_{b}(\u03b3; c) is a sound sufficient bound on the minimal augmentation to make c win. The exact minimal augmentation for K = 3 equals \u03b5^{(2)}(\u03b3; c), and \u03b5^{(2)}(c) := lim_{\u03b3\u21920^+} \u03b5^{(2)}(\u03b3; c).\n\nProof.\nFeasibility. Adding \u03b1 c-first and \u03b2 b-first ballots changes round-j tallies on S_j as: t'_x(S_j) = t_x(S_j) for x \u2208 S_j\\{b,c}, t'_c(S_j) = t_c(S_j) + \u03b1, t'_b(S_j) = t_b(S_j) + \u03b2. By the definitions of A_b(\u03b3) and B_b(\u03b3), for every j we have t'_c(S_j) \u2265 t_{e_j}(S_j) + \u03b3 and t'_b(S_j) \u2265 t_{e_j}(S_j) + \u03b3. Since the non-{b,c} tallies are unchanged, among S_j the unique minimum is e_j (ties do not occur because of the \u03b3 slack), so e_j is eliminated, producing S_{j+1}. By induction, e_1,\u2026,e_{K\u22122} are eliminated in order, leaving {b,c}. In the final, each c-first ballot contributes +1 to t'_c({b,c}) and each b-first contributes +1 to t'_b({b,c}), hence t'_c({b,c}) \u2212 t'_b({b,c}) = (t_c({b,c}) \u2212 t_b({b,c})) + (\u03b1 \u2212 \u03b2). The constraint \u03b1 \u2212 \u03b2 \u2265 D_{b,c}(\u03b3) yields a strict final-round win for c.\nOptimality over two types. Necessity of the three inequalities follows by the same per-round reasoning: at the round j where e_j is eliminated, both c and b must strictly exceed e_j\u2019s tally, which is t_{e_j}(S_j); thus \u03b1 \u2265 [t_{e_j}(S_j) \u2212 t_c(S_j) + \u03b3]_+ and \u03b2 \u2265 [t_{e_j}(S_j) \u2212 t_b(S_j) + \u03b3]_+. The final-round strict win requires \u03b1 \u2212 \u03b2 \u2265 D_{b,c}(\u03b3). Minimizing \u03b1 + \u03b2 over the polyhedron {\u03b1 \u2265 A_b(\u03b3), \u03b2 \u2265 B_b(\u03b3), \u03b1 \u2212 \u03b2 \u2265 D_{b,c}(\u03b3)} is a two-variable linear program with optimum at \u03b2 = B_b(\u03b3) and \u03b1 = max{A_b(\u03b3), B_b(\u03b3) + D_{b,c}(\u03b3)}, giving \u03b5^{(2)}_{b}(\u03b3; c).\nDominance of two types for the targeted plan. Any added ballot that tops some e_j in some S_j increases t_{e_j}(S_j), tightening both A_b and B_b constraints; hence such ballots are weakly dominated by reallocating their mass to c-first or b-first without harming feasibility and not increasing \u03b1 + \u03b2. Therefore, within the targeted plan \u201celiminate e_1,\u2026,e_{K\u22122}, then c beats b,\u201d it is sufficient and optimal to use only the two types. \u220e\n\nRemarks.\n- This certificate is sufficient but not necessary for K \u2265 4; optimal augmentations may alter the chain (e_j) by using additional types to steer intermediate tallies. The theorem characterizes the optimal cost within the family of two-type strategies that keep the baseline chain.\n- For K = 3 the chain has length 1 and the theorem specializes to the exact closed-form derived previously: \u03b5_a^*(\u03b3) = B_\u03b3 + max{A_\u03b3, B_\u03b3 + D_\u03b3} and symmetrically for eliminating b first; the minimum over the two pivots is the true minimal augmentation.\n\n# Stability and sampling for the chain certificate\nDefine the chain gaps at each step j:\n\u0394_j := min_{w \u2208 S_j\\{b,c,e_j}} ( t_w(S_j) \u2212 t_{e_j}(S_j) ), with the convention \u0394_j = +\u221e if |S_j\\{b,c}| = 1.\nLet \u03c4 > 0 be an accuracy level.\n\nLemma (Chain stability under sup-norm error).\nIf sup_{S\u2286C} sup_{a\u2208S} |\\hat t_a(S) \u2212 t_a(S)| \u2264 \u03c4 and \u0394_j \u2265 2\u03c4 for all j, then the empirical chain computed from \\hat t coincides with the true chain (same e_j and S_j), and moreover\n|\\widehat{A}_b(\u03b3) \u2212 A_b(\u03b3)| \u2264 2\u03c4, |\\widehat{B}_b(\u03b3) \u2212 B_b(\u03b3)| \u2264 2\u03c4, and |\\widehat{D}_{b,c}(\u03b3) \u2212 D_{b,c}(\u03b3)| \u2264 2\u03c4.\nConsequently,\n|\\widehat{\u03b5}^{(2)}_{b}(\u03b3; c) \u2212 \u03b5^{(2)}_{b}(\u03b3; c)| \u2264 6\u03c4.\n\nProof.\nBy \u0394_j \u2265 2\u03c4 and the sup error \u2264 \u03c4, the argmin over S_j\\{b,c} is preserved at each j (standard stability of argmin under perturbations), so the empirical chain equals the true chain. For fixed j, the maps (t_{e_j}(S_j), t_c(S_j)) \u21a6 [t_{e_j}(S_j) \u2212 t_c(S_j) + \u03b3]_+ and (t_{e_j}(S_j), t_b(S_j)) \u21a6 [t_{e_j}(S_j) \u2212 t_b(S_j) + \u03b3]_+ are 2-Lipschitz under sup norm, and taking a maximum over j preserves Lipschitzness, giving |\\widehat{A}_b \u2212 A_b|, |\\widehat{B}_b \u2212 B_b| \u2264 2\u03c4. Similarly, D_{b,c}(\u03b3) depends on two pairwise tallies and is 2-Lipschitz. The map g(A,B,D) = B + max{A, B + D} changes by at most |\u03b4B| + max{|\u03b4A|, |\u03b4B| + |\u03b4D|} \u2264 3 max{|\u03b4A|,|\u03b4B|,|\u03b4D|}. A safe bound is 3\u00b72\u03c4 = 6\u03c4. \u220e\n\nSampling procedure (sample splitting).\n- Inputs: \u03b5, \u03b4, \u03b3 > 0, target c and pivot b.\n- Draw m i.i.d. ballots and split into two halves of size \u2248 m/2 each.\n- On the first half, compute empirical tallies \\tilde t_a(S) sequentially to build the empirical chain \\tilde e_j and \\tilde S_j: at step j use \\tilde t on \\tilde S_j to select \\tilde e_j = argmin_{e \u2208 \\tilde S_j\\{b,c}} \\tilde t_e(\\tilde S_j), producing \\tilde S_{j+1} = \\tilde S_j\\{\\tilde e_j}.\n- On the second half, estimate the tallies needed only on the sets {\\tilde S_j} and the pair {b,c}: for each j and x \u2208 \\tilde S_j, compute \\hat t_x(\\tilde S_j); also compute \\hat t_c({b,c}), \\hat t_b({b,c}). Check the empirical gap conditions \\hat\u0394_j := min_{w\u2208\\tilde S_j\\{b,c,\\tilde e_j}}( \\hat t_w(\\tilde S_j) \u2212 \\hat t_{\\tilde e_j}(\\tilde S_j) ) \u2265 2\u03c4 for all j. If these hold, evaluate \\widehat{A}_b, \\widehat{B}_b, \\widehat{D}_{b,c} and certify c if\n  \\widehat{\u03b5}^{(2)}_{b}(\u03b3; c) = \\widehat{B}_b + max{ \\widehat{A}_b, \\widehat{B}_b + \\widehat{D}_{b,c} } \u2264 \u03b5 \u2212 6\u03c4.\n- If the gap checks fail, abstain (certificate inconclusive for this pivot), or enlarge m.\n\nSample complexity. The second half estimates at most N = \u2211_{j=1}^{K\u22121} |\\tilde S_j| + 2 \u2264 (K + (K\u22121) + \u2026 + 2) + 2 = O(K^2) indicators of the form 1[top_S(r)=a]. By Hoeffding + union bound, choosing m = \u0398((log(N/\u03b4))/\u03c4^2) = \u0398((log K + log(1/\u03b4))/\u03c4^2) suffices to guarantee the sup error \u2264 \u03c4 on the second half with probability \u2265 1 \u2212 \u03b4/2. A similar union bound on the first half ensures the empirical chain equals the true chain whenever the true gaps \u0394_j \u2265 4\u03c4 (to cover both halves). Overall, m = \u0398((log K + log(1/\u03b4))/\u03b5^2) with \u03c4 = \u0398(\u03b5) certifies correctness with probability \u2265 1 \u2212 \u03b4 when margin conditions hold.\n\nRemark (computable upper envelope without gap checks). For robustness without verifying chain stability, define\nA_b^{env}(\u03b3) := max_{1\u2264j\u2264K\u22122} max_{w\u2208S_j\\{b,c}} [ t_w(S_j) \u2212 t_c(S_j) + \u03b3 ]_+,\nB_b^{env}(\u03b3) := max_{1\u2264j\u2264K\u22122} max_{w\u2208S_j\\{b,c}} [ t_w(S_j) \u2212 t_b(S_j) + \u03b3 ]_+.\nThese satisfy A_b^{env} \u2265 A_b, B_b^{env} \u2265 B_b and thus yield a sound but potentially looser certificate with the same two-type mass formula. They require estimating all top-of-S tallies on the chain sets S_j, still O(K^2) numbers.\n\n# Counterexample to first-round-only two-type claims (formalized)\nLet K = 4 with C = {a,b,c,y}. Suppose first-round shares (on S_1=C) are p = (0.26, 0.26, 0.23, 0.25) for (a,b,c,y), and after removing a the tallies on S = {b,c,y} are (t_b(S), t_c(S), t_y(S)) = (0.40, 0.25, 0.35). Any certificate that compares only first-round shares would compute A* \u2248 max{p_w \u2212 p_c : w\u2208{a,b,y}}_+ = 0.03 and B* \u2248 max{p_w \u2212 p_y : w\u2208{a,b}}_+ = 0.01 for pivot y, and might conclude that adding \u03b1 \u2265 0.03 of c-first and \u03b2 \u2265 0.01 of y-first suffices to keep b below c and y in the second round. But in S={b,c,y}, b\u2019s tally is 0.40, so c remains the round-2 loser (0.25), contradicting the claimed sufficiency. Hence any sound certificate must use the relevant subset tallies t_w(S), not just first-round shares.\n\n# Lower bound: \u03a9((log K)/\u03b5^2) for the two-type certificate\nWe exhibit a family of instances where certifying that c is an \u03b5-winner via the two-type certificate reduces to identifying a favorable opponent among K \u2212 1 possibilities.\n\nConstruction. Fix \u03b3 > 0 and set up profiles satisfying, for all b \u2260 c and all S with {b,c} \u2286 S \u2286 C:\n- Dominance: for every w \u2208 S\\{b,c}, t_w(S) \u2264 min{ t_b(S), t_c(S) } \u2212 \u03b3. Thus A_b(\u03b3) = B_b(\u03b3) = 0 for every pivot b.\n- Pairwise gaps: for exactly one b* we have t_c({b*,c}) = 1/2 \u2212 \u03b5, and for all other b \u2260 b*, t_c({b,c}) \u2264 1/2 \u2212 2\u03b5.\nThen \u03b5^{(2)}(\u03b3; c) \u2264 \u03b5 iff there exists b with t_c({b,c}) \u2265 1/2 \u2212 \u03b5 (namely b = b*). Distinguishing H0: \u2200b, t_c({b,c}) \u2264 1/2 \u2212 2\u03b5 from H1: \u2203! b*, t_c({b*,c}) = 1/2 \u2212 \u03b5 reduces to identifying the best among K \u2212 1 Bernoulli means separated by \u03b5. Standard lower bounds for best-arm identification (or Fano\u2019s inequality with a (K \u2212 1)-ary hypothesis) yield m = \u03a9((log K)/\u03b5^2) samples to succeed with constant probability; scaling with log(1/\u03b4) gives \u03a9((log K + log(1/\u03b4))/\u03b5^2). Therefore the log K factor in the sampling bound for the two-type certificate is information-theoretically necessary in this regime.\n\n# Example: applying the chain certificate for K = 4\nLet C = {a,b,c,d}, target c, pivot b, \u03b3 \u2192 0^+. Suppose\n- On S_1 = {a,b,c,d}: (t_a,t_b,t_c,t_d) = (0.18, 0.26, 0.25, 0.31). Then e_1 = a.\n- On S_2 = {b,c,d}: (t_b,t_c,t_d) = (0.35, 0.32, 0.33). Then e_2 = d.\n- Pairwise c vs b: t_c({b,c}) = 0.49 (so D_{b,c}(0) = 0.02).\nCompute A_b(0) = max{ [0.18 \u2212 0.25]_+, [0.33 \u2212 0.32]_+ } = 0.01, B_b(0) = max{ [0.18 \u2212 0.26]_+, [0.33 \u2212 0.35]_+ } = 0. Hence \u03b5^{(2)}_{b}(0; c) = 0 + max{0.01, 0.02} = 0.02. Adding 2% of c-first ballots suffices to certify c as an \u03b5-winner via this chain.\n\n# Obstacles and clarifications\n- The chain-based two-type certificate is sufficient, not necessary, for K \u2265 4. Constructing an explicit K \u2265 4 instance where allowing a third ballot type strictly reduces the minimal augmentation below \u03b5^{(2)}(\u03b3; c) remains open; the natural approach is to design profiles where modest mass reorders the chain (e_j) to yield a cheaper path than any fixed-pivot two-type strategy.\n- Fixed-order LP sensitivity: bounding sup_{\u03bb\u2208\u039b} ||\u03bb||_1 in the dual remains open when the negative term at j = pos_\u03c0(x) is kept; previous bounds that dropped it were incorrect. A possible route is to exploit the nested structure of S_j to express dual constraints via a telescoping potential over rounds or to design dual solutions supported on at most one competitor per round; this is a promising but unproven direction.\n\n# Next steps\n- Add the formal chain-based theorem and proof above to proofs.md and summarize its sampling corollary (sample splitting, O(K^2) tallies, m = \u0398((log K + log(1/\u03b4))/\u03b5^2) under gap margins) in output.md.\n- Construct and verify a K = 4 separation example where a third ballot type reduces the required mass below \u03b5^{(2)}(\u03b3; c) (compute both the two-type bound and an LP-based feasible augmentation with three types).\n- Pursue a rigorous dual sensitivity bound by exploring structured duals (e.g., per-round single-competitor support) and potential-function decompositions; even a coarse poly(K) bound would yield polynomial-in-K sample guarantees for fixed orders.\n- Formalize the lower bound via Fano\u2019s method for the dominance subclass above, making explicit a ranking distribution that realizes the required top-of-S and pairwise tallies.\n"
}