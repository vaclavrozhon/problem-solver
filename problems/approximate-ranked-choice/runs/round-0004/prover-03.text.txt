Ideas
- Formalize and prove the general-K chain-based two-type certificate (pivot b) with Î³-slack and its exact two-type optimal cost B + max{A, B + D}. This provides a sound, efficiently checkable sufficient condition using only O(K^2) tallies from the chain sets S_j and the final pair.
- Give a clean sampling corollary: Hoeffding + union bound over O(K^2) tallies; plug-in stability with a safe Lipschitz constant 6 for the cost map, yielding m = Î˜((log K + log(1/Î´))/Îµ^2) to certify using the chain certificate.
- Record corrections: (i) the fixed-order LP dual sensitivity sup||Î»||_1 remains open; previous attempted bounds (â‰¤K or â‰¤Kâˆ’1) were invalid due to the negative terms, (ii) for K=3 the safe Lipschitz constant is L â‰¤ 6 (not 3).

General-K chain-based two-type certificate (precise statement and proof)
Setup. Let C be the candidate set, |C| = K â‰¥ 3. For any nonempty S âŠ† C and a âˆˆ S, let t_a(S) = Pr[top among S is a] under the baseline population distribution P over full rankings. Fix a target c âˆˆ C and a pivot b âˆˆ C \ {c}. Fix a deterministic tie-breaking rule and a slack Î³ > 0 to enforce strict separations.

Define a chain of remaining sets by S_1 := C, and for j = 1,â€¦,Kâˆ’2:
- Let e_j âˆˆ argmin_{e âˆˆ S_j \ {b,c}} t_e(S_j), with ties broken by the electionâ€™s tie-breaking rule; set S_{j+1} := S_j \ {e_j}.
Intuition: e_j is the â€œbaseline round-j loser among non-{b,c}â€ on S_j.

Define the thresholds
- A_b(Î³) := max_{1 â‰¤ j â‰¤ Kâˆ’2} [ t_{e_j}(S_j) âˆ’ t_c(S_j) + Î³ ]_+,
- B_b(Î³) := max_{1 â‰¤ j â‰¤ Kâˆ’2} [ t_{e_j}(S_j) âˆ’ t_b(S_j) + Î³ ]_+,
- D_{b,c}(Î³) := t_b({b,c}) âˆ’ t_c({b,c}) + Î³.

Consider augmentations that add only two ballot types: Î± â‰¥ 0 mass of c-first rankings and Î² â‰¥ 0 mass of b-first rankings (the completions below the top are arbitrary but fixed). Let Îµ_b^{chain}(Î³) be the minimal Î±+Î² that ensures the following IRV outcome under the augmented profile: the election eliminates e_1,â€¦,e_{Kâˆ’2} in this order and the final is c vs b with c strictly beating b by margin â‰¥ Î³.

Theorem (chain-based two-type certificate and exact two-type optimum). For any fixed b â‰  c and Î³ > 0:
1) Feasibility: If Î± â‰¥ A_b(Î³), Î² â‰¥ B_b(Î³), and Î± âˆ’ Î² â‰¥ D_{b,c}(Î³), then under the augmented profile, in round j the candidate e_j is eliminated (with strict margin to both b and c), and in the final c strictly beats b; consequently c wins. Hence any Îµ â‰¥ B_b(Î³) + max{A_b(Î³), B_b(Î³) + D_{b,c}(Î³)} suffices to make c the winner via two-type additions.
2) Optimality within two types: Among augmentations using only c-first and b-first ballots, the minimal total mass achieving the above outcome equals
   Îµ_b^{chain}(Î³) = B_b(Î³) + max{A_b(Î³), B_b(Î³) + D_{b,c}(Î³)}.

Proof.
Effect of two types. A c-first ballot contributes +1 to t_c(S) for every S with c âˆˆ S, and leaves t_a(S) unchanged for a â‰  c. A b-first ballot symmetrically contributes +1 to t_b(S) for S containing b and leaves others unchanged. In particular, for every j â‰¤ Kâˆ’2 (so S_j contains both b and c), we have
  t'_c(S_j) = t_c(S_j) + Î±,  t'_b(S_j) = t_b(S_j) + Î², and t'_{e_j}(S_j) = t_{e_j}(S_j).
Moreover, in the final S = {b,c}, t'_c(S) âˆ’ t'_b(S) = (t_c(S) âˆ’ t_b(S)) + (Î± âˆ’ Î²).

Feasibility. By the definitions of A_b and B_b,
  Î± â‰¥ A_b(Î³) â‡’ t'_c(S_j) â‰¥ t_{e_j}(S_j) + Î³ for all j,
  Î² â‰¥ B_b(Î³) â‡’ t'_b(S_j) â‰¥ t_{e_j}(S_j) + Î³ for all j.
Therefore at each round j, e_j is (weakly) below all other candidates in S_j, and strictly below both b and c. Since the other candidatesâ€™ tallies in S_j are unchanged and e_j was chosen as the argmin among S_j \ {b,c} (with the same tie-breaking), e_j is the unique eliminated (ties, if any among S_j \ {b,c}, resolve the same way as at baseline; strict gaps to b and c ensure e_j is still the minimum). After eliminating e_1,â€¦,e_{Kâˆ’2}, the final is between b and c. If in addition Î± âˆ’ Î² â‰¥ D_{b,c}(Î³), then t'_c({b,c}) â‰¥ t'_b({b,c}) + Î³, so c strictly wins the final. Hence the stated inequalities are sufficient and the total mass Î±+Î² at any feasible point is an upper bound on Îµ.

Optimal two-type cost. The feasible region in (Î±,Î²)-space is
  { (Î±,Î²) âˆˆ R_+^2 : Î± â‰¥ A_b(Î³), Î² â‰¥ B_b(Î³), Î± âˆ’ Î² â‰¥ D_{b,c}(Î³) }.
This is a convex polyhedron. Minimizing Î±+Î² over it is achieved by taking Î² = B_b(Î³) and Î± = max{A_b(Î³), B_b(Î³) + D_{b,c}(Î³)} (any larger Î² enlarges Î±+Î²; any Î± below A_b violates feasibility; if A_b â‰¤ B_b + D then the Î± âˆ’ Î² constraint is tight, otherwise Î± = A_b). Thus Îµ_b^{chain}(Î³) equals the claimed expression. âˆ

Remarks.
- This certificate depends only on the tallies t_x(S_j) for the chain sets S_j (j = 1,â€¦,Kâˆ’2) and the pairwise tallies on {b,c}. Computing the chain e_1,â€¦,e_{Kâˆ’2} uses the same deterministic tie-breaking as the election profile.
- Dominance: For this targeted chain and final, any added ballot not topping b or c in S_j weakly worsens feasibility constraints at round j (it cannot lower t_{e_j}(S_j) and does not increase t_b(S_j) or t_c(S_j)), hence it is never needed in an optimal two-type plan for this chain.

Sampling corollary for the chain-based certificate
Define, for fixed c and b, the cost map
  Î¦_b(P; Î³) := B_b(Î³) + max{A_b(Î³), B_b(Î³) + D_{b,c}(Î³)}.
Let ğ’¯_b be the multiset of tallies comprising, for j = 1,â€¦,Kâˆ’2, the triple (t_{e_j}(S_j), t_b(S_j), t_c(S_j)) and the pairwise (t_b({b,c}), t_c({b,c})). Note e_j depends on S_jâ€™s full tally vector and the fixed tie-breaker; in sampling we compute e_j from estimates (and enforce a safety slack Î³).

Lemma (uniform estimation over the chain tallies). For m i.i.d. ballots and any Ï„ > 0, with probability at least 1 âˆ’ Î´, we have
  sup_{x âˆˆ ğ’¯_b} |\hat t_x âˆ’ t_x| â‰¤ Ï„
whenever m â‰¥ c Â· (log(2|ğ’¯_b|/Î´))/Ï„^2 for a universal constant c. Here |ğ’¯_b| â‰¤ 3(Kâˆ’2) + 2 = O(K).

Proof. Hoeffdingâ€™s inequality for each tally and a union bound over |ğ’¯_b|.

Proposition (plug-in stability and sample complexity). The map Î¦_b(Â·; Î³) is Lipschitz with constant at most 6 in the sup norm over the entries of ğ’¯_b: for any two profiles P, Q,
  |Î¦_b(P; Î³) âˆ’ Î¦_b(Q; Î³)| â‰¤ 6 Â· sup_{x âˆˆ ğ’¯_b} |t_x^P âˆ’ t_x^Q|.
Consequently, if m â‰¥ c (log(2|ğ’¯_b|/Î´))/Ï„^2 and we declare c a certified Îµ-winner via pivot b whenever \hat Î¦_b â‰¤ Îµ âˆ’ 6Ï„, then with probability â‰¥ 1 âˆ’ Î´ the declaration is sound (c is an Îµ-winner).

Proof. Each difference t_{e_j}(S_j) âˆ’ t_c(S_j) and t_{e_j}(S_j) âˆ’ t_b(S_j) perturbs by at most 2Ï„ under sup-norm Ï„ perturbations of the inputs; taking positive part and a maximum over j preserves 2-Lipschitzness, so A_b and B_b are each 2-Lipschitz. The pairwise gap D_{b,c} is also 2-Lipschitz. The map (B, A, D) â†¦ B + max{A, B + D} has Lipschitz constant â‰¤ 1 + max{1, 1 + 1} = 3 with respect to sup norm on (A, B, D). Composing gives â‰¤ 3Â·2 = 6 overall. The acceptance margin then follows.

Corollary (choosing the pivot b). Since there are K âˆ’ 1 choices of b â‰  c, a union bound adds only log(K) to the sample complexity. Declare c certified if min_{bâ‰ c} \hat Î¦_b â‰¤ Îµ âˆ’ 6Ï„; with m â‰¥ c (log(2K|ğ’¯_b|/Î´))/Ï„^2 and Ï„ = Î˜(Îµ), this certifies c with probability â‰¥ 1 âˆ’ Î´ whenever min_b Î¦_b â‰¤ Îµ.

Connections and consistency checks
- K = 3: The chain has a single j (Kâˆ’2 = 1) and recovers exactly the two-type closed form previously established: Îµ^*(Î³; c) = min_{bâ‰ c} Î¦_b(P; Î³). The safe plug-in Lipschitz constant is 6.
- Soundness vs. first-round-only claims: The chain certificate crucially uses t_x(S_j) on the actual S_j; replacing these by first-round shares p_x can be arbitrarily wrong (see the verifierâ€™s K=4 counterexample where post-transfer t_b(S) = 0.40 far exceeds p_b).

Obstacles (LP dual sensitivity remains open)
- For a fixed elimination order Ï€, the primal LP and its dual are correct as recorded in the notes. The dual constraint for a ranking r includes negative terms âˆ’âˆ‘_{a} Î»_{j,a} when top_{S_j}(r) = Ï€(j). Attempting to bound sup||Î»||_1 by summing constraints over special r that place a fixed candidate first fails: the negative block at j = pos_Ï€(Â·) cancels when one sums over candidates, yielding no nontrivial bound. Any future bound must leverage constraints for families of rankings r where the negative blocks are controlled jointly rather than naÃ¯vely dropped.

Examples (sanity check instance for the chain certificate)
Construct K=4 with C={a,b,c,d}, target c, pivot b. Suppose
- First round: t({a,b,c,d}) = (0.33, 0.30, 0.27, 0.10).
- After removing d: t({a,b,c}) = (0.41, 0.31, 0.28).
- Final pair: t_c({b,c}) âˆ’ t_b({b,c}) = 0.02.
Chain (excluding {b,c}): S_1={a,b,c,d}, e_1=d; S_2={a,b,c}, e_2=a. Then
  A_b(0) = max{ [0.10âˆ’0.27]_+, [0.41âˆ’0.28]_+ } = 0.13,
  B_b(0) = max{ [0.10âˆ’0.30]_+, [0.41âˆ’0.31]_+ } = 0.10,
  D_{b,c}(0) = âˆ’0.02.
Thus Î¦_b(P; 0) = 0.10 + max{0.13, 0.08} = 0.23. Adding Î±=0.13 of c-first and Î²=0.10 of b-first ballots ensures elimination of d then a and a c-over-b final, for total mass 0.23. This illustrates how the chain-based certificate exploits the relevant S_j tallies beyond first-round shares.

Next steps
- Add the chain-based certificate theorem and sampling corollary (with L â‰¤ 6) to proofs.md and output.md. Keep the K=3 exact minimal-augmentation result and its sampling bound.
- Computational search for separations: formulate a bilevel program that (i) chooses a small-support ranking distribution P (over, say, â‰¤10 ranking types) to maximize the gap between true minimal augmentation and min_b Î¦_b(P; 0), and (ii) searches over augmentations with 2 vs. 3 types. This can produce concrete Kâ‰¥4 instances where a third ballot type strictly reduces the required mass vs. any pivot-b two-type plan.
- Dual sensitivity: explore averaging arguments over carefully chosen families of rankings that keep the negative dual terms bounded in aggregate, potentially yielding order-dependent bounds sup||Î»||_1 = poly(K) (e.g., O(K^2)). Any such bound would convert per-order LP certification into a polynomial-sample scheme.
- Lower bounds: pursue a Fano-style packing over pivots b (hiding the favorable opponent among Kâˆ’1) to show a necessary Î©((log K)/Îµ^2) factor for certifying an Îµ-winner in the worst case.
