{
  "content": "Ideas\n- Strengthen and formalize the chain-based two-type certificate (general K), with a clean \u201ccleanup\u201d lemma that projects any augmentation realizing the chain into c-first and b-first types without increasing mass.\n- Provide a sample-splitting, data-driven certification theorem: identify stable chains from half the sample, estimate only the needed tallies on those chains from the other half, and certify with polynomial sample complexity O((log K + log(1/\u03b4))/\u03b5^2) whenever a verifiable chain-stability condition holds.\n- Give a special-case exactness theorem under a monotone-minimality margin. This isolates when the two-type plan is not just sufficient but optimal for its chain.\n- Outline a candidate-specific \u03a9((log K)/\u03b5^2) lower bound via Fano by constructing a family indexed by the favorable opponent b that leaves all nonpairwise tallies invariant while flipping only t_c({b,c}).\n\nFormal results\n\nTheorem 1 (Chain-based two-type certificate; general K; rigorous statement).\nFix target c \u2208 C and a pivot b \u2208 C\\{c}. Let S_1 := C. For j = 1,\u2026,K\u22122, define e_j := argmin_{e\u2208S_j\\{b,c}} t_e(S_j), with the election\u2019s deterministic tie-breaking, and S_{j+1} := S_j\\{e_j}. For \u03b3 > 0, define\nA_b(\u03b3) := max_{1\u2264j\u2264K\u22122} [t_{e_j}(S_j) \u2212 t_c(S_j) + \u03b3]_+,\nB_b(\u03b3) := max_{1\u2264j\u2264K\u22122} [t_{e_j}(S_j) \u2212 t_b(S_j) + \u03b3]_+,\nD_{b,c}(\u03b3) := t_b({b,c}) \u2212 t_c({b,c}) + \u03b3.\nIf we add \u03b1 \u2265 0 c-first and \u03b2 \u2265 0 b-first ballots with \u03b1 \u2265 A_b(\u03b3), \u03b2 \u2265 B_b(\u03b3), and \u03b1 \u2212 \u03b2 \u2265 D_{b,c}(\u03b3), then the IRV process eliminates e_1,\u2026,e_{K\u22122} in order and elects c over b with strict margins \u2265 \u03b3 in every round. Among augmentations restricted to these two types, the minimum mass is\n\u03b5_spine(b;\u03b3) = B_b(\u03b3) + max{A_b(\u03b3), B_b(\u03b3) + D_{b,c}(\u03b3)}.\n\nProof.\nFor any S containing c (resp. b), adding \u03b1 c-first (resp. \u03b2 b-first) increases t_c(S) (resp. t_b(S)) by \u03b1 (resp. \u03b2) and leaves t_x(S) for x \u2209 {b,c} unchanged. Hence for each j,\n- t'_{e_j}(S_j) = t_{e_j}(S_j), t'_c(S_j) = t_c(S_j)+\u03b1, t'_b(S_j) = t_b(S_j)+\u03b2.\n- The constraints \u03b1 \u2265 A_b(\u03b3) and \u03b2 \u2265 B_b(\u03b3) imply t'_{e_j}(S_j) \u2264 min{t'_c(S_j), t'_b(S_j)} \u2212 \u03b3, so e_j remains the unique minimum of S_j and is eliminated (strictly) at round j.\n- In the final S_{K\u22121} = {b,c}, each c-first ballot contributes +1 to t'_c \u2212 t'_b and each b-first contributes \u22121; \u03b1 \u2212 \u03b2 \u2265 D_{b,c}(\u03b3) enforces t'_c \u2265 t'_b + \u03b3.\nThe feasible region is {(\u03b1,\u03b2) \u2208 R_+^2 : \u03b1 \u2265 A_b, \u03b2 \u2265 B_b, \u03b1 \u2212 \u03b2 \u2265 D_{b,c}}. Minimizing \u03b1+\u03b2 yields \u03b2 = B_b and \u03b1 = max{A_b, B_b + D_{b,c}}.\n\nLemma 2 (Cleanup to two types for a fixed chain).\nLet y be any augmentation that realizes the chain e_1,\u2026,e_{K\u22122} and a strict c-over-b final with margin \u03b3 > 0. Then there exists an augmentation y\u2032, supported only on c-first and b-first ballots, with \u2225y\u2032\u2225_1 \u2264 \u2225y\u2225_1 that also realizes the same chain and final margins.\n\nProof.\nDefine \u2113(r) to be the smallest j such that top_{S_j}(r) = e_j, with \u2113(r) = \u221e if no such j exists. Step 1 (delete harmful support): For any r with \u2113(r) < \u221e, reduce y(r) to 0 and redistribute that mass to b-first/c-first as below. For round \u2113(r), the coefficient of y(r) in each constraint (\u2113,a) equals \u22121 (since top = e_\u2113), so removing y(r) slackens the \u2113-th round constraints; earlier rounds j < \u2113 are unaffected in the sense that top_{S_j}(r) \u2209 {e_j}, so coefficients are nonnegative. Thus deletion cannot break feasibility if we compensate its positive effects elsewhere.\nStep 2 (pairwise projection): For any remaining r (so top_{S_j}(r) \u2209 {e_j} for all j), define s(r) \u2208 {b,c} as top_{\\{b,c\\}}(r). Replace y(r) by the same mass of s(r)-first ballots. For each j,\n- If s(r) = c: coefficients in round-j constraints become 1 for a = c and 0 else, which weakly increases LHS relative to r since r never tops e_j.\n- If s(r) = b: coefficients become 1 for a = b and 0 else for j \u2264 K\u22122; at j = K\u22121, coefficients change by \u22121 for the (final) constraint, exactly matching the effect of r on the final c vs b margin. Thus, for all rounds, this projection preserves or slackens constraints, while preserving the final margin. Summing over r, we obtain y\u2032 with no larger mass and the same or larger left-hand sides in all constraints. Hence y\u2032 is feasible and \u2225y\u2032\u2225_1 \u2264 \u2225y\u2225_1.\n\nCorollary 3 (K = 3 exactness and monotone-minimality case).\n- When K = 3, \u03b5^*(\u03b3;c) = min_{b\u2208C\\{c}} \u03b5_spine(b;\u03b3) and \u03b5^*(c) = lim_{\u03b3\u21920^+} \u03b5^*(\u03b3;c).\n- If, for some chain, there is a uniform gap \u03b8 > 0 such that for each j and every x \u2208 S_j\\{b,c,e_j}, t_x(S_j) \u2265 t_{e_j}(S_j) + \u03b8, then e_j remains the unique minimum under any \u03b1,\u03b2 \u2265 0; hence any augmentation realizing this chain can be projected to two types without loss, and \u03b5_spine(b;\u03b3) is the exact minimal mass among augmentations realizing this chain and a c-over-b final.\n\nSampling with sample-splitting\n\nTheorem 4 (Data-driven chain certification under stability; polynomial sample complexity).\nFix \u03b5, \u03b4, \u03b3 \u2208 (0,1). Split m samples into two independent halves of sizes m_1 and m_2.\n- Stage I (chain discovery): Using m_1 ballots, for each b \u2208 C\\{c}, compute the empirical chain \\hat S_1^b,\u2026,\\hat S_{K\u22121}^b, minima \\hat e_j^b, and gaps\n\\hat g_j^b := min_{x\u2208\\hat S_j^b\\{\\hat e_j^b}} \\hat t_x(\\hat S_j^b) \u2212 \\hat t_{\\hat e_j^b}(\\hat S_j^b).\nLet B_stab := {b : min_j \\hat g_j^b \u2265 4\u03c4} for a chosen \u03c4 > 0.\n- Stage II (cost estimation): Using m_2 new ballots, estimate, for each b \u2208 B_stab, the tallies \\hat t_x(\\hat S_j^b) for x \u2208 {b,c,\\hat e_j^b} and the pairwise tallies on {b,c}. Compute\n\\widehat{A}_b(\u03b3) := max_j [\\hat t_{\\hat e_j^b}(\\hat S_j^b) \u2212 \\hat t_c(\\hat S_j^b) + \u03b3]_+,\n\\widehat{B}_b(\u03b3) := max_j [\\hat t_{\\hat e_j^b}(\\hat S_j^b) \u2212 \\hat t_b(\\hat S_j^b) + \u03b3]_+,\n\\widehat{D}_{b,c}(\u03b3) := \\hat t_b({b,c}) \u2212 \\hat t_c({b,c}) + \u03b3,\n\\widehat{\u03b5}_b := \\widehat{B}_b + max{\\widehat{A}_b, \\widehat{B}_b + \\widehat{D}_{b,c}}.\nDecision: If some b \u2208 B_stab satisfies \\widehat{\u03b5}_b \u2264 \u03b5 \u2212 4\u03c4, declare c an \u03b5-winner.\nGuarantee: There exists a universal constant C such that if\nm_1 \u2265 C (log(K^3/\u03b4))/\u03c4^2 and m_2 \u2265 C (log(K^3/\u03b4))/\u03c4^2,\nthen with probability \u2265 1 \u2212 \u03b4 the following hold simultaneously: (i) for each b \u2208 B_stab, \\hat S_j^b = S_j^b and \\hat e_j^b = e_j^b for all j (true chain stability); (ii) sup error \u2264 \u03c4 for all tallies estimated in Stage II; (iii) for each b \u2208 B_stab, |\\widehat{\u03b5}_b \u2212 \u03b5_spine(b;\u03b3)| \u2264 6\u03c4. Consequently, whenever min_{b} \u03b5_spine(b;\u03b3) \u2264 \u03b5 \u2212 10\u03c4, the decision returns \u201cc is an \u03b5-winner.\u201d\n\nProof.\n- Counting: For each b, Stage I computes at most \u2211_{j=1}^{K\u22122} |\\hat S_j^b| \u2264 \u2211_{j=2}^{K} j = O(K^2) tallies; across all b there are at most O(K^3) such tallies. Hoeffding + union bound (over a data-independent list in Stage II thanks to splitting) gives sup error \u2264 \u03c4 with m_i as claimed.\n- Chain stability: If \\hat g_j^b \u2265 4\u03c4 and sup error \u2264 \u03c4, then for each j any x \u2208 \\hat S_j^b\\{\\hat e_j^b} satisfies t_x(\\hat S_j^b) \u2265 \\hat t_x(\\hat S_j^b) \u2212 \u03c4 \u2265 \\hat t_{\\hat e_j^b}(\\hat S_j^b) + 3\u03c4 \u2265 t_{\\hat e_j^b}(\\hat S_j^b) + 2\u03c4; hence \\hat e_j^b is the unique true minimum in \\hat S_j^b. Inductively, \\hat S_j^b = S_j^b and \\hat e_j^b = e_j^b for all j.\n- Lipschitz: Each of A_b, B_b, D_{b,c} is 2-Lipschitz in the sup norm; \u03b5_spine(b;\u03b3) = B_b + max{A_b, B_b + D} is thus 6-Lipschitz. Hence |\\widehat{\u03b5}_b \u2212 \u03b5_spine(b;\u03b3)| \u2264 6\u03c4. The 4\u03c4 safety margin yields correctness.\n\nRemarks.\n- This certification succeeds under a verifiable margin condition (min_j \\hat g_j^b \u2265 4\u03c4) for some b and uses only O(K^3) tallies from the second half, avoiding exponential unions.\n- If no b passes the stability test, we can abstain or fall back to the distribution-free c-first certificate (with its larger uniform-estimation burden) depending on application needs.\n\nCandidate-specific lower bound sketch (toward \u03a9((log K)/\u03b5^2)).\nConstruct a family {P_b : b \u2208 C\\{c}} of ranking distributions such that (i) all top-of-S tallies t_x(S) that do not involve the pair {b,c} are identical across b; (ii) t_c({b,c}) = 1/2 + \u03b5 and t_c({b\u2032,c}) = 1/2 \u2212 \u03b5 for all b\u2032 \u2260 b; (iii) under every P_b, c is the unique \u03b5/2-winner (e.g., pick chain margins A_b, B_b constant with B_b + D_{b,c} = const \u2212 \u03b5 so \u03b5_spine(b;0) \u2264 \u03b5/2, and arrange that every other candidate x \u2260 c requires > \u03b5 to win). Then distinguishing which P_b holds reduces to identifying which pairwise bias is positive. Since a ballot reveals the relative order of every pair, the KL between P_b and P_{b\u2032} on m i.i.d. ballots satisfies KL(P_b^m||P_{b\u2032}^m) = O(m \u03b5^2). Fano\u2019s inequality then yields m \u2265 c (log(K\u22121))/\u03b5^2 samples to identify b with error probability \u2264 1/3, implying an \u03a9((log K)/\u03b5^2) lower bound for any algorithm that must (with probability \u2265 2/3) certify c as an \u03b5/2-winner on this family. Formalizing a concrete {P_b} (e.g., via a Bradley\u2013Terry or Mallows tilt) with properties (i)\u2013(iii) is the next step.\n\nExamples (sanity checks)\n- K = 3: With p_a=0.38, p_b=0.35, p_c=0.27, t_c({b,c}) \u2212 t_b({b,c}) = 0.10, we have A_0=0.11, B_0=0.03, D_0=\u22120.10, so \u03b5_spine(b;0)=0.14 < M_c=0.20, matching the previously recorded counterexample.\n- Chain-stability diagnostic: For K=6 and \u03c4=0.01, if all empirical gaps along the pivot b chain exceed 0.05, Stage I/II with m_1=m_2\u2248c (log K + log(1/\u03b4))/\u03c4^2 will (with probability \u2265 1\u2212\u03b4) lock the chain and certify using \u03b5_spine(b;\u03b3) with margin 6\u03c4.\n\nObstacles\n- Fixed-order LP sensitivity: A global polynomial bound on sup_{\u03bb\u2208\u039b_\u03c0} \u2225\u03bb\u2225_1 remains open once negative terms at j=pos_\u03c0(x) are retained; summing \u201cchampion-ranking\u201d constraints cancels and provides no bound. Local (margin-dependent) primal repair seems possible only with restricted ballot types; a general repair that avoids harming other rounds is nontrivial.\n- Two-type suboptimality for K \u2265 4: We expect instances where \u22653 ballot types strictly reduce total mass relative to any pivot-b two-type plan (by steering to a cheaper elimination order), but we do not yet have a fully consistent explicit example. A numerical search over ranking distributions (variables P(r)) with bilevel optimization (outer: minimize gap between two-type and unrestricted LP optima; inner: solve both LPs) is planned.\n\nNext steps\n- Add Theorem 1 and Lemma 2 to proofs.md; move the K=3 exact formula as Corollary 3.\n- Incorporate Theorem 4 (sample-splitting chain certification) with explicit constants and the O(K^3) tally count argument.\n- Construct and verify (via LP) a K=4 instance where optimal support uses \u22653 ballot types.\n- Formalize the Fano lower bound: instantiate {P_b} via a Bradley\u2013Terry tilt on the pair {b,c} with all other pairwise parameters equal; confirm uniqueness of c as \u03b5-winner and compute KL to conclude \u03a9((log K)/\u03b5^2).\n- Hybrid algorithm: compute c-first M_c with a coarse uniform bound; run chain-certificate for all pivots b with sample-splitting; pick the smallest certified \u03b5. Prove the combined success condition and sample complexity under data-driven stability."
}