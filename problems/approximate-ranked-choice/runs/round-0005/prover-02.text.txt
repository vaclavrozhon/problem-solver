Ideas
- Strengthen and formalize the chain-based two-type certificate (general K), with a clean “cleanup” lemma that projects any augmentation realizing the chain into c-first and b-first types without increasing mass.
- Provide a sample-splitting, data-driven certification theorem: identify stable chains from half the sample, estimate only the needed tallies on those chains from the other half, and certify with polynomial sample complexity O((log K + log(1/δ))/ε^2) whenever a verifiable chain-stability condition holds.
- Give a special-case exactness theorem under a monotone-minimality margin. This isolates when the two-type plan is not just sufficient but optimal for its chain.
- Outline a candidate-specific Ω((log K)/ε^2) lower bound via Fano by constructing a family indexed by the favorable opponent b that leaves all nonpairwise tallies invariant while flipping only t_c({b,c}).

Formal results

Theorem 1 (Chain-based two-type certificate; general K; rigorous statement).
Fix target c ∈ C and a pivot b ∈ C\{c}. Let S_1 := C. For j = 1,…,K−2, define e_j := argmin_{e∈S_j\{b,c}} t_e(S_j), with the election’s deterministic tie-breaking, and S_{j+1} := S_j\{e_j}. For γ > 0, define
A_b(γ) := max_{1≤j≤K−2} [t_{e_j}(S_j) − t_c(S_j) + γ]_+,
B_b(γ) := max_{1≤j≤K−2} [t_{e_j}(S_j) − t_b(S_j) + γ]_+,
D_{b,c}(γ) := t_b({b,c}) − t_c({b,c}) + γ.
If we add α ≥ 0 c-first and β ≥ 0 b-first ballots with α ≥ A_b(γ), β ≥ B_b(γ), and α − β ≥ D_{b,c}(γ), then the IRV process eliminates e_1,…,e_{K−2} in order and elects c over b with strict margins ≥ γ in every round. Among augmentations restricted to these two types, the minimum mass is
ε_spine(b;γ) = B_b(γ) + max{A_b(γ), B_b(γ) + D_{b,c}(γ)}.

Proof.
For any S containing c (resp. b), adding α c-first (resp. β b-first) increases t_c(S) (resp. t_b(S)) by α (resp. β) and leaves t_x(S) for x ∉ {b,c} unchanged. Hence for each j,
- t'_{e_j}(S_j) = t_{e_j}(S_j), t'_c(S_j) = t_c(S_j)+α, t'_b(S_j) = t_b(S_j)+β.
- The constraints α ≥ A_b(γ) and β ≥ B_b(γ) imply t'_{e_j}(S_j) ≤ min{t'_c(S_j), t'_b(S_j)} − γ, so e_j remains the unique minimum of S_j and is eliminated (strictly) at round j.
- In the final S_{K−1} = {b,c}, each c-first ballot contributes +1 to t'_c − t'_b and each b-first contributes −1; α − β ≥ D_{b,c}(γ) enforces t'_c ≥ t'_b + γ.
The feasible region is {(α,β) ∈ R_+^2 : α ≥ A_b, β ≥ B_b, α − β ≥ D_{b,c}}. Minimizing α+β yields β = B_b and α = max{A_b, B_b + D_{b,c}}.

Lemma 2 (Cleanup to two types for a fixed chain).
Let y be any augmentation that realizes the chain e_1,…,e_{K−2} and a strict c-over-b final with margin γ > 0. Then there exists an augmentation y′, supported only on c-first and b-first ballots, with ∥y′∥_1 ≤ ∥y∥_1 that also realizes the same chain and final margins.

Proof.
Define ℓ(r) to be the smallest j such that top_{S_j}(r) = e_j, with ℓ(r) = ∞ if no such j exists. Step 1 (delete harmful support): For any r with ℓ(r) < ∞, reduce y(r) to 0 and redistribute that mass to b-first/c-first as below. For round ℓ(r), the coefficient of y(r) in each constraint (ℓ,a) equals −1 (since top = e_ℓ), so removing y(r) slackens the ℓ-th round constraints; earlier rounds j < ℓ are unaffected in the sense that top_{S_j}(r) ∉ {e_j}, so coefficients are nonnegative. Thus deletion cannot break feasibility if we compensate its positive effects elsewhere.
Step 2 (pairwise projection): For any remaining r (so top_{S_j}(r) ∉ {e_j} for all j), define s(r) ∈ {b,c} as top_{\{b,c\}}(r). Replace y(r) by the same mass of s(r)-first ballots. For each j,
- If s(r) = c: coefficients in round-j constraints become 1 for a = c and 0 else, which weakly increases LHS relative to r since r never tops e_j.
- If s(r) = b: coefficients become 1 for a = b and 0 else for j ≤ K−2; at j = K−1, coefficients change by −1 for the (final) constraint, exactly matching the effect of r on the final c vs b margin. Thus, for all rounds, this projection preserves or slackens constraints, while preserving the final margin. Summing over r, we obtain y′ with no larger mass and the same or larger left-hand sides in all constraints. Hence y′ is feasible and ∥y′∥_1 ≤ ∥y∥_1.

Corollary 3 (K = 3 exactness and monotone-minimality case).
- When K = 3, ε^*(γ;c) = min_{b∈C\{c}} ε_spine(b;γ) and ε^*(c) = lim_{γ→0^+} ε^*(γ;c).
- If, for some chain, there is a uniform gap θ > 0 such that for each j and every x ∈ S_j\{b,c,e_j}, t_x(S_j) ≥ t_{e_j}(S_j) + θ, then e_j remains the unique minimum under any α,β ≥ 0; hence any augmentation realizing this chain can be projected to two types without loss, and ε_spine(b;γ) is the exact minimal mass among augmentations realizing this chain and a c-over-b final.

Sampling with sample-splitting

Theorem 4 (Data-driven chain certification under stability; polynomial sample complexity).
Fix ε, δ, γ ∈ (0,1). Split m samples into two independent halves of sizes m_1 and m_2.
- Stage I (chain discovery): Using m_1 ballots, for each b ∈ C\{c}, compute the empirical chain \hat S_1^b,…,\hat S_{K−1}^b, minima \hat e_j^b, and gaps
\hat g_j^b := min_{x∈\hat S_j^b\{\hat e_j^b}} \hat t_x(\hat S_j^b) − \hat t_{\hat e_j^b}(\hat S_j^b).
Let B_stab := {b : min_j \hat g_j^b ≥ 4τ} for a chosen τ > 0.
- Stage II (cost estimation): Using m_2 new ballots, estimate, for each b ∈ B_stab, the tallies \hat t_x(\hat S_j^b) for x ∈ {b,c,\hat e_j^b} and the pairwise tallies on {b,c}. Compute
\widehat{A}_b(γ) := max_j [\hat t_{\hat e_j^b}(\hat S_j^b) − \hat t_c(\hat S_j^b) + γ]_+,
\widehat{B}_b(γ) := max_j [\hat t_{\hat e_j^b}(\hat S_j^b) − \hat t_b(\hat S_j^b) + γ]_+,
\widehat{D}_{b,c}(γ) := \hat t_b({b,c}) − \hat t_c({b,c}) + γ,
\widehat{ε}_b := \widehat{B}_b + max{\widehat{A}_b, \widehat{B}_b + \widehat{D}_{b,c}}.
Decision: If some b ∈ B_stab satisfies \widehat{ε}_b ≤ ε − 4τ, declare c an ε-winner.
Guarantee: There exists a universal constant C such that if
m_1 ≥ C (log(K^3/δ))/τ^2 and m_2 ≥ C (log(K^3/δ))/τ^2,
then with probability ≥ 1 − δ the following hold simultaneously: (i) for each b ∈ B_stab, \hat S_j^b = S_j^b and \hat e_j^b = e_j^b for all j (true chain stability); (ii) sup error ≤ τ for all tallies estimated in Stage II; (iii) for each b ∈ B_stab, |\widehat{ε}_b − ε_spine(b;γ)| ≤ 6τ. Consequently, whenever min_{b} ε_spine(b;γ) ≤ ε − 10τ, the decision returns “c is an ε-winner.”

Proof.
- Counting: For each b, Stage I computes at most ∑_{j=1}^{K−2} |\hat S_j^b| ≤ ∑_{j=2}^{K} j = O(K^2) tallies; across all b there are at most O(K^3) such tallies. Hoeffding + union bound (over a data-independent list in Stage II thanks to splitting) gives sup error ≤ τ with m_i as claimed.
- Chain stability: If \hat g_j^b ≥ 4τ and sup error ≤ τ, then for each j any x ∈ \hat S_j^b\{\hat e_j^b} satisfies t_x(\hat S_j^b) ≥ \hat t_x(\hat S_j^b) − τ ≥ \hat t_{\hat e_j^b}(\hat S_j^b) + 3τ ≥ t_{\hat e_j^b}(\hat S_j^b) + 2τ; hence \hat e_j^b is the unique true minimum in \hat S_j^b. Inductively, \hat S_j^b = S_j^b and \hat e_j^b = e_j^b for all j.
- Lipschitz: Each of A_b, B_b, D_{b,c} is 2-Lipschitz in the sup norm; ε_spine(b;γ) = B_b + max{A_b, B_b + D} is thus 6-Lipschitz. Hence |\widehat{ε}_b − ε_spine(b;γ)| ≤ 6τ. The 4τ safety margin yields correctness.

Remarks.
- This certification succeeds under a verifiable margin condition (min_j \hat g_j^b ≥ 4τ) for some b and uses only O(K^3) tallies from the second half, avoiding exponential unions.
- If no b passes the stability test, we can abstain or fall back to the distribution-free c-first certificate (with its larger uniform-estimation burden) depending on application needs.

Candidate-specific lower bound sketch (toward Ω((log K)/ε^2)).
Construct a family {P_b : b ∈ C\{c}} of ranking distributions such that (i) all top-of-S tallies t_x(S) that do not involve the pair {b,c} are identical across b; (ii) t_c({b,c}) = 1/2 + ε and t_c({b′,c}) = 1/2 − ε for all b′ ≠ b; (iii) under every P_b, c is the unique ε/2-winner (e.g., pick chain margins A_b, B_b constant with B_b + D_{b,c} = const − ε so ε_spine(b;0) ≤ ε/2, and arrange that every other candidate x ≠ c requires > ε to win). Then distinguishing which P_b holds reduces to identifying which pairwise bias is positive. Since a ballot reveals the relative order of every pair, the KL between P_b and P_{b′} on m i.i.d. ballots satisfies KL(P_b^m||P_{b′}^m) = O(m ε^2). Fano’s inequality then yields m ≥ c (log(K−1))/ε^2 samples to identify b with error probability ≤ 1/3, implying an Ω((log K)/ε^2) lower bound for any algorithm that must (with probability ≥ 2/3) certify c as an ε/2-winner on this family. Formalizing a concrete {P_b} (e.g., via a Bradley–Terry or Mallows tilt) with properties (i)–(iii) is the next step.

Examples (sanity checks)
- K = 3: With p_a=0.38, p_b=0.35, p_c=0.27, t_c({b,c}) − t_b({b,c}) = 0.10, we have A_0=0.11, B_0=0.03, D_0=−0.10, so ε_spine(b;0)=0.14 < M_c=0.20, matching the previously recorded counterexample.
- Chain-stability diagnostic: For K=6 and τ=0.01, if all empirical gaps along the pivot b chain exceed 0.05, Stage I/II with m_1=m_2≈c (log K + log(1/δ))/τ^2 will (with probability ≥ 1−δ) lock the chain and certify using ε_spine(b;γ) with margin 6τ.

Obstacles
- Fixed-order LP sensitivity: A global polynomial bound on sup_{λ∈Λ_π} ∥λ∥_1 remains open once negative terms at j=pos_π(x) are retained; summing “champion-ranking” constraints cancels and provides no bound. Local (margin-dependent) primal repair seems possible only with restricted ballot types; a general repair that avoids harming other rounds is nontrivial.
- Two-type suboptimality for K ≥ 4: We expect instances where ≥3 ballot types strictly reduce total mass relative to any pivot-b two-type plan (by steering to a cheaper elimination order), but we do not yet have a fully consistent explicit example. A numerical search over ranking distributions (variables P(r)) with bilevel optimization (outer: minimize gap between two-type and unrestricted LP optima; inner: solve both LPs) is planned.

Next steps
- Add Theorem 1 and Lemma 2 to proofs.md; move the K=3 exact formula as Corollary 3.
- Incorporate Theorem 4 (sample-splitting chain certification) with explicit constants and the O(K^3) tally count argument.
- Construct and verify (via LP) a K=4 instance where optimal support uses ≥3 ballot types.
- Formalize the Fano lower bound: instantiate {P_b} via a Bradley–Terry tilt on the pair {b,c} with all other pairwise parameters equal; confirm uniqueness of c as ε-winner and compute KL to conclude Ω((log K)/ε^2).
- Hybrid algorithm: compute c-first M_c with a coarse uniform bound; run chain-certificate for all pivots b with sample-splitting; pick the smallest certified ε. Prove the combined success condition and sample complexity under data-driven stability.