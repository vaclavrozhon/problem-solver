# Ideas
- Strengthen the K ≥ 4 story by (i) formalizing a “steered-two-type” plan (types {c, s} with a steering candidate s) for a targeted two-step path and giving a closed-form minimizer; (ii) tightening the K = 4 separation example with explicit completions and smaller mass (≈0.1002); (iii) providing a clean Ω((log K)/ε^2) Fano lower bound tailored to the two-type/chain setting.

# Lemma (K = 4, targeted path d → a with types {c, a})
Fix C = {a,b,c,d}, target c, pivot b, and slack γ > 0. Consider the targeted elimination path: eliminate d from S1 = C, then eliminate a from S2′ = {a,b,c}, then a c-over-b final. Allow only two added types with fixed completions: c-first ballots r^c: c ≻ b ≻ d ≻ a and a-first ballots r^a: a ≻ c ≻ b ≻ d. Let α, β_a ≥ 0 be their masses. Define baseline tallies
- On S1: t_x(C) for x ∈ {a,b,c,d}.
- On S2′: t_x(S2′) for x ∈ {a,b,c}.
- Pair {b,c}: t_c({b,c}), t_b({b,c}).
Set the shorthand bounds
LB_α := [t_d(C) − t_c(C) + γ]_+,
LB_β := [t_d(C) − t_a(C) + γ]_+,
U_b := t_b(S2′) − t_a(S2′) − γ,
U_c := t_c(S2′) − t_a(S2′) − γ,
D := t_b({b,c}) − t_c({b,c}) + γ.
Feasibility region is
- Round 1 (force d last): α ≥ LB_α, β_a ≥ LB_β, and t_b(C) ≥ t_d(C) + γ (a baseline check).
- Round 2 (force a last in S2′): β_a ≤ U_b and β_a − α ≤ U_c.
- Final: α + β_a ≥ D.
The minimal total added mass over {c,a}-types is
  ε_{(c,a)}^*(γ) = min_{β ∈ [LB_β, U_b]} [ β + max{ LB_α, D − β, β − U_c } ].
Moreover, if LB_α ≥ max{ D − LB_β, LB_β − U_c } and U_b ≥ LB_β, then the minimizer is β = LB_β and
  ε_{(c,a)}^*(γ) = LB_β + LB_α.

Proof sketch.
The round-wise inequalities are linear and necessary/sufficient for the targeted path with the chosen completions: on S1, the added types do not increase t_d; on S2′, a-first adds only to a and c-first only to c; in the final pair, both added types contribute to c over b. For fixed β, the smallest admissible α is α(β) = max{LB_α, D − β, β − U_c}, so the objective becomes f(β) = β + α(β), piecewise linear/convex on [LB_β, U_b]; the minimizer lies at an endpoint or at an intersection of two active pieces. The stated closed form follows, with the convenient sufficient condition ensuring α(β) is determined by LB_α at β = LB_β. ∎

# Tightened K = 4 separation example (explicit completions, smaller mass)
Use the 7 ranking types and probabilities from the prior example:
- 0.06: a ≻ b ≻ d ≻ c (A_b), 0.12: a ≻ d ≻ c ≻ b (A_d), 0.35: b ≻ a ≻ c ≻ d (B),
- 0.22: c ≻ b ≻ d ≻ a (C), 0.085: d ≻ c ≻ b ≻ a (D_c), 0.05: d ≻ a ≻ c ≻ b (D_a), 0.115: d ≻ b ≻ c ≻ a (D_b).
Baseline checks (recomputed):
- S1 tallies: (t_a,t_b,t_c,t_d) = (0.18, 0.35, 0.22, 0.25).
- S2 = {b,c,d} tallies: (t_b,t_c,t_d) = (0.41, 0.22, 0.37).
- S2′ = {a,b,c} tallies: (t_a,t_b,t_c) = (0.23, 0.465, 0.305).
- Pair {b,c}: t_c = 0.475, t_b = 0.525, so D (γ → 0) = 0.05.
Chain two-type with pivot b gives ε_b^{(2)}(0; c) = 0 + max{[0.37−0.22]_+, [0.18−0.22]_+ , 0.05} = 0.15.
Steered plan via Lemma (types {c,a} with r^c: c ≻ b ≻ d ≻ a and r^a: a ≻ c ≻ b ≻ d):
- LB_α = [0.25 − 0.22]_+ = 0.03, LB_β = [0.25 − 0.18]_+ = 0.07,
- U_b = 0.465 − 0.23 = 0.235, U_c = 0.305 − 0.23 = 0.075, D = 0.05.
Condition LB_α ≥ max{ D − LB_β, LB_β − U_c } holds: 0.03 ≥ max{ −0.02, −0.005 } = 0.03 ≥ −0.005. Hence
  ε_{(c,a)}^*(0) = LB_β + LB_α = 0.07 + 0.03 = 0.10.
Choose β_a = 0.0701, α = 0.0301. Then
- Round 1: (a,b,c,d) → (0.2501, 0.35, 0.2501, 0.25), so d is uniquely minimal.
- Round 2 on {a,b,c}: (a,b,c) → (0.3001, 0.465, 0.3351), so a is eliminated.
- Final {b,c}: t′_c − t′_b = (0.475 + α + β_a) − 0.525 ≈ 0.0502 > 0.
Total mass ≈ 0.1002 < 0.15. This strictly separates the chain two-type bound from the true minimal augmentation (with these two types) for K = 4.

# Lower bound (Fano) for identifying a favorable pivot: Ω((log K)/ε^2)
Construct a family {P^y : y ∈ C\{c}} with the following properties for a fixed γ > 0 and ε ∈ (0, 1/8):
- Dominance in all multi-candidate rounds: for every S ⊇ {b,c} and every w ∈ S\{b,c}, t_w(S) ≤ min{t_b(S), t_c(S)} − γ. Thus A_b(γ) = B_b(γ) = 0 for all b.
- Pairwise differences: for a designated y, set t_c({c,y}) = 1/2 − ε while for all z ≠ y, t_c({c,z}) = 1/2 − 2ε.
- Full-ranking consistency: realize P^y by allocating all mass to rankings where candidates other than {c,y} are below both, and split an ε-fraction of mass between c ≻ y and y ≻ c to achieve the prescribed pairwise margins; the rest of the profile is identical across y.
Then c is an ε-winner via the two-type certificate iff there exists y with t_c({c,y}) ≥ 1/2 − ε. Consider a uniform prior over y ∈ C\{c}. For y ≠ y′, the only difference between P^y and P^{y′} lies in the Bernoulli event “c beats the designated opponent” with means p = 1/2 − ε vs q = 1/2 − 2ε, so the per-sample KL divergence satisfies KL(P^y || P^{y′}) ≤ KL(Bern(p)||Bern(q)) ≤ 4ε^2 (since q(1−q) ≥ 1/4 − o(1)). By Fano’s inequality for multi-hypothesis testing with M = K − 1 hypotheses,
  m ≥ ( (1/2) log M ) / (4ε^2 ) = Ω( (log K)/ε^2 )
 is necessary to identify y (and hence to certify c) with error probability ≤ 1/3; adding a log(1/δ) factor gives Ω((log K + log(1/δ))/ε^2) for error ≤ δ. This matches the log K term in our sampling upper bounds for two-type-like certificates.

# Obstacles
- Extending the closed-form minimizer beyond K = 4 (or beyond the specific two-step path) requires handling upper and lower bounds across multiple rounds; the piecewise-linear envelope remains tractable but casework grows. A general “few-type targeted-chain LP” subsumes this and stays low-dimensional.
- LP sensitivity: a polynomial bound on sup_{λ∈Λ} ||λ||_1 remains open; a local, margin-dependent bound (when each round’s gap ≥ μ) seems plausible but needs a careful dual construction that respects the negative term at j = pos_π(x).

# Next steps
- Add the K = 4 steered-two-type lemma (with proof) and the tightened example to proofs.md.
- Generalize the lemma: for a chosen steering s and path e1 → e2, write the two-variable closed form as min_{β ∈ [LB_β, U_b]} β + max{ LB_α, D − β, β − U_c }, and verify on additional synthetic profiles.
- Implement a few-type targeted-chain LP (variables for {c, pivot, up to 2 steering types}), with sample-splitting and a 6τ margin; record its piecewise-linear stability under sup-norm ballot-tally perturbations.
- Formalize the Fano lower bound with explicit constants and a fully specified ranking family; add to proofs.md as a theorem.
- Package a hybrid certifier: (i) K = 3 exact; (ii) chain two-type under stability; (iii) steered-two-type for K = 4 (and small K) paths; (iv) c-first fallback. Keep sampling m = Θ((log K + log(1/δ))/ε^2) with appropriate margins.