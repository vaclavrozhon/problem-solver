Ideas
- Use the conflict graph G on E: x–y is an edge iff ∃ p≠q with f_p(x)=f_q(y). A valid partition is a proper coloring; #parts = χ(G).
- Two complementary “strongest” directions:
  1) Make χ(G) as large as possible for fixed k and small n (ideally n=1), allowing zero fibres: factorial-size families via permutations.
  2) Impose strong uniformity (all fibres size 1, i.e., every f_i a bijection) and still force G complete: optimal quadratic-size families via symmetric designs; also prove an absolute upper bound in this regime.

Permutation template with many small fibres per z (factorial χ at n=1)
Construction (avoid r disjoint matchings).
- Let k≥3 and fix r∈{1,…,k−1}. Take F=[k], E⊆S_k, and define f_i(π)=π(i) (i∈[k]). Let P_1,…,P_r be r disjoint permutation matrices (e.g. cyclic shifts). Let B:=P_1∪…∪P_r and A:=J−B (J all-ones). Define E_0(r):={π∈S_k : π avoids B}, i.e., A’s 1-entries.
- Conflict completeness: For π≠σ, choose s with π^{-1}(s)≠σ^{-1}(s); then f_{π^{-1}(s)}(π)=s=f_{σ^{-1}(s)}(σ) with distinct indices, so G is complete on E_0(r).
- Fibres: For each z and each j∈[r], the unique row t_j with P_j(t_j,z)=1 is forbidden. Hence f_{t_j}^{-1}(z)=∅ on E_0(r). Thus for every z there are ≥ r indices t with |f_t^{-1}(z)|=0≤1 (so the hypothesis holds with n=1, and even with the stronger variant “≥r functions have small fibres per z”).
- Size lower bound (van der Waerden): Scale A to A′:=A/(k−r), which is doubly stochastic. By van der Waerden, per(A′)≥k!/k^k. Hence |E_0(r)|=per(A)=(k−r)^k per(A′) ≥ k!(1−r/k)^k ≈ e^{−r}k!.
Conclusion: For any fixed r, we get χ(G)=|E_0(r)|≥k!(1−r/k)^k with n=1. This is essentially optimal in “size vs. k” among all counterexamples allowing zero fibres.

A unifying bipartite-template lemma (n=1, bijective or surjective variants)
Lemma (k-regular k-edge-coloring + pairwise co-neighborhoods ⇒ complete G).
Let H be a k-regular bipartite graph with parts (E,F) and a proper k-edge-coloring into perfect matchings M_1,…,M_k. Define f_i(x) to be the (unique) neighbor of x via matching M_i. Then:
- Distinctness: {f_1(x),…,f_k(x)}=N_H(x), so values are pairwise distinct.
- Uniform fibres: For all i,z, |f_i^{-1}(z)|=1 (each M_i is perfect), hence n=1 with no zero fibres.
- If every two x≠y in E have a common neighbor in H, then G is complete.
Proof. Immediate from definitions and proper edge-coloring at each z, which guarantees the two colors used at a common neighbor are distinct.

Optimal upper bound under bijective constraint (all |f_i^{-1}(z)|=1)
Proposition (quadratic cap; equality at projective planes). Suppose |E|=|F|=v and for all i,z we have |f_i^{-1}(z)|=1. If G is complete, then v ≤ k^2−k+1. Equality holds iff every pair of x≠y has exactly one common image value (i.e., the incidence is a symmetric 2-(v,k,1) design, a projective plane).
Proof. Let c_z:=|{x∈E : z∈{f_1(x),…,f_k(x)}|}. Since each color is bijective and distinctness holds, c_z=k for every z. Double-count pairs of x≠y with a common z:
- LHS: sum_{z∈F} C(c_z,2)=v·C(k,2)=v·k(k−1)/2.
- RHS: at least C(v,2) since G is complete. Hence v·k(k−1)/2 ≥ v(v−1)/2, i.e., v ≤ k(k−1)+1. Equality forces every pair to meet in exactly one z.
Corollary (explicit families). For k=q+1 (q a prime power), take E=lines, F=points of PG(2,q). With a k-edge-coloring of the incidence graph, each f_i is a bijection, n=1, and G is K_{v} with v=k^2−k+1. Small cases: k=3 gives v=7 (Fano plane); k=4 gives v=13; k=5 lacks λ=1, but a symmetric (11,5,2) biplane gives v=11>3 (still n=1 and complete G).

Extension: uniform r-to-1 fibres for all i,z
Proposition. Suppose for some r≥1, for all i and z we have |f_i^{-1}(z)|=r (so |E|=r|F|=:v, each f_i is surjective with constant fibres) and G is complete. Then v ≤ kr(kr−1)+1.
Proof. Let c_z be the number of x with z in {f_1(x),…,f_k(x)}. Distinctness across colors at each x implies that the r preimages per color at z are all distinct across colors, hence c_z=kr for each z. By the same double-counting, sum_{z} C(c_z,2)=|F|·C(kr,2)≥C(v,2). Since |F|=v/r, we get (v/r)·kr(kr−1)/2 ≥ v(v−1)/2, i.e., v ≤ kr(kr−1)+1. For r=1 we recover the bijective bound.
Remark. This shows that even under strong uniformity (no zeros and all fibres equal r), χ(G) cannot exceed Θ((kr)^2). The projective-plane case (r=1) is optimal; it is natural to ask for constructions near the bound for r>1.

Explicit small examples (checkable)
- k=3 (Fano plane): v=7; three bijections f_1,f_2,f_3 with |f_i^{-1}(z)|=1; G=K_7; χ=7>3.
- k=3, permutation family: take E={(123),(132)}∪{(23),(13),(12)}; n=1; G=K_5.
- k≥3, factorial family with r=1: E_0(1) has size ≥k!(1−1/k)^k≈(k!/e); n=1; G complete.

Obstacles/limits
- Within the bijective class (|f_i^{-1}(z)|=1), v≤k^2−k+1 is tight; cannot hope for superquadratic χ at n=1 without allowing zero fibres.
- For the “≥r small fibres per z” variant, the E_0(r) construction is rigorous; pinned-completion counts for mixing additional constraints should use rook-polynomial/LLL rather than ad hoc row/column regularity.

Next steps
- Document a clean proof (notes/proofs) of the E_0(r) result with the van der Waerden bound and explicit choice of r disjoint permutation matrices; include the completeness check.
- Add the general bipartite-template lemma and the quadratic upper bound propositions (bijective case, and r-to-1 generalization) to proofs.md; they clarify optimality within strong-regularity regimes.
- Catalogue more symmetric designs (biplanes, Hadamard-derived symmetric designs) to extend the set of k with n=1 and complete G, recording their v and comparing to k^2−k+1.
- Explore near-extremal constructions for r≥2 approaching v≈kr(kr−1)+1.
