Ideas
- Keep using the conflict graph G on E: x–y is an edge iff ∃ p≠q with f_p(x)=f_q(y). A valid partition is a proper coloring; the minimum number of parts equals χ(G). Strongest counterexamples: make G complete and |E| as large as possible under strong fibre constraints.
- Two “extremal regimes” to sharpen: (A) permutation template E⊆S_k with f_i(π)=π(i) (factorial size); (B) bijection regime (each f_i a bijection), where the projective-plane construction is optimal; we formalize a short, general proof and extend to uniform r-to-1 maps.

A general coverage inequality for complete G
Lemma (pair coverage). Let m:=|E|, and for each i∈[k], z∈F put a_i(z):=|f_i^{-1}(z)|. If G is complete, then
\[
 m(m-1)\ \le\ \sum_{z\in F}\Big(\big(\sum_{i=1}^k a_i(z)\big)^2\ -\ \sum_{i=1}^k a_i(z)^2\Big).
\]
Proof. For p\ne q, define R_{p,q}:=\{(x,y): f_p(x)=f_q(y)\}. Then |R_{p,q}|=\sum_z a_p(z)a_q(z). Completeness says every ordered pair (x,y), x\ne y, lies in \bigcup_{p\ne q}R_{p,q}. Hence m(m-1)≤\sum_{p\ne q}|R_{p,q}|. But
\[\sum_{p\ne q}\sum_z a_p(z)a_q(z)=\sum_z \Big(\big(\sum_i a_i(z)\big)^2-\sum_i a_i(z)^2\Big).\]
This gives the claim.
Why useful: it yields tight upper bounds in structured regimes by plugging fibre constraints.

Consequences
1) Bijection regime (all fibres 1). Suppose |E|=|F|=:m and each f_i is a bijection, so a_i(z)=1 for all i,z. Then for every z, (\sum_i a_i(z))^2−\sum_i a_i(z)^2=k^2−k. Summing over m values of z yields
\[m(m-1)\le m\,(k^2-k)\quad\Rightarrow\quad m\le k^2-k+1.\]
Attainment: For k=q+1 (q prime power), PG(2,q) with a k-edge-coloring of its incidence bipartite graph gives m=q^2+q+1=k^2−k+1, |f_i^{-1}(z)|=1 for all i,z, and G complete. Hence the quadratic bound is tight under maximal regularity.

2) Uniform r-to-1 regime (each f_i is r-to-1). Let m:=|E|, s:=|F|, with m=rs and a_i(z)=r for all i,z. For each z, (\sum_i a_i(z))^2−\sum_i a_i(z)^2=(kr)^2−k r^2=r^2 k(k−1). Summing over s=m/r values of z gives
\[m(m-1)\le (m/r)\,r^2 k(k-1)=m\,r\,k(k-1)\quad\Rightarrow\quad m\le r\,k(k-1)+1.\]
Remark. This corrects an earlier (too strong) claim v≤kr(kr−1)+1; the sharp double-counting yields m≤r k(k−1)+1. The case r=1 recovers the bijection bound. Tightness for r>1 remains open; see Obstacles.

Strengthened factorial counterexamples at n=1 with many small fibres
Construction (for every k≥3 and 1≤r≤k−1). Let F=[k]. For each z, forbid the r “cyclic” cells T_z={z,z+1,…,z+r−1} (indices mod k). Let A be the k×k 0–1 matrix with A_{i,z}=1 iff i∉T_z. Let E be the set of permutations π with A_{i,π(i)}=1 for all i, and define f_i(π)=π(i).
- Fibres: For every z and each t∈T_z, f_t^{-1}(z)=∅; thus for each z there are ≥r indices with fibre 0, so the hypothesis holds with n=1 (indeed, strictly stronger).
- Completeness: The permutation-template argument makes G complete on E.
- Size lower bound (van der Waerden). A has constant row/column sums d:=k−r. Normalize B:=A/d; B is doubly-stochastic. Egorychev–Falikman gives per(B)≥k!/k^k, hence
\[|E|=\operatorname{per}(A)=d^k\operatorname{per}(B)\ge (k−r)^k\,\frac{k!}{k^k}=\big(1−\tfrac{r}{k}\big)^k k!\ge e^{−r}(1−o(1))\,k!\ (k\to\infty).\]
Thus χ(G)=|E| is factorial in k already for n=1 and any fixed r≥1, even under the stronger “≥ r small fibres per z” constraint.

Permutation template with fixed transversal: sharp linear bound in n
Let F=[k], f_i(π)=π(i) on E⊆S_k, and fix a bijection τ:F→[k]. Suppose the “witness caps” hold: |{π∈E: π(τ(z))=z}|≤n for all z.
Proposition. |E|≤D_k+kn, with equality for all 1≤n≤D_{k−1}. Moreover G is complete.
Proof. Split E into E_0 (avoid all designated cells C_τ={ (τ(z),z) }) and E_1 (hit at least one). Then |E_0|=D_k, and by assigning every π∈E_1 to the least z with π(τ(z))=z we get |E_1|≤\sum_z n=kn. For tightness, take E_0:=all derangements, and for each z pick n permutations with a unique fixed point at z (at least D_{k−1} many avail.); completeness follows from the permutation argument.
Corollary. For fixed k and small n, χ(G)=D_k+kn≈e^{−1}k! dominates 2n+1 by a factorial margin.

Examples
- k=3, n=1 (permutation template): E={(123),(132)}∪{(23),(13),(12)} gives χ(G)=5>3.
- k=q+1, n=1 (projective plane): χ(G)=k^2−k+1 with |f_i^{-1}(z)|=1 ∀i,z, optimal in the bijection regime.
- k arbitrary, r=1 (forbidden-cells family): |E|≥(1−1/k)^k k!≈e^{−1}k!, with ≥1 zero-fibre index per z and χ(G)=|E|.

Obstacles and corrections
- Uniform r-to-1: The upper bound m≤r k(k−1)+1 is sharp for r=1 but we lack constructions attaining it for r>1. A naive “duplicate-E” blow-up of the projective-plane example fails: pairs coming from the same duplicated vertex are not adjacent (p must equal q to hit the same point), so G is not complete.
- Pinned completions (through a fixed allowed cell in a regular 0–1 matrix) for n>1: existence of one perfect matching through an edge is easy in regular bipartite graphs (edge-color into 1-factors), but guaranteeing ≥n distinct ones uniformly is nontrivial; we avoid unjustified quantitative claims.

Next steps
- Record the coverage inequality and its corollaries (bijection and uniform r-to-1 bounds) in proofs.md, explicitly correcting the earlier r-to-1 bound to m≤r k(k−1)+1.
- Seek near-tight r>1 constructions. One direction: start from a projective plane on (E,F) and fold multiple E-vertices to share images in a way that preserves completeness (e.g., replace each edge-color class by a small gadget that still yields one image per index). Alternatively, search for incidence structures with “two colors per meeting” that could realize r=2.
- Strengthen factorial families: combine the “forbidden r matchings” core with one pinned matching per z (Hall’s theorem guarantees existence) to also meet additional local constraints (e.g., exactly one designated index per z with fibre ≤1), while retaining size ≈e^{−r}k!.
- Small-k classification: for k=3 and n=1, check by search whether χ(G) can exceed 7 (the bijection bound cap) when allowing non-bijective functions; current best is 7 via Fano plane; a full classification would be informative.