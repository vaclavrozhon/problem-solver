# Ideas
- Prove a clean multiplicity formula in 3D for the color c_3, generalizing the d=2 Facts. This gives a direct way to certify uniqueness in structured cases.
- Reduce to the known d=2 theorem on any coordinate slice that contains at least two points; because c_3 records equal coordinates in ℓ and E(T), slice-uniqueness implies global uniqueness.
- Handle the complementary “coordinatewise-injective” case (no two points share any coordinate value): any mixed-sign type has multiplicity 1; if no mixed-sign edge exists, the set is a chain and a [+++]-type at the penultimate element is unique.
- Outline the generalization to d dimensions by induction on d, using the same two-case split (slice or injective).

# Multiplicity formula in 3D
Fix a type T and choose a representative sign vector s∈{−1,0,+1}^3\{0} with support J(T)=\{i: s_i≠0\} and equal set E(T)=\{i: s_i=0\}. For ℓ=(α,β,γ)∈[n]^3 define
- A_+(T,ℓ):= #{ v∈U : v_i=ℓ_i for i∈E(T); v_i>ℓ_i for i∈J(T) with s_i=+1; v_i=ℓ_i for i∈J(T) with s_i=−1 }.
- A_−(T,ℓ):= #{ u∈U : u_i=ℓ_i for i∈E(T); u_i=ℓ_i for i∈J(T) with s_i=+1; u_i>ℓ_i for i∈J(T) with s_i=−1 }.

Lemma (3D multiplicity). The number of edges e in G[U] with c_3(e)=(T,ℓ) equals A_+(T,ℓ)·A_−(T,ℓ). The product is independent of the choice of representative s (flipping s↦−s swaps A_+ and A_−).

Proof. Orient an edge {u,v} to an ordered pair (u→v) so that for each i∈J(T), the sign of v_i−u_i equals s_i (if s_i=+ then v_i>u_i; if s_i=− then u_i>v_i); for i∈E(T) we have u_i=v_i=ℓ_i. Then ℓ(u,v)=ℓ and u, v satisfy the defining constraints of A_− and A_+, respectively. Conversely, any u counted by A_− and v counted by A_+ form an oriented edge with type T and lower corner ℓ. This is a bijection between oriented edges with color (T,ℓ) and A_−×A_+, hence the number of unordered edges is A_+·A_− (each unordered edge admits exactly one orientation matching the fixed s). Changing s flips the roles, preserving the product.

Useful specializations (for checks):
- T=[+,+,+]: multiplicity = 1_{ℓ∈U}·|{v∈U: v_x>ℓ_x, v_y>ℓ_y, v_z>ℓ_z}|.
- T=[+,-,0]: multiplicity = r(α,β,γ)·s(α,β,γ) with r= #{(α,y,γ)∈U: y>β}, s= #{(x,β,γ)∈U: x>α}.
- T=[+,0,0]: multiplicity = 1_{(α,β,γ)∈U}·#{(x,β,γ)∈U: x>α}. Symmetric variants are analogous.

# Slice-lifting lemma
Lemma (slice→global). Fix a coordinate, say z. If a slice U_γ:=U∩{z=γ} has |U_γ|≥2 and G[U_γ] contains an edge whose color is unique under the d=2 coloring on (x,y), then G[U] contains an edge whose color under c_3 is unique.

Proof. Any edge inside U_γ has E(T)⊇{z} and ℓ_z=γ for c_3. If e on U_γ has unique 2D color (type on x,y with appropriate minima), then there is no other edge inside U_γ with the same (T restricted to x,y, ℓ_x,ℓ_y). Consequently no other edge inside U_γ has the same c_3 color (T,ℓ_x,ℓ_y,ℓ_z=γ). No edge outside U_γ can share this c_3 label because ℓ_z appears and must equal γ while E(T) includes z; thus both endpoints would have z=γ and lie in U_γ. Hence the color is unique in G[U].

# Coordinatewise-injective case
Assume every coordinate slice has size at most 1: for all α,β,γ, we have |U[x=α]|,|U[y=β]|,|U[z=γ]|≤1. Equivalently, no two points in U agree in any coordinate.

Lemma (mixed-sign edges are unique). Let e have type T with J(T)={x,y,z} and with both + and − appearing in any representative s (i.e., T is not [+++] modulo sign). Then c_3(e) has multiplicity 1 in G[U].

Proof. By multiplicity, A_− counts u with u_i=ℓ_i for each i with s_i=+ and u_i>ℓ_i for each i with s_i=−; in particular, u_i is fixed to ℓ_i on at least one coordinate, so by injectivity there is at most one such u. Since e realizes the color, A_−=1. Similarly A_+ fixes v_i=ℓ_i on all s_i=− and v_i>ℓ_i on s_i=+, again at most one v and realized, so A_+=1. Thus the multiplicity is 1.

Lemma (no mixed sign ⇒ chain ⇒ unique [+++]). If every edge of G[U] has type [+++] modulo sign, then U is totally ordered by the product order: after relabeling p_1≺p_2≺⋯≺p_k (coordinatewise increasing). Then for ℓ=p_{k−1}, the [+++]-color has multiplicity 1.

Proof. If some pair were incomparable, their sign pattern would mix + and −, contradiction. In a chain, the strict NE set of p_{k−1} is {p_k} and the [+++]-multiplicity specializes to 1_{ℓ∈U}·|NE(p_{k−1})|=1.

# Main theorem in 3D
Theorem. For every U⊆[n]^3 with |U|≥2, there exists an edge in G[U] whose color under c_3 appears exactly once in G[U].

Proof. If some slice U_γ has size ≥2, apply the d=2 theorem to G[U_γ]; the slice-lifting lemma gives a globally unique color. Otherwise, U is coordinatewise-injective. If a mixed-sign edge exists, it is unique by the mixed-sign lemma. If not, U is a chain and the [+++]-edge from the penultimate element is unique. Hence in all cases a unique color exists.

# Extension to general dimension d (outline with key lemmas)
Define c_d on [n]^d by c_d(uv)=(T(e),ℓ(u,v)), where T is the sign pattern in {−1,0,+1}^d modulo global sign and ℓ the componentwise minimum. The 3D multiplicity lemma generalizes verbatim: choose a representative s, define A_± analogously, and obtain multiplicity = A_+·A_− (proof identical). Induction on d≥2:
- Base d=2 is given.
- Step d→d+1: If a coordinate slice has ≥2 points, apply the induction hypothesis to that (d)-dimensional slice; the color lifts because c_{d+1} records ℓ_i for the equal coordinate and E(T) includes it. Otherwise, U is injective in each coordinate. If some edge has mixed signs (both + and −) in its type, multiplicity is 1 by the A_+·A_− argument. If not, U is a chain in the product order and the [+,…, +]-edge from the penultimate element has multiplicity 1. Thus the theorem holds in dimension d+1.

# Examples
- Slice case: U contains (2,3,5),(4,1,5),(3,4,5). Apply d=2 theorem on z=5 slice; the obtained unique 2D color lifts to a unique c_3 color globally.
- Injective mixed: U={(1,5,7),(4,2,6)} yields a [+,−,−]-type; A_+=A_−=1, multiplicity 1.
- Injective chain: U={(1,1,1),(3,3,3),(6,6,6)}; the edge from (3,3,3) to (6,6,6) has unique [+++]-color.

# Obstacles / checks
- The lifting relies crucially on c_d remembering equal coordinates via E(T) and ℓ; without this, slice-uniqueness could be destroyed by edges off the slice.
- Independence of the multiplicity count from the representative s is addressed by the oriented-edge bijection.

# Next steps
- Consolidate a formal write-up for d=3 in proofs.md using the multiplicity lemma and slice-lifting.
- State and prove the full d-dimensional theorem via induction as outlined.
- Quantitative: lower bounds on the number of unique colors in terms of |U|, and extremal constructions minimizing unique colors.