--- SYSTEM ---
You are a strict mathematical verifier & research manager.

You are being run in a loop with provers. Your tasks:
- Audit their ideas for correctness and rigor.
- Curate files (notes.md and output.md).
- Suggest the next steps.

Inputs: 
- task statement
- outputs of provers
- notes.md (summary so far)
- output.md (rigorously proven results so far)

Guidelines:
- notes.md: should be a readable running log of interesting work. Prefer appending. Replace only if old notes are clearly misleading. Remember -- notes should be self-contained and should make sense even without seeing outputs of past provers. 
- output.md:  Think twice before you add something to this file. Everything here should be rigorous, almost publication-ready. It should contain only fully proven theorems that are clearly an interesting step towards the solution (or the solution itself). The beginning of the file is a clear list of interesting theorems you can prove, together with a discussion about why it is relevant. From the statement of the theorem it has to be clear that this constitutes nontrivial progress towards solution. The rest of the file contains a fully rigorous list of the proofs of the theorems. Keep only proven theorems with clear proofs. If a statement in that file is flawed / unprecise and you cannot fix it on the spot, remove it from output.md and instead add it to notes.md with explanation.
- Be careful with the booleans `new_notes_append` and `new_outputs_append`: default is True (append). Use False only when deliberately rewriting everything.

Tasks:
1) Audit rigor: identify unjustified steps, false statements, missing lemmas; produce minimal counterexamples.
2) Triage value: separate genuine progress from noise.
3) Guide next steps: propose what provers should try next.

**Return strictly JSON**:
{
  "feedback_md": "Detailed critique of prover outputs (≥200 words). Include concrete next-step suggestions. The next round of provers may not see last round outputs; ensure all valuable info is stored in notes.",
  "new_notes_md": "Markdown (KaTeX allowed). Usually appended to notes.",
  "new_notes_append": "True|False",
  "new_outputs_md": "Markdown (KaTeX allowed). Usually appended to output.md.",
  "new_outputs_append": "True|False",
  "verdict": "success|partial success|nothing so far"
}

**Verdict definitions**:
- **success**: Something that one could publish, even if it is not the full solution (e.g., significant theorem, key lemma, novel technique, partial solution with clear path forward)
- **partial success**: Something worthy enough to write into output.md (e.g., correct but preliminary results, useful technical lemmas, validated approaches that advance understanding)
- **nothing so far**: No meaningful mathematical progress or only exploratory work


--- USER ---
You receive multiple prover reports. Evaluate correctness, value, and pick promising directions. Update notes.md (append/replace) with useful ideas and update output.md (append/replace) ONLY with rigorously verified results.

Prover reports (JSON):
[{"prover_id": "01", "progress_md": "### Audit of output.md (gaps, clarifications)\n- Theorem 11 (|U|=4) now looks correct after the fix using Theorem 7 (robust L-corner). I rechecked the subcases; no further issues found.\n- Theorem 10 (unique-maximal: top-row pivot) implicitly uses the fact that in the unique-maximal regime there is no point with y>Y or x>X. This is true but not explicitly stated; I recommend curating the following simple observation (O1) so the proof does not rely on an unstated fact.\n- Theorem 9 (SW-max with boundary thresholds \u21d2 unique type 1) conceptually relies on the fact that for p\u2208Max(S) there are no points of U on the open vertical/horizontal segments above/right of p within S. This is used implicitly; I state it cleanly as Lemma UM1 below for curation.\n\n### New, rigorously stated lemmas ready to curate (with proofs)\n\nObservation O1 (unique maximal \u21d2 coordinatewise maxima).\nStatement. If U has a unique maximal element m=(X,Y) in the product order, then X = max{x : (x,\u00b7)\u2208U} and Y = max{y : (\u00b7,y)\u2208U}.\nProof. If some u=(x',y') has x'>X, then no v\u2208U satisfies v_x\u2265x' and v_y\u2265y' with at least one strict inequality (none can have x\u2265x'>X), so u is maximal too, contradicting uniqueness. The argument for y'>Y is symmetric. \u220e\nWhy useful. Makes explicit a fact used in Theorem 10 and elsewhere.\n\nLemma UM1 (SW-maxima have no interior points on their column/row).\nSetup. Let U have a unique maximal m=(X,Y). Let S={p\u2208U : p_x<X and p_y<Y} and Max(S) its product-order maximal elements.\nStatement. If p=(\u03b1,\u03b2)\u2208Max(S), then (i) there is no q\u2208U with x=\u03b1 and \u03b2<y<Y; (ii) there is no q\u2208U with y=\u03b2 and \u03b1<x<X. Consequently every NE neighbor of p lies on the top row y=Y or the right column x=X.\nProof. If q=(\u03b1,y) with \u03b2<y<Y existed, then q\u2208S and q\u227bp, contradicting p\u2208Max(S). The horizontal case is identical. The consequence follows immediately. \u220e\nWhy useful. This isolates exactly where extra NE neighbors of p can come from, underpinning Theorem 9.\n\nLemma D\u2032 (consecutive-maxima robust L-corner; specialization of Theorem 7).\nSetup. Let M=Max(U) be listed as m_i=(x_i,y_i) with x_1<\u22ef<x_k and y_1>\u22ef>y_k (k\u22652).\nStatement. If for some i we have no point (x_i,y) with y_{i+1}<y<y_i and no point (x,y_{i+1}) with x_i<x<x_{i+1}, then the color (2,x_i,y_{i+1}) is unique in G[U].\nProof. The two emptiness conditions give r_U(x_i,y_{i+1})=1 (only (x_i,y_i) lies above) and s_U(x_i,y_{i+1})=1 (only (x_{i+1},y_{i+1}) lies to the right). By the type\u20132 multiplicity formula, the multiplicity is 1. \u220e\nWhy useful. A clean, local certificate when scanning consecutive maxima.\n\nLemma R4 (row-of-two with globally unique left base \u21d2 unique type 4).\nStatement. Suppose there exists a row \u03b2 with exactly two points (\u03b1,\u03b2),(\u03b1',\u03b2) with \u03b1<\u03b1\u2032. Assume furthermore that for every \u03b2'\u2260\u03b2 we have either (\u03b1,\u03b2')\u2209U or there is no point (x,\u03b2') with x>\u03b1. Then color (4,\u03b1) appears exactly once in G[U].\nProof. By the type\u20134 formula, T_4(\u03b1)=\u2211_{\u03b2''} 1_{(\u03b1,\u03b2'')}\u00b7h_{\u03b2''}(\u03b1). Only \u03b2 contributes (exactly one right neighbor), and it contributes h_\u03b2(\u03b1)=1. All other rows contribute 0 by assumption. Hence T_4(\u03b1)=1. \u220e\n\nLemma R3 (column-of-two with globally unique lower base \u21d2 unique type 3; dual of R4).\nStatement. Suppose there exists a column \u03b1 with exactly two points (\u03b1,\u03b2),(\u03b1,\u03b2') with \u03b2<\u03b2\u2032. Assume furthermore that for every \u03b1'\u2260\u03b1 we have either (\u03b1',\u03b2)\u2209U or there is no point (\u03b1',y) with y>\u03b2. Then color (3,\u03b2) appears exactly once in G[U].\nProof. By the type\u20133 formula, T_3(\u03b2)=\u2211_{\u03b1''} 1_{(\u03b1'',\u03b2)}\u00b7v_{\u03b1''}(\u03b2). Only \u03b1 contributes (exactly one point above), and it contributes v_\u03b1(\u03b2)=1. All other columns contribute 0 by assumption. Hence T_3(\u03b2)=1. \u220e\n\n### Why these help and how to use them\n- O1 and UM1 close implicit gaps in the unique-maximal arguments and can be cited directly in Theorems 9\u201310.\n- D\u2032 adds a robust, easy-to-check certificate when scanning consecutive maxima; it is a direct specialization of Theorem 7 that many configurations satisfy.\n- R3 and R4 are globally safe \u201csingleton+extension\u201d style triggers when a 2-point row/column has a left/lower base that does not act as a base elsewhere; they follow immediately from the multiplicity formulas and are useful in small-case analyses and in pruning \u201coffender\u201d configurations when consecutive-maxima witnesses fail.\n\n### Examples (sanity checks)\n- UM1 in action. U={ (2,2),(2,5),(4,5),(6,3),(6,6) } with unique maximal m=(6,6). Then S contains p=(2,2) and p is in Max(S). UM1 forbids any (2,y) with y\u2208{3,4} and any (x,2) with x\u2208{3,4,5}. Indeed, p\u2019s NE neighbors can only lie on row 5 or column 6.\n- D\u2032 witness. U has consecutive maxima m_1=(3,8), m_2=(7,4); suppose there is no point (3,y) with y\u2208{5,6,7} and no point (x,4) with x\u2208{4,5,6}. Then (2,3,4) is unique.\n- R4 witness. U contains row y=5 points at x=2 and 6, and no other row contains an (x=2,\u00b7) with any right neighbor. Then T_4(2)=1 and (4,2) is unique.\n\n### Ideas toward the remaining hard cases (precise statements to be proved next)\n- Unique-maximal, S\u2260\u2205: pivot-or-corner fixpoint. Choose p\u2208Max(S) with maximal x and then maximal y. By UM1, any NE neighbor of p lies on the top row or right column. There are three regimes to analyze:\n  1) Both (\u03b1:=p_x,Y) and (X,\u03b2:=p_y) lie in U. Then (2,\u03b1,\u03b2) is unique immediately (r=s=1 by UM1 and Theorem 1).\n  2) Exactly one of these lies in U. If, in addition, p_x\u2265\u03b1\u2082 and p_y\u2265\u03b2\u2082 (nearest-boundary thresholds), Theorem 9 gives a unique type\u20131 color. Otherwise, the very boundary points preventing Theorem 9 (extra top-row points right of p_x or extra right-column points above p_y) can potentially be harvested into a D\u2032-style L-corner or an R3/R4 singleton+extension. I will formalize a short \u201cnearest-neighbor\u201d lemma that either produces (2,\u03b1',\u03b2') unique at the first boundary intersection, or isolates a row/column satisfying R3/R4.\n  3) Neither (\u03b1,Y) nor (X,\u03b2) lies in U. Consider the nearest top-row point a=(\u03b1*,Y) with \u03b1*>\u03b1 (if any) and the nearest right-column point b=(X,\u03b2*) with \u03b2*>\u03b2 (if any). If both exist, UM1 ensures the open segments above/right of p on column \u03b1 and row \u03b2 are empty; a and b, together with p, then form the frame of a robust L-corner at (\u03b1,\u03b2). This yields a unique type\u20132 color by Theorem 7. Otherwise, if only one exists, we are back in (2) with potentially a unique type\u20131 via Theorem 9. I will write this carefully next round (checking the emptiness claim and handling the cases when multiple boundary points exist).\n\n- Multiple maxima (|Max(U)|\u22652). For each adjacent pair we either certify uniqueness by D\u2032 or record an \u201coffender\u201d in its column or row (an extra point inflating R_i or S_i). Offenders for different i live on disjoint rows/columns ({y_{i+1}} and {x_i} are all distinct). A pigeonhole/counting lemma should force that some offender actually creates a singleton+extension (R3/R4) or itself forms part of a D\u2032 witness. I will formalize:\n  \u2022 Counting Lemma (to prove): If for all i either R_i\u22652 or S_i\u22652 and no D\u2032-witness exists, then there is \u03b1 with exactly one row \u03b2 having (\u03b1,\u03b2) and exactly one right neighbor (hence T_4(\u03b1)=1), or dually a \u03b2 with exactly one column \u03b1 having (\u03b1,\u03b2) and exactly one upper neighbor (T_3(\u03b2)=1).\n\n### Next steps (concrete, auditable)\n1) Curate O1, UM1, D\u2032, R3, and R4 into output.md; these are safe and strengthen the toolset used by Theorems 9\u201311.\n2) Write and verify the \u201cnearest-boundary lemma\u201d in the unique-maximal regime: with p\u2208Max(S) chosen extremally, show that if Theorem 9 fails then either a D\u2032/Theorem 7 witness exists at (p_x,\u03b2*) or (\u03b1*,p_y), or a singleton+extension (R3/R4) fires on the boundary row/column.\n3) Prove the counting lemma for multiple maxima by aggregating offenders on the disjoint families of rows {y_{i+1}} and columns {x_i} and extracting an R3/R4 or D\u2032 trigger. Validate on dense staircase-like examples.\n\n### Summary of progress this round\n- No new gaps in output.md beyond a suggestion to add O1 and UM1 explicitly. The |U|=4 proof is now sound.\n- Added four rigorous, reusable lemmas (O1, UM1, D\u2032, R3/R4) with proofs, strengthening the unique-maximal and multiple-maxima toolkits.\n- Outlined precise, checkable next steps to finish the unique-maximal case (via a nearest-boundary analysis) and to handle the \u201call consecutive maxima heavy\u201d regime via a counting lemma."}, {"prover_id": "02", "progress_md": "Round 0007 \u2014 incremental, auditable progress\n\nOverview\n- I audited the current output.md. I found no new logical flaws since the last correction to Theorem 11 (|U|=4). Theorem 9 (unique\u2013maximal threshold \u21d2 unique type 1) and Theorem 10 (top-row pivot \u21d2 unique type 4) are correctly stated and proved. The dual \u201cright-column pivot \u21d2 unique type 3\u201d is intentionally not present in symmetric form (as noted in notes.md) because it needs a singleton-row hypothesis; Theorem 3 already supplies the safe version. Below I consolidate the unique\u2013maximal case by formalizing two threshold-existence lemmas, extract a corollary for the search strategy, and add a robust L-corner variant useful in 2+2(+\u2026) configurations.\n\nGaps or cautions in output.md\n- None needing immediate correction. A cautionary note: the dual of Theorem 10 must remain in the singleton-row form (Theorem 3); there is no safe global dual without that assumption (see the counterexample recorded in notes.md).\n\nNew lemmas (rigorous; to be curated)\n\nLemma UM\u2013X (x-threshold existence under unique maximality).\n- Setting. U has a unique maximal m=(X,Y). Let T={x<X : (x,Y)\u2208U} and S={p\u2208U : p_x<X and p_y<Y}. If S\u2260\u2205 and T\u2260\u2205, define \u03b1\u2082=max T.\n- Claim. Either (i) column \u03b1\u2082 contains no point below Y, in which case Theorem 10 yields a unique type\u20134 color; or (ii) there exists p\u2208Max(S) with p_x\u2265\u03b1\u2082.\n- Proof. If column \u03b1\u2082 has no point below Y we are in (i). Otherwise pick q=(\u03b1\u2082,\u03b2) with \u03b2<Y; then q\u2208S. In any finite poset, every element is dominated by some maximal element, so there is p\u2208Max(S) with p\u227dq, hence p_x\u2265\u03b1\u2082. \u220e\n- Why useful. This guarantees that when the top-row pivot (Theorem 10) does not fire, there is a SW-maximal point whose x-coordinate is at least the second-rightmost top-row x, providing half of the threshold for Theorem 9.\n\nLemma UM\u2013Y (y-threshold existence via the safe column pivot).\n- Setting. U has a unique maximal m=(X,Y). Let R={y<Y : (X,y)\u2208U} and S as above. If S\u2260\u2205 and R\u2260\u2205, define \u03b2\u2082=max R.\n- Claim. Either (i) row \u03b2\u2082 is a singleton (only (X,\u03b2\u2082)\u2208U), and then Theorem 3 yields a unique type\u20133 color; or (ii) there exists q\u2208Max(S) with q_y\u2265\u03b2\u2082.\n- Proof. If row \u03b2\u2082 has only (X,\u03b2\u2082), then on column X there is exactly one point above (necessarily m), hence Theorem 3 applies. Otherwise pick r=(\u03b1,\u03b2\u2082) with \u03b1<X; then r\u2208S. As above, some q\u2208Max(S) satisfies q\u227dr, hence q_y\u2265\u03b2\u2082. \u220e\n- Why useful. This supplies the y-threshold needed for Theorem 9 whenever the safe type\u20133 pivot does not already resolve the instance.\n\nCorollary (two-threshold reduction for unique\u2013maximal).\n- With m, T, R, \u03b1\u2082, \u03b2\u2082 as above. If S=\u2205, Theorem 8 (row\u222acolumn support) applies. If S\u2260\u2205, then:\n  \u2022 If T\u2260\u2205 and the top-row pivot (Theorem 10) fails, there is p_x\u2265\u03b1\u2082 for some p\u2208Max(S).\n  \u2022 If R\u2260\u2205 and the singleton-row pivot (Theorem 3) fails, there is q_y\u2265\u03b2\u2082 for some q\u2208Max(S).\n  \u2022 If there exists r\u2208Max(S) with r_x\u2265\u03b1\u2082 and r_y\u2265\u03b2\u2082 simultaneously, Theorem 9 applies and yields a unique type\u20131 color.\n- Interpretation. In the unique-maximal regime, unless a pivot (Theorem 10 or Theorem 3) already certifies uniqueness, we can find one (or two) SW-maximal points meeting the respective x- or y-threshold(s). The remaining unresolved subcase is when x- and y-thresholds are each met but not by the same maximal point. The next step is to convert this \u201ccrossing\u201d into a type\u20132 or type\u20133/4 certificate (see Next steps).\n\nA robust L-corner variant for 2+2(+\u2026)\n\nLemma RL (two 2-point rows sharing a left endpoint, with clean column, \u21d2 unique type 2).\n- Statement. Suppose there exist two distinct rows \u03b2_1<\u03b2_2 such that: (\u03b1,\u03b2_i),(\u03b3_i,\u03b2_i)\u2208U with \u03b1<\u03b3_i (i=1,2); column \u03b1 contains exactly these two points (\u03b1,\u03b2_1),(\u03b1,\u03b2_2); and on the lower row \u03b2:=\u03b2_1 there is exactly one point to the right of \u03b1 (namely (\u03b3_1,\u03b2)). Then color (2,\u03b1,\u03b2) is unique.\n- Proof. By the hypotheses, in column \u03b1 there is exactly one point above \u03b2 (namely (\u03b1,\u03b2_2)), so r_U(\u03b1,\u03b2)=1; in row \u03b2 there is exactly one point to the right of \u03b1 (namely (\u03b3_1,\u03b2)), so s_U(\u03b1,\u03b2)=1. Theorem 1 (type 2) gives uniqueness of (2,\u03b1,\u03b2). \u220e\n- Why useful. This is a safe, verifiable pattern extending the 4-point rectangle subcase to ambient configurations with many other points, provided column \u03b1 stays clean and the lower row has exactly one extension to the right at \u03b1. It is a robust tool within the \u201ctwo heavy rows\u201d regime.\n\nExamples (sanity checks and edge cases)\n- UM\u2013X in action. U={ (6,8) }\u222a{ (3,8),(5,8) }\u222a{ (5,4),(2,1) }. Here m=(6,8), T={3,5}, \u03b1\u2082=5. Column 5 has (5,4), so the top-row pivot fails. Lemma UM\u2013X yields a p\u2208Max(S) with p_x\u22655; indeed p=(5,4)\u2208Max(S).\n- UM\u2013Y in action. U={ (8,6) }\u222a{ (8,3),(8,5) }\u222a{ (4,5),(2,2) }. Here m=(8,6), R={3,5}, \u03b2\u2082=5. Row 5 is not a singleton, so the safe type\u20133 pivot fails; Lemma UM\u2013Y produces q\u2208Max(S) with q_y\u22655; indeed q=(4,5).\n- RL example. Let U contain rows \u03b2_1=1 and \u03b2_2=4 with points (2,1),(7,1) and (2,4),(5,4); no other point in column 2. Then (2,2,1) is unique regardless of extra points elsewhere (provided column 2 remains clean and the lower row remains with exactly one right neighbor at 2).\n\nIdeas toward closing the remaining unique\u2013maximal subcase\n- Structure. Let Max(S)={s_1,\u2026,s_k} with x increasing and y decreasing. Under the corollary above, if both T and R are nonempty and neither pivot fires, there exist indices f,g with x(s_f)\u2265\u03b1\u2082 and y(s_g)\u2265\u03b2\u2082. If some s_i satisfies both, Theorem 9 finishes. Otherwise f>g, so s_g is \u201chigh-but-left\u201d and s_{g+1} is \u201cright-but-low.\u201d This crossing suggests examining the L-corner (x(s_g), y(s_{g+1})). \n- Goal. Prove a dichotomy for this crossing pair: either the L-corner at (x(s_g), y(s_{g+1})) is clean in the sense of Theorem 7 (yielding a unique type\u20132 color), or one of the \u201coffending\u201d extra points that would inflate r_U or s_U promotes a singleton+extension (Theorem 3) or a row-of-two global trigger (R4) on some row/column. The technical task is to pin down a nearest-neighbor variant that ensures any additional contributor on the vertical (resp. horizontal) segment forces one of the safe type\u20133/4 triggers.\n- Plan. For the vertical ray at x(s_g), pick the lowest y\u2032>y(s_{g+1}) with (x(s_g),y\u2032)\u2208U (this is either y\u2032=y(s_g) or the nearest interloper). If y\u2032\u2260y(s_g), then s_g remains maximal but row y\u2032 is an \u201coffender\u201d below Y. We will analyze whether row y\u2032 is singleton (Theorem 3), forms a 2-point row with globally unique left endpoint (R4), or can be paired with a clean column to create an RL-type L-corner. A symmetric analysis applies to the horizontal ray from (x(s_g), y(s_{g+1})).\n\nObstacles and why some direct attempts fail\n- A tempting but false shortcut is to assume that the first crossing pair (s_g,s_{g+1}) automatically yields r_U=s_U=1 at (x(s_g), y(s_{g+1})). This fails because additional points on the vertical segment x=x(s_g) with y\u2208(y(s_{g+1}),y(s_g)) are compatible with s_g being maximal yet increase r_U. Hence additional structure (nearest-neighbor selection plus type\u20133/4 triggers) is needed.\n\nNext steps (concrete and checkable)\n1) Formalize the \u201cnearest-neighbor offender \u21d2 type\u20133/4 trigger\u201d argument sketched above for the crossing pair (s_g,s_{g+1}). The desired lemma: among the lowest vertical/horizontal interlopers at a crossing, at least one induces a singleton+extension (Theorem 3) or a row-of-two with a globally unique base (R4), hence a unique type\u20133/4 color.\n2) Package UM\u2013X, UM\u2013Y, and the crossing analysis into a complete proof of \u201cunique maximal \u21d2 unique color,\u201d yielding a new theorem to curate.\n3) Extend RL to a symmetric \u201cclean-row\u201d variant (two 2-point columns sharing a lower endpoint with a clean row \u21d2 unique type 2) and add these as safe triggers to the library.\n4) Stress-test on crafted worst-case \u201cstaircase with fillers\u201d examples to validate the nearest-neighbor lemma and to calibrate the cleanliness conditions needed for Theorem 7 vs. type\u20133/4 triggers.\n\nWhy this is progress\n- UM\u2013X and UM\u2013Y convert the abstract unique\u2013maximal regime into a finite, verifiable checklist of pivots and thresholds, isolating the only remaining hard subcase (crossing without a single maximal hitting both thresholds). The RL lemma strengthens our catalog of robust, local uniqueness certificates applicable amidst additional points. The next-step plan is precise: prove a nearest-neighbor lemma at the crossing to finish the unique\u2013maximal case."}]

Current notes.md:
Setup and terminology.
- U ⊆ [n]×[n]. For p=(x,y) and q=(x',y'), say q is NE of p if x'>x and y'>y, and q is SE of p if x'>x and y'<y. Let G[U] be the graph on vertex set U with one edge for every unordered pair {p,q}. Each edge receives one of four types:
  • Type 1 (NE–SW): endpoints differ in both coordinates and one is NE of the other. The color label is (1,α,β) with α = min{x,x'} and β = min{y,y'}; equivalently the SW endpoint’s coordinates.
  • Type 2 (NW–SE): endpoints differ in both coordinates and one is NW of the other. The color label is (2,α,β) with α = min{x,x'} (the NW x) and β = min{y,y'} (the SE y).
  • Type 3 (vertical): same x; the color label is (3,β) where β = min{y,y'} (the lower y).
  • Type 4 (horizontal): same y; the color label is (4,α) where α = min{x,x'} (the left x).

Exact multiplicities (global; now established).
- Type 1: For (α,β)∈U, the multiplicity of color (1,α,β) equals the number of NE neighbors of (α,β) in U. No edge receives label (1,α,β) unless (α,β)∈U.
- Type 2: For any (α,β)∈[n]^2, set r_U(α,β)=# { (α,y)∈U : y>β } and s_U(α,β)=# { (x,β)∈U : x>α }. Then the multiplicity of color (2,α,β) equals r_U(α,β)·s_U(α,β). In particular it is unique iff r_U(α,β)=s_U(α,β)=1.
- Type 3: For any β, the multiplicity of (3,β) equals T_3(β)=∑_α 1_{(α,β)∈U} · # { (α,y)∈U : y>β }. It is unique iff exactly one α contributes and contributes 1.
- Type 4: For any α, the multiplicity of (4,α) equals T_4(α)=∑_β 1_{(α,β)∈U} · # { (x,β)∈U : x>α }. It is unique iff exactly one β contributes and contributes 1.

Safe uniqueness triggers (now established).
- Single-line uniqueness: If U⊆[n]×{y0} with |U|≥2, list its x-coordinates x_1<⋯<x_m. Then the edge between (x_{m−1},y0) and (x_m,y0) is the only edge in G[U] colored (4,x_{m−1}). Dually, if U⊆{x0}×[n] with |U|≥2, then the edge between (x0,y_{m−1}) and (x0,y_m) is the only edge colored (3,y_{m−1}).
- Singleton+extension uniqueness (global): If a row β contains exactly one vertex (α,β) and in column α there is exactly one vertex above it, then (3,β) is unique. Dually, if a column α contains exactly one vertex (α,β) and in row β there is exactly one vertex to its right, then (4,α) is unique. These follow immediately from the type-3/4 formulas.
- Antichain ⇒ unique type 2: If U is an antichain (no two share a row or a column), then ordering its points by increasing x (hence decreasing y), any consecutive pair (x_i,y_i),(x_{i+1},y_{i+1}) yields r_U(x_i,y_{i+1})=s_U(x_i,y_{i+1})=1, hence (2,x_i,y_{i+1}) is unique.
- Clean gap between consecutive maxima: Let M=Max(U) in the product order, list M as (x_1,y_1),…,(x_k,y_k) with x_1<⋯<x_k and y_1>⋯>y_k. For i∈{1,…,k−1} set R_i=# { (x_i,y)∈U : y>y_{i+1} } and S_i=# { (x,y_{i+1})∈U : x>x_i }. If R_i=S_i=1, then the color (2,x_i,y_{i+1}) is unique.
- 2×2 rectangle with clean margins: If U contains the four corners of {(x_1,y_1),(x_1,y_2),(x_2,y_1),(x_2,y_2)} with x_1<x_2, y_1<y_2 and has no other point in column x_1 above y_1 and no other point in row y_1 to the right of x_1, then (2,x_1,y_1) is unique.
- All three-point sets: If |U|=3, then G[U] has a uniquely colored edge. (Full case analysis is recorded in output.)

Corrections and counterexamples.
- “Three or more on a row/column ⇒ unique type 4/3” is false without further global conditions. Counterexample: U = {(1,1),(2,1),(3,1),(2,2),(4,2)}. On row y=1 we get a single occurrence of (4,2) within that row, but globally (4,2) occurs again on row y=2 (edge (2,2)–(4,2)). One must apply the global T_4(α) formula across all rows.
- Gap in “unique maximal ⇒ unique color” (as previously sketched). The subcase S≠∅ must rule out extra NE neighbors lying on the top row or rightmost column. Example showing the gap: U = {(3,3),(4,5),(5,5)}. Here p=(3,3) has two NE neighbors (4,5) and (5,5). A correct proof should either find a different witness (types 3/4 via T_3/T_4) or choose p to avoid such extra NE neighbors. This remains an open item to be fixed.

Open directions.
1) Complete the unique-maximal case rigorously, as outlined above (identify conditions under which T_3/T_4 already gives uniqueness; otherwise find p∈S with unique NE neighbor).
2) For |Max(U)|≥2, either certify a clean gap (R_i=S_i=1) for some consecutive pair, or force a type-3/4 trigger (singleton+extension) or a unique type-1 via a minimality argument on the “extra” points counted by R_i−1 and S_i−1.
3) Extend the small-case verification from |U|=3 to |U|=4 to stress-test the dichotomies and expose the right minimality invariants.
New curated results and corrections (this round)

1) Robust L-corner uniqueness (type 2)
If there exist α<α′ and β<β′ with (α,β′),(α′,β)∈U and, moreover, (i) (α,β) has exactly one point above it in its column (namely (α,β′)) and (ii) exactly one point to its right in its row (namely (α′,β)), then by the type-2 multiplicity formula r_U(α,β)=s_U(α,β)=1 and so the color (2,α,β) is unique. This generalizes the previously noted “2×2 rectangle with clean margins” by not requiring the NE corner (α′,β′) to be present.

2) Cross-shape (row ∪ column) support ⇒ unique color
If U is contained in the union of a single row Y and a single column X and |U|≥2, then G[U] has a uniquely colored edge. Proof: if |U∩row Y|≥2, let α be the second-largest x on that row. Since α≠X, the only row containing (α,·) inside U is Y, and on that row h_Y(α)=1. Thus T_4(α)=1 (unique type 4). Otherwise |U∩column X|≥2 and the vertical analogue gives a unique type 3.

3) Unique-maximal triggers
Let U have a unique maximal m=(X,Y) in the product order. Then X and Y are the global maxima of the used x- and y-coordinates. Define T={x<X : (x,Y)∈U} with α₂=max T (if T≠∅) and R={y<Y : (X,y)∈U} with β₂=max R (if R≠∅). Let S={p∈U : p_x<X and p_y<Y} and let Max(S) denote the set of product-maximal elements of S.
- H′ (SW-max + boundary thresholds ⇒ unique type 1). If S≠∅ and there exists p∈Max(S) with p_x≥α₂ and p_y≥β₂, then p has exactly one NE neighbor in U (namely m), hence the color (1,p_x,p_y) is unique.
- K (top-row pivot ⇒ unique type 4). If T≠∅ and the column α₂ contains no point below Y, then T_4(α₂)=1, realized by the top-row edge between (α₂,Y) and m.
Remark: The column-dual must be formulated with care (see below) to avoid extra contributors in T_3(β₂).

Corrections to proposed lemmas
- The proposed Lemma J (empty L-corner ⇒ unique type 2) was too weak: forbidding points only in the open segments (β,β′) and (α,α′) does not preclude additional points above β′ or to the right of α′. A correct sufficient condition is exactly r_U(α,β)=s_U(α,β)=1 (see robust L-corner above). Counterexample to the weak form: U={(1,2),(3,1),(1,5),(5,1)} satisfies the stated emptiness on (1, y∈(1,2)) and (x∈(1,3),1) but yields multiplicity 4 for color (2,1,1).
- The proposed Lemma K′ (right-column pivot ⇒ unique type 3) as stated omitted the requirement that no other columns contribute to T_3(β₂). A safe version is the singleton+extension trigger: if row β₂ is a singleton (only (X,β₂)) and column X has exactly one point above β₂ (necessarily m in the unique-maximal regime), then T_3(β₂)=1. Counterexample to the weak form: U={(5,5),(5,2),(1,2),(1,4)} makes T_3(2)=2.
- The proposed Lemma L (top/right extremality of consecutive maxima ⇒ unique type 2) is false without excluding intermediate points in column x_i above y_{i+1} (or in row y_{i+1} to the right of x_i). Counterexample: U={(2,5),(5,2),(2,4)} satisfies “m_i topmost” and “m_{i+1} rightmost,” yet r_U(2,2)=2.

Four-point sets (|U|=4)
The claim that every 4-point configuration admits a uniquely colored edge is true; a corrected complete proof is added to output.md. The flawed claim “if no row has 2 points, then no column has 2 points” is refuted by U={(1,1),(1,3),(2,2),(2,4)}. The corrected proof handles all row/column occupancy patterns (4), (3+1), (2+2), (2+1+1), and (1+1+1+1), using type-3/4 triggers or the antichain lemma.

Roadmap for the unique-maximal case
- S=∅ is settled by the cross-shape lemma.
- For S≠∅, aim for a trichotomy: H′ or K (or the safe column-dual) or a robust L-corner (D′) must fire. A workable extremal choice is p∈Max(S) with maximal x and, among those, maximal y; analyze its nearest boundary neighbors and the emptiness of the two open segments above/right of p. If both segments are populated, try to extract a singleton+extension on the boundary or an L-corner between consecutive top-row/right-column supports.
Erratum to Theorem 11 (|U|=4) and fix.
- The original subcase “two distinct rows each have exactly two points and share the same left endpoint α ⇒ T_3(β)=1 for the lower β” was incorrect. Counterexample: the 2×2 rectangle U={(1,1),(1,2),(2,1),(2,2)} has two columns contributing to T_3(1).
- Correct resolution: In that subcase, let β be the lower y among the two points in column α. Then row β has exactly two points (α,β),(γ,β) (so s_U(α,β)=1), and column α has exactly one point above β (namely at the higher row, so r_U(α,β)=1). By Theorem 7 (robust L-corner), (2,α,β) is unique. This uniform fix also covers the rectangle case.

Safe global triggers (recorded for use).
- R4 (row-of-two with globally unique left endpoint ⇒ unique type 4). Suppose some row β has exactly two points (α,β),(α′,β) with α<α′, and for every other row β′ either (α,β′)∉U or there is no point (x,β′) with x>α. Then T_4(α)=1, hence there is a unique color (4,α). Proof: From the type-4 formula, only row β contributes and contributes 1.
- R3 (column-of-two with globally unique lower endpoint ⇒ unique type 3). Suppose some column α has exactly two points (α,β)<(α,β′) with β<β′, and for every other column α′ either (α′,β)∉U or there is no point (α′,y) with y>β. Then T_3(β)=1, hence there is a unique color (3,β). Proof: From the type-3 formula, only column α contributes and contributes 1.

Unique-maximal structure (replace R1 by UM1).
- Setup: U has a unique maximal m=(X,Y). Let S={p∈U: p_x<X and p_y<Y} and Max(S) be its product-order maxima.
- UM1 (boundary-only NE neighbors for SW-maxima). For any p=(α,β)∈Max(S): (i) there is no q∈U with x=α and β<y<Y; (ii) there is no q∈U with y=β and α<x<X. Consequently, any NE neighbor of p lies on the top row y=Y or the right column x=X. Proof: If such a q existed in (i) or (ii), then q∈S and q≻p, contradicting p∈Max(S).
- Caution: The statement “If exactly one of (α,Y) and (X,β) lies in U, then p has exactly one NE neighbor” is false without further constraints. Counterexample: m=(5,5), p=(2,2)∈Max(S), and top-row points (3,5),(4,5) present while (2,5),(5,2) are absent. Then p has multiple NE neighbors. The correct boundary-threshold uniqueness is Theorem 9: require p_x≥α₂ and p_y≥β₂, where α₂ (resp. β₂) is the largest x<X with (x,Y)∈U (resp. largest y<Y with (X,y)∈U).

Maxima-local L-corner certificate.
- D′ (explicit consecutive-maxima L-corner). If M=Max(U)={m_i=(x_i,y_i)} with x_1<⋯<x_k and y_1>⋯>y_k and for some i there is no (x_i,y) with y_{i+1}<y<y_i and no (x,y_{i+1}) with x_i<x<x_{i+1}, then r_U(x_i,y_{i+1})=s_U(x_i,y_{i+1})=1 and color (2,x_i,y_{i+1}) is unique. This is a specialization of Theorem 7.

Extremal SW-max analysis blueprint (pivot-or-corner).
- Choose p∈Max(S) maximizing x and then y. By UM1, r_U(p),s_U(p)∈{0,1}, and all NE neighbors lie on the top row or right column.
  • Regime A: r_U(p)=s_U(p)=1 and p_x≥α₂, p_y≥β₂ ⇒ unique type 1 (Theorem 9).
  • Regime B: exactly one of r_U(p),s_U(p) equals 1. Try to promote a singleton+extension (Theorem 3) or apply R3/R4 to that row/column.
  • Regime C: r_U(p)=s_U(p)=0. Show the nearest top-row point right of p and nearest right-column point above p cannot both exist away from m; otherwise one can extract a robust L-corner (Theorem 7) at p. This will complete the unique-maximal case.

Toward a counting lemma for multiple maxima.
- The horizontal rays on rows y_{i+1} (counted by S_i) and vertical rays on columns x_i (counted by R_i) are anchored at disjoint rows/columns across i. If all R_i,S_i are large (≥2), then many rows/columns carry 
“extensions,” suggesting that a singleton+extension trigger (Theorem 3) or a robust L-corner (Theorem 7) must occur. Aim to formalize via a pigeonhole/counting argument over {y_{i+1}} and {x_i}.


Current output.md (if any):
Setup and notation
- U ⊆ [n]×[n]. For p=(x,y) and q=(x',y'), say q is NE of p if x'>x and y'>y, and q is SE of p if x'>x and y'<y. G[U] has an (undirected) edge for every unordered pair {p,q}⊆U, each labeled by one of four types and a color as follows:
  • Type 1 (NE–SW): if one endpoint is NE of the other. Color (1,α,β) with α = min{x,x'} and β = min{y,y'} (coordinates of the SW endpoint).
  • Type 2 (NW–SE): if one endpoint is NW of the other. Color (2,α,β) with α = min{x,x'} (the NW x) and β = min{y,y'} (the SE y).
  • Type 3 (vertical): if x=x'. Color (3,β) with β = min{y,y'} (the lower y).
  • Type 4 (horizontal): if y=y'. Color (4,α) with α = min{x,x'} (the left x).

Theorems currently established
1) Exact multiplicity formulas for types 1–4.
2) Single-line uniqueness: If U lies in a single row (resp. a single column) and has at least two points, then G[U] has a uniquely colored edge of type 4 (resp. type 3).
3) Singleton+extension triggers: A singleton row (resp. singleton column) with exactly one extension above (resp. to the right) forces a unique type-3 (resp. type-4) color.
4) Antichain ⇒ a unique type-2 color.
5) Consecutive-maxima clean gap ⇒ a unique type-2 color.
6) All three-point sets U admit a uniquely colored edge.
7) Robust L-corner uniqueness (type 2).
8) Row ∪ column support ⇒ a unique color.
9) Unique-maximal: SW-max with boundary thresholds ⇒ unique type 1.
10) Unique-maximal: top-row pivot ⇒ unique type 4.
11) Every four-point set admits a uniquely colored edge.

Proofs
Theorem 1 (Exact multiplicities).
- Type 1. Fix (α,β)∈[n]^2. An edge has color (1,α,β) iff its SW endpoint is (α,β), hence necessarily (α,β)∈U. Each NE neighbor q of (α,β) produces exactly one edge of that color, and distinct NE neighbors yield distinct edges. Conversely, any edge of that color arises this way. Therefore the multiplicity of (1,α,β) equals the number of NE neighbors of (α,β) in U.
- Type 2. Fix (α,β)∈[n]^2 and define r_U(α,β)=# { (α,y)∈U : y>β } and s_U(α,β)=# { (x,β)∈U : x>α }. Choosing any (α,y) with y>β and any (x,β) with x>α produces a NW–SE pair whose color is (2,α,β); distinct choices yield distinct edges of that color. Conversely, any edge of color (2,α,β) has its NW endpoint on the vertical ray { (α,y) : y>β } and its SE endpoint on the horizontal ray { (x,β) : x>α }. Hence the multiplicity is r_U(α,β)·s_U(α,β). In particular, uniqueness holds iff r_U(α,β)=s_U(α,β)=1.
- Type 3. Fix β. For each α with (α,β)∈U, the lower endpoint (α,β) connects vertically to each (α,y) with y>β, contributing v_α(β)=# { (α,y)∈U : y>β } edges of color (3,β). Summing over α gives the total multiplicity T_3(β)=∑_α 1_{(α,β)∈U}·v_α(β). Uniqueness holds iff exactly one α contributes and v_α(β)=1.
- Type 4. Fix α. For each β with (α,β)∈U, the left endpoint (α,β) connects horizontally to each (x,β) with x>α, contributing h_β(α)=# { (x,β)∈U : x>α } edges of color (4,α). Summing over β gives T_4(α)=∑_β 1_{(α,β)∈U}·h_β(α). Uniqueness holds iff exactly one β contributes and h_β(α)=1.

Theorem 2 (Single-line uniqueness).
- Row case. Suppose U⊆[n]×{y0} and |U|≥2. Let the distinct x-coordinates be x_1<⋯<x_m with m≥2. The only horizontal edges in G[U] are those between (x_i,y0) and (x_j,y0). The multiset of colors on these edges is { (4,x_1) repeated m−1 times, (4,x_2) repeated m−2 times, …, (4,x_{m−1}) once }. In particular, (4,x_{m−1}) occurs exactly once in G[U].
- Column case. The vertical analogue holds by symmetry: if U⊆{x0}×[n] with |U|≥2 and y_1<⋯<y_m, then (3,y_{m−1}) occurs exactly once.

Theorem 3 (Singleton+extension triggers).
- If a row β contains exactly one point (α,β)∈U and in column α there is exactly one point (α,y) with y>β, then by Theorem 1 (type 3) we have T_3(β)=1 and hence the color (3,β) is unique. The column/row dual gives the type-4 trigger.

Theorem 4 (Antichain ⇒ unique type 2).
- Assume U is an antichain (no two share a row or a column). List U as (x_1,y_1),…,(x_m,y_m) in increasing x, which forces y_1>y_2>⋯>y_m. For any i∈{1,…,m−1} consider (α,β)=(x_i,y_{i+1}). In column α there is exactly one point above β, namely (x_i,y_i); in row β there is exactly one point to the right of α, namely (x_{i+1},y_{i+1}). Thus r_U(α,β)=s_U(α,β)=1, and by Theorem 1 (type 2) the color (2,α,β) is unique.

Theorem 5 (Consecutive-maxima clean gap ⇒ unique type 2).
- Let M=Max(U) under the product order, listed as m_i=(x_i,y_i) with x_1<⋯<x_k and y_1>⋯>y_k (k≥2). For i∈{1,…,k−1} define R_i=# { (x_i,y)∈U : y>y_{i+1} } and S_i=# { (x,y_{i+1})∈U : x>x_i }. If R_i=S_i=1, then with (α,β)=(x_i,y_{i+1}) we have r_U(α,β)=R_i and s_U(α,β)=S_i, hence r_U·s_U=1 and color (2,α,β) is unique by Theorem 1 (type 2).

Theorem 6 (All three-point sets admit a uniquely colored edge).
- Let U have three distinct points.
  • If all three lie on a common row, with x_1<x_2<x_3, the three horizontal edges on that row have colors (4,x_1),(4,x_1),(4,x_2), so (4,x_2) is unique.
  • If all three lie on a common column, the vertical analogue yields a unique (3,y_2).
  • Otherwise, if some pair lies on a row (resp. column) but not all three do, the edge of that pair has a type-4 (resp. type-3) color that cannot be duplicated elsewhere in U because there is no second edge on that same row (resp. column).
  • Finally, if all x- and y-coordinates are distinct, order by x: p_1=(x_1,y_1),p_2=(x_2,y_2),p_3=(x_3,y_3).
    – If y_1<y_2<y_3, then p_2p_3 is type 1 with color (1,x_2,y_2) and is unique (its SW endpoint is p_2, which has exactly one NE neighbor, namely p_3).
    – If y_1>y_2>y_3, then p_2p_3 is type 2 with label (2,x_2,y_3) and is unique since r_U(x_2,y_3)=s_U(x_2,y_3)=1.
    – In each of the remaining permutations of (y_1,y_2,y_3), one of the consecutive pairs in x-order forms a type-2 edge (NW–SE) with exactly one point above the L-corner in its column and exactly one point to the right on its row, giving a unique type-2 color by Theorem 1 (type 2). Hence at least one unique color exists in all cases.

Theorem 7 (Robust L-corner uniqueness for type 2).
Let α<α′ and β<β′. Suppose (α,β′),(α′,β)∈U, and in column α there is exactly one point above β (namely (α,β′)), and in row β there is exactly one point to the right of α (namely (α′,β)). Then the color (2,α,β) occurs exactly once in G[U].
Proof. By Theorem 1 (type 2), r_U(α,β)=1 and s_U(α,β)=1, hence the multiplicity r_U·s_U=1.

Theorem 8 (Row ∪ column support ⇒ a unique color).
Assume U⊆({x=X}×[n]) ∪ ([n]×{y=Y}) and |U|≥2. Then G[U] has a uniquely colored edge.
Proof. If U⊆{x=X}×[n] or U⊆[n]×{y=Y}, Theorem 2 applies. Otherwise U meets both the row and the column. If |U∩([n]×{Y})|≥2, list its x-coordinates x_1<⋯<x_m and set α=x_{m−1}. Since α≠X and U⊆(column X)∪(row Y), the only β with (α,β)∈U is β=Y. On row Y, h_Y(α)=1. Hence T_4(α)=1 by Theorem 1 (type 4). If instead |U∩({X}×[n])|≥2, the vertical analogue yields a unique type-3 color.

Theorem 9 (Unique-maximal: SW-max with boundary thresholds ⇒ unique type 1).
Suppose U has a unique maximal element m=(X,Y) in the product order. Let T={x<X : (x,Y)∈U} and R={y<Y : (X,y)∈U}, with α₂=max T if T≠∅ (and α₂=−∞ otherwise), and β₂=max R if R≠∅ (and β₂=−∞ otherwise). Let S={p∈U : p_x<X and p_y<Y}. If S≠∅ and there exists p∈Max(S) (for the product order) with p_x≥α₂ and p_y≥β₂, then the color (1,p_x,p_y) is unique.
Proof. Any NE neighbor q of p with q_x<X and q_y<Y would satisfy q≻p and lie in S, contradicting p∈Max(S). Thus every NE neighbor of p lies on row Y or column X. Because p_x≥α₂, there is no (x,Y)∈U with p_x<x<X, and because p_y≥β₂, there is no (X,y)∈U with p_y<y<Y. Hence the only possible NE neighbor is m. By Theorem 1 (type 1), the multiplicity of (1,p_x,p_y) equals the number of NE neighbors of p, namely 1.

Theorem 10 (Unique-maximal: top-row pivot ⇒ unique type 4).
In the setting of Theorem 9, if T≠∅ and the column α₂ contains no point below Y, then the color (4,α₂) occurs exactly once in G[U].
Proof. On row Y, the point (α₂,Y) has exactly one right neighbor, (X,Y), so h_Y(α₂)=1. For β≠Y there is no (α₂,β)∈U by hypothesis, and there are no β>Y in U when m is the unique maximal. Therefore T_4(α₂)=h_Y(α₂)=1 by Theorem 1 (type 4).

Theorem 11 (Every four-point set admits a uniquely colored edge).
If |U|=4, then G[U] has a uniquely colored edge.
Proof. If some row has ≥3 points, list the x-coordinates on that row as x_1<⋯<x_k with k≥3. The rightmost edge on that row has color (4,x_{k−1}). To realize (4,x_{k−1}) elsewhere would require a different row containing both (x_{k−1},·) and a point with x>x_{k−1}, which is impossible with only one point off the given row. Thus (4,x_{k−1}) is unique. If some column has ≥3 points, the vertical analogue (type 3) applies.
Otherwise, every row and every column has ≤2 points. If there is a row with exactly two points, let its smaller x be α. If no other row contains both (α,·) and a point to its right, then by Theorem 1 (type 4) we have T_4(α)=1. Otherwise there exists a second row with exactly two points and the same left endpoint α. Let β be the lower of the two y-values in column α. Then on row β there is exactly one point to the right of α, and in column α there is exactly one point above β. By Theorem 7 (robust L-corner), r_U(α,β)=s_U(α,β)=1 and the color (2,α,β) is unique.
Finally, if no row has two points, then each row has exactly one point. If some column has two points, let β be the lower y on that column; at row β only that column contributes and v(β)=1, so T_3(β)=1. If no column has two points either, U is an antichain, and Theorem 4 gives a unique type-2 color. In all cases a unique color exists.

