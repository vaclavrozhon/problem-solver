--- SYSTEM ---
You are a research mathematician. 

You are being run in a loop with a verifier that checks rigor. Your goal is to make **incremental, auditable progress**. You are not expected to solve the problem at once, but to generate new, testable ideas.

Inputs: 
- task statement 
- notes.md (summary of past progress; optional) 
- output.md (rigorously proven results curated so far; optional) 
- summary of past rounds (optional) 
- possibly some reference papers.

What counts as progress:
- Extract small lemmas/heuristics from literature and state them cleanly with one-line "why useful here".
- Explore small examples & try to break your own claims with toy counterexamples.
- Prove special cases or nontrivial bounds.
- If an approach fails, explain crisply why.
- Point out flaws in notes.md or output.md (but do not rewrite output.md yourself).

**Discipline.** 
- Read notes, outputs, summaries carefully before proposing new work. 
- Reference papers if relevant, but focus on *incremental, checkable steps*. 
- Do not output Markdown code fences, only raw JSON. 
- Length: at least ~200 words. 
- Organize your reasoning with short headings (Ideas, Examples, Obstacles, Next steps), make clear what your claims are and how they are supported. 
- Remember: the verifier curates notes and outputs, you only suggest.

**Return strictly JSON**:
{
  "progress_md": "Your progress notes for this round in Markdown (KaTeX allowed). Point out any gaps in output.md clearly. Do not modify output.md directly."
}


--- USER ---
Work on this problem context:

=== task.tex ===
\section*{Problem definition and your task}

\paragraph{The graph coloring setup}
Fix an integer $n\ge 1$ and let $[n]=\{1,2,\dots,n\}$. Consider the complete graph $G$ on the vertex set $V(G)=[n]\times [n]$. For two distinct vertices
\[
v_1=(a_1,b_1),\qquad v_2=(a_2,b_2),
\]
the edge $e=v_1v_2$ is assigned one of four types:
\begin{itemize}
  \item \textbf{Type 1:} $(a_1-a_2)(b_1-b_2)>0$ (both coordinates move in the same direction; one point is strictly south--west of the other).
  \item \textbf{Type 2:} $(a_1-a_2)(b_1-b_2)<0$ (one coordinate increases while the other decreases).
  \item \textbf{Type 3:} $a_1=a_2$ (vertical edge).
  \item \textbf{Type 4:} $b_1=b_2$ (horizontal edge).
\end{itemize}
Define a color map $c:E(G)\to \mathcal{L}$ by
\[
c(e)=
\begin{cases}
\bigl(1,\ \min\{a_1,a_2\},\ \min\{b_1,b_2\}\bigr), & \text{if $e$ is type 1},\\[2pt]
\bigl(2,\ \min\{a_1,a_2\},\ \min\{b_1,b_2\}\bigr), & \text{if $e$ is type 2},\\[2pt]
\bigl(3,\ \min\{b_1,b_2\}\bigr), & \text{if $e$ is type 3},\\[2pt]
\bigl(4,\ \min\{a_1,a_2\}\bigr), & \text{if $e$ is type 4}.
\end{cases}
\]
For $U\subseteq V(G)$, let $G[U]$ denote the induced subgraph. An edge $e\in E(G[U])$ has a \emph{unique color in $U$} if no other edge of $G[U]$ has the same label $c(e)$.

\paragraph{Your task}
Show that for every vertex set $U\subseteq [n]\times[n]$ with $|U|\ge 2$, there exist $u_1,u_2\in U$ such that the edge $u_1u_2$ has a color that appears exactly once in $G[U]$ under the coloring $c$ above.

\section*{Summary of thoughts that might be useful}

\paragraph{Important note}
This is a summary of thoughts about the problem. Take it with a grain of salt. 

\paragraph{Main idea}
The key is to understand, for a fixed color label, how many edges of $G[U]$ can realize it. Two simple counting facts drive most of the structure.

\subsection*{Two local multiplicity facts}

\paragraph{Type 1.}
A color $(1,\alpha,\beta)$ can only come from edges whose south--west endpoint is exactly $(\alpha,\beta)$. Within $U$, its multiplicity equals the number of vertices of $U$ strictly north--east of $(\alpha,\beta)$ (and is $0$ if $(\alpha,\beta)\notin U$). In particular, a type--1 color is unique in $U$ if and only if some $p\in U$ has exactly one north--east neighbor in $U$.

\paragraph{Type 2.}
Fix $(\alpha,\beta)\in [n]^2$. Let
\[
r_U(\alpha,\beta)=\#\{(\alpha,y)\in U:\ y>\beta\},\qquad
s_U(\alpha,\beta)=\#\{(x,\beta)\in U:\ x>\alpha\}.
\]
Then the number of edges in $G[U]$ colored $(2,\alpha,\beta)$ is $r_U(\alpha,\beta)\cdot s_U(\alpha,\beta)$, since each such edge chooses one point above $(\alpha,\beta)$ in column $\alpha$ and one to the right in row $\beta$. Hence $(2,\alpha,\beta)$ is unique in $U$ if and only if $r_U(\alpha,\beta)=s_U(\alpha,\beta)=1$.

(Types 3 and 4 ignore one coordinate in their labels and therefore tend to repeat across columns/rows; the strategy below prefers to certify uniqueness via types 1 or 2.)

\subsection*{Immediate lemmas}

\paragraph{Lemma A (antichain $\Rightarrow$ unique type 2).}
If $U$ is an antichain under the product order on $\mathbb{Z}^2$ (no two points are coordinate-wise comparable), list $U$ in increasing $x$-order as $(x_1,y_1),\dots,(x_m,y_m)$. Then $y_1>\cdots>y_m$. For each consecutive pair $(x_i,y_i),(x_{i+1},y_{i+1})$, the edge has type 2 and color $(2,x_i,y_{i+1})$ with $r_U(x_i,y_{i+1})=s_U(x_i,y_{i+1})=1$, so that color appears exactly once.

\paragraph{Lemma B (a single NE neighbor $\Rightarrow$ unique type 1).}
If some $p\in U$ has exactly one north--east neighbor in $U$, then by the type--1 multiplicity fact the corresponding type--1 color appears exactly once.

These two lemmas already resolve some classes of $U$.


=== progress.md ===
...
robust four-point proposition by clean case analysis (rows/columns occupancy patterns: 4, 3+1, 2+2, 2+1+1, 1+1+1+1), using Theorems 2–5 and Lemmas XR/J/L. This is manageable and will stress-test the library of triggers.

### Summary of this round’s progress
- Added three new certified triggers: Lemma XR (row∪column support), Lemma J (empty L-corner ⇒ unique type 2), Lemma L (clean consecutives via top/right extremality ⇒ unique type 2).
- Clarified the structure of the unique-maximal case (X and Y are global maxima), solved its S=∅ subcase via Lemma XR, and outlined a concrete path to finish S≠∅ using Lemma J.
- Identified precise checks to implement in a maxima-scan strategy and set up a plan to verify |U|=4 as a next curated milestone.

## Round 0006 — 2025-08-27T19:00:46Z

### Quick audit of output.md (gaps and fixes)

- Gap in Theorem 11 (|U|=4). In the subcase where two distinct rows each have exactly two points and share the same left endpoint α, the proof claims: “no other column contains a point at row β,” where β is the lower of the two y-values in column α. This is incorrect: the very row β contains a second point to the right (by assumption that row β has two points), so there is at least one other column at row β. The desired uniqueness T_3(β)=1 must additionally ensure that no other column at row β contributes a vertical edge above β. A correct fix is straightforward:
  - If the right endpoints on the two rows are distinct (γ_1≠γ_2), then at row β=β_1, the only column contributing to T_3(β_1) is α, so T_3(β_1)=1 and (3,β_1) is unique.
  - If the right endpoints coincide (γ_1=γ_2=γ), then the four points form a full rectangle and (2,α,β_1) is unique by r_U(α,β_1)=s_U(α,β_1)=1 (the robust L-corner/Type–2 formula). This corrects the subcase.

No other issues found this round; Theorems 1–10 look solid as stated and proved. Theorem 6’s final bullet (the 3-point permutations) is correct but terse; it is acceptable as a curated fact.

### New, checkable lemmas (unique-maximal case consolidation)

Let U have a unique maximal element m=(X,Y) in the product order, and let S={p∈U: p_x<X and p_y<Y}. Write Max(S) for the set of product-order maximal points in S.

- Lemma UM1 (SW-max: boundary-aligned neighbors are the only NE neighbors). Let p=(α,β)∈Max(S). Then:
  - There is no q∈U with x=α and β<y<Y (else q∈S and q≻p).
  - There is no q∈U with y=β and α<x<X (else q∈S and q≽p with x>α, contradicting p maximal in S).
  - Consequently, any NE neighbor of p lies on the top row or right column: the only possible NE neighbors are (α,Y) (if present) and/or (X,β) (if present), besides m itself.
  Proof. Immediate from product-order maximality of p and the definitions above.
  Why useful: Reduces NE-neighbor checks at p∈Max(S) to two boundary locations, enabling immediate uniqueness triggers below.

- Lemma UM2 (SW-max + boundary alignment ⇒ immediate uniqueness). With notation as above and p=(α,β)∈Max(S):
  - If both (α,Y) and (X,β) lie in U, then r_U(α,β)=1 and s_U(α,β)=1 by UM1, and the color (2,α,β) is unique (Type–2 formula).
  - If exactly one of (α,Y),(X,β) lies in U, then p has exactly one NE neighbor, so the color (1,α,β) is unique (Type–1 formula).
  Proof. By UM1, no other contributors exist on the relevant column/row; hence r_U,s_U∈{0,1} with the stated values, yielding the two cases.
  Why useful: Gives a complete dichotomy at a single SW-maximal point; as soon as one boundary alignment occurs, we obtain a unique color of type 1 or 2.

- Corollary UM3 (partial resolution of the unique-maximal regime). If S≠∅ and there exists p∈Max(S) for which (α,Y)∈U or (X,β)∈U, then G[U] has a uniquely colored edge (by UM2). If S=∅, the configuration is supported on a row∪column and Lemma 8 (cross-shape) applies. Thus the only unresolved unique-maximal subcase is when S≠∅ and for every p=(α,β)∈Max(S), neither (α,Y) nor (X,β) lies in U.
  Why useful: This isolates a small, concrete “hard subcase” and shows that most unique-maximal configurations are already settled by existing tools.

### Corrected and streamlined proof for |U|=4 (to replace the flawed subcase)

Claim P4’ (Every |U|=4 has a unique color). The overall structure in Theorem 11 is right; we refine the “two 2-point rows with common left endpoint α” subcase.
- Suppose U has two distinct rows β_1<β_2 with points {(α,β_i),(γ_i,β_i)} for i=1,2 and γ_i>α. If γ_1≠γ_2, then at row β_1 only column α contributes a vertical edge above β_1 (column γ_1 has no point above β_1 with only four points total), hence T_3(β_1)=1 and (3,β_1) is unique. If γ_1=γ_2=γ, U is the four corners of a rectangle; then r_U(α,β_1)=s_U(α,β_1)=1 and (2,α,β_1) is unique (Theorem 7). All other subcases are handled exactly as in Theorem 11.
- This closes the gap noted above. (I recommend the verifier updates output.md accordingly.)

### Additional small, robust triggers

- Lemma D′ (explicit consecutive-maxima L-corner). Let M=Max(U) = {(x_i,y_i)} with x_1<⋯<x_k and y_1>⋯>y_k. If for some i we have no point (x_i,y) with y_{i+1}<y<y_i and no point (x,y_{i+1}) with x_i<x<x_{i+1}, then r_U(x_i,y_{i+1})=s_U(x_i,y_{i+1})=1 and (2,x_i,y_{i+1}) is unique.
  Proof. Immediate from the Type–2 formula; this is the maxima-specialization of Theorem 7.
  Why useful: A clean, local certificate when scanning consecutive maxima; tolerates arbitrary points elsewhere.

### Examples and checks

- UM2 in action. Let U={(2,2),(2,5),(4,5),(5,3),(5,5)} with unique maximum m=(5,5). S has Max(S) points at (2,2) and (5,3)∉S; pick p=(2,2). Both (2,5) and (5,2) exist? Here (5,2) is absent, (2,5) present ⇒ p has exactly one NE neighbor ⇒ (1,2,2) is unique by UM2.
- Correcting Theorem 11 subcase. Take U={(1,1),(3,1),(1,4),(5,4)}: two 2-point rows sharing α=1, with right endpoints 3 and 5 (distinct). Then T_3(1)=1 via column 1, hence (3,1) unique. If instead U={(1,1),(5,1),(1,4),(5,4)}, we get a rectangle and (2,1,1) unique (r=s=1).
- Lemma D′ edge case. U with consecutive maxima m_1=(2,7), m_2=(6,3), and no points on (x=2, y∈{4,5,6}) nor (y=3, x∈{3,4,5}). Then (2,2,3) is unique.

### Obstacles and why some attempts fail

- Completing the unique-maximal case. The unresolved subcase is: S≠∅ and every p∈Max(S) has neither (α,Y) nor (X,β) present. UM2 doesn’t fire; Theorem 10 (top-row pivot) might also fail if every non-rightmost top-row column reappears below Y. A naïve “take the closest p to the corner” can still leave a dominating point at the same y to the right inside S, hence p∉Max(S). This shows the need for a careful extremal choice and/or a counting/chain argument over Max(S).
- Multiple maxima regime. Even when Lemma D′ fails for every adjacent pair (extra points inflate R_i or S_i), those extra points need not directly create a singleton+extension (Types 3/4) without additional constraints. A more global aggregation or an iterative extraction (turn an “offending” point into a boundary singleton) seems necessary.

### Ideas/next steps (auditable)

1) Complete the unique-maximal regime using UM2:
   - For S≠∅, either some p∈Max(S) is boundary-aligned (UM2 triggers), or none are. In the latter, show that the second-rightmost top-row column α₂ has its highest sub-top-row point q=(α₂,β) in S and that q∈Max(S). If so, (α₂,Y) exists and UM2 fires (contradicting the assumption). The key step is proving q∈Max(S). I will formalize: pick α₂ maximal among top-row x’s below X; define β=max{y<Y : (α₂,y)∈U}. Then show there is no r∈S with r_x≥α₂, r_y≥β and (r_x,r_y)≠(α₂,β) unless r lies on the right column or top row (which cannot increase both coordinates), yielding the desired maximality.

2) Strengthen maxima-scan via D′: For each i, if D′ fails, record a specific “offender” on column x_i or row y_{i+1}. Try to turn an offender into a singleton+extension trigger:
   - If there are ≥2 offenders in column x_i (strictly between y_{i+1} and y_i), then on the row of the lower offender, check whether that row is a singleton base with exactly one extension; if yes, Types 3/4 uniqueness fires by Theorem 3.
   - If not, move to the right to the nearest offender on row y_{i+1} and repeat. The goal is a short, verifiable chain that must terminate in a singleton+extension witness.

3) Curate the corrected |U|=4 proof into output.md, replacing the flawed subcase argument with the γ_1≠γ_2 vs γ_1=γ_2 split detailed above.

4) Explore |U|=5 systematically, classifying by row/column occupancy patterns (5, 4+1, 3+2, 3+1+1, 2+2+1, 2+1+1+1, 1+1+1+1+1) and applying Theorems 2–7, 8–10, UM2, and D′. This will stress-test the boundary-alignment method and likely suggest the right invariant for the general proof.

### Why the new pieces help
- UM1–UM2 sharply constrain local multiplicities around SW-maximal points under unique-maximality, upgrading Theorem 9 by covering both Type 1 and Type 2 with exact if-and-only-if triggers. This eliminates many unique-maximal configurations and cleanly isolates the true obstacle.
- The corrected |U|=4 proof removes a logical gap and adds a reusable pattern (rectangle vs. non-rectangle split) that mirrors higher-order arguments (robust L-corners and singleton+extensions).
- Lemma D′ codifies the “no-intermediate points” condition for consecutive maxima as a ready-to-check unique Type–2 certificate, a useful module for any maxima-based induction.

## Round 0006 — 2025-08-27T19:00:46Z

### Audit of current output.md (gaps and fixes)

- Gap in Theorem 11 (|U|=4). In the subcase “Otherwise there exists a second row with exactly two points and the same left endpoint α, so column α contains exactly two points at distinct y-values y_1≠y_2. Let β=min{y_1,y_2}. … no other column contains a point at row β. Hence T_3(β)=1.” The italicized claim is false in general. Counterexample: the 2×2 rectangle U={(1,1),(1,2),(2,1),(2,2)} has two rows with the same left endpoint α=1 and also has a second column with a point at the lower row β=1 (namely (2,1)), and moreover that second column also has a point above (2,2). Here T_3(1)=2 (columns 1 and 2 both contribute one), so (3,1) is not unique. 
  • Fix: This subcase can be rescued cleanly using Theorem 7 (robust L-corner, type 2): for the bottom-left corner (α,β), r_U(α,β)=1 and s_U(α,β)=1, hence the color (2,α,β) is unique, regardless of whether (α',β')=(2,2) is present. Suggestion: replace the “type-3 uniqueness” conclusion in this subcase by an application of Theorem 7 to (α,β) (the lower of the two rows).

- The other theorems (1–10) remain sound as stated. In particular, the multiplicity formulas (Theorem 1), the single-line and singleton+extension triggers (Theorems 2–3), the antichain and clean consecutive-maxima gaps (Theorems 4–5), the |U|=3 classification (Theorem 6), the robust L-corner trigger (Theorem 7), the cross-shape lemma (Theorem 8), and the unique-maximal triggers H′ and the top-row pivot K (Theorems 9–10) are correct and useful.

### New, rigorously stated micro-lemmas (safe global triggers)

- Lemma R4 (row-of-two with globally unique left endpoint ⇒ unique type 4). Suppose some row β contains exactly two points (α,β),(α',β) with α<α'. If for every other row β' either (α,β')∉U or there is no point (x,β') with x>α, then T_4(α)=1 and the horizontal edge between (α,β) and (α',β) certifies a unique color (4,α).
  Proof. By Theorem 1 (type 4), T_4(α)=∑_{β''} 1_{(α,β'')}·h_{β''}(α). The unique contributing row is β with h_β(α)=1; all other rows have either no (α,β'') or h_{β''}(α)=0. Hence T_4(α)=1.

- Lemma R3 (column-of-two with globally unique lower endpoint ⇒ unique type 3; dual of R4). Suppose some column α contains exactly two points (α,β),(α,β') with β<β'. If for every other column α' either (α',β)∉U or there is no point (α',y) with y>β, then T_3(β)=1 and the vertical edge between (α,β) and (α,β') certifies a unique color (3,β).

- Lemma R1 (maximal-S bound on local rays). Let U have a unique maximal m=(X,Y). If p=(α,β)∈Max(S), where S={u∈U: u_x<X,u_y<Y}, then r_U(α,β)≤1 and s_U(α,β)≤1.
  Proof. If there are two distinct points above β in column α below Y, the lower of them is in S and is NE of p, contradicting p∈Max(S). Hence at most one such point below Y exists. A further point at y=Y may exist at (α,Y), so r_U(α,β)≤1. The argument for s_U is analogous: two distinct points to the right of α below X would give a point in S that is E of p (and hence NE once we account for β unchanged), contradicting maximality. Thus s_U(α,β)≤1.
  Why useful: For p∈Max(S), the type–2 counts r_U(α,β), s_U(α,β) are each 0 or 1. This sharply restricts how (2,α,β) can fail to be unique and localizes the obstruction exclusively to the boundary (top row/right column), aligning with H′ and K.

- Corollary (R1 ⇒ “boundary-only” obstruction for type 1). With notation as in R1, all NE neighbors of p lie on the top row or right column. Moreover, p has exactly one NE neighbor iff both of the following hold: there is no top-row point strictly to the right of α other than m, and there is no right-column point strictly above β other than m. This rephrases H′ and gives a checkable certificate for unique type 1 at SW-maxima p.

### Examples to probe and validate the micro-lemmas

- R4 example. U={(2,5),(5,5)}∪{(1,1),(3,2),(4,7)}. Row β=5 has exactly two points at x=2,5. Column α=2 does not appear in any other row with a right neighbor (there is no (2,β') with any x>2 in that row). Hence T_4(2)=1; the edge (2,5)–(5,5) is uniquely colored (4,2).

- R3 example (dual). U={(6,2),(6,4)}∪{(1,1),(5,3),(7,7)}. Column α=6 has exactly two points at y=2,4. No other column has a point on row β=2 with a vertical extension above. So T_3(2)=1; the edge (6,2)–(6,4) is uniquely colored (3,2).

- R1 boundary-only obstruction. U has unique maximal m=(7,7). Let p be (3,3) and assume p∈Max(S). Then r_U(3,3), s_U(3,3) ∈{0,1}. If r_U(3,3)=s_U(3,3)=1 fails, the only reason p can have ≥2 NE neighbors is through top-row/right-column points strictly beyond p. This directs the search to H′/K triggers.

### Ideas toward finishing the unique-maximal case (pivot-or-corner search)

- Goal: Prove that for U with a unique maximal m, one of the following triggers fires: (i) H′ (Theorem 9), (ii) K (Theorem 10), (iii) the column-dual of K in a safe form (Singleton+extension, Theorem 3), or (iv) a robust L-corner (Theorem 7) at some (α,β)=(p_x,p_y) for p∈Max(S).

- Extremal selection and consequences. Choose p∈Max(S) with maximal x and, among those, maximal y. By R1, r_U(p_x,p_y), s_U(p_x,p_y)∈{0,1}. There are three stable regimes:
  • Regime A: Both are 1 and neither extra boundary point exists beyond m (i.e., H′ holds). Then type–1 unique at p.
  • Regime B: Exactly one of r or s is 1. Then (2,p_x,p_y) cannot be unique. However, the presence of exactly one vertical (or horizontal) extension at p often promotes a singleton+extension trigger on the corresponding row/column. Concretely, if r=1 and s=0, then column p_x has exactly one point above p_y and—with the choice of p maximal in x and then y—there is strong evidence that row p_y has no right extension other than a possible point at X (which would imply s=1). If additionally column p_x is a singleton at row p_y, Lemma R3 yields a unique type–3 color. A symmetric check applies when s=1 and r=0 via Lemma R4.
  • Regime C: r=s=0. Then p has no vertical/horizontal extension, hence its NE neighbors, if any, must lie solely on the two boundary sets (top row and right column). If neither K nor the safe column-dual fires, both boundaries must be “populated.” In this situation, the nearest top-row point (a,Y) to the right of p and the nearest right-column point (X,b) above p together form, with p, an empty L-corner frame. Choosing a point q on one of the two open segments would contradict p’s maximality (R1). Thus the open segments at p are empty, and (by Theorem 7) (2,p_x,p_y) is unique. I will formalize the “empty segments” deduction next round by a careful nearest-neighbor argument.

Why useful: This reduces the unique-maximal case to checking finitely many local patterns around a single extremal p, and provides explicit callable triggers in each regime.

### Refinement for maxima pairs (toward |Max(U)|≥2)

- Observation (consecutive maxima rays are disjoint). With maxima m_i=(x_i,y_i) in x-increasing order, the horizontal rays in row y_{i+1} to the right of x_i (counted by S_i) and the vertical rays in column x_i above y_{i+1} (counted by R_i) are anchored at distinct rows/columns across different i. Thus any global assumption “S_i≥2 for all i” or “R_i≥2 for all i” enforces many distinct rows/columns carrying extra extensions. This abundance should force a singleton+extension trigger (Theorem 3) on some row/column or a robust L-corner (Theorem 7) where exactly one extension is present. I will turn this heuristic into a counting lemma: if S_i≥2 for all i and R_i≥2 for all i, then there exists α or β with exactly one extension and a unique base, yielding a type–3/4 unique color.

### Next steps (concrete and auditable)

1) Correct the |U|=4 proof in output.md by replacing the faulty type–3 subcase with a direct application of Theorem 7 (robust L-corner) at the lower row’s left endpoint. I will write a concise replacement paragraph for the verifier to curate.

2) Formalize the nearest-neighbor “empty L-segments” argument in Regime C for the unique-maximal case to derive Theorem 7 at (p_x,p_y). This will close the remaining subcase under a precise selection of p∈Max(S).

3) Develop a counting lemma for |Max(U)|≥2: if for all i both S_i≥2 and R_i≥2, then either a singleton+extension (Theorem 3) occurs or a robust L-corner (Theorem 7) occurs among the set of pairs { (x_i,y_{i+1}) }. The proof will exploit the disjointness of the rows {y_{i+1}} and columns {x_i} across i.

4) Optional small-case stress test: push the verified bound to |U|=5 by pattern analysis using Theorems 2–7 and Lemmas R1/R3/R4, identifying any residual subpatterns that still require a bespoke trigger.

### Summary
- Identified and corrected a flaw in the |U|=4 argument; Theorem 7 (robust L-corner) cleanly resolves the affected subcase (including the 2×2 rectangle).
- Added safe global triggers R4/R3 (two-on-a-line with globally unique base) and a structural bound R1 on r_U and s_U at SW-maxima in the unique-maximal regime, crystallizing that only boundary points can obstruct type–1 uniqueness there.
- Outlined a tight pivot-or-corner strategy around an extremal p to finish the unique-maximal case, and a plan to convert “all consecutive maxima are heavy” into a singleton+extension or L-corner witness.

### Audit of output.md (gaps, clarifications)
- Theorem 11 (|U|=4) now looks correct after the fix using Theorem 7 (robust L-corner). I rechecked the subcases; no further issues found.
- Theorem 10 (unique-maximal: top-row pivot) implicitly uses the fact that in the unique-maximal regime there is no point with y>Y or x>X. This is true but not explicitly stated; I recommend curating the following simple observation (O1) so the proof does not rely on an unstated fact.
- Theorem 9 (SW-max with boundary thresholds ⇒ unique type 1) conceptually relies on the fact that for p∈Max(S) there are no points of U on the open vertical/horizontal segments above/right of p within S. This is used implicitly; I state it cleanly as Lemma UM1 below for curation.

### New, rigorously stated lemmas ready to curate (with proofs)

Observation O1 (unique maximal ⇒ coordinatewise maxima).
Statement. If U has a unique maximal element m=(X,Y) in the product order, then X = max{x : (x,·)∈U} and Y = max{y : (·,y)∈U}.
Proof. If some u=(x',y') has x'>X, then no v∈U satisfies v_x≥x' and v_y≥y' with at least one strict inequality (none can have x≥x'>X), so u is maximal too, contradicting uniqueness. The argument for y'>Y is symmetric. ∎
Why useful. Makes explicit a fact used in Theorem 10 and elsewhere.

Lemma UM1 (SW-maxima have no interior points on their column/row).
Setup. Let U have a unique maximal m=(X,Y). Let S={p∈U : p_x<X and p_y<Y} and Max(S) its product-order maximal elements.
Statement. If p=(α,β)∈Max(S), then (i) there is no q∈U with x=α and β<y<Y; (ii) there is no q∈U with y=β and α<x<X. Consequently every NE neighbor of p lies on the top row y=Y or the right column x=X.
Proof. If q=(α,y) with β<y<Y existed, then q∈S and q≻p, contradicting p∈Max(S). The horizontal case is identical. The consequence follows immediately. ∎
Why useful. This isolates exactly where extra NE neighbors of p can come from, underpinning Theorem 9.

Lemma D′ (consecutive-maxima robust L-corner; specialization of Theorem 7).
Setup. Let M=Max(U) be listed as m_i=(x_i,y_i) with x_1<⋯<x_k and y_1>⋯>y_k (k≥2).
Statement. If for some i we have no point (x_i,y) with y_{i+1}<y<y_i and no point (x,y_{i+1}) with x_i<x<x_{i+1}, then the color (2,x_i,y_{i+1}) is unique in G[U].
Proof. The two emptiness conditions give r_U(x_i,y_{i+1})=1 (only (x_i,y_i) lies above) and s_U(x_i,y_{i+1})=1 (only (x_{i+1},y_{i+1}) lies to the right). By the type–2 multiplicity formula, the multiplicity is 1. ∎
Why useful. A clean, local certificate when scanning consecutive maxima.

Lemma R4 (row-of-two with globally unique left base ⇒ unique type 4).
Statement. Suppose there exists a row β with exactly two points (α,β),(α',β) with α<α′. Assume furthermore that for every β'≠β we have either (α,β')∉U or there is no point (x,β') with x>α. Then color (4,α) appears exactly once in G[U].
Proof. By the type–4 formula, T_4(α)=∑_{β''} 1_{(α,β'')}·h_{β''}(α). Only β contributes (exactly one right neighbor), and it contributes h_β(α)=1. All other rows contribute 0 by assumption. Hence T_4(α)=1. ∎

Lemma R3 (column-of-two with globally unique lower base ⇒ unique type 3; dual of R4).
Statement. Suppose there exists a column α with exactly two points (α,β),(α,β') with β<β′. Assume furthermore that for every α'≠α we have either (α',β)∉U or there is no point (α',y) with y>β. Then color (3,β) appears exactly once in G[U].
Proof. By the type–3 formula, T_3(β)=∑_{α''} 1_{(α'',β)}·v_{α''}(β). Only α contributes (exactly one point above), and it contributes v_α(β)=1. All other columns contribute 0 by assumption. Hence T_3(β)=1. ∎

### Why these help and how to use them
- O1 and UM1 close implicit gaps in the unique-maximal arguments and can be cited directly in Theorems 9–10.
- D′ adds a robust, easy-to-check certificate when scanning consecutive maxima; it is a direct specialization of Theorem 7 that many configurations satisfy.
- R3 and R4 are globally safe “singleton+extension” style triggers when a 2-point row/column has a left/lower base that does not act as a base elsewhere; they follow immediately from the multiplicity formulas and are useful in small-case analyses and in pruning “offender” configurations when consecutive-maxima witnesses fail.

### Examples (sanity checks)
- UM1 in action. U={ (2,2),(2,5),(4,5),(6,3),(6,6) } with unique maximal m=(6,6). Then S contains p=(2,2) and p is in Max(S). UM1 forbids any (2,y) with y∈{3,4} and any (x,2) with x∈{3,4,5}. Indeed, p’s NE neighbors can only lie on row 5 or column 6.
- D′ witness. U has consecutive maxima m_1=(3,8), m_2=(7,4); suppose there is no point (3,y) with y∈{5,6,7} and no point (x,4) with x∈{4,5,6}. Then (2,3,4) is unique.
- R4 witness. U contains row y=5 points at x=2 and 6, and no other row contains an (x=2,·) with any right neighbor. Then T_4(2)=1 and (4,2) is unique.

### Ideas toward the remaining hard cases (precise statements to be proved next)
- Unique-maximal, S≠∅: pivot-or-corner fixpoint. Choose p∈Max(S) with maximal x and then maximal y. By UM1, any NE neighbor of p lies on the top row or right column. There are three regimes to analyze:
  1) Both (α:=p_x,Y) and (X,β:=p_y) lie in U. Then (2,α,β) is unique immediately (r=s=1 by UM1 and Theorem 1).
  2) Exactly one of these lies in U. If, in addition, p_x≥α₂ and p_y≥β₂ (nearest-boundary thresholds), Theorem 9 gives a unique type–1 color. Otherwise, the very boundary points preventing Theorem 9 (extra top-row points right of p_x or extra right-column points above p_y) can potentially be harvested into a D′-style L-corner or an R3/R4 singleton+extension. I will formalize a short “nearest-neighbor” lemma that either produces (2,α',β') unique at the first boundary intersection, or isolates a row/column satisfying R3/R4.
  3) Neither (α,Y) nor (X,β) lies in U. Consider the nearest top-row point a=(α*,Y) with α*>α (if any) and the nearest right-column point b=(X,β*) with β*>β (if any). If both exist, UM1 ensures the open segments above/right of p on column α and row β are empty; a and b, together with p, then form the frame of a robust L-corner at (α,β). This yields a unique type–2 color by Theorem 7. Otherwise, if only one exists, we are back in (2) with potentially a unique type–1 via Theorem 9. I will write this carefully next round (checking the emptiness claim and handling the cases when multiple boundary points exist).

- Multiple maxima (|Max(U)|≥2). For each adjacent pair we either certify uniqueness by D′ or record an “offender” in its column or row (an extra point inflating R_i or S_i). Offenders for different i live on disjoint rows/columns ({y_{i+1}} and {x_i} are all distinct). A pigeonhole/counting lemma should force that some offender actually creates a singleton+extension (R3/R4) or itself forms part of a D′ witness. I will formalize:
  • Counting Lemma (to prove): If for all i either R_i≥2 or S_i≥2 and no D′-witness exists, then there is α with exactly one row β having (α,β) and exactly one right neighbor (hence T_4(α)=1), or dually a β with exactly one column α having (α,β) and exactly one upper neighbor (T_3(β)=1).

### Next steps (concrete, auditable)
1) Curate O1, UM1, D′, R3, and R4 into output.md; these are safe and strengthen the toolset used by Theorems 9–11.
2) Write and verify the “nearest-boundary lemma” in the unique-maximal regime: with p∈Max(S) chosen extremally, show that if Theorem 9 fails then either a D′/Theorem 7 witness exists at (p_x,β*) or (α*,p_y), or a singleton+extension (R3/R4) fires on the boundary row/column.
3) Prove the counting lemma for multiple maxima by aggregating offenders on the disjoint families of rows {y_{i+1}} and columns {x_i} and extracting an R3/R4 or D′ trigger. Validate on dense staircase-like examples.

### Summary of progress this round
- No new gaps in output.md beyond a suggestion to add O1 and UM1 explicitly. The |U|=4 proof is now sound.
- Added four rigorous, reusable lemmas (O1, UM1, D′, R3/R4) with proofs, strengthening the unique-maximal and multiple-maxima toolkits.
- Outlined precise, checkable next steps to finish the unique-maximal case (via a nearest-boundary analysis) and to handle the “all consecutive maxima heavy” regime via a counting lemma.

## Round 0007 — 2025-08-27T19:59:15.186408Z

Round 0007 — incremental, auditable progress

Overview
- I audited the current output.md. I found no new logical flaws since the last correction to Theorem 11 (|U|=4). Theorem 9 (unique–maximal threshold ⇒ unique type 1) and Theorem 10 (top-row pivot ⇒ unique type 4) are correctly stated and proved. The dual “right-column pivot ⇒ unique type 3” is intentionally not present in symmetric form (as noted in notes.md) because it needs a singleton-row hypothesis; Theorem 3 already supplies the safe version. Below I consolidate the unique–maximal case by formalizing two threshold-existence lemmas, extract a corollary for the search strategy, and add a robust L-corner variant useful in 2+2(+…) configurations.

Gaps or cautions in output.md
- None needing immediate correction. A cautionary note: the dual of Theorem 10 must remain in the singleton-row form (Theorem 3); there is no safe global dual without that assumption (see the counterexample recorded in notes.md).

New lemmas (rigorous; to be curated)

Lemma UM–X (x-threshold existence under unique maximality).
- Setting. U has a unique maximal m=(X,Y). Let T={x<X : (x,Y)∈U} and S={p∈U : p_x<X and p_y<Y}. If S≠∅ and T≠∅, define α₂=max T.
- Claim. Either (i) column α₂ contains no point below Y, in which case Theorem 10 yields a unique type–4 color; or (ii) there exists p∈Max(S) with p_x≥α₂.
- Proof. If column α₂ has no point below Y we are in (i). Otherwise pick q=(α₂,β) with β<Y; then q∈S. In any finite poset, every element is dominated by some maximal element, so there is p∈Max(S) with p≽q, hence p_x≥α₂. ∎
- Why useful. This guarantees that when the top-row pivot (Theorem 10) does not fire, there is a SW-maximal point whose x-coordinate is at least the second-rightmost top-row x, providing half of the threshold for Theorem 9.

Lemma UM–Y (y-threshold existence via the safe column pivot).
- Setting. U has a unique maximal m=(X,Y). Let R={y<Y : (X,y)∈U} and S as above. If S≠∅ and R≠∅, define β₂=max R.
- Claim. Either (i) row β₂ is a singleton (only (X,β₂)∈U), and then Theorem 3 yields a unique type–3 color; or (ii) there exists q∈Max(S) with q_y≥β₂.
- Proof. If row β₂ has only (X,β₂), then on column X there is exactly one point above (necessarily m), hence Theorem 3 applies. Otherwise pick r=(α,β₂) with α<X; then r∈S. As above, some q∈Max(S) satisfies q≽r, hence q_y≥β₂. ∎
- Why useful. This supplies the y-threshold needed for Theorem 9 whenever the safe type–3 pivot does not already resolve the instance.

Corollary (two-threshold reduction for unique–maximal).
- With m, T, R, α₂, β₂ as above. If S=∅, Theorem 8 (row∪column support) applies. If S≠∅, then:
  • If T≠∅ and the top-row pivot (Theorem 10) fails, there is p_x≥α₂ for some p∈Max(S).
  • If R≠∅ and the singleton-row pivot (Theorem 3) fails, there is q_y≥β₂ for some q∈Max(S).
  • If there exists r∈Max(S) with r_x≥α₂ and r_y≥β₂ simultaneously, Theorem 9 applies and yields a unique type–1 color.
- Interpretation. In the unique-maximal regime, unless a pivot (Theorem 10 or Theorem 3) already certifies uniqueness, we can find one (or two) SW-maximal points meeting the respective x- or y-threshold(s). The remaining unresolved subcase is when x- and y-thresholds are each met but not by the same maximal point. The next step is to convert this “crossing” into a type–2 or type–3/4 certificate (see Next steps).

A robust L-corner variant for 2+2(+…)

Lemma RL (two 2-point rows sharing a left endpoint, with clean column, ⇒ unique type 2).
- Statement. Suppose there exist two distinct rows β_1<β_2 such that: (α,β_i),(γ_i,β_i)∈U with α<γ_i (i=1,2); column α contains exactly these two points (α,β_1),(α,β_2); and on the lower row β:=β_1 there is exactly one point to the right of α (namely (γ_1,β)). Then color (2,α,β) is unique.
- Proof. By the hypotheses, in column α there is exactly one point above β (namely (α,β_2)), so r_U(α,β)=1; in row β there is exactly one point to the right of α (namely (γ_1,β)), so s_U(α,β)=1. Theorem 1 (type 2) gives uniqueness of (2,α,β). ∎
- Why useful. This is a safe, verifiable pattern extending the 4-point rectangle subcase to ambient configurations with many other points, provided column α stays clean and the lower row has exactly one extension to the right at α. It is a robust tool within the “two heavy rows” regime.

Examples (sanity checks and edge cases)
- UM–X in action. U={ (6,8) }∪{ (3,8),(5,8) }∪{ (5,4),(2,1) }. Here m=(6,8), T={3,5}, α₂=5. Column 5 has (5,4), so the top-row pivot fails. Lemma UM–X yields a p∈Max(S) with p_x≥5; indeed p=(5,4)∈Max(S).
- UM–Y in action. U={ (8,6) }∪{ (8,3),(8,5) }∪{ (4,5),(2,2) }. Here m=(8,6), R={3,5}, β₂=5. Row 5 is not a singleton, so the safe type–3 pivot fails; Lemma UM–Y produces q∈Max(S) with q_y≥5; indeed q=(4,5).
- RL example. Let U contain rows β_1=1 and β_2=4 with points (2,1),(7,1) and (2,4),(5,4); no other point in column 2. Then (2,2,1) is unique regardless of extra points elsewhere (provided column 2 remains clean and the lower row remains with exactly one right neighbor at 2).

Ideas toward closing the remaining unique–maximal subcase
- Structure. Let Max(S)={s_1,…,s_k} with x increasing and y decreasing. Under the corollary above, if both T and R are nonempty and neither pivot fires, there exist indices f,g with x(s_f)≥α₂ and y(s_g)≥β₂. If some s_i satisfies both, Theorem 9 finishes. Otherwise f>g, so s_g is “high-but-left” and s_{g+1} is “right-but-low.” This crossing suggests examining the L-corner (x(s_g), y(s_{g+1})). 
- Goal. Prove a dichotomy for this crossing pair: either the L-corner at (x(s_g), y(s_{g+1})) is clean in the sense of Theorem 7 (yielding a unique type–2 color), or one of the “offending” extra points that would inflate r_U or s_U promotes a singleton+extension (Theorem 3) or a row-of-two global trigger (R4) on some row/column. The technical task is to pin down a nearest-neighbor variant that ensures any additional contributor on the vertical (resp. horizontal) segment forces one of the safe type–3/4 triggers.
- Plan. For the vertical ray at x(s_g), pick the lowest y′>y(s_{g+1}) with (x(s_g),y′)∈U (this is either y′=y(s_g) or the nearest interloper). If y′≠y(s_g), then s_g remains maximal but row y′ is an “offender” below Y. We will analyze whether row y′ is singleton (Theorem 3), forms a 2-point row with globally unique left endpoint (R4), or can be paired with a clean column to create an RL-type L-corner. A symmetric analysis applies to the horizontal ray from (x(s_g), y(s_{g+1})).

Obstacles and why some direct attempts fail
- A tempting but false shortcut is to assume that the first crossing pair (s_g,s_{g+1}) automatically yields r_U=s_U=1 at (x(s_g), y(s_{g+1})). This fails because additional points on the vertical segment x=x(s_g) with y∈(y(s_{g+1}),y(s_g)) are compatible with s_g being maximal yet increase r_U. Hence additional structure (nearest-neighbor selection plus type–3/4 triggers) is needed.

Next steps (concrete and checkable)
1) Formalize the “nearest-neighbor offender ⇒ type–3/4 trigger” argument sketched above for the crossing pair (s_g,s_{g+1}). The desired lemma: among the lowest vertical/horizontal interlopers at a crossing, at least one induces a singleton+extension (Theorem 3) or a row-of-two with a globally unique base (R4), hence a unique type–3/4 color.
2) Package UM–X, UM–Y, and the crossing analysis into a complete proof of “unique maximal ⇒ unique color,” yielding a new theorem to curate.
3) Extend RL to a symmetric “clean-row” variant (two 2-point columns sharing a lower endpoint with a clean row ⇒ unique type 2) and add these as safe triggers to the library.
4) Stress-test on crafted worst-case “staircase with fillers” examples to validate the nearest-neighbor lemma and to calibrate the cleanliness conditions needed for Theorem 7 vs. type–3/4 triggers.

Why this is progress
- UM–X and UM–Y convert the abstract unique–maximal regime into a finite, verifiable checklist of pivots and thresholds, isolating the only remaining hard subcase (crossing without a single maximal hitting both thresholds). The RL lemma strengthens our catalog of robust, local uniqueness certificates applicable amidst additional points. The next-step plan is precise: prove a nearest-neighbor lemma at the crossing to finish the unique–maximal case.

### Audit of output.md (this round)
- No new gaps found in the currently curated Theorems 1–11 and auxiliary lemmas O1, UM1, R3, R4. The proof of Theorem 11 (|U|=4) is now sound after the fix via Theorem 7. 
- Minor note (not an error): Theorem 6’s last bullet is still terse (the “remaining permutations” assertion). It is acceptable as curated, but could be expanded later by explicitly identifying the consecutive x-order pair yielding r=s=1.

### New rigorous lemmas (ready to curate) — strengthening the unique–maximal toolkit

1) Lemma UM2′ (SW-max with both boundary contacts ⇒ unique type 2)
Statement. Let U have a unique maximal element m=(X,Y). Let S={p∈U: p_x<X and p_y<Y} and let Max(S) be its product-order maximal elements. If p=(α,β)∈Max(S) and both boundary-aligned points (α,Y)∈U and (X,β)∈U exist, then the color (2,α,β) occurs exactly once in G[U].
Proof. By Lemma UM1 (in output.md), there is no (α,y) with β<y<Y and no (x,β) with α<x<X. Thus r_U(α,β)=1 (the unique point above β in column α is (α,Y)) and s_U(α,β)=1 (the unique point to the right of α in row β is (X,β)). By the type–2 multiplicity formula (Theorem 1), the color (2,α,β) is unique. ∎
Why useful: This is a sharp, local certificate for unique type–2 in the unique–maximal regime that does not require threshold conditions. It complements Theorem 9 (type–1 via thresholds) and Theorem 10 (top-row pivot), and is often easy to verify in practice.

2) Theorem UM-single (unique maximal with a single SW-max ⇒ a unique color)
Statement. Suppose U has a unique maximal element m=(X,Y), and S={p∈U: p_x<X and p_y<Y} is nonempty but has a single product-order maximal element: Max(S)={p} with p=(α,β). Then G[U] has a uniquely colored edge.
Proof. Let T={x<X : (x,Y)∈U}, and if T≠∅ set α₂=max T; let R={y<Y : (X,y)∈U}, and if R≠∅ set β₂=max R. We split into cases.
- Case A: T=∅ and R=∅. Then there are no top-row or right-column points other than m. By UM1, any NE neighbor of p must lie on the top row or right column; hence p’s only NE neighbor is m, so the type–1 color (1,α,β) is unique by Theorem 1 (type 1 multiplicity).
- Case B: T≠∅ and the top-row pivot fires. If column α₂ contains no point below Y, Theorem 10 gives a unique type–4 color; we are done.
- Case C: R≠∅ and the safe column pivot fires. If row β₂ is a singleton {(X,β₂)}, then by Theorem 3 (singleton+extension) the color (3,β₂) is unique; we are done.
- Case D: T≠∅, the top-row pivot fails (so column α₂ contains some (α₂,β′) with β′<Y), and R=∅. By Lemma UM–X (proved in notes.md), since the pivot failed and Max(S)={p}, we have p_x≥α₂. Because R=∅, there is no (X,y) with y<Y. By UM1, any NE neighbor of p lies on the top row or right column; the right column contributes no NE neighbor (R=∅), and on the top row every point obeys x≤α₂≤p_x, so none lie strictly to the right of p. Thus p’s only NE neighbor is m, and (1,α,β) is unique.
- Case E: R≠∅, the safe column pivot fails (row β₂ has an additional point (α′,β₂) with α′<X), and T=∅. By Lemma UM–Y (proved in notes.md), since the pivot failed and Max(S)={p}, we have p_y≥β₂. Because T=∅, there are no top-row points other than m. By UM1, all NE neighbors of p must lie on the top row or right column; the top row contributes none (T=∅), and the right column has no point strictly above p_y other than m because p_y≥β₂=max{y<Y:(X,y)∈U}. Hence p’s only NE neighbor is m, and (1,α,β) is unique.
- Case F: T≠∅ and R≠∅, and neither pivot fires. Then by UM–X and UM–Y (notes.md) and Max(S)={p}, we get p_x≥α₂ and p_y≥β₂. Theorem 9 applies, showing p has exactly one NE neighbor (m), so (1,α,β) is unique.
These cases exhaust all possibilities. ∎
Why useful: This cleanly resolves the unique–maximal regime whenever S has a single maximal element. It collapses many subcases into threshold/pivot checks and reduces the remaining difficulty to configurations with |Max(S)|≥2.

Remark. In several subcases above, if both (α,Y) and (X,β) happen to lie in U, Lemma UM2′ immediately gives a unique type–2 color at (2,α,β) without invoking thresholds.

### Examples validating the new lemmas
- UM2′ example. Let U contain m=(7,7), p=(3,2), and also (3,7),(7,2); assume no points on the open vertical segment x=3, y∈(2,7), nor on the open horizontal segment y=2, x∈(3,7) (these are excluded by p∈Max(S) via UM1). Then r_U(3,2)=s_U(3,2)=1, so (2,3,2) is unique.
- UM-single, Case D. U has m=(8,8), top-row points at x=2,5,6 (α₂=6) and no right-column points below Y. Let S contain points strictly SW, and suppose Max(S)={p=(6,1)}. The top-row pivot fails since column 6 has (6,1). UM–X yields p_x≥α₂=6; with R=∅, p’s only NE neighbor is m, so (1,6,1) is unique.
- UM-single, Case F. U has m=(6,6), top-row x’s {2,4,5} (α₂=5), right-column y’s {1,3} (β₂=3), and Max(S)={p=(5,3)}. Both pivots fail. Since p meets both thresholds, Theorem 9 gives (1,5,3) unique.

### A small symmetric pattern (robust L-corner variant; optional to curate)
Lemma RL′ (two 2-point columns sharing a lower endpoint with a clean row ⇒ unique type 2).
- Statement. Suppose there exist α<α′ and β<β_1,β_2 such that in column α we have exactly (α,β),(α,β_1), in column α′ we have exactly (α′,β),(α′,β_2), and row β contains exactly the two points (α,β),(α′,β). Then (2,α,β) is unique.
- Proof. In column α there is exactly one point above β, namely (α,β_1), so r_U(α,β)=1. In row β there is exactly one point to the right of α, namely (α′,β), so s_U(α,β)=1. Theorem 1 (type 2) yields uniqueness. ∎
- Why useful: This is the column-dual of Lemma RL recorded in notes.md. Both are robust instances of Theorem 7 and are convenient “off-the-shelf” certificates in 2+2(+…) patterns.

### How this advances the overall proof
- Theorem UM-single settles the unique–maximal regime whenever the down-left region under m has a single maximal element. Together with Theorems 8–10, this eliminates a large family of layouts. What remains in the unique–maximal regime is the |Max(S)|≥2 case, for which the planned “crossing-pair” analysis applies.
- Lemma UM2′ adds a simple, verifiable trigger for unique type–2 localized at any SW-maximal p having both boundary contacts; it will be a key branch in the crossing analysis when both nearest boundary supports exist.

### Toward the remaining hard case (|Max(S)| ≥ 2): blueprint recap and refinement
- Setup. With m=(X,Y), list Max(S) in increasing x (hence decreasing y) as s_1,…,s_k, k≥2. If both T and R are nonempty and neither pivot fires, notes.md (UM–X/UM–Y corollary) yields indices f,g with x(s_f)≥α₂ and y(s_g)≥β₂ but no single s_i meets both. Then f>g. Consider the “crossing L-corner” at (x(s_g), y(s_{g+1})).
- Clean corner ⇒ unique type 2. If the open vertical segment x=x(s_g), y∈(y(s_{g+1}), y(s_g)) and the open horizontal segment y=y(s_{g+1}), x∈(x(s_g), x(s_{g+1})) are both empty, Theorem 7/D′ gives a unique type–2 color (2, x(s_g), y(s_{g+1})).
- Next target (nearest-interloper lemma). Define y_v as the minimum y in (y(s_{g+1}),Y) with (x(s_g),y)∈U if any; define x_h as the minimum x in (x(s_g),X) with (x,y(s_{g+1}))∈U if any. I will prove next that at least one of the nearest interlopers (if present) can be converted into a safe type–3/4 uniqueness via Theorem 3 or R3/R4, or else the corner is clean and Theorem 7 applies. This will close the |Max(S)|≥2 unique–maximal case.

### Obstacles
- The nearest-interloper conversion requires careful global control to ensure no other rows/columns contribute to T_3/T_4 outside the intended witness (hence the use of R3/R4, not just a raw vertical/horizontal edge). The construction must leverage that offenders for different consecutive maxima lie on disjoint rows and columns, allowing us to isolate a globally unique base.

### Next steps (concrete and auditable)
1) Curate Lemma UM2′ and Theorem UM-single into output.md (both are short and rely only on UM1 and Theorems 1, 3, 9, 10 and UM–X/UM–Y already proved in notes.md).
2) Prove the “nearest-interloper lemma” for the crossing pair (s_g, s_{g+1}): at least one of y_v or x_h enforces a safe R3/R4 or Theorem 3 trigger; otherwise the corner is clean and Theorem 7 applies. I will present the exact statement and proof next round.
3) Optional: curate RL′ (column-dual robust L-corner) as a pattern in notes.md for use in the crossing analysis.
4) Stress-test UM-single and UM2′ on crafted examples (dense boundaries; sparse interiors) and begin assembling a complete “unique maximal ⇒ unique color” theorem using the pivot-or-corner strategy.

### Why this is progress
- UM2′ adds a robust, local type–2 certificate directly at SW-maxima; UM-single settles the entire unique–maximal regime when the SW region has a single maximal, further shrinking the open set of configurations. The blueprint for the remaining |Max(S)|≥2 case is sharpened to a concrete nearest-interloper analysis aligned with the safe global triggers already curated (Theorem 3, R3, R4, Theorem 7).

## Round 0008 — 2025-08-27T20:08:08.551401Z

Round 0008 — incremental, auditable progress

Overview
- I focus on consolidating the unique–maximal regime by adding two safe, local type–2 triggers tied to the boundary thresholds α₂ (top row) and β₂ (right column). These are immediate consequences of the type–2 multiplicity formula and fit the “pivot-or-corner” strategy. I also audit output.md: no new gaps found; minor notational point noted below. Finally, I outline how these triggers integrate into the crossing subcase and propose concrete next steps.

Audit of output.md (gaps or issues)
- Theorem 11: The corrected proof for |U|=4 looks consistent after switching to Theorem 7 (robust L-corner) in the two-rows-with-common-left-endpoint subcase.
- Theorem 8: Notation uses X,Y for the designated column/row; the proof is fine. The sentence “there are no β>Y in U when m is the unique maximal” only appears in Theorem 10 and is justified by Lemma O1.
- Minor notation: in the last paragraph of Theorem 11, “v(β)=1” should read v_α(β)=1 or directly “T_3(β)=1” to match earlier notation (purely cosmetic).

New, rigorously stated lemmas (safe triggers; immediate from the type–2 formula)

- Lemma T2α (top-row failure ⇒ local type–2 at α₂’s first subrow if exactly one right neighbor).
  Setup. U has a unique maximal m=(X,Y). Let T={x<X : (x,Y)∈U}, assume T≠∅, and let α₂=max T. Assume column α₂ contains at least one point below Y and define β_c = max{ y<Y : (α₂,y)∈U } (the highest sub-top-row point in column α₂). If on row β_c there is exactly one point to the right of α₂ (i.e., h_{β_c}(α₂)=1), then the color (2,α₂,β_c) is unique.
  Proof. In column α₂, the only point above β_c is (α₂,Y) by definition of β_c, so r_U(α₂,β_c)=1. By hypothesis, s_U(α₂,β_c)=h_{β_c}(α₂)=1. By the type–2 multiplicity formula, (2,α₂,β_c) has multiplicity 1.
  Why useful: When the top-row pivot (Theorem 10) fails, this is the next-in-line check on the first subrow of α₂ and yields uniqueness under a minimal, verifiable right-neighbor condition.

- Lemma T2β (right-column failure ⇒ local type–2 at β₂’s last left column if exactly one upper neighbor).
  Setup. U has a unique maximal m=(X,Y). Let R={y<Y : (X,y)∈U}, assume R≠∅, and let β₂=max R. Assume row β₂ contains at least one point left of X and define α_r = max{ x<X : (x,β₂)∈U } (the rightmost sub-right-column point on row β₂). If in column α_r there is exactly one point above β₂ (i.e., v_{α_r}(β₂)=1), then the color (2,α_r,β₂) is unique.
  Proof. On row β₂, the only point to the right of α_r is (X,β₂) by definition of α_r, hence s_U(α_r,β₂)=1. By hypothesis v_{α_r}(β₂)=1, so r_U(α_r,β₂)=1. The type–2 formula gives multiplicity 1 for (2,α_r,β₂).
  Why useful: Dual to T2α; when the safe type–3 pivot (Theorem 3) at β₂ does not apply, this certifies uniqueness on the first left-ward base if the relevant column has a single upward extension.

Examples (sanity checks)
- For T2α. Let m=(8,8), top row has points at x=3,6,8 so α₂=6. Column 6 contains (6,5) and no other below 8, so β_c=5. Suppose row 5 has exactly one point to the right of 6, say (7,5), and no others to the right. Then r_U(6,5)=1 (only (6,8)), s_U(6,5)=1, so (2,6,5) is unique by T2α.
- For T2β. Let m=(8,8), right column has points at y=4,7,8 so β₂=7. Row 7 contains (5,7) and (8,7), with column 5 having exactly one point above 7, say (5,9) absent (forbidden by O1) and (5,8) present? O1 forbids y>8; only (5,8) can be present above 7, so v_5(7)=1. Then s_U(5,7)=1 (only (8,7)), and (2,5,7) is unique by T2β.

How these plug into the unique–maximal crossing subcase
- Context. When both T and R are nonempty and neither pivot fires (Theorem 10 nor the safe type–3 singleton-row trigger), UM–X and UM–Y guarantee existence of SW-maxima meeting the x- or y-threshold separately. If a single SW-maximum meets both thresholds, Theorem 9 gives a type–1 unique color. Otherwise (crossing), the next checks are precisely T2α and T2β on the “closest” subrow/column: β_c below α₂ and α_r left of β₂. If either h_{β_c}(α₂)=1 or v_{α_r}(β₂)=1, we immediately get a unique type–2 color.
- What remains. The difficult residual is when both h_{β_c}(α₂)≥2 and v_{α_r}(β₂)≥2. I plan to show that then the lowest vertical/horizontal interlopers at these positions can be turned into either a robust L-corner (Theorem 7) or a singleton+extension trigger (Theorem 3) on some nearby row/column. This will complete the unique–maximal case.

Obstacles and cautions
- T2α/T2β are sufficient but not necessary; they do not by themselves close the crossing subcase when both local counts are ≥2.
- A naïve attempt to force Theorem 7 at the “crossing L-corner” (x(s_g),y(s_{g+1})) fails without controlling intermediate points on the relevant column/row segments. The nearest-interloper analysis is therefore essential.

Next steps (concrete and auditable)
1) Prove a nearest-interloper lemma for the crossing subcase: if both h_{β_c}(α₂)≥2 and v_{α_r}(β₂)≥2, then among the nearest interlopers one induces either (i) a robust L-corner (Theorem 7) or (ii) a singleton+extension (Theorem 3) or (iii) a row/column-of-two with globally unique base (R4/R3). I will formalize the minimality choices and verify that additional contributors cannot create a second witness for the same color.
2) Curate Lemmas T2α and T2β into output.md under “Unique–maximal: boundary-local type–2 triggers.” They are direct from the type–2 formula and strengthen the practical checklist after the pivots fail.
3) Optional: add a brief remark in output.md clarifying Theorem 11’s notation (replace “v(β)=1” by “T_3(β)=1” or “v_α(β)=1”).

Why this is progress
- T2α and T2β are clean, checkable uniqueness certificates targeted at the unique–maximal regime’s remaining hard zone (post-pivot, pre-crossing resolution). They are immediate to implement in the search and reduce many configurations without global casework. The planned nearest-interloper lemma will dovetail with these to finish the unique–maximal case.



=== summary.md ===

## round-0004 — model summary — 2025-08-27T18:47:25.754749Z
Round 0004 produced a suite of rigorous, checkable lemmas that settle many base cases and clarify the remaining obstruction. Exact global multiplicity formulas were proved for all four edge types: type-1 equals the number of NE neighbors of its SW endpoint; type-2 multiplicity is r_U(α,β)·s_U(α,β); types 3 and 4 are given by explicit row/column sums, yielding necessary-and-sufficient uniqueness tests. Single-row/column lemmas (C1/C2, E/F) and the unique-maximal lemma (C3) are proved and used. For multiple maxima, Lemma D shows a clean gap (R_i=S_i=1) between consecutive maxima gives a unique type-2 color. Theorem verified on many structured families (all |U|=3, any row/column with ≥3 points, certain 2×2 ‘‘clean margin’’ rectangles). Main remaining obstacle: configurations with |Max(U)|≥2 where every consecutive pair has at least one of R_i,S_i>1. Next steps propose a gap-dichotomy or symmetric minimal-element approach and counting checks on worst-case ‘‘staircase’’ examples. Citations: prover-01.out.json, prover-02.out.json.

## round-0005 — model summary — 2025-08-27T19:00:46.944775Z
Round 0005 added several localized, verifiable triggers and closed small-case gaps while isolating a single remaining hard subcase. Prover-01 introduced unique-maximal case lemmas H' (boundary-threshold ⇒ unique type–1) and K/K' (top-row/right-column pivots ⇒ unique types 4/3) and gave a complete |U|=4 proof (Proposition P4). Prover-02 added complementary triggers XR (support ⊆ one row ∪ one column ⇒ unique 3/4), J (empty L–corner ⇒ unique type–2), and L (top/right extremality on consecutive maxima ⇒ unique type–2), and showed S=∅ (no strictly SW points of the unique maximum) is handled by XR. Both audits removed the earlier false global claim about “≥3 on a row/column ⇒ unique 4/3.” The remaining isolated obstacle is the unique-maximal subcase where every SW-maximal point fails the H' thresholds and α₂,β₂ reappear so K/K' don't fire; the plan is to finish it by formalizing a robust L-corner (D') and a pivot-or-corner dichotomy and to stress-test with |U|=5. Citations: prover-01.out.json, prover-02.out.json (Verifier: partial success).

## round-0006 — model summary — 2025-08-27T19:52:49.446983Z
Round 0006 audit: Both provers located the same gap in Theorem 11 (|U|=4): a claim that “no other column contains a point at row β” is false (counterexample: the 2×2 rectangle). Two clean fixes were proposed: split the subcase by whether the right endpoints coincide (γ1≠γ2 vs γ1=γ2) or replace the argument by applying Theorem 7 (robust L-corner) at the lower-left (α,β). Apart from that subcase, Theorems 1–10 are sound. New, checkable micro-lemmas were introduced: R4/R3 (row/column-of-two with a globally unique base ⇒ unique type 4/3) and R1 / UM1–UM3 (for p∈Max(S), r_U(α,β),s_U(α,β)≤1, so any NE neighbors lie only on the top row/right column). Using these, a pivot-or-corner plan around an extremal p∈Max(S) (max x, then max y) splits into regimes A/B/C and yields concrete triggers (H′, K, singleton+extension, or robust L-corner). Next technical steps are stated below. Citations: prover-01.out.json, prover-02.out.json.

## round-0007 — model summary — 2025-08-27T20:02:53.198896Z
Two provers advanced the proof toolkit for the “unique color” goal. Prover-01 added rigorous local lemmas: O1 (unique maximal ⇒ coordinatewise maxima), UM1 (SW-maxima have empty interior on their column/row), D′ (consecutive-maxima L-corner specialization of Theorem 7), and R3/R4 (singleton+extension triggers for columns/rows with two points). Prover-02 built threshold machinery for the unique-maximal regime: UM–X and UM–Y (guarantee an SW-maximal meeting x- or y-threshold unless a pivot resolves the instance), a two-threshold corollary reducing cases, and RL (robust L-corner for two 2-point rows). Both provers sketched the remaining strategy: handle the “crossing” subcase via nearest-neighbor/nearest-boundary lemmas to produce either a type–2 L-corner or a type–3/4 singleton trigger, and prove a counting lemma that, when D′ fails across consecutive maxima, forces an R3/R4 or D′ witness. Verifier: partial success. Next concrete tasks: formalize the nearest-neighbor offender ⇒ type–3/4 lemma, prove the counting lemma for multiple maxima, and curate the new lemmas into output.md. Citations: prover-01.out.json, prover-02.out.json, verifier.

## round-0008 — model summary — 2025-08-27T20:15:22.520035Z
Audit found no new gaps in the curated Theorems 1–11; Theorem 11 (|U|=4) is sound after the switch to Theorem 7. Two new lemmas strengthen the unique–maximal toolkit: UM2′ (a SW-max p that also touches both top/right boundaries forces a unique type–2 color) and Theorem UM-single (if the down-left region under the unique maximal m has exactly one product-order maximal p then G[U] has a unique color), proved by a case split using pivots/thresholds and existing lemmas. A symmetric robust L-corner RL′ was proposed. Prover-02 added two boundary-local type–2 triggers T2α and T2β that act immediately after pivot failures and simplify the crossing analysis. The remaining hard case is |Max(S)|≥2 (crossing pairs); the author plans a nearest-interloper lemma that either produces a clean L-corner (Theorem 7) or converts an interloper into a safe singleton/extension or R3/R4 witness. Verifier verdict: partial success. Files relied on: prover-01.out.json, prover-02.out.json.



=== notes.md ===
Setup and terminology.
- U ⊆ [n]×[n]. For p=(x,y) and q=(x',y'), say q is NE of p if x'>x and y'>y, and q is SE of p if x'>x and y'<y. Let G[U] be the graph on vertex set U with one edge for every unordered pair {p,q}. Each edge receives one of four types:
  • Type 1 (NE–SW): endpoints differ in both coordinates and one is NE of the other. The color label is (1,α,β) with α = min{x,x'} and β = min{y,y'}; equivalently the SW endpoint’s coordinates.
  • Type 2 (NW–SE): endpoints differ in both coordinates and one is NW of the other. The color label is (2,α,β) with α = min{x,x'} (the NW x) and β = min{y,y'} (the SE y).
  • Type 3 (vertical): same x; the color label is (3,β) where β = min{y,y'} (the lower y).
  • Type 4 (horizontal): same y; the color label is (4,α) where α = min{x,x'} (the left x).

Exact multiplicities (global; now established).
- Type 1: For (α,β)∈U, the multiplicity of color (1,α,β) equals the number of NE neighbors of (α,β) in U. No edge receives label (1,α,β) unless (α,β)∈U.
- Type 2: For any (α,β)∈[n]^2, set r_U(α,β)=# { (α,y)∈U : y>β } and s_U(α,β)=# { (x,β)∈U : x>α }. Then the multiplicity of color (2,α,β) equals r_U(α,β)·s_U(α,β). In particular it is unique iff r_U(α,β)=s_U(α,β)=1.
- Type 3: For any β, the multiplicity of (3,β) equals T_3(β)=∑_α 1_{(α,β)∈U} · # { (α,y)∈U : y>β }. It is unique iff exactly one α contributes and contributes 1.
- Type 4: For any α, the multiplicity of (4,α) equals T_4(α)=∑_β 1_{(α,β)∈U} · # { (x,β)∈U : x>α }. It is unique iff exactly one β contributes and contributes 1.

Safe uniqueness triggers (now established).
- Single-line uniqueness: If U⊆[n]×{y0} with |U|≥2, list its x-coordinates x_1<⋯<x_m. Then the edge between (x_{m−1},y0) and (x_m,y0) is the only edge in G[U] colored (4,x_{m−1}). Dually, if U⊆{x0}×[n] with |U|≥2, then the edge between (x0,y_{m−1}) and (x0,y_m) is the only edge colored (3,y_{m−1}).
- Singleton+extension uniqueness (global): If a row β contains exactly one vertex (α,β) and in column α there is exactly one vertex above it, then (3,β) is unique. Dually, if a column α contains exactly one vertex (α,β) and in row β there is exactly one vertex to its right, then (4,α) is unique. These follow immediately from the type-3/4 formulas.
- Antichain ⇒ unique type 2: If U is an antichain (no two share a row or a column), then ordering its points by increasing x (hence decreasing y), any consecutive pair (x_i,y_i),(x_{i+1},y_{i+1}) yields r_U(x_i,y_{i+1})=s_U(x_i,y_{i+1})=1, hence (2,x_i,y_{i+1}) is unique.
- Clean gap between consecutive maxima: Let M=Max(U) in the product order, list M as (x_1,y_1),…,(x_k,y_k) with x_1<⋯<x_k and y_1>⋯>y_k. For i∈{1,…,k−1} set R_i=# { (x_i,y)∈U : y>y_{i+1} } and S_i=# { (x,y_{i+1})∈U : x>x_i }. If R_i=S_i=1, then the color (2,x_i,y_{i+1}) is unique.
- 2×2 rectangle with clean margins: If U contains the four corners of {(x_1,y_1),(x_1,y_2),(x_2,y_1),(x_2,y_2)} with x_1<x_2, y_1<y_2 and has no other point in column x_1 above y_1 and no other point in row y_1 to the right of x_1, then (2,x_1,y_1) is unique.
- All three-point sets: If |U|=3, then G[U] has a uniquely colored edge. (Full case analysis is recorded in output.)

Corrections and counterexamples.
- “Three or more on a row/column ⇒ unique type 4/3” is false without further global conditions. Counterexample: U = {(1,1),(2,1),(3,1),(2,2),(4,2)}. On row y=1 we get a single occurrence of (4,2) within that row, but globally (4,2) occurs again on row y=2 (edge (2,2)–(4,2)). One must apply the global T_4(α) formula across all rows.
- Gap in “unique maximal ⇒ unique color” (as previously sketched). The subcase S≠∅ must rule out extra NE neighbors lying on the top row or rightmost column. Example showing the gap: U = {(3,3),(4,5),(5,5)}. Here p=(3,3) has two NE neighbors (4,5) and (5,5). A correct proof should either find a different witness (types 3/4 via T_3/T_4) or choose p to avoid such extra NE neighbors. This remains an open item to be fixed.

Open directions.
1) Complete the unique-maximal case rigorously, as outlined above (identify conditions under which T_3/T_4 already gives uniqueness; otherwise find p∈S with unique NE neighbor).
2) For |Max(U)|≥2, either certify a clean gap (R_i=S_i=1) for some consecutive pair, or force a type-3/4 trigger (singleton+extension) or a unique type-1 via a minimality argument on the “extra” points counted by R_i−1 and S_i−1.
3) Extend the small-case verification from |U|=3 to |U|=4 to stress-test the dichotomies and expose the right minimality invariants.
New curated results and corrections (this round)

1) Robust L-corner uniqueness (type 2)
If there exist α<α′ and β<β′ with (α,β′),(α′,β)∈U and, moreover, (i) (α,β) has exactly one point above it in its column (namely (α,β′)) and (ii) exactly one point to its right in its row (namely (α′,β)), then by the type-2 multiplicity formula r_U(α,β)=s_U(α,β)=1 and so the color (2,α,β) is unique. This generalizes the previously noted “2×2 rectangle with clean margins” by not requiring the NE corner (α′,β′) to be present.

2) Cross-shape (row ∪ column) support ⇒ unique color
If U is contained in the union of a single row Y and a single column X and |U|≥2, then G[U] has a uniquely colored edge. Proof: if |U∩row Y|≥2, let α be the second-largest x on that row. Since α≠X, the only row containing (α,·) inside U is Y, and on that row h_Y(α)=1. Thus T_4(α)=1 (unique type 4). Otherwise |U∩column X|≥2 and the vertical analogue gives a unique type 3.

3) Unique-maximal triggers
Let U have a unique maximal m=(X,Y) in the product order. Then X and Y are the global maxima of the used x- and y-coordinates. Define T={x<X : (x,Y)∈U} with α₂=max T (if T≠∅) and R={y<Y : (X,y)∈U} with β₂=max R (if R≠∅). Let S={p∈U : p_x<X and p_y<Y} and let Max(S) denote the set of product-maximal elements of S.
- H′ (SW-max + boundary thresholds ⇒ unique type 1). If S≠∅ and there exists p∈Max(S) with p_x≥α₂ and p_y≥β₂, then p has exactly one NE neighbor in U (namely m), hence the color (1,p_x,p_y) is unique.
- K (top-row pivot ⇒ unique type 4). If T≠∅ and the column α₂ contains no point below Y, then T_4(α₂)=1, realized by the top-row edge between (α₂,Y) and m.
Remark: The column-dual must be formulated with care (see below) to avoid extra contributors in T_3(β₂).

Corrections to proposed lemmas
- The proposed Lemma J (empty L-corner ⇒ unique type 2) was too weak: forbidding points only in the open segments (β,β′) and (α,α′) does not preclude additional points above β′ or to the right of α′. A correct sufficient condition is exactly r_U(α,β)=s_U(α,β)=1 (see robust L-corner above). Counterexample to the weak form: U={(1,2),(3,1),(1,5),(5,1)} satisfies the stated emptiness on (1, y∈(1,2)) and (x∈(1,3),1) but yields multiplicity 4 for color (2,1,1).
- The proposed Lemma K′ (right-column pivot ⇒ unique type 3) as stated omitted the requirement that no other columns contribute to T_3(β₂). A safe version is the singleton+extension trigger: if row β₂ is a singleton (only (X,β₂)) and column X has exactly one point above β₂ (necessarily m in the unique-maximal regime), then T_3(β₂)=1. Counterexample to the weak form: U={(5,5),(5,2),(1,2),(1,4)} makes T_3(2)=2.
- The proposed Lemma L (top/right extremality of consecutive maxima ⇒ unique type 2) is false without excluding intermediate points in column x_i above y_{i+1} (or in row y_{i+1} to the right of x_i). Counterexample: U={(2,5),(5,2),(2,4)} satisfies “m_i topmost” and “m_{i+1} rightmost,” yet r_U(2,2)=2.

Four-point sets (|U|=4)
The claim that every 4-point configuration admits a uniquely colored edge is true; a corrected complete proof is added to output.md. The flawed claim “if no row has 2 points, then no column has 2 points” is refuted by U={(1,1),(1,3),(2,2),(2,4)}. The corrected proof handles all row/column occupancy patterns (4), (3+1), (2+2), (2+1+1), and (1+1+1+1), using type-3/4 triggers or the antichain lemma.

Roadmap for the unique-maximal case
- S=∅ is settled by the cross-shape lemma.
- For S≠∅, aim for a trichotomy: H′ or K (or the safe column-dual) or a robust L-corner (D′) must fire. A workable extremal choice is p∈Max(S) with maximal x and, among those, maximal y; analyze its nearest boundary neighbors and the emptiness of the two open segments above/right of p. If both segments are populated, try to extract a singleton+extension on the boundary or an L-corner between consecutive top-row/right-column supports.
Erratum to Theorem 11 (|U|=4) and fix.
- The original subcase “two distinct rows each have exactly two points and share the same left endpoint α ⇒ T_3(β)=1 for the lower β” was incorrect. Counterexample: the 2×2 rectangle U={(1,1),(1,2),(2,1),(2,2)} has two columns contributing to T_3(1).
- Correct resolution: In that subcase, let β be the lower y among the two points in column α. Then row β has exactly two points (α,β),(γ,β) (so s_U(α,β)=1), and column α has exactly one point above β (namely at the higher row, so r_U(α,β)=1). By Theorem 7 (robust L-corner), (2,α,β) is unique. This uniform fix also covers the rectangle case.

Safe global triggers (recorded for use).
- R4 (row-of-two with globally unique left endpoint ⇒ unique type 4). Suppose some row β has exactly two points (α,β),(α′,β) with α<α′, and for every other row β′ either (α,β′)∉U or there is no point (x,β′) with x>α. Then T_4(α)=1, hence there is a unique color (4,α). Proof: From the type-4 formula, only row β contributes and contributes 1.
- R3 (column-of-two with globally unique lower endpoint ⇒ unique type 3). Suppose some column α has exactly two points (α,β)<(α,β′) with β<β′, and for every other column α′ either (α′,β)∉U or there is no point (α′,y) with y>β. Then T_3(β)=1, hence there is a unique color (3,β). Proof: From the type-3 formula, only column α contributes and contributes 1.

Unique-maximal structure (replace R1 by UM1).
- Setup: U has a unique maximal m=(X,Y). Let S={p∈U: p_x<X and p_y<Y} and Max(S) be its product-order maxima.
- UM1 (boundary-only NE neighbors for SW-maxima). For any p=(α,β)∈Max(S): (i) there is no q∈U with x=α and β<y<Y; (ii) there is no q∈U with y=β and α<x<X. Consequently, any NE neighbor of p lies on the top row y=Y or the right column x=X. Proof: If such a q existed in (i) or (ii), then q∈S and q≻p, contradicting p∈Max(S).
- Caution: The statement “If exactly one of (α,Y) and (X,β) lies in U, then p has exactly one NE neighbor” is false without further constraints. Counterexample: m=(5,5), p=(2,2)∈Max(S), and top-row points (3,5),(4,5) present while (2,5),(5,2) are absent. Then p has multiple NE neighbors. The correct boundary-threshold uniqueness is Theorem 9: require p_x≥α₂ and p_y≥β₂, where α₂ (resp. β₂) is the largest x<X with (x,Y)∈U (resp. largest y<Y with (X,y)∈U).

Maxima-local L-corner certificate.
- D′ (explicit consecutive-maxima L-corner). If M=Max(U)={m_i=(x_i,y_i)} with x_1<⋯<x_k and y_1>⋯>y_k and for some i there is no (x_i,y) with y_{i+1}<y<y_i and no (x,y_{i+1}) with x_i<x<x_{i+1}, then r_U(x_i,y_{i+1})=s_U(x_i,y_{i+1})=1 and color (2,x_i,y_{i+1}) is unique. This is a specialization of Theorem 7.

Extremal SW-max analysis blueprint (pivot-or-corner).
- Choose p∈Max(S) maximizing x and then y. By UM1, r_U(p),s_U(p)∈{0,1}, and all NE neighbors lie on the top row or right column.
  • Regime A: r_U(p)=s_U(p)=1 and p_x≥α₂, p_y≥β₂ ⇒ unique type 1 (Theorem 9).
  • Regime B: exactly one of r_U(p),s_U(p) equals 1. Try to promote a singleton+extension (Theorem 3) or apply R3/R4 to that row/column.
  • Regime C: r_U(p)=s_U(p)=0. Show the nearest top-row point right of p and nearest right-column point above p cannot both exist away from m; otherwise one can extract a robust L-corner (Theorem 7) at p. This will complete the unique-maximal case.

Toward a counting lemma for multiple maxima.
- The horizontal rays on rows y_{i+1} (counted by S_i) and vertical rays on columns x_i (counted by R_i) are anchored at disjoint rows/columns across i. If all R_i,S_i are large (≥2), then many rows/columns carry 
“extensions,” suggesting that a singleton+extension trigger (Theorem 3) or a robust L-corner (Theorem 7) must occur. Aim to formalize via a pigeonhole/counting argument over {y_{i+1}} and {x_i}.
Addenda: unique–maximal thresholds and crossing analysis

Definitions. Let U ⊆ [n]×[n] and assume U has a unique maximal element m = (X,Y) in the product order. Define
- T = { x < X : (x,Y) ∈ U } and, if T ≠ ∅, α₂ = max T.
- R = { y < Y : (X,y) ∈ U } and, if R ≠ ∅, β₂ = max R.
- S = { p ∈ U : p_x < X and p_y < Y }, and let Max(S) denote its product-order maximal elements.

Threshold-existence lemmas (for search reduction).
- Lemma UM–X (x-threshold). If S ≠ ∅ and T ≠ ∅, then either (i) column α₂ contains no point below Y, in which case Theorem 10 applies and yields a unique type-4 color, or (ii) there exists p ∈ Max(S) with p_x ≥ α₂.
  Proof. If column α₂ has no point below Y, we are in (i). Otherwise pick q = (α₂,β) with β < Y, so q ∈ S. In any finite poset, q is dominated by some p ∈ Max(S), hence p_x ≥ α₂.
- Lemma UM–Y (y-threshold). If S ≠ ∅ and R ≠ ∅, then either (i) row β₂ is a singleton {(X,β₂)} and Theorem 3 applies (unique type-3), or (ii) there exists q ∈ Max(S) with q_y ≥ β₂.
  Proof. If row β₂ is a singleton, we are in (i). Otherwise take r = (α,β₂) with α < X, so r ∈ S and is dominated by some q ∈ Max(S), whence q_y ≥ β₂.

Corollary (two-threshold reduction for unique–maximal). In the unique–maximal regime, unless a pivot is already available (Theorem 10 or the safe type-3 singleton-row trigger), we can locate p,q ∈ Max(S) meeting the x- and y-thresholds respectively (p_x ≥ α₂ and q_y ≥ β₂). If some s ∈ Max(S) meets both thresholds simultaneously, Theorem 9 yields a unique type-1 color. The only unresolved subcase is the crossing: x-threshold and y-threshold are met, but by different maxima.

Crossing-pair blueprint. List Max(S) as s_1, …, s_k with x increasing and y decreasing. Suppose indices f,g exist with x(s_f) ≥ α₂ and y(s_g) ≥ β₂ but no single s_i satisfies both. Then g ≥ f and, in fact, f > g. Consider the L-corner at (x(s_g), y(s_{g+1})).
- Vertical ray at x = x(s_g): let y_v be the minimum y ∈ (y(s_{g+1}), Y) with (x(s_g), y) ∈ U, if any (else the ray is clean).
- Horizontal ray at y = y(s_{g+1}): let x_h be the minimum x ∈ (x(s_g), X) with (x, y(s_{g+1})) ∈ U, if any (else the ray is clean).
Dichotomy to establish next: If both rays are clean up to their boundary supports, then Theorem 7 applies at (x(s_g), y(s_{g+1})) and yields a unique type-2 color. Otherwise, analyze the nearest interloper(s) at y_v and/or x_h; prove that at least one induces a safe unique color via either Theorem 3 (singleton+extension) or the global triggers R3/R4. This will complete the unique–maximal case.

Pattern library (robust L-corner in a 2+2(+…)).
- RL (two 2-point rows sharing a left endpoint with a clean column ⇒ unique type 2). If rows β₁ < β₂ have (α,β_i) and (γ_i,β_i) with α < γ_i (i=1,2), column α contains exactly (α,β₁),(α,β₂), and on the lower row β=β₁ there is exactly one point to the right of α (namely (γ₁,β)), then by Theorem 7 we have a unique (2,α,β).

Multiple maxima: counting lemma (work-in-progress). For M = Max(U) listed as m_i=(x_i,y_i) with x_1<…<x_k and y_1>…>y_k, define R_i and S_i as in Theorem 5. If no D′-witness exists for any i, then for each i at least one of R_i, S_i is ≥ 2. Since the rows {y_{i+1}} and columns {x_i} are disjoint across i, collect the “excess” contributors across all i and prove that some row/column must realize a singleton+extension (Theorem 3) or one of the global triggers R3/R4 (hence a unique type-3/4), or else a D′-witness appears, contradicting the assumption. Formalize an exact inequality to conclude.

Stress tests to design. “Staircase + boundary fillers” families where Max(U) is a long chain, and rows y_{i+1} and columns x_i have either clean rays or minimally dirty rays (single interloper). Use them to verify the nearest-interloper analysis and to calibrate when Theorem 7 vs. type-3/4 triggers apply.
Unique–maximal: new local triggers and the |Max(S)|=1 closure

Definitions recap (unique–maximal regime). Assume U has a unique maximal m=(X,Y) in the product order. Define
- T = { x<X : (x,Y)∈U }, α₂ = max T if T≠∅.
- R = { y<Y : (X,y)∈U }, β₂ = max R if R≠∅.
- S = { p∈U : p_x<X and p_y<Y }, and Max(S) its product-order maxima.

New local certificate at a SW-maximum (UM2′).
- Lemma (UM2′). If p=(α,β)∈Max(S) and both boundary-aligned points (α,Y) and (X,β) lie in U, then the color (2,α,β) is unique. Reason: By UM1, column α has no points in (β,Y) and row β has no points in (α,X). O1 forbids points beyond the boundary. Thus r_U(α,β)=s_U(α,β)=1, and Theorem 1 (type 2) yields uniqueness.

Closure when |Max(S)|=1 (UM-single).
- Theorem (UM-single). If S≠∅ and Max(S)={p=(α,β)}, then G[U] has a uniquely colored edge. Sketch (casework):
  • If T=R=∅, then by UM1 any NE neighbor of p lies on the boundary; since only m lies there, (1,α,β) is unique (type 1).
  • If T≠∅ and column α₂ has no point below Y, Theorem 10 gives a unique type 4.
  • If R≠∅ and row β₂ is a singleton {(X,β₂)}, Theorem 3 gives a unique type 3 (v_X(β₂)=1 holds automatically in this regime).
  • If T≠∅, R=∅ and column α₂ has some (α₂,β′) with β′<Y, then q=(α₂,β′)∈S and the uniqueness of the maximal element forces p≥q, hence p_x≥α₂. By UM1, all NE neighbors of p lie on the boundary; the right column contributes none (R=∅) and, among top-row points other than m, all have x≤α₂≤p_x, so none lies to the right of p. Thus m is p’s only NE neighbor and (1,α,β) is unique.
  • If T=∅, R≠∅ and row β₂ has some (α′,β₂) with α′<X, then similarly p_y≥β₂ and the only NE neighbor is m; (1,α,β) is unique.
  • If T,R≠∅ and both pivots fail, pick q₁=(α₂,β′) with β′<Y and q₂=(α′,β₂) with α′<X; then p≥q₁,q₂ so p_x≥α₂ and p_y≥β₂. Theorem 9 applies and (1,α,β) is unique.

Boundary-local type-2 triggers (first subrow/last left column).
- T2α. If T≠∅, column α₂ has some point below Y, and β_c=max{ y<Y : (α₂,y)∈U }, then whenever row β_c has exactly one point to the right of α₂ (i.e., h_{β_c}(α₂)=1), the color (2,α₂,β_c) is unique (r=1 via (α₂,Y), s=1 by hypothesis).
- T2β. If R≠∅, row β₂ has some point left of X, and α_r=max{ x<X : (x,β₂)∈U }, then whenever column α_r has exactly one point above β₂ (i.e., v_{α_r}(β₂)=1), the color (2,α_r,β₂) is unique (s=1 via (X,β₂), r=1 by hypothesis).

Pattern library (column-dual robust L-corner).
- RL′. If columns α<α′ have exactly (α,β),(α,β₁) with β<β₁ and (α′,β),(α′,β₂) with β<β₂, and row β contains exactly (α,β),(α′,β), then (2,α,β) is unique. This is a direct instance of Theorem 7.

Crossing subcase blueprint (|Max(S)|≥2; refined target for next round).
- List s_1,…,s_k=Max(S) with x increasing, y decreasing. If both T,R≠∅ and neither pivot fires, there exist indices f,g with x(s_f)≥α₂ and y(s_g)≥β₂ but no single s_i meets both (hence f>g). Consider the crossing corner c=(x(s_g), y(s_{g+1})).
  • If the open segments above/right of c are clean up to the boundary supports, Theorem 7 gives a unique type-2 at c.
  • Otherwise, let y_v be the least y>y(s_{g+1}) with (x(s_g),y)∈U, and x_h the least x>x(s_g) with (x,y(s_{g+1}))∈U. The next lemma to prove: at least one of these nearest interlopers can be converted into a safe uniqueness via Theorem 3 (singleton+extension) or the global R3/R4 triggers; failing that, both segments are clean and Theorem 7 fires. The disjointness of the rows {y(s_{i+1})} and columns {x(s_i)} across i will be the key to isolating a globally unique base.

Editorial note. In Theorem 11’s last paragraph, the phrase “v(β)=1” should read “T_3(β)=1” or “v_α(β)=1 for the unique contributing α”; this is purely notational.

=== output.md ===
Setup and notation
- U ⊆ [n]×[n]. For p=(x,y) and q=(x',y'), say q is NE of p if x'>x and y'>y, and q is SE of p if x'>x and y'<y. G[U] has an (undirected) edge for every unordered pair {p,q}⊆U, each labeled by one of four types and a color as follows:
  • Type 1 (NE–SW): if one endpoint is NE of the other. Color (1,α,β) with α = min{x,x'} and β = min{y,y'} (coordinates of the SW endpoint).
  • Type 2 (NW–SE): if one endpoint is NW of the other. Color (2,α,β) with α = min{x,x'} (the NW x) and β = min{y,y'} (the SE y).
  • Type 3 (vertical): if x=x'. Color (3,β) with β = min{y,y'} (the lower y).
  • Type 4 (horizontal): if y=y'. Color (4,α) with α = min{x,x'} (the left x).

Theorems currently established
1) Exact multiplicity formulas for types 1–4.
2) Single-line uniqueness: If U lies in a single row (resp. a single column) and has at least two points, then G[U] has a uniquely colored edge of type 4 (resp. type 3).
3) Singleton+extension triggers: A singleton row (resp. singleton column) with exactly one extension above (resp. to the right) forces a unique type-3 (resp. type-4) color.
4) Antichain ⇒ a unique type-2 color.
5) Consecutive-maxima clean gap ⇒ a unique type-2 color.
6) All three-point sets U admit a uniquely colored edge.
7) Robust L-corner uniqueness (type 2).
8) Row ∪ column support ⇒ a unique color.
9) Unique-maximal: SW-max with boundary thresholds ⇒ unique type 1.
10) Unique-maximal: top-row pivot ⇒ unique type 4.
11) Every four-point set admits a uniquely colored edge.

Proofs
Theorem 1 (Exact multiplicities).
- Type 1. Fix (α,β)∈[n]^2. An edge has color (1,α,β) iff its SW endpoint is (α,β), hence necessarily (α,β)∈U. Each NE neighbor q of (α,β) produces exactly one edge of that color, and distinct NE neighbors yield distinct edges. Conversely, any edge of that color arises this way. Therefore the multiplicity of (1,α,β) equals the number of NE neighbors of (α,β) in U.
- Type 2. Fix (α,β)∈[n]^2 and define r_U(α,β)=# { (α,y)∈U : y>β } and s_U(α,β)=# { (x,β)∈U : x>α }. Choosing any (α,y) with y>β and any (x,β) with x>α produces a NW–SE pair whose color is (2,α,β); distinct choices yield distinct edges of that color. Conversely, any edge of color (2,α,β) has its NW endpoint on the vertical ray { (α,y) : y>β } and its SE endpoint on the horizontal ray { (x,β) : x>α }. Hence the multiplicity is r_U(α,β)·s_U(α,β). In particular, uniqueness holds iff r_U(α,β)=s_U(α,β)=1.
- Type 3. Fix β. For each α with (α,β)∈U, the lower endpoint (α,β) connects vertically to each (α,y) with y>β, contributing v_α(β)=# { (α,y)∈U : y>β } edges of color (3,β). Summing over α gives the total multiplicity T_3(β)=∑_α 1_{(α,β)∈U}·v_α(β). Uniqueness holds iff exactly one α contributes and v_α(β)=1.
- Type 4. Fix α. For each β with (α,β)∈U, the left endpoint (α,β) connects horizontally to each (x,β) with x>α, contributing h_β(α)=# { (x,β)∈U : x>α } edges of color (4,α). Summing over β gives T_4(α)=∑_β 1_{(α,β)∈U}·h_β(α). Uniqueness holds iff exactly one β contributes and h_β(α)=1.

Theorem 2 (Single-line uniqueness).
- Row case. Suppose U⊆[n]×{y0} and |U|≥2. Let the distinct x-coordinates be x_1<⋯<x_m with m≥2. The only horizontal edges in G[U] are those between (x_i,y0) and (x_j,y0). The multiset of colors on these edges is { (4,x_1) repeated m−1 times, (4,x_2) repeated m−2 times, …, (4,x_{m−1}) once }. In particular, (4,x_{m−1}) occurs exactly once in G[U].
- Column case. The vertical analogue holds by symmetry: if U⊆{x0}×[n] with |U|≥2 and y_1<⋯<y_m, then (3,y_{m−1}) occurs exactly once.

Theorem 3 (Singleton+extension triggers).
- If a row β contains exactly one point (α,β)∈U and in column α there is exactly one point (α,y) with y>β, then by Theorem 1 (type 3) we have T_3(β)=1 and hence the color (3,β) is unique. The column/row dual gives the type-4 trigger.

Theorem 4 (Antichain ⇒ unique type 2).
- Assume U is an antichain (no two share a row or a column). List U as (x_1,y_1),…,(x_m,y_m) in increasing x, which forces y_1>y_2>⋯>y_m. For any i∈{1,…,m−1} consider (α,β)=(x_i,y_{i+1}). In column α there is exactly one point above β, namely (x_i,y_i); in row β there is exactly one point to the right of α, namely (x_{i+1},y_{i+1}). Thus r_U(α,β)=s_U(α,β)=1, and by Theorem 1 (type 2) the color (2,α,β) is unique.

Theorem 5 (Consecutive-maxima clean gap ⇒ unique type 2).
- Let M=Max(U) under the product order, listed as m_i=(x_i,y_i) with x_1<⋯<x_k and y_1>⋯>y_k (k≥2). For i∈{1,…,k−1} define R_i=# { (x_i,y)∈U : y>y_{i+1} } and S_i=# { (x,y_{i+1})∈U : x>x_i }. If R_i=S_i=1, then with (α,β)=(x_i,y_{i+1}) we have r_U(α,β)=R_i and s_U(α,β)=S_i, hence r_U·s_U=1 and color (2,α,β) is unique by Theorem 1 (type 2).

Theorem 6 (All three-point sets admit a uniquely colored edge).
- Let U have three distinct points.
  • If all three lie on a common row, with x_1<x_2<x_3, the three horizontal edges on that row have colors (4,x_1),(4,x_1),(4,x_2), so (4,x_2) is unique.
  • If all three lie on a common column, the vertical analogue yields a unique (3,y_2).
  • Otherwise, if some pair lies on a row (resp. column) but not all three do, the edge of that pair has a type-4 (resp. type-3) color that cannot be duplicated elsewhere in U because there is no second edge on that same row (resp. column).
  • Finally, if all x- and y-coordinates are distinct, order by x: p_1=(x_1,y_1),p_2=(x_2,y_2),p_3=(x_3,y_3).
    – If y_1<y_2<y_3, then p_2p_3 is type 1 with color (1,x_2,y_2) and is unique (its SW endpoint is p_2, which has exactly one NE neighbor, namely p_3).
    – If y_1>y_2>y_3, then p_2p_3 is type 2 with label (2,x_2,y_3) and is unique since r_U(x_2,y_3)=s_U(x_2,y_3)=1.
    – In each of the remaining permutations of (y_1,y_2,y_3), one of the consecutive pairs in x-order forms a type-2 edge (NW–SE) with exactly one point above the L-corner in its column and exactly one point to the right on its row, giving a unique type-2 color by Theorem 1 (type 2). Hence at least one unique color exists in all cases.

Theorem 7 (Robust L-corner uniqueness for type 2).
Let α<α′ and β<β′. Suppose (α,β′),(α′,β)∈U, and in column α there is exactly one point above β (namely (α,β′)), and in row β there is exactly one point to the right of α (namely (α′,β)). Then the color (2,α,β) occurs exactly once in G[U].
Proof. By Theorem 1 (type 2), r_U(α,β)=1 and s_U(α,β)=1, hence the multiplicity r_U·s_U=1.

Theorem 8 (Row ∪ column support ⇒ a unique color).
Assume U⊆({x=X}×[n]) ∪ ([n]×{y=Y}) and |U|≥2. Then G[U] has a uniquely colored edge.
Proof. If U⊆{x=X}×[n] or U⊆[n]×{y=Y}, Theorem 2 applies. Otherwise U meets both the row and the column. If |U∩([n]×{Y})|≥2, list its x-coordinates x_1<⋯<x_m and set α=x_{m−1}. Since α≠X and U⊆(column X)∪(row Y), the only β with (α,β)∈U is β=Y. On row Y, h_Y(α)=1. Hence T_4(α)=1 by Theorem 1 (type 4). If instead |U∩({X}×[n])|≥2, the vertical analogue yields a unique type-3 color.

Theorem 9 (Unique-maximal: SW-max with boundary thresholds ⇒ unique type 1).
Suppose U has a unique maximal element m=(X,Y) in the product order. Let T={x<X : (x,Y)∈U} and R={y<Y : (X,y)∈U}, with α₂=max T if T≠∅ (and α₂=−∞ otherwise), and β₂=max R if R≠∅ (and β₂=−∞ otherwise). Let S={p∈U : p_x<X and p_y<Y}. If S≠∅ and there exists p∈Max(S) (for the product order) with p_x≥α₂ and p_y≥β₂, then the color (1,p_x,p_y) is unique.
Proof. Any NE neighbor q of p with q_x<X and q_y<Y would satisfy q≻p and lie in S, contradicting p∈Max(S). Thus every NE neighbor of p lies on row Y or column X. Because p_x≥α₂, there is no (x,Y)∈U with p_x<x<X, and because p_y≥β₂, there is no (X,y)∈U with p_y<y<Y. Hence the only possible NE neighbor is m. By Theorem 1 (type 1), the multiplicity of (1,p_x,p_y) equals the number of NE neighbors of p, namely 1.

Theorem 10 (Unique-maximal: top-row pivot ⇒ unique type 4).
In the setting of Theorem 9, if T≠∅ and the column α₂ contains no point below Y, then the color (4,α₂) occurs exactly once in G[U].
Proof. On row Y, the point (α₂,Y) has exactly one right neighbor, (X,Y), so h_Y(α₂)=1. For β≠Y there is no (α₂,β)∈U by hypothesis, and there are no β>Y in U when m is the unique maximal. Therefore T_4(α₂)=h_Y(α₂)=1 by Theorem 1 (type 4).

Theorem 11 (Every four-point set admits a uniquely colored edge).
If |U|=4, then G[U] has a uniquely colored edge.
Proof. If some row has ≥3 points, list the x-coordinates on that row as x_1<⋯<x_k with k≥3. The rightmost edge on that row has color (4,x_{k−1}). To realize (4,x_{k−1}) elsewhere would require a different row containing both (x_{k−1},·) and a point with x>x_{k−1}, which is impossible with only one point off the given row. Thus (4,x_{k−1}) is unique. If some column has ≥3 points, the vertical analogue (type 3) applies.
Otherwise, every row and every column has ≤2 points. If there is a row with exactly two points, let its smaller x be α. If no other row contains both (α,·) and a point to its right, then by Theorem 1 (type 4) we have T_4(α)=1. Otherwise there exists a second row with exactly two points and the same left endpoint α. Let β be the lower of the two y-values in column α. Then on row β there is exactly one point to the right of α, and in column α there is exactly one point above β. By Theorem 7 (robust L-corner), r_U(α,β)=s_U(α,β)=1 and the color (2,α,β) is unique.
Finally, if no row has two points, then each row has exactly one point. If some column has two points, let β be the lower y on that column; at row β only that column contributes and v(β)=1, so T_3(β)=1. If no column has two points either, U is an antichain, and Theorem 4 gives a unique type-2 color. In all cases a unique color exists.
Auxiliary lemmas (supporting Theorems 9–11 and later triggers)

Lemma O1 (unique maximal ⇒ coordinatewise maxima).
Statement. If U has a unique maximal element m=(X,Y) in the product order, then X = max{ x : (x,·) ∈ U } and Y = max{ y : (·,y) ∈ U }.
Proof. Suppose some u=(x′,y′) ∈ U has x′ > X. In any finite poset, u is dominated by some maximal element m′ (i.e., m′ ≥ u coordinatewise). Then m′_x ≥ x′ > X, so m′ ≠ m, contradicting uniqueness. The case y′ > Y is symmetric. Therefore no point of U has x > X or y > Y, proving the claim.

Lemma UM1 (SW-maxima have only boundary NE neighbors).
Setup. Assume U has a unique maximal m=(X,Y). Let S={ p ∈ U : p_x < X and p_y < Y } and Max(S) its product-order maximal elements.
Statement. If p=(α,β) ∈ Max(S), then: (i) there is no q ∈ U with x=α and β < y < Y; (ii) there is no q ∈ U with y=β and α < x < X. Consequently, every NE neighbor of p lies on the top row y=Y or the right column x=X.
Proof. If q=(α,y) with β<y<Y existed, then q ∈ S and q ≻ p, contradicting p ∈ Max(S). The horizontal case is analogous. The consequence follows immediately.

Corollary R4 (row-of-two with globally unique left endpoint ⇒ unique type 4).
Statement. Suppose there exists a row β with exactly two points (α,β),(α′,β) ∈ U with α<α′. Assume furthermore that for every β′ ≠ β either (α,β′) ∉ U or there is no point (x,β′) with x>α. Then the color (4,α) appears exactly once in G[U].
Proof. By the type-4 multiplicity formula, T_4(α)=∑_{β''} 1_{(α,β'')∈U} · h_{β''}(α). By hypothesis, only β contributes (since (α,β'')∉U for β''≠β or h_{β''}(α)=0 there), and on row β we have h_β(α)=1 (exactly one right neighbor at α′). Hence T_4(α)=1 and (4,α) is unique.

Corollary R3 (column-of-two with globally unique lower endpoint ⇒ unique type 3).
Statement. Suppose there exists a column α with exactly two points (α,β),(α,β′) ∈ U with β<β′. Assume furthermore that for every α′ ≠ α either (α′,β) ∉ U or there is no point (α′,y) with y>β. Then the color (3,β) appears exactly once in G[U].
Proof. By the type-3 multiplicity formula, T_3(β)=∑_{α''} 1_{(α'',β)∈U} · v_{α''}(β). By hypothesis, only α contributes (since (α'',β)∉U for α''≠α or v_{α''}(β)=0 there), and in column α we have v_α(β)=1 (exactly one point above at β′). Hence T_3(β)=1 and (3,β) is unique.
Theorems currently established (continued)
12) Unique–maximal: SW–maximum with both boundary contacts ⇒ unique type 2.
13) Unique–maximal with a single SW–maximum ⇒ some unique color exists.
14) Unique–maximal: boundary-local type-2 triggers at α₂ and β₂.

Proofs (additions)

Theorem 12 (Unique–maximal: SW–maximum with both boundary contacts ⇒ unique type 2).
Assume U has a unique maximal element m=(X,Y). Let S={ p∈U : p_x<X and p_y<Y }, and let p=(α,β)∈Max(S). Suppose (α,Y)∈U and (X,β)∈U. By Lemma UM1, there is no point of U on the open vertical segment { (α,y) : β<y<Y } and no point on the open horizontal segment { (x,β) : α<x<X }. By Lemma O1 there are no points with y>Y or x>X. Hence r_U(α,β)=1 and s_U(α,β)=1. By Theorem 1 (type 2), the color (2,α,β) occurs exactly once in G[U].

Theorem 13 (Unique–maximal with a single SW–maximum ⇒ a unique color exists).
Assume U has a unique maximal m=(X,Y). Let S={ p∈U : p_x<X and p_y<Y } and suppose S≠∅ but Max(S)={p=(α,β)}.
Define T={ x<X : (x,Y)∈U } and, if T≠∅, α₂=max T. Define R={ y<Y : (X,y)∈U } and, if R≠∅, β₂=max R. We consider cases.
- Case 1: T=∅ and R=∅. By Lemma UM1, any NE neighbor of p lies on the top row or right column; since m is the only point on either, m is the unique NE neighbor. By Theorem 1 (type 1), (1,α,β) has multiplicity 1.
- Case 2: T≠∅ and column α₂ contains no point below Y. Then on row Y, h_Y(α₂)=1 and, by the definition of α₂ and Lemma O1, no other row contributes to T_4(α₂). Theorem 10 applies: (4,α₂) is unique.
- Case 3: R≠∅ and row β₂ is a singleton {(X,β₂)}. In column X there is exactly one point above β₂, namely m, by the definition of β₂ and Lemma O1. By Theorem 3, (3,β₂) is unique.
- Case 4: T≠∅, column α₂ contains some (α₂,β′) with β′<Y, and R=∅. Then q=(α₂,β′)∈S. Since p is the unique maximal of S, we have p≥q, hence p_x≥α₂. By Lemma UM1, any NE neighbor of p lies on the top row or the right column. The right column contributes none (R=∅). Among top-row points other than m, all have x≤α₂≤p_x and thus are not to the right of p. Therefore m is p’s only NE neighbor, and by Theorem 1 (type 1) the color (1,α,β) is unique.
- Case 5: R≠∅, row β₂ contains some (α′,β₂) with α′<X, and T=∅. Then r=(α′,β₂)∈S and p≥r gives p_y≥β₂. By Lemma UM1, all NE neighbors of p lie on the top row or right column. The top row contributes none (T=∅). On the right column, by the definition of β₂ and Lemma O1 there is no point strictly above p_y other than m. Hence m is the only NE neighbor and (1,α,β) is unique.
- Case 6: T≠∅ and R≠∅, with column α₂ containing some (α₂,β′) with β′<Y and row β₂ containing some (α′,β₂) with α′<X (i.e., both pivots fail). Then p≥(α₂,β′) and p≥(α′,β₂), so p_x≥α₂ and p_y≥β₂. Theorem 9 applies: p has exactly one NE neighbor (m), hence (1,α,β) is unique.
These cases are exhaustive; in all cases a uniquely colored edge exists.

Lemma 14 (Boundary-local type-2 triggers at α₂ and β₂).
Assume U has a unique maximal m=(X,Y).
(a) Suppose T≠∅ and column α₂ contains at least one point below Y. Let β_c=max{ y<Y : (α₂,y)∈U }. If row β_c has exactly one point to the right of α₂ (i.e., h_{β_c}(α₂)=1), then the color (2,α₂,β_c) is unique.
Proof. In column α₂ the only point above β_c is (α₂,Y) by the choice of β_c and Lemma O1, so r_U(α₂,β_c)=1. By hypothesis s_U(α₂,β_c)=h_{β_c}(α₂)=1. By Theorem 1 (type 2), (2,α₂,β_c) has multiplicity 1.
(b) Suppose R≠∅ and row β₂ contains at least one point left of X. Let α_r=max{ x<X : (x,β₂)∈U }. If column α_r has exactly one point above β₂ (i.e., v_{α_r}(β₂)=1), then the color (2,α_r,β₂) is unique.
Proof. On row β₂ the only point to the right of α_r is (X,β₂) by the choice of α_r and Lemma O1, so s_U(α_r,β₂)=1. By hypothesis r_U(α_r,β₂)=v_{α_r}(β₂)=1. Theorem 1 (type 2) yields uniqueness.

Remarks. Lemma 14(a,b) are boundary-anchored instances of Theorem 7 (robust L-corner), specialized to the first subrow below (α₂,Y) and the last left column before (X,β₂), respectively. They are particularly effective when the primary pivots (Theorems 10 and 3) fail but these first substructures are minimally “clean.”

=== round-0008/verifier.feedback.md ===
Summary and audit
- Both provers focused on the unique–maximal regime and proposed short, local uniqueness certificates that dovetail with the existing pivot-or-corner framework. I checked each new claim against the multiplicity formulas (Theorem 1), O1 (coordinatewise maxima), and UM1 (NE neighbors of SW-maxima lie on the boundary). The statements UM2′ (boundary contacts at a SW-max ⇒ unique type 2), UM-single (|Max(S)|=1 ⇒ a unique color), and T2α/T2β (boundary-local type-2 triggers) are correct as stated and can be curated. They are nontrivial and useful.
- Minor phrasing issue in UM-single, Case D/E: the sentence about “every top-row point obeys x ≤ α₂ ≤ p_x” should be read as applying to top-row points other than m; m is allowed and is indeed the unique NE neighbor there. This does not affect correctness; I have rewritten the proof to avoid relying on UM–X/UM–Y and to be completely self-contained.
- The T2α/T2β lemmas are immediate consequences of the type-2 formula. They can be seen as boundary-anchored instances of Theorem 7 (robust L-corner). They are accurate and safe. The example for T2β in the report informally invoked O1 to suggest (5,8) “must be present,” but the lemma itself already assumes v_{α_r}(β₂)=1, so the example is fine once we explicitly posit (5,8) ∈ U.
- Optional RL′ (column-dual of the two-rows RL pattern) is also a direct instance of Theorem 7; I keep it in notes as pattern stock rather than elevating it to output.

Curation decisions
- I have appended to output.md: (i) Theorem 12 (UM2′), (ii) Theorem 13 (UM-single, with a self-contained proof), and (iii) Lemma 14 (T2α/T2β boundary-local type-2 triggers). All rely only on Theorems 1,3,7,9,10 and Lemmas O1, UM1 that are already curated.
- No other changes to previously curated material were needed.

Promising directions and concrete next steps
1) Finish the unique–maximal case for |Max(S)| ≥ 2 via the “crossing-pair” analysis: index the SW-maxima s_1,…,s_k (x increasing, y decreasing), choose f,g with x(s_f) ≥ α₂ and y(s_g) ≥ β₂ but no single s_i meeting both; set the crossing corner c=(x(s_g), y(s_{g+1})). Prove a nearest-interloper lemma: if both the vertical segment above c and the horizontal segment to the right of c are populated, then at least one nearest interloper yields a unique color via either (a) a robust L-corner (Theorem 7) at c or a nearby corner, or (b) a singleton+extension trigger (Theorem 3), or (c) an R3/R4 global row/column-of-two trigger. Otherwise the corner is clean and Theorem 7 applies directly.
2) When both local counts at α₂ and β₂ are ≥2 (h_{β_c}(α₂) ≥ 2 and v_{α_r}(β₂) ≥ 2), implement the minimality choices β_c and α_r, and prove that all potential extra contributors for T_3/T_4 live on disjoint rows/columns across consecutive maxima, letting you isolate a globally unique base (R3/R4). This is the key technical closure.
3) Expand Theorem 6’s last subcase (permutation analysis) with an explicit identification of the consecutive x-order pair producing r=s=1, removing any terseness.
4) Stress-test on staircase-with-boundary-fillers families to calibrate the nearest-interloper lemma and ensure all branches (Theorem 7 vs. 3 vs. R3/R4) are covered without overlap or gaps.

Net assessment
- We now have robust, local type-2 certificates at boundary-aligned positions and a full resolution of the unique–maximal regime when |Max(S)|=1. The remaining open work is the |Max(S)|≥2 crossing subcase; the blueprint and the exact minimality choices are in notes for the next round.

=== notes.md ===
Setup and terminology.
- U ⊆ [n]×[n]. For p=(x,y) and q=(x',y'), say q is NE of p if x'>x and y'>y, and q is SE of p if x'>x and y'<y. Let G[U] be the graph on vertex set U with one edge for every unordered pair {p,q}. Each edge receives one of four types:
  • Type 1 (NE–SW): endpoints differ in both coordinates and one is NE of the other. The color label is (1,α,β) with α = min{x,x'} and β = min{y,y'}; equivalently the SW endpoint’s coordinates.
  • Type 2 (NW–SE): endpoints differ in both coordinates and one is NW of the other. The color label is (2,α,β) with α = min{x,x'} (the NW x) and β = min{y,y'} (the SE y).
  • Type 3 (vertical): same x; the color label is (3,β) where β = min{y,y'} (the lower y).
  • Type 4 (horizontal): same y; the color label is (4,α) where α = min{x,x'} (the left x).

Exact multiplicities (global; now established).
- Type 1: For (α,β)∈U, the multiplicity of color (1,α,β) equals the number of NE neighbors of (α,β) in U. No edge receives label (1,α,β) unless (α,β)∈U.
- Type 2: For any (α,β)∈[n]^2, set r_U(α,β)=# { (α,y)∈U : y>β } and s_U(α,β)=# { (x,β)∈U : x>α }. Then the multiplicity of color (2,α,β) equals r_U(α,β)·s_U(α,β). In particular it is unique iff r_U(α,β)=s_U(α,β)=1.
- Type 3: For any β, the multiplicity of (3,β) equals T_3(β)=∑_α 1_{(α,β)∈U} · # { (α,y)∈U : y>β }. It is unique iff exactly one α contributes and contributes 1.
- Type 4: For any α, the multiplicity of (4,α) equals T_4(α)=∑_β 1_{(α,β)∈U} · # { (x,β)∈U : x>α }. It is unique iff exactly one β contributes and contributes 1.

Safe uniqueness triggers (now established).
- Single-line uniqueness: If U⊆[n]×{y0} with |U|≥2, list its x-coordinates x_1<⋯<x_m. Then the edge between (x_{m−1},y0) and (x_m,y0) is the only edge in G[U] colored (4,x_{m−1}). Dually, if U⊆{x0}×[n] with |U|≥2, then the edge between (x0,y_{m−1}) and (x0,y_m) is the only edge colored (3,y_{m−1}).
- Singleton+extension uniqueness (global): If a row β contains exactly one vertex (α,β) and in column α there is exactly one vertex above it, then (3,β) is unique. Dually, if a column α contains exactly one vertex (α,β) and in row β there is exactly one vertex to its right, then (4,α) is unique. These follow immediately from the type-3/4 formulas.
- Antichain ⇒ unique type 2: If U is an antichain (no two share a row or a column), then ordering its points by increasing x (hence decreasing y), any consecutive pair (x_i,y_i),(x_{i+1},y_{i+1}) yields r_U(x_i,y_{i+1})=s_U(x_i,y_{i+1})=1, hence (2,x_i,y_{i+1}) is unique.
- Clean gap between consecutive maxima: Let M=Max(U) in the product order, list M as (x_1,y_1),…,(x_k,y_k) with x_1<⋯<x_k and y_1>⋯>y_k. For i∈{1,…,k−1} set R_i=# { (x_i,y)∈U : y>y_{i+1} } and S_i=# { (x,y_{i+1})∈U : x>x_i }. If R_i=S_i=1, then the color (2,x_i,y_{i+1}) is unique.
- 2×2 rectangle with clean margins: If U contains the four corners of {(x_1,y_1),(x_1,y_2),(x_2,y_1),(x_2,y_2)} with x_1<x_2, y_1<y_2 and has no other point in column x_1 above y_1 and no other point in row y_1 to the right of x_1, then (2,x_1,y_1) is unique.
- All three-point sets: If |U|=3, then G[U] has a uniquely colored edge. (Full case analysis is recorded in output.)

Corrections and counterexamples.
- “Three or more on a row/column ⇒ unique type 4/3” is false without further global conditions. Counterexample: U = {(1,1),(2,1),(3,1),(2,2),(4,2)}. On row y=1 we get a single occurrence of (4,2) within that row, but globally (4,2) occurs again on row y=2 (edge (2,2)–(4,2)). One must apply the global T_4(α) formula across all rows.
- Gap in “unique maximal ⇒ unique color” (as previously sketched). The subcase S≠∅ must rule out extra NE neighbors lying on the top row or rightmost column. Example showing the gap: U = {(3,3),(4,5),(5,5)}. Here p=(3,3) has two NE neighbors (4,5) and (5,5). A correct proof should either find a different witness (types 3/4 via T_3/T_4) or choose p to avoid such extra NE neighbors. This remains an open item to be fixed.

Open directions.
1) Complete the unique-maximal case rigorously, as outlined above (identify conditions under which T_3/T_4 already gives uniqueness; otherwise find p∈S with unique NE neighbor).
2) For |Max(U)|≥2, either certify a clean gap (R_i=S_i=1) for some consecutive pair, or force a type-3/4 trigger (singleton+extension) or a unique type-1 via a minimality argument on the “extra” points counted by R_i−1 and S_i−1.
3) Extend the small-case verification from |U|=3 to |U|=4 to stress-test the dichotomies and expose the right minimality invariants.
New curated results and corrections (this round)

1) Robust L-corner uniqueness (type 2)
If there exist α<α′ and β<β′ with (α,β′),(α′,β)∈U and, moreover, (i) (α,β) has exactly one point above it in its column (namely (α,β′)) and (ii) exactly one point to its right in its row (namely (α′,β)), then by the type-2 multiplicity formula r_U(α,β)=s_U(α,β)=1 and so the color (2,α,β) is unique. This generalizes the previously noted “2×2 rectangle with clean margins” by not requiring the NE corner (α′,β′) to be present.

2) Cross-shape (row ∪ column) support ⇒ unique color
If U is contained in the union of a single row Y and a single column X and |U|≥2, then G[U] has a uniquely colored edge. Proof: if |U∩row Y|≥2, let α be the second-largest x on that row. Since α≠X, the only row containing (α,·) inside U is Y, and on that row h_Y(α)=1. Thus T_4(α)=1 (unique type 4). Otherwise |U∩column X|≥2 and the vertical analogue gives a unique type 3.

3) Unique-maximal triggers
Let U have a unique maximal m=(X,Y) in the product order. Then X and Y are the global maxima of the used x- and y-coordinates. Define T={x<X : (x,Y)∈U} with α₂=max T (if T≠∅) and R={y<Y : (X,y)∈U} with β₂=max R (if R≠∅). Let S={p∈U : p_x<X and p_y<Y} and let Max(S) denote the set of product-maximal elements of S.
- H′ (SW-max + boundary thresholds ⇒ unique type 1). If S≠∅ and there exists p∈Max(S) with p_x≥α₂ and p_y≥β₂, then p has exactly one NE neighbor in U (namely m), hence the color (1,p_x,p_y) is unique.
- K (top-row pivot ⇒ unique type 4). If T≠∅ and the column α₂ contains no point below Y, then T_4(α₂)=1, realized by the top-row edge between (α₂,Y) and m.
Remark: The column-dual must be formulated with care (see below) to avoid extra contributors in T_3(β₂).

Corrections to proposed lemmas
- The proposed Lemma J (empty L-corner ⇒ unique type 2) was too weak: forbidding points only in the open segments (β,β′) and (α,α′) does not preclude additional points above β′ or to the right of α′. A correct sufficient condition is exactly r_U(α,β)=s_U(α,β)=1 (see robust L-corner above). Counterexample to the weak form: U={(1,2),(3,1),(1,5),(5,1)} satisfies the stated emptiness on (1, y∈(1,2)) and (x∈(1,3),1) but yields multiplicity 4 for color (2,1,1).
- The proposed Lemma K′ (right-column pivot ⇒ unique type 3) as stated omitted the requirement that no other columns contribute to T_3(β₂). A safe version is the singleton+extension trigger: if row β₂ is a singleton (only (X,β₂)) and column X has exactly one point above β₂ (necessarily m in the unique-maximal regime), then T_3(β₂)=1. Counterexample to the weak form: U={(5,5),(5,2),(1,2),(1,4)} makes T_3(2)=2.
- The proposed Lemma L (top/right extremality of consecutive maxima ⇒ unique type 2) is false without excluding intermediate points in column x_i above y_{i+1} (or in row y_{i+1} to the right of x_i). Counterexample: U={(2,5),(5,2),(2,4)} satisfies “m_i topmost” and “m_{i+1} rightmost,” yet r_U(2,2)=2.

Four-point sets (|U|=4)
The claim that every 4-point configuration admits a uniquely colored edge is true; a corrected complete proof is added to output.md. The flawed claim “if no row has 2 points, then no column has 2 points” is refuted by U={(1,1),(1,3),(2,2),(2,4)}. The corrected proof handles all row/column occupancy patterns (4), (3+1), (2+2), (2+1+1), and (1+1+1+1), using type-3/4 triggers or the antichain lemma.

Roadmap for the unique-maximal case
- S=∅ is settled by the cross-shape lemma.
- For S≠∅, aim for a trichotomy: H′ or K (or the safe column-dual) or a robust L-corner (D′) must fire. A workable extremal choice is p∈Max(S) with maximal x and, among those, maximal y; analyze its nearest boundary neighbors and the emptiness of the two open segments above/right of p. If both segments are populated, try to extract a singleton+extension on the boundary or an L-corner between consecutive top-row/right-column supports.
Erratum to Theorem 11 (|U|=4) and fix.
- The original subcase “two distinct rows each have exactly two points and share the same left endpoint α ⇒ T_3(β)=1 for the lower β” was incorrect. Counterexample: the 2×2 rectangle U={(1,1),(1,2),(2,1),(2,2)} has two columns contributing to T_3(1).
- Correct resolution: In that subcase, let β be the lower y among the two points in column α. Then row β has exactly two points (α,β),(γ,β) (so s_U(α,β)=1), and column α has exactly one point above β (namely at the higher row, so r_U(α,β)=1). By Theorem 7 (robust L-corner), (2,α,β) is unique. This uniform fix also covers the rectangle case.

Safe global triggers (recorded for use).
- R4 (row-of-two with globally unique left endpoint ⇒ unique type 4). Suppose some row β has exactly two points (α,β),(α′,β) with α<α′, and for every other row β′ either (α,β′)∉U or there is no point (x,β′) with x>α. Then T_4(α)=1, hence there is a unique color (4,α). Proof: From the type-4 formula, only row β contributes and contributes 1.
- R3 (column-of-two with globally unique lower endpoint ⇒ unique type 3). Suppose some column α has exactly two points (α,β)<(α,β′) with β<β′, and for every other column α′ either (α′,β)∉U or there is no point (α′,y) with y>β. Then T_3(β)=1, hence there is a unique color (3,β). Proof: From the type-3 formula, only column α contributes and contributes 1.

Unique-maximal structure (replace R1 by UM1).
- Setup: U has a unique maximal m=(X,Y). Let S={p∈U: p_x<X and p_y<Y} and Max(S) be its product-order maxima.
- UM1 (boundary-only NE neighbors for SW-maxima). For any p=(α,β)∈Max(S): (i) there is no q∈U with x=α and β<y<Y; (ii) there is no q∈U with y=β and α<x<X. Consequently, any NE neighbor of p lies on the top row y=Y or the right column x=X. Proof: If such a q existed in (i) or (ii), then q∈S and q≻p, contradicting p∈Max(S).
- Caution: The statement “If exactly one of (α,Y) and (X,β) lies in U, then p has exactly one NE neighbor” is false without further constraints. Counterexample: m=(5,5), p=(2,2)∈Max(S), and top-row points (3,5),(4,5) present while (2,5),(5,2) are absent. Then p has multiple NE neighbors. The correct boundary-threshold uniqueness is Theorem 9: require p_x≥α₂ and p_y≥β₂, where α₂ (resp. β₂) is the largest x<X with (x,Y)∈U (resp. largest y<Y with (X,y)∈U).

Maxima-local L-corner certificate.
- D′ (explicit consecutive-maxima L-corner). If M=Max(U)={m_i=(x_i,y_i)} with x_1<⋯<x_k and y_1>⋯>y_k and for some i there is no (x_i,y) with y_{i+1}<y<y_i and no (x,y_{i+1}) with x_i<x<x_{i+1}, then r_U(x_i,y_{i+1})=s_U(x_i,y_{i+1})=1 and color (2,x_i,y_{i+1}) is unique. This is a specialization of Theorem 7.

Extremal SW-max analysis blueprint (pivot-or-corner).
- Choose p∈Max(S) maximizing x and then y. By UM1, r_U(p),s_U(p)∈{0,1}, and all NE neighbors lie on the top row or right column.
  • Regime A: r_U(p)=s_U(p)=1 and p_x≥α₂, p_y≥β₂ ⇒ unique type 1 (Theorem 9).
  • Regime B: exactly one of r_U(p),s_U(p) equals 1. Try to promote a singleton+extension (Theorem 3) or apply R3/R4 to that row/column.
  • Regime C: r_U(p)=s_U(p)=0. Show the nearest top-row point right of p and nearest right-column point above p cannot both exist away from m; otherwise one can extract a robust L-corner (Theorem 7) at p. This will complete the unique-maximal case.

Toward a counting lemma for multiple maxima.
- The horizontal rays on rows y_{i+1} (counted by S_i) and vertical rays on columns x_i (counted by R_i) are anchored at disjoint rows/columns across i. If all R_i,S_i are large (≥2), then many rows/columns carry 
“extensions,” suggesting that a singleton+extension trigger (Theorem 3) or a robust L-corner (Theorem 7) must occur. Aim to formalize via a pigeonhole/counting argument over {y_{i+1}} and {x_i}.
Addenda: unique–maximal thresholds and crossing analysis

Definitions. Let U ⊆ [n]×[n] and assume U has a unique maximal element m = (X,Y) in the product order. Define
- T = { x < X : (x,Y) ∈ U } and, if T ≠ ∅, α₂ = max T.
- R = { y < Y : (X,y) ∈ U } and, if R ≠ ∅, β₂ = max R.
- S = { p ∈ U : p_x < X and p_y < Y }, and let Max(S) denote its product-order maximal elements.

Threshold-existence lemmas (for search reduction).
- Lemma UM–X (x-threshold). If S ≠ ∅ and T ≠ ∅, then either (i) column α₂ contains no point below Y, in which case Theorem 10 applies and yields a unique type-4 color, or (ii) there exists p ∈ Max(S) with p_x ≥ α₂.
  Proof. If column α₂ has no point below Y, we are in (i). Otherwise pick q = (α₂,β) with β < Y, so q ∈ S. In any finite poset, q is dominated by some p ∈ Max(S), hence p_x ≥ α₂.
- Lemma UM–Y (y-threshold). If S ≠ ∅ and R ≠ ∅, then either (i) row β₂ is a singleton {(X,β₂)} and Theorem 3 applies (unique type-3), or (ii) there exists q ∈ Max(S) with q_y ≥ β₂.
  Proof. If row β₂ is a singleton, we are in (i). Otherwise take r = (α,β₂) with α < X, so r ∈ S and is dominated by some q ∈ Max(S), whence q_y ≥ β₂.

Corollary (two-threshold reduction for unique–maximal). In the unique–maximal regime, unless a pivot is already available (Theorem 10 or the safe type-3 singleton-row trigger), we can locate p,q ∈ Max(S) meeting the x- and y-thresholds respectively (p_x ≥ α₂ and q_y ≥ β₂). If some s ∈ Max(S) meets both thresholds simultaneously, Theorem 9 yields a unique type-1 color. The only unresolved subcase is the crossing: x-threshold and y-threshold are met, but by different maxima.

Crossing-pair blueprint. List Max(S) as s_1, …, s_k with x increasing and y decreasing. Suppose indices f,g exist with x(s_f) ≥ α₂ and y(s_g) ≥ β₂ but no single s_i satisfies both. Then g ≥ f and, in fact, f > g. Consider the L-corner at (x(s_g), y(s_{g+1})).
- Vertical ray at x = x(s_g): let y_v be the minimum y ∈ (y(s_{g+1}), Y) with (x(s_g), y) ∈ U, if any (else the ray is clean).
- Horizontal ray at y = y(s_{g+1}): let x_h be the minimum x ∈ (x(s_g), X) with (x, y(s_{g+1})) ∈ U, if any (else the ray is clean).
Dichotomy to establish next: If both rays are clean up to their boundary supports, then Theorem 7 applies at (x(s_g), y(s_{g+1})) and yields a unique type-2 color. Otherwise, analyze the nearest interloper(s) at y_v and/or x_h; prove that at least one induces a safe unique color via either Theorem 3 (singleton+extension) or the global triggers R3/R4. This will complete the unique–maximal case.

Pattern library (robust L-corner in a 2+2(+…)).
- RL (two 2-point rows sharing a left endpoint with a clean column ⇒ unique type 2). If rows β₁ < β₂ have (α,β_i) and (γ_i,β_i) with α < γ_i (i=1,2), column α contains exactly (α,β₁),(α,β₂), and on the lower row β=β₁ there is exactly one point to the right of α (namely (γ₁,β)), then by Theorem 7 we have a unique (2,α,β).

Multiple maxima: counting lemma (work-in-progress). For M = Max(U) listed as m_i=(x_i,y_i) with x_1<…<x_k and y_1>…>y_k, define R_i and S_i as in Theorem 5. If no D′-witness exists for any i, then for each i at least one of R_i, S_i is ≥ 2. Since the rows {y_{i+1}} and columns {x_i} are disjoint across i, collect the “excess” contributors across all i and prove that some row/column must realize a singleton+extension (Theorem 3) or one of the global triggers R3/R4 (hence a unique type-3/4), or else a D′-witness appears, contradicting the assumption. Formalize an exact inequality to conclude.

Stress tests to design. “Staircase + boundary fillers” families where Max(U) is a long chain, and rows y_{i+1} and columns x_i have either clean rays or minimally dirty rays (single interloper). Use them to verify the nearest-interloper analysis and to calibrate when Theorem 7 vs. type-3/4 triggers apply.
Unique–maximal: new local triggers and the |Max(S)|=1 closure

Definitions recap (unique–maximal regime). Assume U has a unique maximal m=(X,Y) in the product order. Define
- T = { x<X : (x,Y)∈U }, α₂ = max T if T≠∅.
- R = { y<Y : (X,y)∈U }, β₂ = max R if R≠∅.
- S = { p∈U : p_x<X and p_y<Y }, and Max(S) its product-order maxima.

New local certificate at a SW-maximum (UM2′).
- Lemma (UM2′). If p=(α,β)∈Max(S) and both boundary-aligned points (α,Y) and (X,β) lie in U, then the color (2,α,β) is unique. Reason: By UM1, column α has no points in (β,Y) and row β has no points in (α,X). O1 forbids points beyond the boundary. Thus r_U(α,β)=s_U(α,β)=1, and Theorem 1 (type 2) yields uniqueness.

Closure when |Max(S)|=1 (UM-single).
- Theorem (UM-single). If S≠∅ and Max(S)={p=(α,β)}, then G[U] has a uniquely colored edge. Sketch (casework):
  • If T=R=∅, then by UM1 any NE neighbor of p lies on the boundary; since only m lies there, (1,α,β) is unique (type 1).
  • If T≠∅ and column α₂ has no point below Y, Theorem 10 gives a unique type 4.
  • If R≠∅ and row β₂ is a singleton {(X,β₂)}, Theorem 3 gives a unique type 3 (v_X(β₂)=1 holds automatically in this regime).
  • If T≠∅, R=∅ and column α₂ has some (α₂,β′) with β′<Y, then q=(α₂,β′)∈S and the uniqueness of the maximal element forces p≥q, hence p_x≥α₂. By UM1, all NE neighbors of p lie on the boundary; the right column contributes none (R=∅) and, among top-row points other than m, all have x≤α₂≤p_x, so none lies to the right of p. Thus m is p’s only NE neighbor and (1,α,β) is unique.
  • If T=∅, R≠∅ and row β₂ has some (α′,β₂) with α′<X, then similarly p_y≥β₂ and the only NE neighbor is m; (1,α,β) is unique.
  • If T,R≠∅ and both pivots fail, pick q₁=(α₂,β′) with β′<Y and q₂=(α′,β₂) with α′<X; then p≥q₁,q₂ so p_x≥α₂ and p_y≥β₂. Theorem 9 applies and (1,α,β) is unique.

Boundary-local type-2 triggers (first subrow/last left column).
- T2α. If T≠∅, column α₂ has some point below Y, and β_c=max{ y<Y : (α₂,y)∈U }, then whenever row β_c has exactly one point to the right of α₂ (i.e., h_{β_c}(α₂)=1), the color (2,α₂,β_c) is unique (r=1 via (α₂,Y), s=1 by hypothesis).
- T2β. If R≠∅, row β₂ has some point left of X, and α_r=max{ x<X : (x,β₂)∈U }, then whenever column α_r has exactly one point above β₂ (i.e., v_{α_r}(β₂)=1), the color (2,α_r,β₂) is unique (s=1 via (X,β₂), r=1 by hypothesis).

Pattern library (column-dual robust L-corner).
- RL′. If columns α<α′ have exactly (α,β),(α,β₁) with β<β₁ and (α′,β),(α′,β₂) with β<β₂, and row β contains exactly (α,β),(α′,β), then (2,α,β) is unique. This is a direct instance of Theorem 7.

Crossing subcase blueprint (|Max(S)|≥2; refined target for next round).
- List s_1,…,s_k=Max(S) with x increasing, y decreasing. If both T,R≠∅ and neither pivot fires, there exist indices f,g with x(s_f)≥α₂ and y(s_g)≥β₂ but no single s_i meets both (hence f>g). Consider the crossing corner c=(x(s_g), y(s_{g+1})).
  • If the open segments above/right of c are clean up to the boundary supports, Theorem 7 gives a unique type-2 at c.
  • Otherwise, let y_v be the least y>y(s_{g+1}) with (x(s_g),y)∈U, and x_h the least x>x(s_g) with (x,y(s_{g+1}))∈U. The next lemma to prove: at least one of these nearest interlopers can be converted into a safe uniqueness via Theorem 3 (singleton+extension) or the global R3/R4 triggers; failing that, both segments are clean and Theorem 7 fires. The disjointness of the rows {y(s_{i+1})} and columns {x(s_i)} across i will be the key to isolating a globally unique base.

Editorial note. In Theorem 11’s last paragraph, the phrase “v(β)=1” should read “T_3(β)=1” or “v_α(β)=1 for the unique contributing α”; this is purely notational.

=== output.md ===
Setup and notation
- U ⊆ [n]×[n]. For p=(x,y) and q=(x',y'), say q is NE of p if x'>x and y'>y, and q is SE of p if x'>x and y'<y. G[U] has an (undirected) edge for every unordered pair {p,q}⊆U, each labeled by one of four types and a color as follows:
  • Type 1 (NE–SW): if one endpoint is NE of the other. Color (1,α,β) with α = min{x,x'} and β = min{y,y'} (coordinates of the SW endpoint).
  • Type 2 (NW–SE): if one endpoint is NW of the other. Color (2,α,β) with α = min{x,x'} (the NW x) and β = min{y,y'} (the SE y).
  • Type 3 (vertical): if x=x'. Color (3,β) with β = min{y,y'} (the lower y).
  • Type 4 (horizontal): if y=y'. Color (4,α) with α = min{x,x'} (the left x).

Theorems currently established
1) Exact multiplicity formulas for types 1–4.
2) Single-line uniqueness: If U lies in a single row (resp. a single column) and has at least two points, then G[U] has a uniquely colored edge of type 4 (resp. type 3).
3) Singleton+extension triggers: A singleton row (resp. singleton column) with exactly one extension above (resp. to the right) forces a unique type-3 (resp. type-4) color.
4) Antichain ⇒ a unique type-2 color.
5) Consecutive-maxima clean gap ⇒ a unique type-2 color.
6) All three-point sets U admit a uniquely colored edge.
7) Robust L-corner uniqueness (type 2).
8) Row ∪ column support ⇒ a unique color.
9) Unique-maximal: SW-max with boundary thresholds ⇒ unique type 1.
10) Unique-maximal: top-row pivot ⇒ unique type 4.
11) Every four-point set admits a uniquely colored edge.

Proofs
Theorem 1 (Exact multiplicities).
- Type 1. Fix (α,β)∈[n]^2. An edge has color (1,α,β) iff its SW endpoint is (α,β), hence necessarily (α,β)∈U. Each NE neighbor q of (α,β) produces exactly one edge of that color, and distinct NE neighbors yield distinct edges. Conversely, any edge of that color arises this way. Therefore the multiplicity of (1,α,β) equals the number of NE neighbors of (α,β) in U.
- Type 2. Fix (α,β)∈[n]^2 and define r_U(α,β)=# { (α,y)∈U : y>β } and s_U(α,β)=# { (x,β)∈U : x>α }. Choosing any (α,y) with y>β and any (x,β) with x>α produces a NW–SE pair whose color is (2,α,β); distinct choices yield distinct edges of that color. Conversely, any edge of color (2,α,β) has its NW endpoint on the vertical ray { (α,y) : y>β } and its SE endpoint on the horizontal ray { (x,β) : x>α }. Hence the multiplicity is r_U(α,β)·s_U(α,β). In particular, uniqueness holds iff r_U(α,β)=s_U(α,β)=1.
- Type 3. Fix β. For each α with (α,β)∈U, the lower endpoint (α,β) connects vertically to each (α,y) with y>β, contributing v_α(β)=# { (α,y)∈U : y>β } edges of color (3,β). Summing over α gives the total multiplicity T_3(β)=∑_α 1_{(α,β)∈U}·v_α(β). Uniqueness holds iff exactly one α contributes and v_α(β)=1.
- Type 4. Fix α. For each β with (α,β)∈U, the left endpoint (α,β) connects horizontally to each (x,β) with x>α, contributing h_β(α)=# { (x,β)∈U : x>α } edges of color (4,α). Summing over β gives T_4(α)=∑_β 1_{(α,β)∈U}·h_β(α). Uniqueness holds iff exactly one β contributes and h_β(α)=1.

Theorem 2 (Single-line uniqueness).
- Row case. Suppose U⊆[n]×{y0} and |U|≥2. Let the distinct x-coordinates be x_1<⋯<x_m with m≥2. The only horizontal edges in G[U] are those between (x_i,y0) and (x_j,y0). The multiset of colors on these edges is { (4,x_1) repeated m−1 times, (4,x_2) repeated m−2 times, …, (4,x_{m−1}) once }. In particular, (4,x_{m−1}) occurs exactly once in G[U].
- Column case. The vertical analogue holds by symmetry: if U⊆{x0}×[n] with |U|≥2 and y_1<⋯<y_m, then (3,y_{m−1}) occurs exactly once.

Theorem 3 (Singleton+extension triggers).
- If a row β contains exactly one point (α,β)∈U and in column α there is exactly one point (α,y) with y>β, then by Theorem 1 (type 3) we have T_3(β)=1 and hence the color (3,β) is unique. The column/row dual gives the type-4 trigger.

Theorem 4 (Antichain ⇒ unique type 2).
- Assume U is an antichain (no two share a row or a column). List U as (x_1,y_1),…,(x_m,y_m) in increasing x, which forces y_1>y_2>⋯>y_m. For any i∈{1,…,m−1} consider (α,β)=(x_i,y_{i+1}). In column α there is exactly one point above β, namely (x_i,y_i); in row β there is exactly one point to the right of α, namely (x_{i+1},y_{i+1}). Thus r_U(α,β)=s_U(α,β)=1, and by Theorem 1 (type 2) the color (2,α,β) is unique.

Theorem 5 (Consecutive-maxima clean gap ⇒ unique type 2).
- Let M=Max(U) under the product order, listed as m_i=(x_i,y_i) with x_1<⋯<x_k and y_1>⋯>y_k (k≥2). For i∈{1,…,k−1} define R_i=# { (x_i,y)∈U : y>y_{i+1} } and S_i=# { (x,y_{i+1})∈U : x>x_i }. If R_i=S_i=1, then with (α,β)=(x_i,y_{i+1}) we have r_U(α,β)=R_i and s_U(α,β)=S_i, hence r_U·s_U=1 and color (2,α,β) is unique by Theorem 1 (type 2).

Theorem 6 (All three-point sets admit a uniquely colored edge).
- Let U have three distinct points.
  • If all three lie on a common row, with x_1<x_2<x_3, the three horizontal edges on that row have colors (4,x_1),(4,x_1),(4,x_2), so (4,x_2) is unique.
  • If all three lie on a common column, the vertical analogue yields a unique (3,y_2).
  • Otherwise, if some pair lies on a row (resp. column) but not all three do, the edge of that pair has a type-4 (resp. type-3) color that cannot be duplicated elsewhere in U because there is no second edge on that same row (resp. column).
  • Finally, if all x- and y-coordinates are distinct, order by x: p_1=(x_1,y_1),p_2=(x_2,y_2),p_3=(x_3,y_3).
    – If y_1<y_2<y_3, then p_2p_3 is type 1 with color (1,x_2,y_2) and is unique (its SW endpoint is p_2, which has exactly one NE neighbor, namely p_3).
    – If y_1>y_2>y_3, then p_2p_3 is type 2 with label (2,x_2,y_3) and is unique since r_U(x_2,y_3)=s_U(x_2,y_3)=1.
    – In each of the remaining permutations of (y_1,y_2,y_3), one of the consecutive pairs in x-order forms a type-2 edge (NW–SE) with exactly one point above the L-corner in its column and exactly one point to the right on its row, giving a unique type-2 color by Theorem 1 (type 2). Hence at least one unique color exists in all cases.

Theorem 7 (Robust L-corner uniqueness for type 2).
Let α<α′ and β<β′. Suppose (α,β′),(α′,β)∈U, and in column α there is exactly one point above β (namely (α,β′)), and in row β there is exactly one point to the right of α (namely (α′,β)). Then the color (2,α,β) occurs exactly once in G[U].
Proof. By Theorem 1 (type 2), r_U(α,β)=1 and s_U(α,β)=1, hence the multiplicity r_U·s_U=1.

Theorem 8 (Row ∪ column support ⇒ a unique color).
Assume U⊆({x=X}×[n]) ∪ ([n]×{y=Y}) and |U|≥2. Then G[U] has a uniquely colored edge.
Proof. If U⊆{x=X}×[n] or U⊆[n]×{y=Y}, Theorem 2 applies. Otherwise U meets both the row and the column. If |U∩([n]×{Y})|≥2, list its x-coordinates x_1<⋯<x_m and set α=x_{m−1}. Since α≠X and U⊆(column X)∪(row Y), the only β with (α,β)∈U is β=Y. On row Y, h_Y(α)=1. Hence T_4(α)=1 by Theorem 1 (type 4). If instead |U∩({X}×[n])|≥2, the vertical analogue yields a unique type-3 color.

Theorem 9 (Unique-maximal: SW-max with boundary thresholds ⇒ unique type 1).
Suppose U has a unique maximal element m=(X,Y) in the product order. Let T={x<X : (x,Y)∈U} and R={y<Y : (X,y)∈U}, with α₂=max T if T≠∅ (and α₂=−∞ otherwise), and β₂=max R if R≠∅ (and β₂=−∞ otherwise). Let S={p∈U : p_x<X and p_y<Y}. If S≠∅ and there exists p∈Max(S) (for the product order) with p_x≥α₂ and p_y≥β₂, then the color (1,p_x,p_y) is unique.
Proof. Any NE neighbor q of p with q_x<X and q_y<Y would satisfy q≻p and lie in S, contradicting p∈Max(S). Thus every NE neighbor of p lies on row Y or column X. Because p_x≥α₂, there is no (x,Y)∈U with p_x<x<X, and because p_y≥β₂, there is no (X,y)∈U with p_y<y<Y. Hence the only possible NE neighbor is m. By Theorem 1 (type 1), the multiplicity of (1,p_x,p_y) equals the number of NE neighbors of p, namely 1.

Theorem 10 (Unique-maximal: top-row pivot ⇒ unique type 4).
In the setting of Theorem 9, if T≠∅ and the column α₂ contains no point below Y, then the color (4,α₂) occurs exactly once in G[U].
Proof. On row Y, the point (α₂,Y) has exactly one right neighbor, (X,Y), so h_Y(α₂)=1. For β≠Y there is no (α₂,β)∈U by hypothesis, and there are no β>Y in U when m is the unique maximal. Therefore T_4(α₂)=h_Y(α₂)=1 by Theorem 1 (type 4).

Theorem 11 (Every four-point set admits a uniquely colored edge).
If |U|=4, then G[U] has a uniquely colored edge.
Proof. If some row has ≥3 points, list the x-coordinates on that row as x_1<⋯<x_k with k≥3. The rightmost edge on that row has color (4,x_{k−1}). To realize (4,x_{k−1}) elsewhere would require a different row containing both (x_{k−1},·) and a point with x>x_{k−1}, which is impossible with only one point off the given row. Thus (4,x_{k−1}) is unique. If some column has ≥3 points, the vertical analogue (type 3) applies.
Otherwise, every row and every column has ≤2 points. If there is a row with exactly two points, let its smaller x be α. If no other row contains both (α,·) and a point to its right, then by Theorem 1 (type 4) we have T_4(α)=1. Otherwise there exists a second row with exactly two points and the same left endpoint α. Let β be the lower of the two y-values in column α. Then on row β there is exactly one point to the right of α, and in column α there is exactly one point above β. By Theorem 7 (robust L-corner), r_U(α,β)=s_U(α,β)=1 and the color (2,α,β) is unique.
Finally, if no row has two points, then each row has exactly one point. If some column has two points, let β be the lower y on that column; at row β only that column contributes and v(β)=1, so T_3(β)=1. If no column has two points either, U is an antichain, and Theorem 4 gives a unique type-2 color. In all cases a unique color exists.
Auxiliary lemmas (supporting Theorems 9–11 and later triggers)

Lemma O1 (unique maximal ⇒ coordinatewise maxima).
Statement. If U has a unique maximal element m=(X,Y) in the product order, then X = max{ x : (x,·) ∈ U } and Y = max{ y : (·,y) ∈ U }.
Proof. Suppose some u=(x′,y′) ∈ U has x′ > X. In any finite poset, u is dominated by some maximal element m′ (i.e., m′ ≥ u coordinatewise). Then m′_x ≥ x′ > X, so m′ ≠ m, contradicting uniqueness. The case y′ > Y is symmetric. Therefore no point of U has x > X or y > Y, proving the claim.

Lemma UM1 (SW-maxima have only boundary NE neighbors).
Setup. Assume U has a unique maximal m=(X,Y). Let S={ p ∈ U : p_x < X and p_y < Y } and Max(S) its product-order maximal elements.
Statement. If p=(α,β) ∈ Max(S), then: (i) there is no q ∈ U with x=α and β < y < Y; (ii) there is no q ∈ U with y=β and α < x < X. Consequently, every NE neighbor of p lies on the top row y=Y or the right column x=X.
Proof. If q=(α,y) with β<y<Y existed, then q ∈ S and q ≻ p, contradicting p ∈ Max(S). The horizontal case is analogous. The consequence follows immediately.

Corollary R4 (row-of-two with globally unique left endpoint ⇒ unique type 4).
Statement. Suppose there exists a row β with exactly two points (α,β),(α′,β) ∈ U with α<α′. Assume furthermore that for every β′ ≠ β either (α,β′) ∉ U or there is no point (x,β′) with x>α. Then the color (4,α) appears exactly once in G[U].
Proof. By the type-4 multiplicity formula, T_4(α)=∑_{β''} 1_{(α,β'')∈U} · h_{β''}(α). By hypothesis, only β contributes (since (α,β'')∉U for β''≠β or h_{β''}(α)=0 there), and on row β we have h_β(α)=1 (exactly one right neighbor at α′). Hence T_4(α)=1 and (4,α) is unique.

Corollary R3 (column-of-two with globally unique lower endpoint ⇒ unique type 3).
Statement. Suppose there exists a column α with exactly two points (α,β),(α,β′) ∈ U with β<β′. Assume furthermore that for every α′ ≠ α either (α′,β) ∉ U or there is no point (α′,y) with y>β. Then the color (3,β) appears exactly once in G[U].
Proof. By the type-3 multiplicity formula, T_3(β)=∑_{α''} 1_{(α'',β)∈U} · v_{α''}(β). By hypothesis, only α contributes (since (α'',β)∉U for α''≠α or v_{α''}(β)=0 there), and in column α we have v_α(β)=1 (exactly one point above at β′). Hence T_3(β)=1 and (3,β) is unique.
Theorems currently established (continued)
12) Unique–maximal: SW–maximum with both boundary contacts ⇒ unique type 2.
13) Unique–maximal with a single SW–maximum ⇒ some unique color exists.
14) Unique–maximal: boundary-local type-2 triggers at α₂ and β₂.

Proofs (additions)

Theorem 12 (Unique–maximal: SW–maximum with both boundary contacts ⇒ unique type 2).
Assume U has a unique maximal element m=(X,Y). Let S={ p∈U : p_x<X and p_y<Y }, and let p=(α,β)∈Max(S). Suppose (α,Y)∈U and (X,β)∈U. By Lemma UM1, there is no point of U on the open vertical segment { (α,y) : β<y<Y } and no point on the open horizontal segment { (x,β) : α<x<X }. By Lemma O1 there are no points with y>Y or x>X. Hence r_U(α,β)=1 and s_U(α,β)=1. By Theorem 1 (type 2), the color (2,α,β) occurs exactly once in G[U].

Theorem 13 (Unique–maximal with a single SW–maximum ⇒ a unique color exists).
Assume U has a unique maximal m=(X,Y). Let S={ p∈U : p_x<X and p_y<Y } and suppose S≠∅ but Max(S)={p=(α,β)}.
Define T={ x<X : (x,Y)∈U } and, if T≠∅, α₂=max T. Define R={ y<Y : (X,y)∈U } and, if R≠∅, β₂=max R. We consider cases.
- Case 1: T=∅ and R=∅. By Lemma UM1, any NE neighbor of p lies on the top row or right column; since m is the only point on either, m is the unique NE neighbor. By Theorem 1 (type 1), (1,α,β) has multiplicity 1.
- Case 2: T≠∅ and column α₂ contains no point below Y. Then on row Y, h_Y(α₂)=1 and, by the definition of α₂ and Lemma O1, no other row contributes to T_4(α₂). Theorem 10 applies: (4,α₂) is unique.
- Case 3: R≠∅ and row β₂ is a singleton {(X,β₂)}. In column X there is exactly one point above β₂, namely m, by the definition of β₂ and Lemma O1. By Theorem 3, (3,β₂) is unique.
- Case 4: T≠∅, column α₂ contains some (α₂,β′) with β′<Y, and R=∅. Then q=(α₂,β′)∈S. Since p is the unique maximal of S, we have p≥q, hence p_x≥α₂. By Lemma UM1, any NE neighbor of p lies on the top row or the right column. The right column contributes none (R=∅). Among top-row points other than m, all have x≤α₂≤p_x and thus are not to the right of p. Therefore m is p’s only NE neighbor, and by Theorem 1 (type 1) the color (1,α,β) is unique.
- Case 5: R≠∅, row β₂ contains some (α′,β₂) with α′<X, and T=∅. Then r=(α′,β₂)∈S and p≥r gives p_y≥β₂. By Lemma UM1, all NE neighbors of p lie on the top row or right column. The top row contributes none (T=∅). On the right column, by the definition of β₂ and Lemma O1 there is no point strictly above p_y other than m. Hence m is the only NE neighbor and (1,α,β) is unique.
- Case 6: T≠∅ and R≠∅, with column α₂ containing some (α₂,β′) with β′<Y and row β₂ containing some (α′,β₂) with α′<X (i.e., both pivots fail). Then p≥(α₂,β′) and p≥(α′,β₂), so p_x≥α₂ and p_y≥β₂. Theorem 9 applies: p has exactly one NE neighbor (m), hence (1,α,β) is unique.
These cases are exhaustive; in all cases a uniquely colored edge exists.

Lemma 14 (Boundary-local type-2 triggers at α₂ and β₂).
Assume U has a unique maximal m=(X,Y).
(a) Suppose T≠∅ and column α₂ contains at least one point below Y. Let β_c=max{ y<Y : (α₂,y)∈U }. If row β_c has exactly one point to the right of α₂ (i.e., h_{β_c}(α₂)=1), then the color (2,α₂,β_c) is unique.
Proof. In column α₂ the only point above β_c is (α₂,Y) by the choice of β_c and Lemma O1, so r_U(α₂,β_c)=1. By hypothesis s_U(α₂,β_c)=h_{β_c}(α₂)=1. By Theorem 1 (type 2), (2,α₂,β_c) has multiplicity 1.
(b) Suppose R≠∅ and row β₂ contains at least one point left of X. Let α_r=max{ x<X : (x,β₂)∈U }. If column α_r has exactly one point above β₂ (i.e., v_{α_r}(β₂)=1), then the color (2,α_r,β₂) is unique.
Proof. On row β₂ the only point to the right of α_r is (X,β₂) by the choice of α_r and Lemma O1, so s_U(α_r,β₂)=1. By hypothesis r_U(α_r,β₂)=v_{α_r}(β₂)=1. Theorem 1 (type 2) yields uniqueness.

Remarks. Lemma 14(a,b) are boundary-anchored instances of Theorem 7 (robust L-corner), specialized to the first subrow below (α₂,Y) and the last left column before (X,β₂), respectively. They are particularly effective when the primary pivots (Theorems 10 and 3) fail but these first substructures are minimally “clean.”


Current round tag: Round 0009 — 2025-08-27T20:15:22.563799Z
Return ONLY valid JSON with a single field:
{ "progress_md": "<your progress notes for this round>" }

Read output.md. If you spot gaps, errors, or missing justifications in output.md, point them out clearly inside progress_md.
