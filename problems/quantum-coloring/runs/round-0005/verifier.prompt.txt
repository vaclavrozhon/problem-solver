--- SYSTEM ---
You are a strict mathematical verifier & research manager.

You are being run in a loop with provers. Your tasks:
- Audit their ideas for correctness and rigor.
- Curate files (notes.md and output.md).
- Suggest the next steps.

Inputs: 
- task statement
- outputs of provers
- notes.md (summary so far)
- output.md (rigorously proven results so far)

Guidelines:
- notes.md: should be a readable running log of interesting work. Prefer appending. Replace only if old notes are clearly misleading. Remember -- notes should be self-contained and should make sense even without seeing outputs of past provers. 
- output.md: should be concise and rigorous. It should contain only fully proven theorems that are clearly an interesting step towards the solution (or the solution itself). The beginning of the file is a clear list of interesting theorems you can prove. From the statement of the theorem it has to be clear that this constitutes nontrivial progress towards solution. The rest of the file contains a fully rigorous list of the proofs of the theorems. Keep only proven theorems with clear proofs. If a statement is flawed and you cannot fix it, remove it from output.md and instead add it to notes.md with explanation.
- Be careful with the booleans `new_notes_append` and `new_outputs_append`: default is True (append). Use False only when deliberately rewriting everything.

Tasks:
1) Audit rigor: identify unjustified steps, false statements, missing lemmas; produce minimal counterexamples.
2) Triage value: separate genuine progress from noise.
3) Guide next steps: propose what provers should try next.

**Return strictly JSON**:
{
  "feedback_md": "Detailed critique of prover outputs (≥200 words). Include concrete next-step suggestions. The next round of provers may not see last round outputs; ensure all valuable info is stored in notes.",
  "new_notes_md": "Markdown (KaTeX allowed). Usually appended to notes.",
  "new_notes_append": "True|False",
  "new_outputs_md": "Markdown (KaTeX allowed). Usually appended to output.md.",
  "new_outputs_append": "True|False",
  "verdict": "success|partial success|nothing so far"
}

**Verdict definitions**:
- **success**: Something that one could publish, even if it is not the full solution (e.g., significant theorem, key lemma, novel technique, partial solution with clear path forward)
- **partial success**: Something worthy enough to write into output.md (e.g., correct but preliminary results, useful technical lemmas, validated approaches that advance understanding)
- **nothing so far**: No meaningful mathematical progress or only exploratory work


--- USER ---
You receive multiple prover reports. Evaluate correctness, value, and pick promising directions. Update notes.md (append/replace) with useful ideas and update output.md (append/replace) ONLY with rigorously verified results.

Prover reports (JSON):
[{"prover_id": "01", "progress_md": "Headlines for this round\n- We pivot from the trivialized segment LP (Definition 6) to independence-augmented formulations in the product-state regime, and to ring-level (experiment/\u03c6-LOCAL) arguments in the entanglement-allowed regime.\n- We isolate a simple, checkable linear constraint that excludes the Markov-chain witness once product-state independence is enforced: at any gap \u03b4 \u2265 2r+1, color-equality at the two sites must be 1/3 (under color symmetry), which contradicts the strictly stationary order-1 proper Markov chain\u2019s correlation 1/3 + (2/9)(\u22121/2)^\u03b4.\n- We propose a concrete feasibility test (linear, color-symmetric, pair-independence relaxation) for r = 2 and moderate k that should already force objective < 1, yielding a rigorous certificate in the no-entanglement regime.\n- For the entanglement-allowed regime, we outline a two-way, r = 2 adaptation of the LGR \u201cexperiments\u201d method: construct weighted mixtures of match-at-distance indicators whose expectations must be equal under r-non-signaling locality but separate under properness, certifying constant error. We propose an auditable search plan.\n\nGaps and clarifications in output.md (minor)\n- Theorem 2 (Independence beyond 2r): the current statement and proof are fine; if we later rely on higher-arity independence (for m \u2265 3 windows), note explicitly that the product initial state implies factorization over any collection of disjoint r-buffers by the same argument (pairwise disjoint supports \u21d2 global factorization). Not essential but worth noting for later factorization constraints.\n- Corollary 10 and Proposition 11: now consistent; Proposition 11 makes Corollary 10 vacuous with the current LP. We will add independence-augmented constraints (Track A) to resurrect nontrivial bounds in the product-state setting.\n\nTrack A (product-state, no entanglement): independence-augmented constraints\nIdea A1 (minimal linear independence constraint under color symmetry)\n- Independence premise: For any two cores A, B whose r-neighborhoods are disjoint in the segment (equivalently, inter-core gap \u03b4 \u2265 2r+1), the joint law on the cores must factorize. Under color symmetry (see below), this yields a linear identity for single-site cores:\n  I1(\u03b4): P[X_i = X_{i+\u03b4}] = 1/3, for every interior pair (i, i+\u03b4) with \u03b4 \u2265 2r+1.\n- Why linear: By color symmetry (permutation of {1,2,3}), single-site marginals must be uniform, P[X_t = a] = 1/3 for all a. Factorization then implies P[X_i = X_{i+\u03b4}] = \u2211_a P[X_i=a]P[X_{i+\u03b4}=a] = 3\u00b7(1/3\u00b71/3) = 1/3.\n- Justification for enforcing color symmetry as constraints: The objective (maximizing probability of properness) and all existing placement-equality constraints are invariant under the global action of S3 on colors; hence averaging any feasible solution over S3 yields a color-symmetric feasible solution with the same objective value. It is therefore valid (and can only strengthen the relaxation) to add linear constraints enforcing equal color marginals at all interior positions.\n\nLemma A (Order-1 proper chain violates I1 at any finite separation)\n- Consider the stationary 3-state nearest-neighbor chain with no self-loops (P(i\u2192i) = 0, P(i\u2192j) = 1/2 for j \u2260 i). Then for d \u2265 1:\n  P[X_t = X_{t+d}] = 1/3 + (2/9)(\u22121/2)^d.\n  Proof sketch: The transition matrix has eigenvalues 1 and (\u22121/2) (multiplicity 2). One obtains P^d(i\u2192i) = 1/3 + (2/3)(\u22121/2)^d and P^d(i\u2192j) = 1/3 \u2212 (1/3)(\u22121/2)^d for i \u2260 j. Average over the stationary law to get the stated equality probability. For every finite d, this differs from 1/3, so the chain is not independent at separation d.\n- Consequence: any feasible family supported on fully proper strings and strictly stationary with nontrivial finite-range correlations fails I1 at some \u03b4; imposing I1 (for \u03b4 \u2265 2r+1) cuts off the Markov-chain witness.\n\nFormulation A2 (linear, color-symmetric, pair-independence relaxation)\n- Variables: p_\u03c8 for \u03c8 \u2208 \u03a3^k as in Definition 6.\n- Enforce:\n  \u2022 Color symmetry: For every interior position u, P[X_u = 1] = P[X_u = 2] = P[X_u = 3] = 1/3 (linear constraints in p_\u03c8).\n  \u2022 Placement invariance within fixed geometries (Definition 6, restricted to t = 1 and t = 2 core families): single-core (s = 1), and two-core (s = (1,1)) at gaps \u03b4 \u2208 {2r+1, 2r+2, \u2026}, across all interior translations.\n  \u2022 Independence at large gaps (pair level): For each such \u03b4, impose I1(\u03b4): P[X_i = X_{i+\u03b4}] = 1/3 (as a single linear equality for each \u03b4, using color symmetry).\n  \u2022 Optionally, refine to block-level: For s = 2 cores (length-2 blocks) with gap \u03b4 \u2265 2r+1, enforce P[(block1) = (block2)] = \u2211_{\u03be \u2208 \u03a3^2} P[block1 = \u03be] P[block2 = \u03be]; under color symmetry and single-core uniformity this yields a finite set of linear identities involving diagonal sums of pair-block marginals. (We will start with single-site cores for robustness.)\n- Objective: as before, maximize the probability of internal properness.\n- Claim (target to check computationally): For r = 2 and some moderate k (e.g., 11 \u2264 k \u2264 15), the above linear system has optimum strictly less than 1. Intuition: Full support on proper strings combined with translation invariance of pair laws at large gaps forces equality-probability 1/3 for those pairs, which is incompatible with any measure supported entirely on proper strings satisfying the interior invariances.\n\nAuditable test plan A3 (r = 2, feasibility at objective 1)\n- Fix r = 2. Consider k \u2208 {11, 12, 13, 14, 15}.\n- Build the linear system described in A2 with:\n  \u2022 Single-core invariance (t = 1) and two-core invariance (t = 2) for gaps \u03b4 \u2208 {5,6} (since 2r+1 = 5), across all interior placements.\n  \u2022 Color symmetry constraints yielding uniform marginals.\n  \u2022 Independence equalities I1(5) and optionally I1(6).\n- Solve the LP feasibility with the additional equality \u201cobjective = 1\u201d (i.e., demand probability 1 on proper strings) or, equivalently, check whether any p_\u03c8 supported on proper strings satisfies the linear constraints. If infeasible, the conclusion is: in the product-state regime, objective 1 is impossible already under these (linear) constraints, hence the true optimum q_prod(r,k) < 1.\n- Certificate: Invalidate objective = 1 with a dual ray (Farkas certificate), archiving the precise linear combination of constraints leading to a contradiction with 1{proper}.\n\nWhy a fully proper, translation-invariant measure cannot meet I1 (intuition)\n- Any measure supported on proper strings induces for each finite gap \u03b4 a pair-law P(X_i, X_{i+\u03b4}) which, under interior translation invariance (two-core constraints) and mild mixing, typically deviates from the product measure at \u03b4 finite. The order-1 chain demonstrates the unavoidable alternation: equality-prob oscillates around 1/3 with amplitude (2/9)(1/2)^\u03b4. Imposing P_equal(\u03b4)=1/3 at \u03b4 = 5,6 forces structure incompatible with \u201calways proper\u201d and two-core invariance. The LP feasibility test A3 makes this precise.\n\nExtending A2 to stronger (still linear) independence surrogates\n- Fr\u00e9chet bounds sharpening: For each \u03b4 \u2265 2r+1 and color a, add bounds P[X_i = a, X_{i+\u03b4} = a] \u2208 [max(0, 2/3\u22121), min(1/3, 1/3)] = [0,1/3] with summed diagonal fixed to 1/3. These are necessary consequences of independence and color symmetry, and improve robustness.\n- Multi-gap constraints: Impose I1(\u03b4) for multiple \u03b4 in {5,6,7}. The stationary proper Markov chain fails all of them; a general proper distribution would struggle to satisfy them simultaneously.\n\nTrack B (entanglement allowed): r = 2 ring-level \u201cexperiments\u201d\nIdea B1 (two-way analogue of LGR\u2019s distance-mix experiment)\n- Objective: Construct two \u201cexperiments\u201d (randomized procedures that pick a random node v and a random distance d \u2208 D_1 or D_2 with specified weights, then ask whether colors at v and v+d match) whose expected outcomes must be equal under any r-round non-signaling strategy (by locality and rotation invariance), but differ on any proper 3-coloring of the cycle. Any strictly positive separation yields a constant-error lower bound.\n- Why equality under r-non-signaling? In one-way, LGR exploited that pair distributions at non-adjacent nodes are independent of distance. In two-way, this fails. However, by designing D_1, D_2 and how we select the pair (v, v+d) so that both experiments induce the same law of the r-views seen by the two sites and their r-neighborhoods (including the gap size), the non-signaling principle (Heisenberg localization) enforces equality of the corresponding match probabilities.\n- Candidate construction: r = 2. Choose D_1 and D_2 supported on distances \u2265 3 to avoid adjacency, with mixtures of distances of different parity to exploit alternating behavior of proper colorings (as in LGR\u2019s pair-correlation alternation). Example sketch: Let D_1 put mass on {5,7,9} and D_2 on {6,8,10} with weights tuned so that the multiset of r-neighborhood isomorphism types (including the informed gap-length) seen by the pair in Experiment 1 equals that for Experiment 2. We will solve for weights by equating counts of r-view types.\n- Proper-coloring separation: In any proper 3-coloring of the cycle, P[X_v = X_{v+d}] alternates with parity of d (1/3 \u00b1 c\u00b7(2)^{\u2212d} in long cycles, or exactly computable on finite cycles). Thus an odd\u2013even mixture typically yields a positive bias between the two experiments. If this bias can be bounded away from 0 uniformly in n for some (D_1,D_2), we obtain a constant error bound.\n\nAuditable search plan B2\n- Fix r = 2 and a cycle length n moderately large (e.g., n = 4m + O(1), m \u2273 50). Enumerate all r-view isomorphism types for unordered pairs (u,v) at distance d up to some cap, with the view capturing: local degrees (trivial for cycles), the labeled positions of u,v and their r-neighborhoods, and the explicit value d, all modulo rotation.\n- Construct a linear system requiring that the multiset of view types sampled by Experiment 1 (weights w_1(d)) equals that of Experiment 2 (weights w_2(d)). Solve for nonnegative weights w_1, w_2 supported on a small distance set (e.g., up to 10 or 12). If a feasible pair exists, compute the induced gap between match probabilities on proper 3-colorings. If positive and uniform in n (beyond a threshold), this yields the constant-error bound.\n- If no small-support solution exists, enlarge the distance set and repeat. We expect small supports to suffice, by analogy with LGR\u2019s n = 11 construction.\n\nSmall calculations to support B1\n- In any proper 3-coloring C_n, the probability (over uniform v) that X_v = X_{v+d} equals 1/3 + \u03b1(d,n), with \u03b1(d,n) alternating in parity and |\u03b1(d,n)| \u2265 c\u00b7(2)^{\u2212d} uniformly over n \u2265 2d + 1 (constant c > 0). This follows from the same eigen-analysis as Lemma A, adapted to cycles (edge effects vanish for d \u226a n). Thus mixtures of odd and even d\u2019s yield a nonzero bias.\n\nObstacles and considerations\n- Independence is nonlinear; our linear relaxation (I1) relies on enforcing color symmetry and uniform single marginals. While justified by symmetry of the objective/constraints, we will explicitly note in the solver and certificate that we are working under a color-symmetrized subspace; any bound < 1 then holds a fortiori.\n- For Track B, the critical step is the view-equivalence argument: we must ensure the two experiments induce the same distribution over the r-views of the selected pair (including gap length). This is a finite combinatorial check for given (D_1,D_2) and r.\n\nConcrete next steps (auditable)\n1) Implement LP test A3 (r = 2):\n   - Build constraints for k \u2208 {11,12,13,14,15} with single-core and two-core placement invariance, color symmetry, and I1(5) (and optionally I1(6)).\n   - Check feasibility with objective = 1 (support on proper strings). If infeasible for some k, archive the dual Farkas certificate (linear combination of constraints \u21d2 contradiction).\n   - If feasible persists, augment with I1(6) and/or block-level linear constraints as described.\n2) Document Lemma A (pair-equality formula) and add to notes as a reusable analytic tool for excluding Markov-type correlated constructions when independence constraints are present.\n3) Start the B2 search: generate r = 2 pair-view types on cycles and solve for two mixtures (D_1,D_2) with equal view-type distributions. Begin with distances up to 10. If a feasible pair exists, compute separation on proper colorings and quantify an n-independent \u03b5 > 0.\n4) Optional: formulate a small nonlinear feasibility problem enforcing exact factorization for \u03b4 \u2208 {5,6} (P(A \u2229 B) = P(A)P(B) for all singleton-color events A,B), and solve with MIP for k \u2264 12 to cross-check LP conclusions.\n\nWhy this is promising\n- The linear independence surrogate I1 is extremely low-cost and already incompatible with any fully proper, strictly stationary nearest-neighbor model; combining I1 with translation-invariance constraints should suffice to cut off objective 1. A dual infeasibility certificate would be a clean, auditable product.\n- The r = 2 experiment approach stays squarely within non-signaling/\u03c6-LOCAL reasoning and avoids segment trivialization; it mirrors LGR\u2019s success at r = 1 while respecting that two-way views depend on distance.\n\nDeliverables for the next round\n- Report of LP feasibility tests (A3) including one explicit k with \u201cobjective=1 infeasible\u201d and the dual ray.\n- First candidate (D_1,D_2) for r = 2 with equal r-view distributions, plus the computed separation on proper colorings (or a report that no small-support pair was found and an updated plan)."}]

Current notes.md:
Scope and goal
We seek lower bounds for 2–3 round quantum LOCAL algorithms that 3-color an n-cycle. We separate two resource regimes: (i) no initial shared entanglement (initial product state across vertices), and (ii) arbitrary initial shared entanglement. Our strategy follows and extends Le Gall–Rosmanis (LGR, 2022): reduce to a line-segment optimization under r-local non-signaling constraints, then lift to cycles. Two technical pillars are (A) light-cone localization of measurements in r rounds (implying r-non-signaling), and (B) independence across well-separated regions when the initial state is a product.

Key corrections/new facts
- Independence threshold is 2r, not r, in the two-way model without entanglement. After reversing r communication layers, any measurement on a block depends only on the block’s r-neighborhood. Thus independence of multiple blocks requires their r-neighborhoods to be disjoint, i.e., pairwise distances > 2r. Counterexample to “> r” for r = 1: on a path 0–1–2, one round suffices for node 1 to broadcast a private random bit to nodes 0 and 2, correlating their outputs at distance 2.
- Non-signaling beyond r holds with or without shared entanglement: the marginal on a set S depends only on the initial state on N_r(S). This follows from Heisenberg-picture localization of effects under depth-r local circuits/channels.

Amplification templates
- No entanglement (product initial state): If there exists k and q < 1 such that every r-non-signaling distribution on a length-k segment makes the segment proper with probability at most q, then on cycles C_n the success probability is at most q^{⌊n/(k+2r)⌋}. Partition C_n into ⌊n/(k+2r)⌋ disjoint windows of length k separated by gaps of size 2r; window events are independent by the 2r-separation lemma; ring proper implies all windows are proper.
- With entanglement allowed: For any fixed window W of length k, ring proper implies W is proper. The distribution on W (restricted to placements with r-buffers inside W) is feasible for the r-non-signaling LP, hence P[ring proper] ≤ P[W proper] ≤ q. There is no improvement from packing without independence; the optimal general bound is the n-independent constant q.

LP plan for r = 2, 3
- Variables: probabilities over colorings on r-gapped placements (collections of frames) inside [1..k]. Placements include cores and r-buffers fully contained in [1..k].
- Constraints: non-signaling equalities enforcing that the marginal distribution on a given core is independent of the surrounding placement context as long as r-buffers are intact (equalities of marginals across placements that agree on the core).
- Objective: maximize P[all k − 1 edges inside [1..k] are properly 3-colored].
- Symmetries: quotient by S3 color permutations; translations (and reflections, if used). It is safe (as a relaxation) to enforce only a generating set of non-signaling constraints; for the final certificate, include all placements that respect the segment.
- Execution: sweep k ≈ 10–16 for r = 2 (then smaller k for r = 3), solve numerically, and extract dual certificates for any instance with optimum < 1.

What remains to be computed
- A concrete (r, k, q) with q < 1 via the LP. Once obtained, immediately plug into the amplification templates above. Note the stride is k + 2r (not k + r) in the independence-based exponential bound.

Reference counterexample (to avoid regression)
- Two-way, r = 1, no entanglement: path 0–1–2. Node 1 samples b ∈ {0,1}, sends b to 0 and 2, both output b. Outputs at distance 2 are perfectly correlated; independence beyond r = 1 fails. Independence holds only when r-neighborhoods are disjoint (distance > 2r).
Additional clarifications and refinements

1) Interior placement invariance: correct assumptions and a counterexample
- Valid regimes. For an r-round uniform LOCAL algorithm on a cycle C_n, invariance of interior placements (i.e., equality of core marginals for all gap-r placements whose r-buffers lie within a window W) holds under either of the following assumptions:
  (a) No shared entanglement and identical local initial states (product initial state ⊗_v ρ, with the same ρ at every vertex).
  (b) Shared entanglement is allowed, but the global initial state ρ_0 is invariant under the automorphisms of C_n (rotations and reflections). Uniformity of the local channels across vertices is also required.
- Why. In the Heisenberg picture, the effect for a core event depends only on the union of r-neighborhoods of the cores. Two interior placements of the same frame family induce isomorphic unions; the corresponding effects are related by a permutation of registers. If ρ_0 is invariant under that permutation (true in (a) and (b)), the probabilities coincide.
- Necessity of the symmetry assumption with entanglement. Without (b), the statement can fail. Counterexample (r = 0): prepare EPR pairs on disjoint edges (1,2), (3,4), … around the cycle, and have each vertex measure Z and output a color that is a function of its bit. Then the joint distribution on two adjacent cores depends on whether the placement coincides with a paired edge (correlated) or straddles a pair boundary (independent). Hence, equality across placements fails.

2) Segment LP (precise, and what it models)
- Alphabet Σ = {1,2,3}. Fix r ≥ 1 and k ≥ 1. Let a frame family F = ({{s_1}}, …, {{s_t}}), each {{s_j}} a contiguous core of length s_j.
- An r-gapped placement ω of F inside [1..k] is a t-tuple of start positions (ω_1,…,ω_t) such that the r-buffers [[ω_j − r .. ω_j + s_j − 1 + r]] are subsets of [1..k] and pairwise disjoint. The cores are C_j = [[ω_j .. ω_j + s_j − 1]].
- Variables: p_ψ for ψ ∈ Σ^k, with p_ψ ≥ 0 and ∑_ψ p_ψ = 1.
- Objective: maximize ∑_ψ p_ψ · 1{ψ has no equal-color adjacencies on edges (i, i+1), i = 1..k−1}.
- Constraints (interior placement invariance): For every family F and every core assignment ζ = (ζ_1,…,ζ_t), the marginal probability ∑_{ψ: ∀j ψ|_{C_j} = ζ_j} p_ψ is the same for all gap-r placements ω of F (whose r-buffers lie in [1..k]).
- Soundness: These constraints are necessary for distributions induced by r-round uniform algorithms in regimes (1a) or (1b). Dropping some equalities yields a relaxation (weaker constraints and thus a larger feasible set); any optimum < 1 for a relaxation implies the true optimum < 1 as well.

3) Monotonicity in segment length
Let q(r,k) denote the LP optimum at parameters (r,k) as above. Then q(r,k+1) ≤ q(r,k). Proof idea: Any feasible distribution on Σ^{k+1} marginalizes to a feasible distribution on Σ^k (equalities on interior placements survive marginalization), and 1{proper on k+1} ≤ 1{proper on first k} pointwise.

4) Why a point mass on a proper coloring violates the constraints
Under the single-core placement-invariance constraints, the distribution of s-blocks (e.g., s ∈ {1,2}) must be identical for all interior positions. A point mass on a single proper ψ has position-dependent s-blocks unless ψ is constant (impossible if ψ is proper). Hence a Dirac mass cannot be feasible—this is a useful solver sanity check.

5) Amplification stride and regimes
- No entanglement (product initial state): independence requires gaps of size 2r (not r). The exponential amplification stride is k + 2r. This is tight in general (see r = 1 path 0–1–2 counterexample).
- With entanglement: constant-error bounds via the LP above are valid if the initial shared state is automorphism-invariant; without that symmetry, the placement-equality constraints need not hold (cf. the counterexample in item 1).

6) Computational plan (r = 2)
- Variables: p_ψ, ψ ∈ Σ^k. For k = 10, |Σ^k| = 59,049; for k = 12, |Σ^k| = 531,441.
- Symmetry/useful reductions: quotient by S_3 (color permutations) and reflection; treat translation of placements via equality constraints.
- Constraints to start with: all single-core families with s ∈ {1,2,3}; then add two-core families (1,1), (2,1), (2,2) at several separations, over all interior placements.
- Certification: if optimum < 1, extract a dual certificate (constraint multipliers) that verifies the bound.
Important correction: geometry-aware interior placement invariance
- The equalities we enforce must respect automorphism classes of placements. Two placements of t cores are guaranteed to have equal core marginals only if they are related by a cycle automorphism (rotation; reflection only if the model is reflection-invariant). Equating placements with different inter-core distances is not justified by light-cone localization plus uniformity.
- Minimal counterexample (r = 0, entangled, rotation-invariant): let ρ0 be the 1/2-mixture of the two perfect matchings of EPR pairs around the cycle. Adjacent vertices have Z-correlations (EPR half the time); vertices at distance 2 are uncorrelated. Thus, two singleton cores at distance 1 vs distance 2 have different joint marginals, defeating geometry-agnostic equality constraints.
- Fix: Parameterize multi-core constraints by geometry (core lengths s = (s1,…,st) and inter-core gaps δ = (δ1,…,δt−1), where δj is the number of vertices between cores j and j+1). Require equality only across translations inside [1..k] (and optionally reflections) for the same (s, δ), with the additional admissibility condition δj ≥ 2r ensuring disjoint r-buffers.

Monotonicity in r (new)
- Let q(r,k) be the (revised, geometry-aware) LP optimum. Then q(r+1,k) ≥ q(r,k). Reason: when r increases, fewer placements are admissible, so fewer equalities are enforced; the feasible region enlarges and the optimum cannot decrease.

Extreme-point structure (new)
- The feasible set is a nonempty polytope in R^{3^k} (uniform distribution is feasible), defined by linear equalities (geometry-aware invariance), nonnegativity, and normalization. Hence an optimal distribution exists and can be taken at an extreme point (basic feasible solution). This supports sparse-support searches and dual-certificate extraction.

Amplification reminders (unchanged)
- No entanglement: independence requires gaps of size 2r, so the exponential stride is k+2r. The r = 1 path 0–1–2 counterexample shows smaller gaps are insufficient.
- With entanglement: constant-error bounds require automorphism-invariant initial states (or an admissible public random rotation to enforce it). Without that symmetry, interior-placement equalities need not hold.

Computation plan (r = 2), updated to geometry-aware constraints
- Variables: p_ψ, ψ ∈ Σ^k. Quotient by S3 color permutations; do not assume reflection unless explicitly imposed.
- Constraints (progressive):
  • Single-core: s ∈ {1,2,3}, equality across all interior translations.
  • Two-core: (s1,s2) ∈ {(1,1),(2,1),(2,2)}, at several admissible separations δ ≥ 2r; enforce equality across translations for each fixed δ.
  • If needed, add t = 3 families similarly.
- Certification: For any q < 1, extract a dual and archive (r,k), the (s,δ) list, the dual vector, and the inequality certifying ∑_ψ p_ψ·1{proper} ≤ q.

Transfer-matrix/Markov cross-check
- Restricting to stationary Markov chains (order d) is a subset of the LP-feasible set; maximizing properness yields a lower bound on q(r,k), useful for catching modeling/solver errors but not a certifying upper bound.

Pitfalls and checks
- Do not equate placements with different δ. Keep separate runs with and without reflection constraints. Validate symmetry reductions on small k against the full (unreduced) LP.
- Ensure all placements counted in constraints have r-buffers fully inside [1..k].
Critical correction: the segment LP (Definition 6) is too weak for two-way
- New fact. For every r ≥ 1 and k ≥ 1, the LP optimum q(r,k) in Definition 6 equals 1. A feasible witness achieving objective 1 is given by the order-1 Markov chain on Σ={1,2,3} with stationary distribution u≡1/3 and transition matrix P with P(i,i)=0 and P(i,j)=1/2 for j≠i. Let p_k be the law of (X_1,…,X_k) with X_1∼u and X_{t+1}|X_t∼P. Then p_k assigns probability 1 to internally proper strings, and because (X_t) is strictly stationary, all core marginals for any fixed geometry (s,δ) are invariant under interior translations, hence all Definition 6 constraints hold. If reflection constraints are included, the chain remains feasible because it is reversible under u.
- Implication. The current LP cannot certify any nontrivial bound q<1 in the two-way model (with or without entanglement). Corollary 10 remains formally valid but is vacuous with this LP (it upper-bounds by 1).

Why the witness satisfies the geometry-aware equalities (minimal checks)
- Single core (t=1). For any s and any interior position i, the s-block (X_i,…,X_{i+s−1}) has the stationary s-block law; translation of i within the window preserves the law.
- Two cores (t=2). For s=(s1,s2) and gap δ≥2r, the joint law of the two blocks depends only on δ (and s1,s2); by strict stationarity, translating the placement within [1..k] does not change this joint law.
- Three cores (t=3). Similarly, for s=(s1,s2,s3) and gaps δ=(δ1,δ2) with δj≥2r, the joint law of the three blocks depends only on the inter-core separations, not on absolute position; interior translations preserve it.

Consequences for modeling and plan (forked)
- Track A (product-state, no entanglement): Independence across regions whose r-neighborhoods are disjoint (>2r separation) must be used. This is nonlinear (factorization). Two practical approaches:
  1) Lifted linear relaxation (Sherali–Adams style): Introduce auxiliary variables for joint marginals on small tuples of cores; enforce linear consistency across overlaps and interior-translation equalities; add necessary linear bounds implied by independence (e.g., Fréchet inequalities for all pairs). This excludes some spurious correlated witnesses (including the Markov chain) and may already force q<1 for small r,k.
  2) Nonlinear exact factorization: Add constraints P(A∩B)=P(A)P(B) for cylinder events A,B supported on disjoint r-buffers. Solve the resulting bilinear system for r=2 and k≤12 using algebraic/MIP methods. Any infeasibility at value 1 yields the desired q(r,k)<1.
- Track B (entanglement allowed): The segment LP cannot help. Pursue ring-level methods: (i) tailor LGR-style experiments for two-way r=2 to derive linear identities that cannot hold simultaneously under properness; (ii) indistinguishability/φ-LOCAL arguments to prove uniform ε(r)>0 constant-error lower bounds for fixed small r. Start at r=2.

Near-term to-dos
- Archive a formal statement and proof that q(r,k)=1 (now added to output.md) to prevent regressions.
- Implement Track A level-1/2 lift and a small exact factorization instance for r=2, k≤12, and test whether q<1 emerges. Extract and store any dual certificates (linear inequalities) obtained.
- Begin a concrete r=2 indistinguishability construction: enumerate r-views on the cycle; design two globally incompatible templates sharing those r-views on a positive fraction of positions; quantify a constant contradiction via averaging.

Current output.md (if any):
Main theorems proved in this file
- Light-cone localization and r-non-signaling for r-round LOCAL algorithms (with or without initial entanglement).
- Independence beyond 2r for two-way r-round LOCAL algorithms with product initial states (no shared entanglement).
- Exponential amplification without entanglement given a segment-level bound q(r,k) < 1.
- Automorphism-covariant interior placement invariance within fixed geometry classes.
- Segment LP with geometry-aware interior invariance; structural lemmas: monotonicity in k, monotonicity in r, extreme-point optimality.
- Constant-error bound with entanglement under automorphism invariance.

Preliminaries
Let G = (V, E) be a graph (cycles are of primary interest). An r-round quantum LOCAL algorithm consists of r synchronous layers of local channels acting on vertex/edge registers, followed by local measurements at the vertices that output colors in {1,2,3}. Each round is modeled as a product of CPTP maps localized on vertices/edges (purifiable to local unitaries by Stinespring dilation). For S ⊆ V, let N_r(S) = {v ∈ V : dist(v, S) ≤ r} denote the r-neighborhood of S.

Theorem 1 (Light-cone localization and r-non-signaling)
Fix an r-round quantum LOCAL algorithm. Let S ⊆ V, and let M_S be any POVM element that depends only on the final local measurements in S. Then there exists a positive operator X_S supported only on the registers associated with N_r(S) (and ancillas therein) such that, for every initial global state ρ (possibly entangled), the probability of M_S is Tr[ρ X_S]. Consequently, if two initial states ρ and ρ′ agree on N_r(S), then the output marginal on S is the same under ρ and ρ′.

Proof sketch (standard): Purify to a depth-r circuit of local unitaries. In the Heisenberg picture, conjugating M_S backward through each round enlarges its support by at most one graph hop. After r rounds, the evolved effect X_S is supported on N_r(S). For any ρ, P[M_S] = Tr[ρ X_S]. If ρ and ρ′ coincide on N_r(S), then Tr[ρ X_S] = Tr[ρ′ X_S].

Theorem 2 (Independence beyond 2r without initial entanglement)
Assume the initial state is a product across vertices, ρ = ⊗_{v∈V} ρ_v. Let S_1, …, S_m ⊆ V have pairwise disjoint r-neighborhoods (equivalently, dist(S_i, S_j) > 2r for i ≠ j). For each i, let M_{S_i} be any event depending only on measurements in S_i, and let X_{S_i} be its Heisenberg-evolved effect from Theorem 1. Then the random outcomes on S_1, …, S_m are mutually independent; in particular,
Tr[ρ X_{S_1} ⋯ X_{S_m}] = ∏_{i=1}^m Tr[ρ_{N_r(S_i)} X_{S_i}].

Proof: Each X_{S_i} acts only on N_r(S_i); these supports are disjoint, and ρ factors across them. The trace of the product factors, which is precisely independence.

Corollary 3 (Exponential amplification without entanglement)
Let r ≥ 1. Fix k ≥ 1 and suppose there exists q < 1 such that, for every distribution on a length-k path segment that satisfies the LP constraints in Definition 6 (below), the probability the segment is internally proper is at most q. Then, for any r-round two-way quantum LOCAL algorithm on the n-cycle with product initial state, the success probability satisfies
P_success(C_n) ≤ q^{⌊n / (k + 2r)⌋}.

Proof: Partition the cycle into m = ⌊n / (k + 2r)⌋ disjoint windows of length k separated by gaps of size 2r. If the cycle is proper, each window is internally proper. Let E_i be “window i is internally proper,” and X_i its Heisenberg-evolved effect. Supports N_r(W_i) are disjoint, so E_i are independent by Theorem 2. By the segment-level bound, P[E_i] ≤ q. Hence P_success(C_n) ≤ ∏_i P[E_i] ≤ q^m.

Remark 4 (Necessity of the 2r separation)
For r = 1 on a path 0–1–2, one round suffices for node 1 to correlate nodes 0 and 2 (e.g., by broadcasting a private random bit), so outputs at distance 2 need not be independent. Thus 2r is tight in general.

Lemma 5 (Automorphism-covariant interior placement invariance for fixed geometries)
Fix an r-round uniform quantum LOCAL algorithm on a cycle C_n, with initial global state ρ_0. Let W ⊆ C_n be any contiguous window of length k. Consider t cores with lengths s = (s_1,…,s_t), and let δ = (δ_1,…,δ_{t−1}) be nonnegative integers encoding the inter-core gaps (δ_j is the number of vertices strictly between core j and core j+1). Let ω and ω′ be two r-gapped placements of (s, δ) inside W (i.e., all r-buffers lie in W and δ_j ≥ 2r). Assume ρ_0 is invariant under the rotations of C_n (reflections as well if the model is reflection-invariant). Then, for every core assignment ζ, the probability that the outputs on the cores equal ζ is the same for ω and ω′.

Proof: Let U_ω ⊆ W and U_{ω′} ⊆ W be the unions of the r-neighborhoods of the cores. Because ω and ω′ have the same geometry (s, δ), there exists a rotation (and possibly a reflection) π of C_n mapping U_ω to U_{ω′} and carrying each core in ω to the corresponding core in ω′. By Theorem 1, there exist positive operators X_ω and X_{ω′} supported on U_ω and U_{ω′} giving the core-event probabilities as Tr[ρ_0 X_ω] and Tr[ρ_0 X_{ω′}]. Uniformity implies covariance under π: X_{ω′} = U_π X_ω U_π^†. Since ρ_0 is invariant under π, Tr[ρ_0 X_{ω′}] = Tr[ρ_0 X_ω].

Definition 6 (Segment LP with geometry-aware interior invariance)
Fix Σ = {1,2,3}, r ≥ 1, k ≥ 1. A geometry is a pair (s, δ) with s = (s_1,…,s_t) positive integers and δ = (δ_1,…,δ_{t−1}) nonnegative integers. An r-gapped placement ω of (s, δ) inside [1..k] is a t-tuple of start positions (ω_1 < ⋯ < ω_t) such that each core C_j = [ω_j .. ω_j + s_j − 1] has its r-buffer C_j^{(+r)} = [ω_j − r .. ω_j + s_j − 1 + r] contained in [1..k], these r-buffers are pairwise disjoint, and ω_{j+1} = ω_j + s_j + δ_j. The variables are p_ψ for ψ ∈ Σ^k, with p_ψ ≥ 0 and ∑_ψ p_ψ = 1. The objective is to maximize ∑_ψ p_ψ · 1{ψ has no equal-color adjacencies on edges (i,i+1), i = 1..k−1}. The constraints enforce interior placement invariance within fixed geometries: for every geometry (s, δ), every core assignment ζ, and every two r-gapped placements ω, ω′ of (s, δ) inside [1..k], the marginal ∑_{ψ: ∀j ψ|_{C_j(ω)} = ζ_j} p_ψ equals ∑_{ψ: ∀j ψ|_{C_j(ω′)} = ζ_j} p_ψ. Denote the optimum by q(r,k).

Remark 6.1 (Soundness regimes and symmetry)
These equality constraints are necessary for r-round uniform algorithms under either of the following assumptions: (i) product initial states with identical local marginals (⊗_v ρ; rotation-invariant), or (ii) arbitrary shared entanglement provided the initial global state is invariant under the rotations of the cycle (reflections as well if the model is reflection-invariant). Without such symmetry in the initial state, the constraints need not hold across placements, even within the same window.

Lemma 7 (Monotonicity in k)
For all r ≥ 1 and k ≥ 1, q(r,k+1) ≤ q(r,k).

Proof: Let p be feasible for (r,k+1). Its marginal p′ on the first k coordinates satisfies all geometry-aware invariance constraints for (r,k): any placement inside [1..k] remains a placement inside [1..k+1], and equalities are preserved under marginalization. Moreover 1{proper on k+1} ≤ 1{proper on first k} pointwise, hence ∑_ψ p_ψ·1{proper on k+1} ≤ ∑_{ψ′} p′_{ψ′}·1{proper on k}. Taking suprema over feasible p proves the claim.

Lemma 8 (Monotonicity in r)
For all r ≥ 1 and k ≥ 1, q(r+1,k) ≥ q(r,k).

Proof: As r increases to r+1, the set of admissible placements (and hence the set of equality constraints) for any geometry (s, δ) weakens: some placements cease to be admissible because r-buffers no longer fit or become non-disjoint. Therefore the feasible set enlarges, and the supremum cannot decrease.

Lemma 9 (Extreme-point optimality)
For each fixed (r,k), the feasible region of Definition 6 is a nonempty polytope in R^{3^k} defined by linear equalities, nonnegativity, and normalization. Hence an optimal solution exists and can be taken at an extreme point (basic feasible solution).

Proof: Nonemptiness follows from the uniform distribution p_ψ = 3^{-k}, which satisfies all equality constraints. Boundedness follows from nonnegativity and normalization. Linear programming theory guarantees that a maximum exists and is achieved at an extreme point of the polytope.

Corollary 10 (Constant-error bound with entanglement under automorphism invariance)
Let r ≥ 1 and k ≥ 1, and let q(r,k) be as in Definition 6. Consider any r-round uniform quantum LOCAL algorithm on C_n whose initial global state is invariant under the rotations of the cycle. Then, for all n ≥ k, the success probability obeys P_success(C_n) ≤ q(r,k).

Proof: Fix any contiguous window W ⊆ C_n of length k. If the cycle is properly colored, then W is internally proper. By Lemma 5, the distribution on W (restricted to events supported on geometry-aware r-buffered placements) satisfies the invariance constraints of Definition 6. Therefore it is feasible for the LP, and the probability that W is internally proper is at most q(r,k). Since {cycle proper} ⊆ {W proper}, P_success(C_n) ≤ q(r,k). (Necessity of the symmetry assumption is illustrated by the EPR counterexample in the notes.)
Proposition 11 (Trivialization of the segment LP under Definition 6)
For every r ≥ 1 and k ≥ 1, the optimum q(r,k) in Definition 6 satisfies q(r,k) = 1.

Proof.
Let Σ = {1,2,3}. Consider the order-1 Markov chain (X_t) with stationary distribution u(i) = 1/3 for i∈Σ and transition matrix P with P(i,i)=0 and P(i,j)=1/2 for j≠i. For k ≥ 1, define a distribution p on Σ^k by drawing (X_1,…,X_k) according to X_1 ∼ u and X_{t+1} | X_t ∼ P.

(i) Objective value. Because P(i,i)=0, adjacent colors are never equal: P[X_t = X_{t+1}] = 0 for all t. Therefore p assigns probability 1 to the event “ψ has no equal-color adjacencies on edges (t,t+1), t=1..k−1,” and the objective equals 1.

(ii) Feasibility (geometry-aware interior invariance). Since u is stationary for P, the process (X_t) is strictly stationary. Fix any geometry (s,δ) and two r-gapped placements ω, ω′ of (s,δ) inside [1..k]. Let C(ω) ⊆ {1,…,k} be the ordered list of core indices of ω (similarly C(ω′)). Because ω and ω′ have the same (s,δ), there exists an integer shift τ such that C(ω′) = C(ω) + τ (coordinatewise). Strict stationarity implies that the joint law of (X_i)_{i∈C(ω)} equals the joint law of (X_{i+τ})_{i∈C(ω)} = (X_j)_{j∈C(ω′)}. Hence for every core assignment ζ, the marginal probability that the cores equal ζ is the same for ω and ω′. Nonnegativity and normalization of p are immediate. Thus p is feasible with objective value 1, and so q(r,k) ≥ 1. Since the objective is at most 1 for all feasible p, q(r,k)=1.

Corollary 12 (No segment-LP constant-error bound in two-way under Definition 6)
Under Definition 6, the segment LP cannot certify any nontrivial bound for two-way algorithms: for all r,k we have q(r,k)=1. Consequently, Corollary 10 specializes to the trivial inequality P_success(C_n) ≤ 1 in the entanglement-allowed regime and gives no constant-error lower bound.

Remark 12.1 (Scope). Proposition 11 does not contradict the soundness of the constraints in Definition 6 for actual r-round algorithms under the symmetry assumptions of Remark 6.1; it shows that these constraints alone are insufficient. To obtain nontrivial upper bounds in the product-state regime, independence across sets with disjoint r-neighborhoods (>2r separation) must be incorporated, which is nonlinear (factorization). In the entanglement-allowed regime, no such independence holds, so segment-based linear constraints of this form cannot lead to q<1.
