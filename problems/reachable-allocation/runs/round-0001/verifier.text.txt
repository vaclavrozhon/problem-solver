{
  "feedback_md": "Overall assessment: The four provers disagree on a key structural point: whether a globally Pareto-efficient (PE) allocation in a Shapley–Scarf housing market with strict preferences must be the TTC outcome (and hence unique). Prover 1 bases a full O(n^2) algorithm on this claim; Provers 2 and 4 explicitly reject uniqueness and argue TTC is only a sufficient certificate. This disagreement is the primary blocking issue and must be resolved rigorously.\n\nKey audits\n\n- On “reachable ⇒ IR”: Correct. Any sequence of allowed edge-swaps strictly improves the two participants and leaves others unchanged, so each agent’s object improves monotonically relative to their initial endowment. Thus any reachable allocation is individually rational (IR). This can safely go to proofs.md.\n\n- On global PO verification: Correct. The standard “trading (improvement) digraph” test is polynomial: build a digraph with arcs agent→object for objects strictly preferred to their current assignment and object→owner(object). An allocation is globally PO iff this digraph has no directed cycle. This is a known characterization; can be written formally in proofs.md and used to check candidates.\n\n- On “IR+PO ⇒ TTC (unique)”: This is the linchpin of Prover 1’s reduction and is presently unproven in the drafts. It is NOT immediate that global PO plus IR implies core (blocking coalitions are allowed to harm outsiders, so absence of Pareto improvements does not rule out core blocking). The claim may be true or false; we need a rigorous proof or a counterexample. Until this is settled, the O(n^2) algorithm that reduces TREE-REACHABLE-PE to reachability of TTC is not validated.\n\n- On TTC as a sufficient certificate: Correct. TTC is globally PO and unique in the core. If TTC is reachable (reachability to a fixed target on a tree is poly-time), then we have a valid YES-witness. This gives a one-sided polynomial-time test.\n\n- On NP membership (Provers 2, 4): Correct. A certificate is a candidate matching µ*. Verification is polynomial: (i) check reachability µ0 → µ* on the tree (O(n^2) via standard “good edge” scheduling), (ii) check that µ* is globally PO by the cycle test (O(n^2)). This should be added to proofs.md.\n\n- On FPT by treewidth (Prover 2): Plausible. A standard DP over a nice tree decomposition storing partial injections (agent→object identities) yields n^{O(w)} states; at the root, filter candidates by reachability and global PO. While not optimized, the approach is credible as an existence DP and provides concrete parameterized progress.\n\n- On stars and paths special handling (Provers 3, 4): Claims about stars require care. Computing a unique “sink” under swap dynamics is standard for stars, but “sink” need not be globally PO; thus the proposed star procedure must include the global PO test after computing the sink (as Prover 4 suggests). These are tangential to the main tree question but consistent.\n\nBlocking issues\n\n1) The equivalence or non-equivalence of IR+global PO with the TTC outcome is unresolved in the drafts. Prover 1 relies critically on this; Provers 2/4 dispute it. We need either a self-contained proof (inductive TTC-style argument) or a concrete counterexample (small n) where an IR+global PO allocation differs from TTC.\n\n2) If uniqueness fails, the complete polynomial-time algorithm claimed by Prover 1 collapses to a one-sided test (TTC reachability). We would then fall back to NP-membership, FPT in treewidth, and sufficient-condition algorithms only, leaving the general polynomial-time decidability on trees open.\n\nActionable next steps\n\n- Prover 1: Provide a rigorous, complete proof that in Shapley–Scarf with strict preferences, the set of allocations that are both IR (w.r.t. initial endowments) and globally PO is a singleton equal to TTC. Preferably an inductive TTC-based proof that any IR+PO allocation must assign the first-round TTC cycle agents their top objects, recurse, etc. If this fails, produce a minimal counterexample (n ≤ 6) via exhaustive search.\n\n- Prover 2: Flesh out the treewidth-FPT DP: define bag states (partial injection, used objects, and boundary consistency), transitions (introduce/forget/join), and time bound. Also implement the improvement-digraph PO check and target reachability check as root filters. Try to generate small instances where TTC is unreachable yet some other globally PO allocation is reachable—this would falsify Prover 1’s reduction.\n\n- Prover 3/4: For stars, formalize the unique-sink result and verify that the sink, when it exists, can be globally dominated; include the global PO cycle test post hoc. For paths, keep TTC-as-certificate and provide explicit counterexamples where no swap applies yet initial allocation is not globally PO.\n\nGiven the above, we cannot yet promote an O(n^2) solution. We can safely add to proofs.md: (i) reachable ⇒ IR lemma; (ii) NP membership with formal verification procedures; (iii) TTC-as-certificate (sufficient) and tree-target reachability on trees; (iv) the improvement-digraph PO characterization.\n",
  "summary_md": "Core progress: Established two solid building blocks: (i) any reachable allocation is IR; (ii) TREE-REACHABLE-PE is in NP via (a) O(n^2) reachability-to-target on trees and (b) O(n^2) global PO verification by improvement-cycle detection. TTC reachability is a correct one-sided polynomial-time certificate (if reachable, return TTC). The crucial claim enabling a full O(n^2) algorithm—that the unique IR+global-PO allocation equals TTC—remains unproven and is disputed by other provers. Until a rigorous proof or counterexample is supplied, the general polynomial-time decidability on trees is unresolved. A plausible FPT-in-treewidth DP was outlined. Next: prove or refute IR+PO uniqueness to TTC; otherwise refine parameterized and special-case algorithms.",
  "verdict": "uncertain",
  "blocking_issues": [
    "Unproven claim: IR+global Pareto-efficiency equals the TTC outcome (uniqueness).",
    "No example yet to refute or confirm uniqueness (need exhaustive search for small n or a formal proof).",
    "Main polynomial-time algorithm hinges on the above; without it we only have a one-sided TTC-reachability test."
  ],
  "per_prover": [
    {
      "prover_id": "01",
      "brief_feedback": "Your reduction hinges on IR+global PO ⇔ TTC (unique). This is the pivotal unproven step. Provide a complete, formal proof (preferably inductive via TTC cycles) or a counterexample. Without it, your O(n^2) algorithm is only a sufficient test (TTC reachable).",
      "score": "uncertain"
    },
    {
      "prover_id": "02",
      "brief_feedback": "Solid: NP membership and TTC-as-certificate are correct; the improvement-digraph PO test is standard. The FPT-in-treewidth DP is promising—please detail states/transitions and complexity. Try to find a small instance where TTC is unreachable but another reachable globally PO exists.",
      "score": "promising"
    },
    {
      "prover_id": "03",
      "brief_feedback": "Be careful distinguishing global PO from PO within the reachable set. Claims that the general tree case is open need this distinction. The star/path remarks are fine but peripheral; ensure to include a global PO test when proposing star routines.",
      "score": "unlikely"
    },
    {
      "prover_id": "04",
      "brief_feedback": "NP membership and TTC-sufficient test are correct. The stars result requires care: compute the sink then verify global PO by the cycle test. Avoid claiming TTC is only sufficient without addressing uniqueness of IR+PO.",
      "score": "uncertain"
    }
  ],
  "notes_update": {
    "action": "append",
    "content": "Research log (round X)\n\n- Problem recap: Tree T with agents at vertices, initial endowments h_v, strict preferences. Allowed swaps occur on edges when both endpoints strictly prefer the swap. TREE-REACHABLE-PE asks if there exists a reachable allocation that is globally Pareto-efficient (PO), and to produce one if it exists.\n\n- Settled facts:\n  - Any allocation reachable via allowed swaps is individually rational (IR) w.r.t. the initial endowment.\n  - For a fixed target matching on a tree, reachability by allowed swaps can be decided in O(n^2) time (good-edge scheduling).\n  - Global PO of a given allocation can be checked in O(n^2) via the standard improvement-digraph (agent→objects strictly preferred to current; object→current owner); PO ⇔ no directed cycle.\n  - TTC is globally PO and is the unique core allocation under strict preferences. Thus: TTC reachability is a valid one-sided poly-time test (if reachable, answer YES and output TTC with a swap sequence).\n\n- Open pivot: Is the TTC allocation the unique allocation that is both IR and globally PO? If yes, then TREE-REACHABLE-PE reduces to checking reachability of TTC (O(n^2)). If not, the TTC test is incomplete and the general problem remains open.\n\n- Action items:\n  1) Attempt a formal proof that any IR+PO allocation must coincide with TTC, by inductively showing that the first-round TTC cycle agents must receive their top objects in any IR+PO allocation (and recursing). If this fails, search small instances (n ≤ 6) for an IR+PO allocation ≠ TTC.\n  2) Regardless, maintain TTC-as-certificate: compute TTC, then run the tree reachability routine; if reachable, we get a constructive solution.\n  3) Parameterized approach: implement a nice tree-decomposition DP (width w) that enumerates partial injections; at the root, filter by (a) reachability from µ0, (b) global PO. This yields an FPT algorithm in treewidth.\n\n- Examples recorded:\n  - Path A–B–C with A: c≻a≻b, B: b≻a≻c, C: a≻c≻b: no swap applies, and the initial allocation is not globally PO (the 3-cycle allocation dominates). Serves as a caution that “no allowed swap” ≠ global PO even on paths.\n"
  },
  "proofs_update": {
    "action": "append",
    "content": "Basic lemmas and verification procedures\n\nLemma 1 (Reachable ⇒ IR). Let µ0 be the initial endowment and let µk be obtained from µ0 by a finite sequence of allowed swaps along edges of a tree (each swap strictly improves both participating agents and leaves others unchanged). Then for each agent v, µk(v) is weakly preferred to µ0(v). In particular, every reachable allocation is individually rational w.r.t. the initial endowment.\nProof. At each swap, only the two participants strictly improve; all others keep their object. Thus each agent’s object along the sequence is monotonically nondecreasing in their preference order. If they never swap, they keep their endowment; if they swap, they strictly improve at that step. Hence the final object is weakly preferred to the endowment.\n\nLemma 2 (Global PO via improvement digraph). Fix an allocation µ. Construct a directed graph Dµ on the set of agents and objects with arcs (a → b) for every agent a and object b such that b ≻_a µ(a), and arcs (b → owner_µ(b)) from each object to its owner under µ. Then µ is globally Pareto-efficient if and only if Dµ has no directed cycle.\nProof sketch. If Dµ contains a directed cycle, it alternates agents/objects; traversing the cycle gives each agent on the cycle an object they strictly prefer to µ, producing a Pareto improvement (others unchanged). Conversely, if µ is not PO, there exists an allocation ν that weakly improves all agents and strictly improves at least one. Tracing the predecessor–successor relation of object ownership from µ to ν yields a directed cycle in Dµ along which all agents strictly improve. (This is the standard “trading cycle” characterization; see, e.g., standard texts on house allocation with strict preferences.)\n\nTheorem 3 (TREE-REACHABLE-PE is in NP). The decision version—given a tree T, initial allocation µ0, and strict preferences, decide whether there exists a reachable allocation that is globally Pareto-efficient—belongs to NP.\nProof. A certificate consists of a target allocation µ*. Verification is polynomial-time: (i) Decide reachability µ0 → µ* by allowed swaps on the tree using the “good-edge” scheduler (O(n^2)). (ii) Verify global PO of µ* using Lemma 2 in O(n^2) time by cycle detection. If both pass, accept; otherwise reject.\n\nProposition 4 (TTC as a sufficient certificate). Compute the TTC outcome µ_TTC of the housing market (agents with initial endowments µ0 and strict preferences). If µ_TTC is reachable from µ0 by allowed swaps on the given tree, then µ_TTC is a correct YES-witness: it is globally Pareto-efficient and reachable. If not reachable, this test is inconclusive.\nProof. TTC is globally PO in Shapley–Scarf markets with strict preferences. Reachability is decided as above; if reachable, return the witnessed swap sequence and µ_TTC.\n\nRemark 5 (Reachability to a fixed target on trees). Given a tree T, an initial allocation µ, and a target allocation µ*, reachability by allowed swaps can be decided in O(n^2) time via the standard good-edge approach: maintain edges whose endpoints need to cross next along their unique dipaths toward µ*; a good edge always exists unless the current allocation equals µ*. Swapping on any good edge monotonically advances agents; maintaining the set of good edges yields the decision and a witness sequence when reachable. (Adapted from known results for the object-moving model.)\n"
  },
  "output_update": null
}