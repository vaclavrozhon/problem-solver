Ideas

- Target problem: TREE-REACHABLE-PE on trees asks whether there exists a reachable allocation (via local improving swaps on edges) that is globally Pareto-efficient (no allocation Pareto-dominates it), and to produce one.
- We record three rigorously checkable pillars that reduce the search space and certify positive instances:
  1) Any reachable allocation is individually rational (IR) w.r.t. the initial endowment. Hence any YES-witness must be IR.
  2) Any globally PO allocation cannot admit any allowed swap (it is swap-stable). Thus any YES-witness must be a reachable swap-stable matching.
  3) TTC is globally PO. If the TTC allocation is reachable on the tree, we immediately have a constructive YES-certificate (compute TTC and a swap sequence to it).
- Complexity placement: TREE-REACHABLE-PE ∈ NP (certificate: a target matching µ; verifier checks tree-reachability to µ in O(n^2) and global PO in O(n^2)).
- Special cases that are decidable in polynomial time:
  - If the initial allocation µ0 is a sink (no allowed swaps), then the reachable set is {µ0}. Answer is YES iff µ0 is globally PO (checkable in O(n^2)), else NO.
  - If TTC is reachable (checkable in O(n^2) via tree target-reachability), return TTC and a swap sequence.
- Open pivot: It is false (or at least unproven) that IR + global PO forces the TTC outcome. Hence the “reduce to TTC reachability” route is insufficient to decide all instances.

Lemmas and Proofs

Lemma 1 (Reachable ⇒ IR). Let µ0 be the initial matching. If µ is obtained from µ0 by a sequence of allowed swaps, then for every agent a we have µ(a) ≽_a µ0(a).
Proof. Each swap strictly improves the two endpoints and leaves other agents unchanged. Thus each agent’s assignment is monotonically nondecreasing along the sequence w.r.t. their preference, proving IR.

Lemma 2 (Globally PO ⇒ swap-stable). If µ is globally Pareto-efficient, then there is no edge {u,v} such that u and v both strictly prefer each other’s objects (i.e., no allowed swap at µ).
Proof. If such an edge exists, performing that single swap yields a matching in which u and v are strictly better and all others unchanged. This Pareto-dominates µ, contradicting global PO.

Lemma 3 (NP membership). TREE-REACHABLE-PE ∈ NP.
Proof. Given a matching µ as a certificate, the verifier runs: (i) Reachability on the tree from µ0 to µ in O(n^2) time using the “good-edge” scheduling (see Gourvès–Lesca–Wilczynski; also summarized in the notes), which constructs a sequence of allowed swaps or rejects. (ii) A global PO test for µ via the improvement digraph: build a directed graph with arcs a→b for each object b ≻_a µ(a), and arcs b→owner_µ(b); µ is globally PO iff this digraph has no directed cycle. This is O(n^2). Both succeed in polynomial time.

Lemma 4 (TTC as a sufficient certificate). Let µTTC be the TTC outcome of the housing market instance. If µTTC is reachable on the tree, then it is a YES-witness for TREE-REACHABLE-PE.
Proof. TTC is globally Pareto-efficient under strict preferences; if reachable, we can output it and the swap sequence from the tree-reachability routine.

Example (NO instance on a path)

Path A–B–C with initial endowment a,b,c to A,B,C and preferences:
- A: c ≻ a ≻ b
- B: b ≻ a ≻ c
- C: a ≻ c ≻ b
No allowed swap at µ0 (each adjacent pair has at least one endpoint that does not prefer swapping), so reach(µ0) = {µ0}. The allocation µ0 is not globally PO (the 3-cycle A:c, B:b, C:a Pareto-dominates it). Hence, by the sink test above, the answer is NO.

Algorithmic Consequences (partial, auditable)

- Polynomial-time one-sided decision and construction:
  - Compute µTTC (O(n^2)). If µTTC is tree-reachable (O(n^2)), output YES and the corresponding swap sequence to µTTC.
  - Else, compute whether µ0 is a sink. If yes, test whether µ0 is globally PO (improvement digraph cycle test). If PO, output µ0; else NO.
- Necessary conditions filter (poly-time): Any YES-witness µ must be (i) IR (Lemma 1) and (ii) swap-stable (Lemma 2). Thus we can discard any candidate failing either test.
- NP upper bound as a rigorous baseline (Lemma 3).

Obstacles

- The crucial equivalence “IR + global PO ⇒ TTC” does not follow from standard core arguments: global PO does not preclude core blocking coalitions (which may harm outsiders). Thus we cannot reduce TREE-REACHABLE-PE to TTC reachability in general.
- Searching the space of reachable swap-stable matchings may be complex; sinks of the local swap dynamics need not be unique a priori, and a sink need not be globally PO (as the path example shows).

Next steps

- Prove or refute uniqueness of sinks on trees under these swap dynamics. If unique, the problem collapses to checking global PO of that unique sink.
- Parameterized algorithm by treewidth: Develop a DP over a nice tree decomposition that (i) implicitly characterizes reachable matchings for the processed subgraph compatible across separators (using dipath consistency and good-edge feasibility), and (ii) at the root filters candidates by the improvement-digraph acyclicity. Trees have treewidth 1, suggesting an n·poly(n)-state DP may be within reach.
- Construct hardness reductions (from Reachable Object on trees) via gadgets that force global PO to hinge on a designated reachability event in the embedded instance. A first micro-gadget library should establish that certain local PO violations create directed cycles in the improvement digraph unless a specific edge-swap pattern (encoding “agent a reaches object b”) occurs.

What can go into proofs.md now

- Formal proofs of Lemmas 1–4.
- The sink special case: correctness proof that if µ0 is a sink, then reach(µ0) = {µ0}, hence the YES/NO decision reduces to the global PO test on µ0.
- The NP verifier details: “good-edge” reachability to a fixed target on trees, and the improvement-digraph cycle characterization of global PO.

Summary

- TREE-REACHABLE-PE on trees is in NP. We gave two necessary filters (IR and swap-stability) and a sufficient certificate (TTC reachability) that yields a polynomial-time constructive YES whenever it applies. A sink special case is fully decidable in O(n^2). The main open direction remains a complete polynomial-time decision procedure (or NP-hardness) for the general tree case; we outlined DP (treewidth-1) and reduction strategies as next auditable steps.
