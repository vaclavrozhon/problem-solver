{
  "content": "Ideas\n\n- Resolve the central pivot: In Shapley\u2013Scarf housing markets with strict preferences (one agent per house, endowments given), the set of globally Pareto-efficient (PO) allocations coincides with the core; under strict preferences the core is a singleton and equals the TTC outcome. Hence there is a unique globally PO allocation, namely \u00b5TTC. Therefore, on any network of agents (here, a tree constraint on allowed swaps), TREE-REACHABLE-PE reduces to checking whether \u00b5TTC is reachable from the initial endowment via allowed edge swaps; if yes, output \u00b5TTC together with a witness swap sequence; otherwise, report \u201cnone exists.\u201d This yields a polynomial-time algorithm on trees.\n\nProofs\n\nLemma 1 (PO \u21d4 Core in Shapley\u2013Scarf). Let \u00b5 be any allocation. Then \u00b5 is globally Pareto-efficient if and only if it belongs to the core.\nProof. \u201cCore \u21d2 PO\u201d: If \u00b5 were Pareto-dominated by some feasible allocation \u00b5\u2032 (i.e., every agent weakly prefers \u00b5\u2032 to \u00b5 and at least one strictly prefers), then the grand coalition would weakly block \u00b5 by \u00b5\u2032, contradicting core membership. \u201cPO \u21d2 Core\u201d: If \u00b5 were blocked by some coalition S via a reassignment \u03bd of the initial houses of S such that each a \u2208 S weakly prefers \u03bd(a) to \u00b5(a) and at least one strictly prefers it, then the global allocation \u00b5\u0302 that coincides with \u03bd on S and with \u00b5 on V \\ S would Pareto-dominate \u00b5, contradicting PO. \u220e\n\nFact 2 (Uniqueness of the core). In the Shapley\u2013Scarf housing market with strict preferences, the core is a singleton equal to the TTC allocation \u00b5TTC (Shapley\u2013Scarf, 1974). Consequently, by Lemma 1, the unique globally PO allocation is \u00b5TTC.\n\nCorollary 3 (Characterization of reachable PO). Fix a tree T, initial endowment \u00b50, and strict preferences. There exists a reachable globally PO allocation if and only if \u00b5TTC \u2208 reach(\u00b50) (with respect to allowed swaps on edges). Moreover, the only possible reachable PO allocation is \u00b5TTC.\nProof. The unique globally PO allocation is \u00b5TTC. If \u00b5TTC is reachable, we are done. If not, there is no other globally PO allocation to reach. \u220e\n\nAlgorithm and complexity\n\n- Step 1: Compute \u00b5TTC in O(n^2).\n- Step 2: Decide reachability of \u00b5TTC from \u00b50 on the tree via allowed swaps. Use the standard \u201cgood-edge\u201d scheduler on trees: repeatedly swap across any edge whose endpoints must cross next along their unique dipaths toward their targets in \u00b5TTC. This yields an O(n^2) reachability algorithm and, if successful, a witness sequence.\n- Output: If reachable, output the swap sequence to \u00b5TTC; else report \u201cnone exists.\u201d\nOverall time: O(n^2).\n\nExamples\n\n- Path A\u2013B\u2013C with initial (A:a,B:b,C:c) and preferences A: c\u227ba\u227bb, B: b\u227ba\u227bc, C: a\u227bc\u227bb. The TTC outcome is (A:c,B:b,C:a), but no allowed edge swap applies, so \u00b5TTC is not reachable; by Corollary 3 there is no reachable globally PO allocation.\n- Star (task\u2019s example). The exhibited sequence (B,C),(B,D),(B,A) reaches a PO matching; by uniqueness it must be \u00b5TTC.\n\nObstacles clarified\n\n- Prior disagreement on whether IR+PO implies TTC is resolved: global PO already implies core membership, hence equals TTC under strict preferences. IR is automatic for any reachable allocation but is not needed for the reduction.\n\nNext steps (for verifier integration)\n\n- Add to proofs.md: (i) Lemma 1 (PO \u21d4 Core) with precise blocking definition (weakly better for all in S, at least one strict), (ii) citation/statement of uniqueness of the core under strict preferences, (iii) Corollary 3.\n- Add to output.md: Theorem: TREE-REACHABLE-PE on trees is decidable in O(n^2) by computing \u00b5TTC and testing its reachability; if reachable, return \u00b5TTC and a swap sequence; else report none.\n- Implementation note: include the O(n^2) tree reachability routine (good-edge scheduler) and produce witnesses when reachable.\n"
}