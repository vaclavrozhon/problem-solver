Ideas

- Resolve the central pivot: In Shapley–Scarf housing markets with strict preferences (one agent per house, endowments given), the set of globally Pareto-efficient (PO) allocations coincides with the core; under strict preferences the core is a singleton and equals the TTC outcome. Hence there is a unique globally PO allocation, namely µTTC. Therefore, on any network of agents (here, a tree constraint on allowed swaps), TREE-REACHABLE-PE reduces to checking whether µTTC is reachable from the initial endowment via allowed edge swaps; if yes, output µTTC together with a witness swap sequence; otherwise, report “none exists.” This yields a polynomial-time algorithm on trees.

Proofs

Lemma 1 (PO ⇔ Core in Shapley–Scarf). Let µ be any allocation. Then µ is globally Pareto-efficient if and only if it belongs to the core.
Proof. “Core ⇒ PO”: If µ were Pareto-dominated by some feasible allocation µ′ (i.e., every agent weakly prefers µ′ to µ and at least one strictly prefers), then the grand coalition would weakly block µ by µ′, contradicting core membership. “PO ⇒ Core”: If µ were blocked by some coalition S via a reassignment ν of the initial houses of S such that each a ∈ S weakly prefers ν(a) to µ(a) and at least one strictly prefers it, then the global allocation µ̂ that coincides with ν on S and with µ on V \ S would Pareto-dominate µ, contradicting PO. ∎

Fact 2 (Uniqueness of the core). In the Shapley–Scarf housing market with strict preferences, the core is a singleton equal to the TTC allocation µTTC (Shapley–Scarf, 1974). Consequently, by Lemma 1, the unique globally PO allocation is µTTC.

Corollary 3 (Characterization of reachable PO). Fix a tree T, initial endowment µ0, and strict preferences. There exists a reachable globally PO allocation if and only if µTTC ∈ reach(µ0) (with respect to allowed swaps on edges). Moreover, the only possible reachable PO allocation is µTTC.
Proof. The unique globally PO allocation is µTTC. If µTTC is reachable, we are done. If not, there is no other globally PO allocation to reach. ∎

Algorithm and complexity

- Step 1: Compute µTTC in O(n^2).
- Step 2: Decide reachability of µTTC from µ0 on the tree via allowed swaps. Use the standard “good-edge” scheduler on trees: repeatedly swap across any edge whose endpoints must cross next along their unique dipaths toward their targets in µTTC. This yields an O(n^2) reachability algorithm and, if successful, a witness sequence.
- Output: If reachable, output the swap sequence to µTTC; else report “none exists.”
Overall time: O(n^2).

Examples

- Path A–B–C with initial (A:a,B:b,C:c) and preferences A: c≻a≻b, B: b≻a≻c, C: a≻c≻b. The TTC outcome is (A:c,B:b,C:a), but no allowed edge swap applies, so µTTC is not reachable; by Corollary 3 there is no reachable globally PO allocation.
- Star (task’s example). The exhibited sequence (B,C),(B,D),(B,A) reaches a PO matching; by uniqueness it must be µTTC.

Obstacles clarified

- Prior disagreement on whether IR+PO implies TTC is resolved: global PO already implies core membership, hence equals TTC under strict preferences. IR is automatic for any reachable allocation but is not needed for the reduction.

Next steps (for verifier integration)

- Add to proofs.md: (i) Lemma 1 (PO ⇔ Core) with precise blocking definition (weakly better for all in S, at least one strict), (ii) citation/statement of uniqueness of the core under strict preferences, (iii) Corollary 3.
- Add to output.md: Theorem: TREE-REACHABLE-PE on trees is decidable in O(n^2) by computing µTTC and testing its reachability; if reachable, return µTTC and a swap sequence; else report none.
- Implementation note: include the O(n^2) tree reachability routine (good-edge scheduler) and produce witnesses when reachable.
