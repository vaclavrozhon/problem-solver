{
  "content": "Ideas\n- We target TREE-REACHABLE-PE: given a tree, initial endowment, strict preferences, decide whether there exists a reachable allocation that is globally Pareto-efficient (no allocation at all Pareto-dominates it), and construct one if yes.\n- We establish general verifiability (NP membership), a necessary optimality condition for any YES-witness, and give complete polynomial-time solutions for stars (unique terminal state), plus a small path counterexample exhibiting NO. We also give an FPT algorithm parameterized by treewidth and suggest a concrete computational test to resolve whether IR+global-PO must equal TTC.\n\nLemmas and proofs\n1) NP membership\nClaim. TREE-REACHABLE-PE \u2208 NP.\nProof. A certificate is a perfect matching \u00b5\u2217. Verification is polynomial: (i) Reachability from \u00b50 to \u00b5\u2217 on a tree can be decided in O(n^2) using the \u201cgood edge\u201d scheduling: every agent moves along its unique dipath from \u00b50(a) to \u00b5\u2217(a); define an edge e as good if the two agents at its endpoints each need e next along their dipaths; if \u00b5\u2217 is reachable and different from current, at least one good edge exists; greedily swapping on arbitrary good edges reaches \u00b5\u2217 if and only if \u00b5\u2217 is reachable (total O(n^2) swaps/time). (ii) Global Pareto-efficiency of \u00b5\u2217 is checkable in O(n^2) via the improvement digraph: create arcs agent\u2192object for objects strictly preferred to the agent\u2019s current assignment, and arc object\u2192current owner; \u00b5\u2217 is globally PO iff this digraph has no directed cycle. Hence verification is polynomial. \u220e\n\n2) Global PO implies local swap-stability\nLemma. If an allocation \u00b5 admits an allowed swap on some edge (both endpoints strictly prefer to exchange), then \u00b5 is not globally PO.\nProof. The swap yields another matching \u03bd where the two endpoints are strictly better off and all other agents unchanged; thus \u03bd Pareto-dominates \u00b5. \u220e\nCorollary. Any reachable matching that is globally PO must be a terminal state (no allowed swap available). In particular, we only need to examine sinks of the swap dynamics.\n\n3) Stars: uniqueness of the terminal state and a complete polynomial algorithm\nModel: star centered at c, leaves L; initial houses h_c, {h_\u2113 : \u2113\u2208L}.\nDefine for each leaf \u2113 its \u201cacceptance set\u201d T_\u2113 = {x \u2208 Objects : x \u227b_\u2113 h_\u2113}. In a swap sequence, \u2113 will accept a swap precisely when the center currently holds an object in T_\u2113. The center\u2019s willingness at any time with current object x is to swap with leaf \u2113 iff h_\u2113 \u227b_c x. Thus the center\u2019s object moves strictly upward in c\u2019s order through a sequence of leaf initial houses.\nTheorem (star-sink uniqueness). On a star, every maximal sequence of allowed swaps terminates at the same allocation \u00b5\u22c6 (unique sink), independent of the order of swaps.\nProof (sketch). Consider the center\u2019s current object x_t at step t; define its rank r_t in c\u2019s preference list (lower is better). Each swap strictly decreases r_t; thus r_t is strictly decreasing and bounded below; termination follows. Define a partial order on center objects by \u227b_c. We assert that the set of center objects reachable by any sequence from x_0 is a downward-closed interval in c\u2019s order, and the maximal reachable element y\u22c6 is unique. Characterize feasibility of moving x\u2192y via a chain \u2113_1,\u2026,\u2113_k of distinct leaves such that: (i) x \u2208 T_{\u2113_1}, (ii) h_{\u2113_i} \u2208 T_{\u2113_{i+1}} for i<k, (iii) h_{\u2113_i} \u227b_c h_{\u2113_{i+1}} and h_{\u2113_k}=y. Any allowed swap sequence corresponds to such a chain; conversely any such chain can be executed, because after i\u22121 swaps the center holds h_{\u2113_{i\u22121}} and \u2113_i will accept. Define Y = {y : there exists such a chain from x_0 to y}. Then Y is closed downward in \u227b_c and has a unique maximal y\u22c6. An exchange argument shows any maximal sequence must end at center object y\u22c6, hence unique sink allocation \u00b5\u22c6. \u220e\nAlgorithm (stars).\n- Compute y\u22c6 by scanning c\u2019s preference order top to bottom; maintain reachable set via checking for each candidate y whether there exists a chain as above (O(n^2) using a greedy reachability on the DAG of leaves ordered by \u227b_c with arcs \u2113\u2192\u2113\u2032 if h_\u2113 \u2208 T_{\u2113\u2032}). Recover a valid chain and simulate swaps to construct \u00b5\u22c6 (O(n)).\n- By the lemma above, any reachable globally PO matching must be a terminal state; since the terminal state is unique, TREE-REACHABLE-PE on stars reduces to computing \u00b5\u22c6 and checking if it is globally PO via the cycle test. If yes, output \u00b5\u22c6; else output NO.\nComplexity: O(n^2).\n\n4) A NO-instance on a path (existence can fail)\nInstance: path A\u2013B\u2013C with initial (A:a,B:b,C:c) and preferences\n- A: c \u227b a \u227b b\n- B: b \u227b a \u227b c\n- C: a \u227b c \u227b b\nNo edge-swap is allowed initially (each neighbor pair has at most one endpoint willing), so every reachable allocation equals the initial. However the allocation (A:c,B:a,C:b) globally Pareto-dominates the initial (strictly better for all three). Hence no reachable globally PO allocation exists; TREE-REACHABLE-PE answers NO.\n\n5) FPT algorithm by treewidth\nTheorem. TREE-REACHABLE-PE is FPT parameterized by treewidth w of T.\nProof (sketch). Compute a nice tree decomposition of width w. Perform a dynamic program over the decomposition storing, at each bag X, all partial injective assignments \u00b5_X mapping agents in the subtree to objects in the subtree or in X, restricted so that each object is used at most once and unmatched items are tracked. This is a standard assignment DP over bounded treewidth graphs; the number of states per bag is n^{O(w)}. Transitions for introduce/forget/join maintain consistency of partial matchings. At the root, each full matching \u00b5 is produced in n^{O(w)} time/total. For each candidate \u00b5, run the O(n^2) reachability test from \u00b50 and the O(n^2) global PO test; accept if a candidate passes both tests and output it. Total time n^{O(w)}\u00b7poly(n). \u220e\n\nRemarks on TTC (open pivot)\n- A full reduction of TREE-REACHABLE-PE to a single reachability check of the TTC outcome would follow from \u201cIR + global PO \u21d2 TTC\u201d. This is presently unproven here. To resolve, we propose an exhaustive search for n \u2264 5 to find a counterexample (an IR and globally PO allocation different from TTC), or else to support a proof attempt by induction on TTC rounds.\n- Search template: variables encode a strict preference profile and a matching \u00b5 \u2260 \u00b5_TTC such that: (i) \u00b5 is individually rational (each agent weakly prefers \u00b5(a) to its endowment), (ii) \u00b5 is globally PO (no directed cycle in the improvement digraph), (iii) \u00b5 \u2260 \u00b5_TTC (computed centrally). SAT/CP encoding is straightforward; the verifier can implement this finite check.\n\nObstacles\n- On trees, terminal states of the local swap dynamics need not be unique, and among them some may be globally PO while others are not; identifying the existence of a reachable globally PO terminal state remains subtle beyond stars.\n- The equivalence IR+global-PO = TTC remains unresolved here; a positive resolution would yield an O(n^2) algorithm (reachability of TTC on trees). Until then, TTC remains a sufficient certificate only (if TTC is reachable, output it), not a complete algorithm.\n\nNext steps\n- Implement the small-instance search to settle IR+global-PO vs TTC (up to n=5 or 6). Either outcome advances the main question.\n- Extend the star sink-uniqueness proof to \u201cgeneralized stars\u201d (one high-degree node) to seek a full polynomial algorithm on that class (compute all terminal states via branch-wise path subroutines, then global PO-check). This is a plausible intermediate class between stars and trees.\n- Strengthen necessary conditions: since any globally PO reachable allocation must be a terminal state, characterize terminal states on trees combinatorially (e.g., as acyclic orientations of \u201cdesire\u201d edges), then checkability may reduce to a constraint satisfaction instance.\n- Maintain the FPT algorithm as a baseline and refine the DP to prune by local no-swap constraints to reduce states.\n\nSummary of deliverables to proofs.md / output.md\n- Formal NP membership proof; details of reachability and global PO tests.\n- Lemma: globally PO reachable \u21d2 no allowed swap (terminal state).\n- Star theorem: uniqueness of terminal state; O(n^2) algorithm to compute the sink and decide TREE-REACHABLE-PE on stars.\n- Path counterexample showing NO (existence can fail even when a global PO exists but is unreachable).\n- FPT algorithm parameterized by treewidth with state definition and complexity.\n"
}