Ideas

- Goal: TREE-REACHABLE-PE on trees (existence and construction of a reachable globally Pareto-efficient allocation) is unsolved. We consolidate safe primitives and add two special cases plus an NP-membership proof, and outline two promising directions (DP and hardness reduction) with crisp invariants to be verified next.

- Safe primitives (to move into proofs.md):
  1) Reachable ⇒ IR. Any allowed swap strictly improves its endpoints; others unchanged. Thus every reachable allocation is individually rational (IR) w.r.t. the initial endowment.
  2) Global PO test. For allocation µ, build the improvement digraph D(µ) with arcs a→b for each object b≻_a µ(a) and b→owner_µ(b) for all b. µ is globally PO iff D(µ) has no directed cycle (standard).
  3) Tree target-reachability. Given a target matching µ*, reachability from µ0 on a tree can be decided in O(n^2) via “good-edge” scheduling; if reachable, we get an explicit swap sequence.
  4) TTC as a one-sided certificate. µTTC is globally PO; if µTTC is reachable on the tree (O(n^2) check), output it (YES) with a swap sequence.

- NP membership: Certificate = µ*. Verify reachability (O(n^2)) and global PO (O(n^2)). Hence TREE-REACHABLE-PE ∈ NP.

Examples

- Counterexample (PO ≠ core; IR + PO need not be TTC). Agents 1,2,3; endowments a,b,c; preferences: 1: b≻c≻a; 2: a≻b≻c; 3: a≻b≻c. Allocation µ: 1→c, 2→b, 3→a.
  - IR holds: 1,3 strictly improve; 2 ties their endowment.
  - Global PO: The improvement digraph D(µ) has no directed cycle (every object points to its owner; each agent’s outgoing arcs point to objects owned by more preferred agents, but no cycle closes because 1 and 2 seek a,b owned by 3 and 2 respectively while 3’s only arc points to a which he already owns). A direct check shows no cycle.
  - Not core: coalition {1,2} reassigns {a,b} to (1→b,2→a), strictly improving both.
  Implication: IR + global PO does not imply TTC; reducing TREE-REACHABLE-PE to TTC-reachability is invalid.

- Sink special case on trees. If µ0 has no allowed swap, then reach(µ0)={µ0}; decide by testing PO of µ0. The path example A–B–C with A: c≻a≻b, B: b≻a≻c, C: a≻c≻b is a NO instance: no allowed swap, but µ0 is not globally PO (the 3-cycle dominates).

Obstacles

- Uniqueness of sink (order-independence) under local swap dynamics is not established on trees; different sequences can lead to different sinks, and a sink need not be globally PO (path example). Thus “compute sink, then test PO” is insufficient.
- The key false claim corrected: IR + PO ≠ TTC; core and global PO diverge.

New Special Case (decidable)

- TTC-reachable-positive cases: If µTTC is reachable on the given tree, return it; else inconclusive. This is constructive and polynomial via the two subroutines above.
- Sink cases: If µ0 is a sink, we can decide in O(n^2).

Rigorous Lemmas (sketches)

Lemma 1 (Reachable ⇒ IR). Let µ0→µ1→···→µk via allowed swaps. For any agent a, the sequence µt(a) is nondecreasing in ≻_a, strictly when a swaps, else unchanged. Hence µk(a)≽_a µ0(a).

Lemma 2 (PO iff no cycle in D(µ)). If D(µ) has a directed cycle, following its arcs alternates agent→object→owner and yields a strict Pareto improvement (each agent on the cycle rotates to the next more-preferred object). Conversely, if no cycle, any reallocation attempting to strictly improve all participants would induce a cycle in D(µ), contradiction.

Lemma 3 (NP membership). Given µ*, test µ0↠µ* by the tree reachability routine (O(n^2)); then test PO via D(µ*) acyclicity (O(n^2)). Accept iff both succeed.

Ideas toward Full Resolution

A) DP over tree (treewidth=1) for existence. State at edge (parent–child) should encode a partial matching on the child’s subtree, plus an interface summary ensuring extendability both (i) to a tree-reachable global target (good-edge feasibility) and (ii) to a globally PO allocation (no directed cycles closing entirely within processed subtrees, and cycle-prevention constraints crossing the cut). Minimal state components:
- A partial injective map of processed agents to objects within the subtree (identity info is needed due to heterogeneous preferences).
- A multiset of “through-agents” whose initial-vs-final dipaths cross the cut, encoded as a permutation signature sufficient for good-edge scheduling on the cut.
- A local NO-cycle certificate (e.g., a DAG witness on the improvement relation restricted to the subtree) plus constraints on the boundary arcs to prevent cycle completion at the parent.
Target: Prove that these summaries are composable at joins and that state counts are FPT in max degree or in a suitable interface-width proxy (ideally polynomial for trees). Next step: formalize the good-edge conservation constraints per edge and a compact “cycle-prevention” boundary signature (e.g., partial topological order on boundary nodes).

B) Hardness blueprint. Reduce Reachable Object on trees (NP-complete) to TREE-REACHABLE-PE by attaching a “ladder” gadget to a designated node, with a special agent w whose ranked objects lie along the ladder. The construction enforces: (i) w can reach its top only if a specified agent x reaches a specified object y in the original tree (embedding the source instance’s constraint), (ii) the final allocation is globally PO iff w attains the top rung; otherwise a directed improvement cycle confined to the ladder exists. The reduction keeps the graph a tree by using a comb-like ladder (a path with leaves). Next step: specify the preference lists ensuring (ii) via the improvement-digraph ranks (cf. Section 5 gadget “rank” idea on cliques), and ensure (i) by coupling accessibility of the ladder rungs to x’s success via shared edges at the attachment point.

Next steps (auditable)

1) Write the formal proofs of Lemmas 1–3 and the sink special case (reach(µ0)={µ0}) for proofs.md.
2) Codify the PO≠core counterexample with an explicit D(µ) and its acyclicity check.
3) DP line: Define precisely the per-edge “flow” of dipaths (good-edge feasibility) and a boundary acyclicity signature; test on small trees (n≤8) to validate composability and state growth.
4) Hardness line: Design a constant-degree ladder gadget proving (ii) above; verify that all alternative outcomes yield a short directed cycle in D(µ) unless w takes the top rung. Then couple to (i) via a single attachment edge to preserve tree structure.

Summary

- TREE-REACHABLE-PE on trees is in NP. We have polynomial procedures to verify candidates, a constructive TTC-positive branch, and decidability in sink instances. The core≠PO correction rules out a trivial O(n^2) reduction to TTC reachability. We outline an FPT-style DP and a tree-preserving hardness reduction, each with concrete invariants to check next.
