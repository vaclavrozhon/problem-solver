{
  "content": "Ideas\n\n- Correct pivot. PO and core differ in Shapley\u2013Scarf with strict preferences: PO does not imply core. Hence the unique core=TTC cannot be used to claim uniqueness of globally PO outcomes. Consequently, TREE-REACHABLE-PE does not reduce to TTC reachability in general.\n- Safe subroutines. (i) Reachable \u21d2 IR: every agent\u2019s object improves monotonically along any allowed swap sequence. (ii) Given a fixed allocation \u00b5, global PO is checkable by the improvement digraph (acyclicity) in O(n^2). (iii) Given a tree T, reachability to a fixed target matching \u00b5 is decidable in O(n^2) via the \u201cgood edge\u201d scheduler and yields a swap witness.\n- Parameterization by number of movers k. We propose and justify an FPT algorithm for the following parameterized variant: decide if there exists a reachable globally PO allocation in which at most k agents end up with a different object than initially. This gives a concrete, verifiable foothold; the general tree case (unbounded k) remains open.\n\nExamples\n\n- PO\u2260core counterexample (to keep in notes). Endowments 1:a,2:b,3:c; preferences 1: b\u227bc\u227ba; 2: a\u227bb\u227bc; 3: a\u227bb\u227bc. Allocation \u00b5=(1\u2192c,2\u2192b,3\u2192a) is globally PO (no directed improvement cycle), but is blocked by {1,2} via (1\u2192b,2\u2192a), hence not in the core.\n- Sink special case. On a path A\u2013B\u2013C with A:a,B:b,C:c and A: c\u227ba\u227bb, B: b\u227ba\u227bc, C: a\u227bc\u227bb, no allowed swap applies. Then reach(\u00b50)={\u00b50}. A single PO test declares \u201cnone\u201d since \u00b50 is globally dominated.\n\nProofs and rigorous lemmas\n\nLemma 1 (Reachable \u21d2 IR). Let \u00b50 be the initial endowment on a tree and \u00b5 \u2208 reach(\u00b50). Then every agent a weakly prefers \u00b5(a) to \u00b50(a).\nProof. Along any allowed swap (u,w), both endpoints strictly improve; others unchanged. Therefore, each agent\u2019s assignment is a strictly increasing sequence in their own preference order across the swaps they participate in, and constant otherwise. \u220e\n\nLemma 2 (PO test in O(n^2)). For a given allocation \u00b5, construct the improvement digraph D(\u00b5) whose vertex set is A\u222aB, with arcs a\u2192b for each b such that b \u227b_a \u00b5(a), and arcs b\u2192a\u2032 where a\u2032 is the current owner of b under \u00b5. Then \u00b5 is globally Pareto-efficient iff D(\u00b5) has no directed cycle.\nProof sketch. Any directed cycle corresponds to a trade in which each agent on the cycle strictly improves; conversely, any strict Pareto improvement yields a directed cycle. This is the standard Shapley\u2013Scarf characterization. \u220e\n\nLemma 3 (Tree target reachability in O(n^2)). Given a tree T, initial endowment \u00b50, and target matching \u00b5*, there is an O(n^2)-time algorithm that decides \u00b5*\u2208reach(\u00b50) and outputs a witness sequence if yes.\nProof sketch. Each agent has a unique dipath from \u00b50(a) to \u00b5*(a). An edge is good if the two incident agents need to cross it next along their dipaths. If \u00b5*\u2260current and is reachable, some good edge exists (GLW Proposition 3 analogue). Repeatedly swap across an arbitrary good edge. Updating good edges is O(1) per swap; total swaps O(n^2). \u220e\n\nTheorem 4 (TREE-REACHABLE-PE \u2208 NP). A certificate is a target allocation \u00b5*. Verification: (i) check reachability \u00b5*\u2208reach(\u00b50) via Lemma 3; (ii) check global PO of \u00b5* via Lemma 2. Both in polynomial time.\n\nParameterized result: at most k movers\n\nDefinition. Say an allocation \u00b5 has at most k movers if |{a\u2208A : \u00b5(a)\u2260\u00b50(a)}| \u2264 k.\n\nTheorem 5. On trees, the following parameterized problem is FPT in k: decide whether there exists a reachable globally PO allocation with at most k movers, and produce one if it exists. Running time f(k)\u00b7poly(n), e.g., O(n^k\u00b7k!\u00b7poly(n)).\n\nAlgorithm (outline and correctness).\n- Enumerate all subsets S\u2286A of size \u2264k (O(n^k)). We seek \u00b5 such that \u00b5(a)=\u00b50(a) for a\u2209S.\n- For each S, consider the induced forest T[S] and the multiset of objects H(S):={\u00b50(a): a\u2208S}. Any swap sequence that leaves outsiders fixed must use only edges inside T[S] and permute H(S) among agents S; objects held by outsiders cannot traverse through them.\n- Enumerate permutations \u03c0 of H(S) onto S (at most k!). For each such candidate \u00b5S (\u00b5S(a)=\u03c0(a) for a\u2208S) form \u00b5 by setting \u00b5|_S=\u00b5S and \u00b5|_{A\\S}=\u00b50.\n- Reachability check: For each connected component C of T[S], check \u00b5|_C \u2208 reach(\u00b50|_C) using Lemma 3 on the subtree induced by C; reject \u00b5S if any component fails. If all pass, then since outsiders remain fixed and components are edge-disjoint, \u00b5\u2208reach(\u00b50) on T.\n- Global PO check: Apply Lemma 2 to \u00b5 on all agents. If acyclic, accept and output \u00b5. Otherwise, continue.\nCorrectness. Any feasible solution with \u2264k movers yields some S, and its restriction to each component of T[S] is reachable (outsiders fixed). Conversely, our construction only outputs globally PO allocations that are reachable (componentwise reachability + outsiders fixed). \u220e\n\nComplexity. O(n^k) subsets; per S, \u2264k! permutations; per permutation, a bounded number of subtree reachability checks (sum sizes \u2264k) and one global PO test O(n^2). Total f(k)\u00b7poly(n).\n\nObstacles\n\n- Unparameterized tractability on trees remains open. The all-different (perfect matching) constraint across all agents precludes a straightforward DP over a tree decomposition of T; enforcing injectivity requires tracking used objects across large subtrees and causes exponential state blow-up.\n- Extending polynomial-time solvability from paths and stars to generalized stars in the object-moving model remains open; techniques from the agent-moving model (dynamic serial dictatorship) do not directly carry over.\n\nNext steps\n\n- Catalog small instances (n\u22646) where TTC is unreachable but some other reachable globally PO allocation exists; these serve as benchmarks and may suggest structure.\n- Strengthen parameterizations: (i) mixtures of k movers and maximum branch count; (ii) bounded-height trees; (iii) bounded-degree trees with additional preference structure (e.g., single-peaked along paths) to enable decomposition into path subproblems.\n- Formalize and add to proofs.md: Lemmas 1\u20133 and Theorem 4; add Theorem 5 with a precise statement and runtime bound.\n- Maintain TTC-as-certificate: whenever \u00b5TTC is reachable (O(n^2) to check), we can output it as a valid solution; otherwise, the answer may still be \u201cyes\u201d (distinct PO), so the TTC test is only sufficient.\n"
}