Ideas

- Correct pivot. PO and core differ in Shapley–Scarf with strict preferences: PO does not imply core. Hence the unique core=TTC cannot be used to claim uniqueness of globally PO outcomes. Consequently, TREE-REACHABLE-PE does not reduce to TTC reachability in general.
- Safe subroutines. (i) Reachable ⇒ IR: every agent’s object improves monotonically along any allowed swap sequence. (ii) Given a fixed allocation µ, global PO is checkable by the improvement digraph (acyclicity) in O(n^2). (iii) Given a tree T, reachability to a fixed target matching µ is decidable in O(n^2) via the “good edge” scheduler and yields a swap witness.
- Parameterization by number of movers k. We propose and justify an FPT algorithm for the following parameterized variant: decide if there exists a reachable globally PO allocation in which at most k agents end up with a different object than initially. This gives a concrete, verifiable foothold; the general tree case (unbounded k) remains open.

Examples

- PO≠core counterexample (to keep in notes). Endowments 1:a,2:b,3:c; preferences 1: b≻c≻a; 2: a≻b≻c; 3: a≻b≻c. Allocation µ=(1→c,2→b,3→a) is globally PO (no directed improvement cycle), but is blocked by {1,2} via (1→b,2→a), hence not in the core.
- Sink special case. On a path A–B–C with A:a,B:b,C:c and A: c≻a≻b, B: b≻a≻c, C: a≻c≻b, no allowed swap applies. Then reach(µ0)={µ0}. A single PO test declares “none” since µ0 is globally dominated.

Proofs and rigorous lemmas

Lemma 1 (Reachable ⇒ IR). Let µ0 be the initial endowment on a tree and µ ∈ reach(µ0). Then every agent a weakly prefers µ(a) to µ0(a).
Proof. Along any allowed swap (u,w), both endpoints strictly improve; others unchanged. Therefore, each agent’s assignment is a strictly increasing sequence in their own preference order across the swaps they participate in, and constant otherwise. ∎

Lemma 2 (PO test in O(n^2)). For a given allocation µ, construct the improvement digraph D(µ) whose vertex set is A∪B, with arcs a→b for each b such that b ≻_a µ(a), and arcs b→a′ where a′ is the current owner of b under µ. Then µ is globally Pareto-efficient iff D(µ) has no directed cycle.
Proof sketch. Any directed cycle corresponds to a trade in which each agent on the cycle strictly improves; conversely, any strict Pareto improvement yields a directed cycle. This is the standard Shapley–Scarf characterization. ∎

Lemma 3 (Tree target reachability in O(n^2)). Given a tree T, initial endowment µ0, and target matching µ*, there is an O(n^2)-time algorithm that decides µ*∈reach(µ0) and outputs a witness sequence if yes.
Proof sketch. Each agent has a unique dipath from µ0(a) to µ*(a). An edge is good if the two incident agents need to cross it next along their dipaths. If µ*≠current and is reachable, some good edge exists (GLW Proposition 3 analogue). Repeatedly swap across an arbitrary good edge. Updating good edges is O(1) per swap; total swaps O(n^2). ∎

Theorem 4 (TREE-REACHABLE-PE ∈ NP). A certificate is a target allocation µ*. Verification: (i) check reachability µ*∈reach(µ0) via Lemma 3; (ii) check global PO of µ* via Lemma 2. Both in polynomial time.

Parameterized result: at most k movers

Definition. Say an allocation µ has at most k movers if |{a∈A : µ(a)≠µ0(a)}| ≤ k.

Theorem 5. On trees, the following parameterized problem is FPT in k: decide whether there exists a reachable globally PO allocation with at most k movers, and produce one if it exists. Running time f(k)·poly(n), e.g., O(n^k·k!·poly(n)).

Algorithm (outline and correctness).
- Enumerate all subsets S⊆A of size ≤k (O(n^k)). We seek µ such that µ(a)=µ0(a) for a∉S.
- For each S, consider the induced forest T[S] and the multiset of objects H(S):={µ0(a): a∈S}. Any swap sequence that leaves outsiders fixed must use only edges inside T[S] and permute H(S) among agents S; objects held by outsiders cannot traverse through them.
- Enumerate permutations π of H(S) onto S (at most k!). For each such candidate µS (µS(a)=π(a) for a∈S) form µ by setting µ|_S=µS and µ|_{A\S}=µ0.
- Reachability check: For each connected component C of T[S], check µ|_C ∈ reach(µ0|_C) using Lemma 3 on the subtree induced by C; reject µS if any component fails. If all pass, then since outsiders remain fixed and components are edge-disjoint, µ∈reach(µ0) on T.
- Global PO check: Apply Lemma 2 to µ on all agents. If acyclic, accept and output µ. Otherwise, continue.
Correctness. Any feasible solution with ≤k movers yields some S, and its restriction to each component of T[S] is reachable (outsiders fixed). Conversely, our construction only outputs globally PO allocations that are reachable (componentwise reachability + outsiders fixed). ∎

Complexity. O(n^k) subsets; per S, ≤k! permutations; per permutation, a bounded number of subtree reachability checks (sum sizes ≤k) and one global PO test O(n^2). Total f(k)·poly(n).

Obstacles

- Unparameterized tractability on trees remains open. The all-different (perfect matching) constraint across all agents precludes a straightforward DP over a tree decomposition of T; enforcing injectivity requires tracking used objects across large subtrees and causes exponential state blow-up.
- Extending polynomial-time solvability from paths and stars to generalized stars in the object-moving model remains open; techniques from the agent-moving model (dynamic serial dictatorship) do not directly carry over.

Next steps

- Catalog small instances (n≤6) where TTC is unreachable but some other reachable globally PO allocation exists; these serve as benchmarks and may suggest structure.
- Strengthen parameterizations: (i) mixtures of k movers and maximum branch count; (ii) bounded-height trees; (iii) bounded-degree trees with additional preference structure (e.g., single-peaked along paths) to enable decomposition into path subproblems.
- Formalize and add to proofs.md: Lemmas 1–3 and Theorem 4; add Theorem 5 with a precise statement and runtime bound.
- Maintain TTC-as-certificate: whenever µTTC is reachable (O(n^2) to check), we can output it as a valid solution; otherwise, the answer may still be “yes” (distinct PO), so the TTC test is only sufficient.
