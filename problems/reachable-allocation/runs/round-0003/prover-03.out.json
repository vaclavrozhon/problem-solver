{
  "content": "Ideas\n- We isolate a class where TREE-REACHABLE-PE is decidable in polynomial time (stars) and give rigorous proofs. We also add standard verifiers (reachability to a fixed target on trees; global PO test) to proofs. This yields firm progress and checkable lemmas.\n\nBasic verifiers (for proofs.md)\n1) Reachable \u21d2 IR. Any allowed swap strictly improves its two endpoints and leaves others unchanged. By induction along a swap sequence, each agent strictly improves (or stays) relative to its initial endowment; thus every reachable matching is individually rational (IR).\n2) Global PO implies no allowed swap. If an allowed swap existed at \u00b5, the resulting matching would strictly improve two agents and harm none, hence globally Pareto-dominating \u00b5. Therefore any globally PO matching is a sink of the local swap dynamics.\n3) Fixed-target reachability on a tree in O(n^2). Given initial \u00b50 and target \u00b5, each agent a has a unique dipath from \u00b50(a) to \u00b5(a). Define an edge as good if its endpoints both need to cross it next along their dipaths. If \u00b5 is reachable and differs from current, at least one good edge exists; conversely, if we repeatedly swap along arbitrary good edges, we reach \u00b5 iff it is reachable. Initialization and maintenance of the good-edge set yields O(n^2) time and a witness sequence.\n4) Global PO test in O(n^2). Build the improvement digraph: arcs agent\u2192object for strictly preferred objects, object\u2192owner(object). A matching is globally PO iff the digraph is acyclic.\n\nStars: unique terminal state and a complete algorithm\nModel. Star with center vertex c and leaves L. Agents are fixed on vertices; objects move by swaps across edges {c,\u2113}. Let x_t denote the object at c after t swaps (x_0 is initially at c). A swap across {c,\u2113} is allowed at state x if and only if h_\u2113 \u227b_c x and x \u227b_\u2113 h_\u2113 (c prefers the leaf\u2019s object; the leaf prefers the current center object).\n\nAcceptance digraph. On the set of objects B, add arc x\u2192h_\u2113 if leaf \u2113 strictly prefers x to its endowment h_\u2113 (i.e., x \u227b_\u2113 h_\u2113). Let \u227b_c be the strict preference of the center agent over B. Define the \u227b_c-monotone reachability set\nY := { y \u2208 B : there exists a directed path x_0 = y_0 \u2192 y_1 \u2192 \u2026 \u2192 y_k = y with y_{i+1} \u227b_c y_i for all i }.\nSince \u227b_c is a total order and Y is finite and nonempty (x_0 \u2208 Y), Y has a unique \u227b_c-maximum element; call it y\u22c6.\n\nLemma (monotonicity and realizability). Along any allowed swap sequence, the center\u2019s object strictly increases in \u227b_c. Conversely, for any \u227b_c-monotone directed path x_0\u2192\u2026\u2192y_k in the acceptance digraph, the sequence of swaps (c with leaf owning y_1), \u2026, (c with leaf owning y_k) is valid and brings the center to y_k.\nProof. In any allowed swap x\u2192h_\u2113, the center\u2019s new object h_\u2113 satisfies h_\u2113 \u227b_c x. Thus x_t is strictly increasing in \u227b_c, and objects do not repeat. For realizability, note that the only way an object h_\u2113 moves is across edge {c,\u2113}; hence if we have not yet swapped with leaf \u2113, h_\u2113 remains at \u2113. On a path x_0\u2192\u2026\u2192y_k, all targets y_i are distinct (strictly increasing in \u227b_c), so at step i the current holder of y_i is still its initial leaf; the acceptance condition holds by construction, and the center also strictly prefers y_i to y_{i-1}. Thus the prescribed swaps are valid. \u220e\n\nProposition (unique terminal state on stars). Every maximal sequence of allowed swaps terminates at the same allocation \u00b5\u22c6, in which the center holds y\u22c6; \u00b5\u22c6 is independent of the swap order.\nProof. By monotonicity, any sequence must terminate. Let y\u2032 be the center\u2019s final object under some maximal sequence. Each allowed swap corresponds to an arc in the acceptance digraph; thus y\u2032 \u2208 Y and y\u2032 \u227c_c y\u22c6. If y\u2032 \u227a_c y\u22c6, then the suffix of a path witnessing y\u22c6 from y\u2032 would give a further allowed swap from y\u2032, contradicting maximality. Hence y\u2032 = y\u22c6. Since the center uniquely determines the allocation (for each leaf, whether and when it swapped is determined by the same monotone process), the terminal matching is unique. \u220e\n\nAlgorithm (stars). Compute y\u22c6 by a graph search in O(n^2): build arcs x\u2192h_\u2113 for all pairs (x,\u2113) with x \u227b_\u2113 h_\u2113, then run a DFS/BFS from x_0 restricted to arcs leading to strictly more preferred objects for c (i.e., only traverse x\u2192x\u2032 if x\u2032 \u227b_c x). Among visited nodes, select the \u227b_c-maximum y\u22c6. Recover a realizing path to y\u22c6 (parent pointers) and simulate swaps to construct the unique terminal matching \u00b5\u22c6. Finally, run the O(n^2) global PO test on \u00b5\u22c6. If \u00b5\u22c6 is globally PO, output \u00b5\u22c6 and the swap sequence; else output NO.\n\nCorrectness. By the Proposition, any reachable globally PO matching must coincide with the unique terminal matching; hence if \u00b5\u22c6 is not globally PO, no reachable globally PO exists. Conversely, if \u00b5\u22c6 is globally PO, it is reachable by the realizing path and is a valid TREE-REACHABLE-PE witness.\nComplexity. Building the acceptance digraph is O(n^2). The constrained reachability and path reconstruction are O(n^2). The improvement-digraph PO test is O(n^2). Overall O(n^2).\n\nExample (NO-instance on a path). Path A\u2013B\u2013C with endowments (A:a,B:b,C:c) and preferences A: c\u227ba\u227bb, B: b\u227ba\u227bc, C: a\u227bc\u227bb. No allowed swap is present initially; thus reach(\u00b50)={\u00b50}. The allocation (A:c,B:a,C:b) globally dominates \u00b50, so no reachable globally PO allocation exists (answer NO).\n\nStatus of the main question on trees\n- General trees remain open. We provide: (i) polynomial verifiers (target reachability, global PO), so TREE-REACHABLE-PE \u2208 NP; (ii) a complete O(n^2) algorithm for stars via the unique-terminal-state characterization; (iii) a NO-example on paths. TTC remains a sufficient certificate (if TTC is reachable, return it), but is not known to be necessary.\n\nNext steps\n- Attempt to extend the star analysis to generalized stars (one high-degree node) via branch-wise acceptance graphs and a center-first serial dictatorship, adapting Section 4 of the attached paper\u2019s path subroutines. - Catalog small tree instances (n\u22646) to test whether multiple terminal states can occur and to probe structure separating YES/NO instances.\n"
}