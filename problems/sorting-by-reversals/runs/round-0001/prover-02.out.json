{
  "progress_md": "Ideas and setup\n- Model recap. One step picks a partition of the array into consecutive intervals and swaps some disjoint adjacent interval-pairs in parallel. This exactly matches one-step permutations in the class PBT (parallel block transpositions) as in Jel\u00ednek\u2013Opler\u2013Pek\u00e1rek (JOP): partition into B1 B2 \u2026 B2k (allowing empty blocks formally, but we never need them) and swap each (B2i\u22121,B2i).\n- Significance. JOP show wstp(PBT;n) = O(log^2 n) but only \u2126(log n) lower bounds are known. Proving \u2126(log^2 n) for bit-reversal in our model would imply \u0398(log^2 n) worst-case in PBT and address an open direction (their Problem 8.1 for L and PBT).\n- Strategy. Track, for each bit level j, the number B_j(A) of monochromatic runs when elements are colored by bit j. For bit-reversal input A0 (n=2^d): B_j(A0)=2^{j+1}. For the sorted order A\u22c6: B_j(A\u22c6)=n/2^j=2^{d\u2212j}. The potential \u03a6(A)=\u2211_{j=0}^{d\u22121} D_j(A) with D_j(A)=|log_2 B_j(A)\u2212log_2 B_j(A\u22c6)| satisfies \u03a6(A0)=\u0398(d^2) and \u03a6(A\u22c6)=0. Goal: per-step drop of \u03a6 is O(1) to force \u2126(d^2) steps.\n\nClaim 1 (per-level constant-factor cap)\n- Statement. Fix j. In any single step A\u2192A\u2032, the run-count B_j can change by at most a constant multiplicative factor: there exists an absolute c such that B_j(A\u2032) \u2208 [B_j(A)/c, c\u00b7B_j(A)]. In particular, we can take c=7.\n- Why useful here. It prevents a step from massively improving a single level j.\n- Proof sketch (rigorous local counting). Let R_j(A) be the set of j-run boundaries (edges between adjacent items where bit j flips), so B_j(A)=|R_j(A)|+1. In a step, only adjacencies at three kinds of edges per swapped pair can change: the left outer boundary, the inner boundary between the two swapped intervals, and the right outer boundary. Hence if m pairs are swapped, at most 3m adjacency edges can change in total. However, only pairs that actually intersect the j-run boundary set can affect B_j: if a pair lies entirely within a single j-monochromatic run, all three affected adjacencies are between same colors, so B_j is unchanged. Let Q_j be the set of swapped pairs whose union intersects R_j(A). By disjointness, each boundary in R_j(A) lies in the union of at most one swapped pair, so |Q_j| \u2264 |R_j(A)| = B_j(A)\u22121. For each such pair, at most O(1) of the three changed adjacencies can flip the \u201cis boundary\u201d status. Therefore |B_j(A\u2032)\u2212B_j(A)| \u2264 C\u00b7|Q_j| \u2264 C(B_j(A)\u22121) for some absolute C (one can take C=6 by a brute-force case check along the three edges). This implies B_j(A\u2032) \u2264 (1+C) B_j(A) and symmetrically B_j(A) \u2264 (1+C) B_j(A\u2032), hence the factor cap with c=1+C \u2264 7.\n- Sanity check on toy cases. For j=0 with initial 00\u2026011\u20261, only the unique 0|1 boundary can be in Q_j, hence B_0 can increase or decrease by O(1) in one step, matching the known \u201cmerging needs \u2126(log n)\u201d folklore.\n\nEdge-to-level charging (a quantitative cross-level accounting tool)\n- Setup. Let S be the set of adjacency edges whose status (same-color vs different-color at level j) changes in a step. For a fixed j, the change \u0394_j := |B_j(A\u2032)\u2212B_j(A)| is O(|S \u2229 E_j|), where E_j is the set of j-run boundary gridlines (the edges periodically spaced by L_j=2^{d\u22121\u2212j}).\n- Observation (valuation count). For an edge position e\u2208{1,\u2026,n\u22121}, define \u03bd_2(e) as the exponent of the highest power of 2 dividing e. The edge e belongs to E_j if and only if L_j divides e, i.e., j \u2264 d\u22121\u2212\u03bd_2(e). Thus the number of levels j at which e is a j-grid boundary equals \u03bd_2(e)+1. The harmonic identity \u2211_{e=1}^{n\u22121} (\u03bd_2(e)+1) = \u0398(n) implies that \u201con average\u201d an edge participates in O(1) levels.\n- Consequence (weighted bound). For any nonnegative weights w_j, we have \u2211_j w_j\u00b7\u0394_j \u2264 C\u00b7\u2211_{e\u2208S} \u2211_{j: e\u2208E_j} w_j. Choosing w_j = 2^{\u2212(j+1)} gives \u2211_j 2^{\u2212(j+1)}\u00b7\u0394_j \u2264 C\u2032\u00b7|S| because \u2211_{j: e\u2208E_j} 2^{\u2212(j+1)} \u2264 1 for every e. More generally, for w_j = 2^{\u2212(j+1)}/(j+1) we get \u2211_j w_j\u00b7\u0394_j \u2264 C\u2032\u2032\u00b7|S| (up to an extra O(log log n) factor if one tightens constants). These bounds are robust and will be useful for potentials that weight levels by 2^{\u2212j} (or slightly heavier penalties near extremes).\n- Why useful here. This provides a cross-level scarcity principle: many changed adjacencies cannot produce \u201clarge\u201d relative progress on many levels simultaneously, once progress is normalized appropriately by the density of j-boundaries.\n\nScale-sensitive refinement via pair sizes\n- Additional structure. Let each swapped pair p consist of two adjacent intervals of total length s(p). At level j, every j-run has length L_j=2^{d\u22121\u2212j}. One pair p can affect at most O(min{1, s(p)/L_j}) distinct j-boundaries: the three adjacency changes are confined to O(1) blocks of length s(p), which intersect O(s(p)/L_j) of the L_j-spaced grid edges.\n- Lemma (deterministic). For all j, \u0394_j \u2264 C\u00b7\u2211_{p} min{1, s(p)/L_j}. Consequently, using B_j(A0)=2^{j+1} and L_j=2^{d\u22121\u2212j}, we get for the bit-reversal input A0: \u0394_j / B_j(A0) \u2264 (C/n)\u00b7\u2211_{p} min{s(p), L_j}.\n- Summing in j and swapping sums yields: \u2211_j \u0394_j / B_j(A0) \u2264 (C/n)\u00b7\u2211_{p} \u2211_{t=0}^{d\u22121} min{s(p), 2^t} = (C/n)\u00b7\u2211_{p} O(s(p)\u00b7log(1+s(p))). Since \u2211_{p} s(p) \u2264 n in every step, the RHS is O(log n) per step. This recovers an \u2126(log n) lower bound by a \u201cfractional progress\u201d argument and quantifies that a step cannot make constant-fraction progress on many levels at once unless it spends large total size in pairs.\n- Why useful here. This pins down quantitatively how pair sizes limit multi-level progress. It suggests going beyond additive counting toward scale-weighted potentials.\n\nToward an \u2126(log^2 n) (or near) bound: a proposed program\n- Lemma 1 is now clean and rigorous. The remaining challenge is a cross-level bound strong enough to cap the drop of \u03a6(A)=\u2211_j |log B_j(A)\u2212log B_j(A\u22c6)| by O(1) per step. The above tools give only O(log n) so far, recovering \u2126(log n).\n- Heuristic strengthening. To achieve a constant-factor change in B_j, one needs \u0398(B_j) changed adjacencies at level j (since each changes B_j by O(1)). By the \u201csize lemma\u201d above, generating \u0398(B_j) changes at level j requires \u2211_{p} min{1, s(p)/L_j} = \u2126(1), i.e., the total s(p) across pairs must be \u2126(L_j). Doing this for T different levels j in one step requires \u2126(\u2211_{t=1}^T L_{j_t}) total size budget, but \u2211_{p} s(p) \u2264 n. For the dyadic sequence L_j=2^{d\u22121\u2212j}, the sum over a set of T distinct levels is at least \u2248 2^{d\u2212T} if clustered, but if spread out evenly across O(d) levels, \u2211 L_j \u2248 \u0398(n). This suggests that making constant-factor progress on \u03c9(1) distinct levels at once quickly exhausts the size budget, hinting that only O(1) levels can enjoy a constant-factor change per step (a formal version of speculative Lemma 2).\n- Formal target (to prove next). There exists an absolute c>0 such that in any step, the set J of levels j for which B_j changes by a factor \u22652 satisfies |J| \u2264 c. Outline approach: assign to each pair p a unique \u201chome level\u201d h(p) so that (i) p can contribute at most O(1) to constant-factor progress for levels \u0338= h(p), and (ii) the sum of s(p)/L_{h(p)} over all p is O(1). A natural home level is the unique j with L_j \u2208 [s(p)/2, 2 s(p)]. Packing disjoint pairs implies \u2211 s(p) \u2264 n, hence \u2211 s(p)/L_{h(p)} \u2264 O(1). Use the size lemma to argue that constant-factor progress at level j requires total contribution \u03a9(1) from pairs with h(p)=j. Thus at most O(1) such levels exist per step.\n- If established, combining with the per-level factor cap (Lemma 1) implies that \u03a6 can decrease by at most O(1) per step: each of the O(1) \u201cactive\u201d levels can shrink |log B_j \u2212 log B_j\u22c6| by O(1), all other levels shrink by at most a constant fraction of a fraction, summing to O(1) overall. This would yield the desired \u2126(log^2 n) lower bound.\n\nToy special case (to aim for as an intermediate milestone)\n- Restricted steps: equal-scale partitions. Suppose every step uses a partition into intervals whose lengths are within a factor 2 of a common L (and swaps a matching on these). Then: a pair has size s\u2248L. The size lemma gives \u0394_j \u2264 C\u00b7m\u00b7min{1, L/L_j}. Since m\u2264n/L, we have \u0394_j \u2264 C\u00b7(n/L)\u00b7min{1, L/L_j} \u2264 C\u00b7min{n/L, n/L_j}. For j with L_j \u226a L, \u0394_j \u2264 C\u00b7(n/L_j), a tiny fraction of B_j(A0)=2^{j+1} unless L\u2248L_j. For j with L_j\u2248L, \u0394_j \u2264 C\u00b7(n/L) gives at best constant-fraction progress. Only O(1) neighboring j have L_j within factor 2 of L. Hence per step, only O(1) levels can change by a constant factor. This toy case supports Lemma 2 in a simplified setting and could be made rigorous.\n\nSmall examples and checks\n- n=8 (d=3), A0=[0,4,2,6,1,5,3,7]. Compute B_j(A0)=(2,4,8) for j=0,1,2; B_j(A\u22c6)=(8,4,2). Any step alters at most three adjacencies per pair; a pair not intersecting the unique B_0 boundary is irrelevant to B_0; at most one pair is relevant, so B_0 changes by O(1) factor. For B_1, the four boundaries are at positions multiples of 2; disjointness similarly limits pairs that can affect many of them at once unless s(p)\u22482. This matches the scale-sensitive picture.\n\nConnections to literature (JOP and gaps)\n- Our model coincides (one-step-wise) with PBT. JOP prove O(log^2 n) upper bounds (also for L), and \u2126(log n) lower bounds in general via counting. They leave open closing the gap to \u2126(log^2 n). Our Lemma 1 aligns with their \u201cboundary locality\u201d arguments; the key remaining step is Lemma 2 (cross-level scarcity). The size-based accounting we developed above is a promising path; formalizing the \u201chome level\u201d charging to show only O(1) levels can change by factor \u22652 per step would settle the lower bound.\n\nNext steps (concrete, testable)\n1) Formalize and prove the size lemma: \u0394_j \u2264 C\u00b7\u2211_p min{1, s(p)/L_j}, including an exact constant C and a careful accounting of the three changed adjacencies per pair. This is local and checkable.\n2) Prove Lemma 1 rigorously with an explicit constant c (I gave c=7 via a union bound; tightening to c=3 or c=5 is likely with a refined boundary case analysis). Write the proof cleanly so the verifier can include it in output.md.\n3) Prove the toy special-case Lemma 2 for equal-scale partitions, giving an \u2126(log^2 n) lower bound for that restricted algorithm class. This creates a baseline \u201cspecial case\u201d lower bound.\n4) Develop the \u201chome level\u201d charging in full generality: for each pair p, define h(p) with L_{h(p)}\u2248s(p). Show that to achieve a factor-2 change at level j, the sum over p with h(p)=j of min{1, s(p)/L_j} must be \u03a9(1). Since \u2211_p s(p)/L_{h(p)} \u2264 O(1), only O(1) levels can have such progress.\n5) If step 4 succeeds, deduce per-step \u03a6 drop \u2264 O(1) (each active level reduces D_j by O(1); inactive ones by at most a small fraction), hence \u2126(log^2 n).\n6) Computational aid on small n (n=16,32): enumerate random partitions and measure how many levels j see a \u22652\u00d7 change in B_j in a single step; record empirical maximum; this can guide constants and refine the \u201cactive level\u201d definition.\n\nGaps or issues in current outputs\n- There is no output.md provided; hence no prior rigorous lemmas to cross-check. The present round delivers Lemma 1 in a form ready to be curated and a precise statement of the \u201csize lemma\u201d with a clear proof plan. The main open gap remains the core cross-level scarcity (Lemma 2), for which I outlined two routes: the equal-scale special case (feasible) and the general \u201chome level\u201d charging (harder but promising).\n"
}