{
  "progress_md": "Headlines\n- Fix a gap in output.md: the phrase \u201call other internal adjacencies remain unchanged\u201d is false as stated; what is true (and sufficient) is that the number of j-boundaries internal to each block is preserved by a block swap, hence the net change in B_j is fully determined by the three interface indices per swapped pair.\n- New per-pair inequality: for any fixed bit-level j and any single matched pair (L,R), the contribution to \u0394B_j from that pair is in [\u22122,2]. Summing over pairs that are non-monochromatic at level j yields |\u0394B_j| \u2264 2\u00b7(# such pairs).\n- Consequence: a per-level factor-3 cap per step: B_j(A\u2032) \u2264 3 B_j(A) and B_j(A) \u2264 3 B_j(A\u2032). This improves Theorem 3\u2019s factor-4 to factor-3.\n- Equal-scale first-step scarcity (from A_0): if all matched pairs have total size s in [L,2L], then only levels j with run-length L_j \u2264 s can be affected (and |\u0394B_j| \u2264 2\u00b7(n/s)), hence only O(1) adjacent levels around the \u201chome scale\u201d L_j\u2248L can undergo constant-factor changes in that first step.\n\nCorrections to output.md (local, not changing statements)\n- The proof of Theorem 3 currently says \u201call other internal adjacencies remain unchanged\u201d. This is false literalistically\u2014after swapping L and R the identities of the adjacent pairs across internal indices do change. What holds (and is enough) is:\n  \u2022 For any fixed j, the number of j-boundaries internal to L (and to R) is preserved by the swap, because the internal order within L and within R does not change.\n  \u2022 Therefore the net change in the total number of j-boundaries across the union U = L\u222aR equals the change across the three interface indices: (left outer, inner, right outer). Summing over disjoint pairs yields that \u0394B_j equals the sum of changes at 3\u00b7(#pairs) interface indices. This validates the \u201cthree indices per pair\u201d counting for the change in the number (though not for the set) of boundaries.\n\nNew technical lemmas and proofs\n- Lemma A (binary 4-cycle inequality). For any bits p,q,r,s \u2208 {0,1}, one has [p\u2260q]+[q\u2260r]+[r\u2260s]\u2212[s\u2260p] \u2264 2 and also \u2265 \u22122.\n  Proof. Consider the 4-cycle p\u2212q\u2212r\u2212s\u2212p. The sum S := [p\u2260q]+[q\u2260r]+[r\u2260s]+[s\u2260p] is even and at most 4. Then [p\u2260q]+[q\u2260r]+[r\u2260s]\u2212[s\u2260p] = S \u2212 2\u00b7[s\u2260p] \u2208 {\u22122,0,2}.\n\n- Lemma B (per-pair \u00b12 contribution). Fix level j. Let a_L be the j-color of the outside neighbor left of L; a_R the j-color of the outside neighbor right of R; and let L_1,L_k (first/last j-colors of L), R_1,R_m (first/last j-colors of R). For the matched pair (L,R), let \u0394_pair denote its contribution to \u0394B_j (i.e., the change in the number of j-boundaries inside U=L\u222aR, which equals the change across the three interfaces as noted above). Then |\u0394_pair| \u2264 2.\n  Proof. Using the notation x_a=[a_L\u2260L_1], y_a=[a_L\u2260R_1], x_b=[L_k\u2260R_1], y_b=[R_m\u2260L_1], x_c=[R_m\u2260a_R], y_c=[L_k\u2260a_R], one has \u0394_pair = (x_a+x_b+x_c)\u2212(y_a+y_b+y_c). By triangle inequalities [q\u2260x]\u2212[q\u2260y] \u2264 [x\u2260y], we get x_a\u2212y_a \u2264 [L_1\u2260R_1] and x_c\u2212y_c \u2264 [R_m\u2260L_k]. Hence\n    \u0394_pair \u2264 [L_1\u2260R_1] + [R_m\u2260L_k] + (x_b\u2212y_b)\n            = [L_1\u2260R_1] + [R_m\u2260L_k] + ([L_k\u2260R_1] \u2212 [R_m\u2260L_1]).\n  Applying Lemma A with (p,q,r,s)=(L_1,R_1,L_k,R_m) gives \u0394_pair \u2264 2. The lower bound \u0394_pair \u2265 \u22122 follows symmetrically (or by applying the same argument to the inverse swap).\u220e\n\n- Lemma C (counting pairs that can matter at level j). If the union U=L\u222aR is j-monochromatic in A (equivalently in A\u2032), then \u0394_pair=0. Therefore, letting M_j(A) be the set of matched pairs whose union is not j-monochromatic in A, we have |\u0394B_j| \u2264 2\u00b7|M_j(A)|.\n  Proof. If U is j-monochromatic, then L_1=L_k=R_1=R_m, hence all three interface indicators are unchanged and \u0394_pair=0. Summing Lemma B over pairs in M_j(A) yields the claim.\u220e\n\n- Theorem 3\u2032 (per-level factor-3 cap). For any A\u2192A\u2032 in one step and any j,\n  B_j(A\u2032) \u2264 3\u00b7B_j(A) and B_j(A) \u2264 3\u00b7B_j(A\u2032).\n  Proof. As in output.md, every pair whose union is j-monochromatic gives \u0394_pair=0; the remaining pairs are at most |T_j(A)|=B_j(A)\u22121 by disjointness (charge each such pair to, say, its leftmost internal j-boundary). Then\n    |B_j(A\u2032) \u2212 B_j(A)| \u2264 \u2211_{pairs} |\u0394_pair| \u2264 2\u00b7|M_j(A)| \u2264 2(B_j(A)\u22121),\n  which implies B_j(A\u2032) \u2264 B_j(A) + 2(B_j(A)\u22121) \u2264 3B_j(A). Apply the bound to the inverse step for the reverse inequality.\u220e\n  Remark. This improves the factor-4 cap to factor 3 and implies |\u0394 log_2 B_j| \u2264 log_2 3 per step.\n\nFirst-step equal-scale scarcity from A_0\n- Setup. Let A=A_0 be the bit-reversal input. Fix a step whose matched pairs all have total size s in [L,2L]. Recall L_j=2^{d\u22121\u2212j} is the j-run length in A_0, and B_j(A_0)=2^{j+1}.\n- Observation. If L_j > s then every union U=L\u222aR is j-monochromatic in A_0, hence by Lemma C the step has \u0394B_j=0. Therefore only levels j with L_j \u2264 s can be affected at all. Equivalently, j \u2265 d\u22121\u2212\u230alog_2 s\u230b.\n- Bound on magnitude. The number of matched pairs m satisfies m\u00b7s \u2264 n, hence m \u2264 n/s. By Lemma B, |\u0394B_j| \u2264 2m \u2264 2n/s for every j. Thus for any j with L_j \u226a s the relative change is tiny at A_0: |\u0394B_j|/B_j(A_0) \u2264 (2n/s)/2^{j+1} = 2\u00b7(2^{d\u2212j\u22121}/s) = 2\u00b7(L_j/s).\n- Consequence (first-step \u201cactive levels\u201d). For a constant-factor change (say a \u2265 2\u00d7 drop) at level j we need |\u0394B_j| \u2265 B_j(A_0)/2 = 2^{j}/2. The bound above forces L_j \u2273 s (indeed L_j \u2265 s/4 suffices to violate). Hence, in such an equal-scale step from A_0, only those j with L_j within a constant factor of s can undergo a constant-factor change. There are O(1) such adjacent levels.\n- Why useful. This is a clean, checkable special case of the sought cross-level scarcity: in an equal-scale step, only O(1) levels can progress by a constant factor from A_0. It suggests the \u201chome level\u201d approach: pairs of size s are only capable of large impact around the dyadic scale L_j\u2248s.\n\nExamples and sanity checks (n=16)\n- Take A_0=[0,8,4,12,2,10,6,14,1,9,5,13,3,11,7,15]. For j=0, B_0=2; j=1, B_1=4; j=2, B_2=8; j=3, B_3=16.\n- Pair singletons (s=2). Then m\u2264n/s=8 and per-level |\u0394B_j|\u22642m\u226416. From A_0: only levels with L_j\u2264s=2 can be affected, i.e., L_3=1, L_2=2; j\u2208{2,3}. Indeed, j=0,1 are untouched (monochromatic unions). This matches the observation.\n- Pair 4-blocks (s=8). Only levels with L_j\u22648, i.e., j\u2208{1,2,3}, can be affected in the first step.\n\nObstacles and gaps\n- The per-level factor-3 cap (Theorem 3\u2032) still allows \u0394\u03a6(A)=\u2211_j |\u0394 log_2 B_j| to drop by O(d) per step in principle\u2014hence only \u2126(log n) steps from this argument alone. We still need a cross-level scarcity result to show that only O(1) levels can experience constant-factor progress per step globally (not just in the equal-scale-first-step special case).\n- The equal-scale scarcity proved here relies on A_0\u2019s rigid dyadic runs. After the first step, run lengths cease to be uniform, so the argument does not extend immediately.\n- The \u201csize lemma\u201d \u0394_j \u2264 C\u00b7\u2211_p min{1, s(p)/L_j} is false in general (as noted in notes.md) and should not be used. Our per-pair \u00b12 bound is robust and correct, but too weak alone to prove \u2126(log^2 n).\n\nNext steps (concrete, testable)\n1) Curate Theorem 3\u2032 (factor-3 cap) into output.md, with the corrected proof of the \u201cthree indices per pair\u201d mechanism and the per-pair \u00b12 bound (Lemmas A\u2013C). This is a clean improvement and fully rigorous.\n2) Strengthen equal-scale scarcity beyond the first step. Target: If all pairs in a step have sizes within a factor-2 range [L,2L], then for any input A, only O(1) levels j can have |\u0394B_j| \u2265 \u03b8\u00b7B_j(A) for a fixed \u03b8\u2208(0,1). Approach: combine (i) the per-pair \u00b12 bound (so |\u0394B_j| \u2264 2m \u2264 2n/L), with (ii) lower bounds B_j(A) \u2273 n/L_j valid under mild structural hypotheses on A (to be identified), and (iii) an invariant controlling how small B_j(A) can be across many j simultaneously.\n3) Home-level charging: Assign to each pair p its home index h(p) with L_{h(p)}\u2248|p|. Prove a \u201cdemand lemma\u201d: constant-factor progress at level j requires \u03a9(B_j(A)) pairs with h(p)=j (not just any pairs). This would imply that only O(1) levels can see constant-factor progress in a step since \u2211_p 1_{h(p)=j} \u2264 n/L_j and \u2211_j n/L_j=O(n).\n4) Small-n brute force (n=16,32): For random partitions/matchings from A_0, measure the number of levels with \u22652\u00d7 drop in B_j; check whether it is bounded by a small constant; log the configurations saturating Theorem 3\u2032 (per pair \u0394_pair=\u00b12) to guide structural characterizations.\n\nWhy these steps matter\n- Theorem 3\u2032 improves a central per-level cap and repairs the proof. The equal-scale first-step scarcity is a concrete, verifiable instance of the cross-level bottleneck and a useful base case for induction-type arguments.\n- The home-level charging is the most promising path to an \u2126(log^2 n) lower bound: combined with Theorem 3\u2032, it would bound per-step reduction in \u03a6(A)=\u2211_j |log_2 B_j(A)\u2212(d\u2212j)| by an absolute constant, as only O(1) levels can reduce by \u0398(1) and the rest by o(1).\n"
}