{
  "progress_md": "Ideas\n- Strengthen our step-local toolkit with two exact identities that (i) relate changes of all B_j at once to Hamming distances across changed adjacencies, and (ii) sharpen the per-pair effect in the \u201csub-run\u201d regime from the bit-reversal start A_0. These are small, testable steps toward a cross-level scarcity principle.\n- Reassess the \u201cequal-scale scarcity\u201d heuristic. A careful check shows that even with strong grid alignment, a single step can interact with \u0398(log n) levels via the dyadic divisibility lattice; thus the very strong claim \u201conly O(1) active levels per step\u201d is false in that aligned special case. We document the precise extent of this phenomenon.\n\nNew lemmas (clean statements and proofs)\n1) Hamming-sum identity across levels (exact).\n- Statement. For any array A (permutation of {0,\u2026,n\u22121}), let HD_A(i) be the Hamming distance in d-bit binary between the values at positions i and i+1, i\u2208{1,\u2026,n\u22121}. Then for every j, |T_j(A)|=B_j(A)\u22121 counts the edges i where the j-th bit flips; consequently\n  \u03a3_{j=0}^{d\u22121} (B_j(A)\u22121) = \u03a3_{i=1}^{n\u22121} HD_A(i).\n- Moreover, in a single step A\u2192A\u2032, let S be the set of changed indices (three per matched pair). Then\n  \u03a3_{j=0}^{d\u22121} (B_j(A\u2032)\u2212B_j(A)) = \u03a3_{i\u2208S} (HD_{A\u2032}(i) \u2212 HD_A(i)).\n- Proof. For fixed i, the indicator [i\u2208T_j(A)] equals [j-th bits of (A[i], A[i+1]) differ]. Summing over j gives HD_A(i). Summing over i yields the first identity. For the second: outside S adjacencies are unchanged, so HD does not change; inside S, boundary-membership toggles per j encode exactly the change of HD at i; summing over j then over i gives the displayed equality.\u220e\n- Why useful. It is an exact accounting that complements toggle-locality: per changed adjacency, the total \u201cboundary mass\u201d across all levels can change by at most d. This can be paired with level-weighted potentials in future steps. It also indicates why naive unweighted potentials (\u03a3_j B_j) are too crude: a single step can change them by \u0398(d\u00b7|S|).\n\n2) Sub-run per-pair sharpening at A_0 (s < L_j regime).\n- Setup. Fix j, and let L_j := 2^{d\u22121\u2212j} be the j-run length at A_0 (positions are colored by the j-th bit of their values in A_0). Consider a matched pair (L,R) whose union U=L\u222aR has total span s := |U|.\n- Lemma. If s < L_j, then among the three changed indices (left-outer, inner, right-outer) at most one belongs to G_j = T_j(A_0) (the j-boundary set in A_0). Consequently, for A=A_0,\n  \u0394_pair(j) \u2208 {\u22121,0,1}, and in particular |\u0394_pair(j)| \u2264 1.\n- Proof. In A_0 the indices in G_j are exactly multiples of L_j; in particular, any two distinct elements of G_j differ by at least L_j. The three changed indices of the pair lie in the interval from the left-outer to the right-outer boundary, whose length is s+1. Because s < L_j, that interval contains at most one multiple of L_j. Hence at most one of the three changed indices lies in G_j. Applying toggle-locality at A_0, the contribution to |T_j| from this pair\u2019s neighborhood can change by at most 1 in absolute value.\u220e\n- Consequences (first step from A_0). For any level j and any family of pairs with s < L_j, the total j-level change satisfies |\u0394B_j| \u2264 |S\u2229G_j| \u2264 min{m, |G_j|} \u2264 min{m, B_j(A_0)\u22121}, where m is the number of pairs; moreover each contributing pair accounts for at most \u00b11 at level j. This refines Lemma 4 in the sub-run regime for the first step only.\n\n3) Decrease-only alignment bound at A_0 under strong L-grid alignment.\n- Setup. Let L be a positive integer. Suppose a step from A_0 is such that every interval boundary (both pair inners and outers) lies at an index multiple of L (e.g., we partition at indices \u22610 mod L and swap some adjacent blocks). Recall G_j = {i: 2^{d\u22121\u2212j}|i}.\n- Lemma. For any j with 2^{d\u22121\u2212j} \u2224 L (equivalently, L_j \u2224 L), we have Decrease_j = 0.\n- Proof. By toggle-locality at A_0, Decrease_j \u2264 |T_j(A_0)\u2229S|=|G_j\u2229S|. But S\u2286{multiples of L}, and if 2^{d\u22121\u2212j}\u2224L then G_j contains no multiple of L, so the intersection is empty, whence Decrease_j=0.\u220e\n- Remarks.\n  \u2022 Increases may still occur (since new j-boundaries can be created at these indices), i.e., B_j can change even when Decrease_j=0. Thus the lemma is one-sided and must be combined with the desired direction of progress at level j.\n  \u2022 The set of j with 2^{d\u22121\u2212j}|L has size 1+\u230alog_2 L\u230b. Hence even under very strong alignment, \u2018decrease-capable\u2019 levels per step can be \u0398(log L), not O(1). This corrects and quantifies the earlier over-optimistic equal-scale scarcity heuristic.\n\nExamples (sanity checks)\n- n=8, d=3, A_0=[0,4,2,6,1,5,3,7]. Take pairs of size s=2 that do not cross the unique G_0 boundary (at i=4). For j=0, Lemma 2 applies: each such pair changes B_0 by at most \u00b11; in fact, if s=2 and pairs do not straddle i=4, B_0 remains 2.\n- With strong L-grid alignment and L=2, all boundary indices S are even. For j=1 (G_1={2,4,6}), decreases are possible; for j=0 (G_0={4}) decreases are also possible; for hypothetical j with L_j odd (none here), decreases would vanish. This matches Lemma 3.\n\nObstacles and why certain approaches fail\n- Equal-scale scarcity beyond O(1). Even with all boundaries placed on an L-grid, decreases are only blocked for j with 2^{d\u22121\u2212j}\u2224L; for the complementary j (those with 2^{d\u22121\u2212j}|L) decreases are possible, and there are \u0398(log L) such levels. Thus the sought \u201conly O(1) active levels per step\u201d is false under strong alignment. Moreover, for off-scale j where decreases are blocked, increases can occur\u2014and for j in the lower half (where B_j(A_0) < B_j(A_*)), increases actually reduce the potential D_j. This shows that a decrease-only analysis cannot deliver the cross-level scarcity needed for an \u2126(log^2 n) bound.\n- Capacity-style bounds on \u03a3_j Decrease_j/B_j(A_0) suffice only for \u2126(log n). Binning pairs by scale and using per-pair \u00b12 yields \u03a3_j (Decrease_j/B_j(A_0)) \u2264 O(d) per step; hence the log-gap potential \u03a3_j |log B_j \u2212 (d\u2212j)| can drop by \u0398(d) per step, giving only \u2126(d)=\u2126(log n) steps.\n- Why we need a \u201csigned\u201d cross-level constraint. The toggle-locality and Hamming-sum identities show that a changed index influences many levels in a structured way. To bound the drop of a potential like \u03a6(A)=\u03a3_j |log B_j(A)\u2212(d\u2212j)| by O(1), we likely need a cancellation principle across levels (e.g., a signed inequality per changed index), not a pure counting of aligned hits. Establishing such a cancellation is the core open obstacle.\n\nGaps or issues in output.md\n- Output so far is consistent and correct with the factor-3 per-level cap (Theorem 5), toggle-locality (Lemma 3), and the dyadic alignment identity (Theorem 6). The new Lemma 3 above clarifies a one-sided phenomenon (decreases blocked by L-grid misalignment) and should be flagged as one-sided (increases can still occur). No changes to existing statements are needed, but adding the Hamming-sum identity would enrich the toolkit.\n\nNext steps (concrete, testable)\n1) Curate the Hamming-sum identity and the sub-run per-pair sharpening (s<L_j \u21d2 |\u0394_pair(j)|\u22641 at A_0) into output.md. Both are exact/local and straightforward to verify.\n2) Classify per-pair outcomes: For fixed j, characterize exactly when \u0394_pair(j)\u2208{\u22122,\u22121,0,1,2} in terms of the six endpoint bits (a_L,L_1,L_k,R_1,R_m,a_R). This finite case analysis will allow a demand lemma quantifying how many inner-boundary hits (as opposed to outer) are necessary for a large decrease.\n3) Develop a signed cross-level inequality: For a single changed index i, analyze the vector over j of the sign of its contribution to B_j (increase/decrease) in terms of the Hamming patterns before vs. after. Aim: show that for each i, the sum of \u201cuseful signed contributions\u201d to the potential over j is bounded by an absolute constant (or by O(1) after a carefully chosen weighting). This is the most promising route to an O(1) per-step drop for an appropriate potential.\n4) Small-n experiments (n=16,32,64): enumerate random steps from A_0; for each, record the set of j with B_j decreasing by \u2265(1/2)\u00b7B_j, and those with D_j dropping by \u22651. Empirically bound the number of \u201cactive levels\u201d and identify structural patterns of steps that maximize concurrent progress across j.\n5) If step 3 succeeds, integrate with Theorem 5 to show an O(1) drop of \u03a3_j |log B_j \u2212 (d\u2212j)| per step, implying \u2126(log^2 n). Otherwise, pivot to algorithmic exploration: design a multiscale PBT schedule exploiting simultaneous increases/decreases to approach an O(log n) algorithm specific to bit-reversal.\n\nWhy this is progress\n- The Hamming-sum identity is a new exact tool, and the sub-run sharpening is a concrete refinement in a key regime (first step from A_0). The alignment lemma (decreases-only) precisely corrects an earlier heuristic. Together, they map the landscape of what must be overcome for an \u2126(log^2 n) lower bound and outline a plausible, testable path via signed cross-level cancellations."
}