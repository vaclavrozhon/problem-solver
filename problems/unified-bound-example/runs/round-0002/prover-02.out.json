{
  "content": "Ideas\n\n- Abandon round-robin blocks: the previously claimed UB lower bound is false due to adjacent-block, previous-round witnesses. In fact, UB is often O(log k) there. I will not pursue that family.\n- Replace it with a recursively interleaved \u201c2413-inflation\u201d family F_h on n=4^h keys. Crucial properties: (i) block contiguity in key order; (ii) time order at each node is 2,4,1,3; (iii) the first element of each child\u2019s block is the child\u2019s midpoint. This prevents adjacent-in-key recent witnesses from being too close.\n- UB side: I prove a clean \u2126(n log n) lower bound by charging only at child-boundary steps, exactly 3 per internal node of the 4-ary decomposition; the midpoint choice yields a uniform per-boundary lower bound log(\u03a9(block size)). Summing over all nodes gives \u0398(n log n).\n- BST side: I prove Wilber-1 = O(n) for F_h with respect to a tailored static reference tree aligning with the decomposition (split halves {1,2} vs {3,4} at each node). Tango trees then give an explicit algorithm with cost O(n log log n), hence OPT_BST \u2264 O(n log log n). This already yields a separation OPT/UB = O(log log n / log n) = o(1).\n\nDefinitions (the fractal family F_h)\n\n- Let n=4^h. For any interval I=[a..b] with |I| a power of 4, split I into four contiguous, equal subintervals I1<I2<I3<I4. Define midpoint m(I) := \u230a(a+b)/2\u230b.\n- F_0(I): the unique element of I.\n- For t\u22651, define F_t(I) as the concatenation of\n  S2 := F_{t-1}(I2), then S4 := F_{t-1}(I4), then S1 := F_{t-1}(I1), then S3 := F_{t-1}(I3),\n  with the inductive constraint that for every t and every interval J of size 4^t, the first element emitted by F_t(J) is m(J) (this is consistent since F_{t-1}(Jk) starts at m(Jk)).\n- Define \u03c0_h := F_h([1..4^h]). For general n, take h=\u230alog_4 n\u230b, use the first 4^h keys, and append the O(n\u22124^h) tail arbitrarily; this affects UB and OPT by at most O(n), negligible asymptotically.\n\nUB lower bound for \u03c0_h\n\nNotation. Let T be the 4-ary decomposition tree; each internal node v corresponds to an interval I_v of size s_v, partitioned into four equal contiguous subintervals I_v(1)<I_v(2)<I_v(3)<I_v(4). The time order inside I_v is S2,S4,S1,S3, where Sk is the subsequence F on I_v(k).\n\nKey structural fact. For each internal v, the subsequence restricted to I_v is exactly the concatenation S2\u2218S4\u2218S1\u2218S3. Each Sk consists of all keys in I_v(k), and no key of I_v(k) appears outside Sk.\n\nLemma 1 (First-of-child midpoint separation). Fix any internal node v and a child index k\u2208{1,2,3,4}. Let x be the first key of Sk. Then for any key y\u2209I_v(k), we have |x\u2212y| \u2265 s_v/8.\nProof. The child interval I_v(k) has length s_v/4. Its midpoint x is at distance at least s_v/8 from either boundary of I_v(k). If y lies outside I_v, then |x\u2212y| is at least the distance from x to the nearest boundary of I_v, which is \u2265 s_v/8. If y lies in a sibling I_v(k\u2032), the closest such y is at the boundary between I_v(k) and I_v(k\u2032) when k\u2032 is adjacent to k; the distance from x to that boundary is \u2265 s_v/8, and non-adjacent siblings are even farther. \u220e\n\nLemma 2 (Per-boundary UB). Let i be the time index of the first element of Sk at node v (i.e., the boundary S?\u2192Sk within I_v). Then\nUB_i(\u03c0_h) = log(1 + min_{j\u2264i\u22121} ( j + |x_i \u2212 x_{i\u2212j}| )) \u2265 log(1 + s_v/8).\nProof. At time i, no earlier access lies in I_v(k), so all earlier y lie in I_v\\I_v(k) or outside I_v. By Lemma 1, for all earlier y we have |x_i\u2212y| \u2265 s_v/8. Thus for every j, j+|x_i\u2212x_{i\u2212j}| \u2265 s_v/8, so the minimum is \u2265 s_v/8. \u220e\n\nCounting boundaries. For each internal v, the restricted sequence S2\u2218S4\u2218S1\u2218S3 has exactly three boundaries (S2\u2192S4, S4\u2192S1, S1\u2192S3), each witnessed at a unique global time index i(v,\u00b7). Therefore the set of such boundary indices over all v has total cardinality 3\u00b7|Int(T)|, where |Int(T)| = (4^h\u22121)/3.\n\nTheorem 3 (UB lower bound). There exists a universal constant c>0 such that\nUB(\u03c0_h) \u2265 c \u00b7 n \u00b7 log n.\nProof. Summing Lemma 2 over all boundaries and using logs base 2,\nUB(\u03c0_h) \u2265 \u2211_{v internal} 3\u00b7log(1 + s_v/8) \u2265 \u2211_{v internal} (3\u00b7(log s_v \u2212 3))\n= 3\u2211_{\u2113=0}^{h\u22121} 4^\u2113 ( (h\u2212\u2113)\u00b7log 4 ) \u2212 O(\u2211_{\u2113=0}^{h\u22121}4^\u2113)\n= \u0398( (\u2211_{\u2113} 4^\u2113)\u00b7h ) \u2212 O(4^h)\n= \u0398( n \u00b7 h ) = \u0398( n \u00b7 log n ). \u220e\n\nRemarks.\n- The midpoint constraint is crucial; it defeats the adjacent-sibling counterexample (which broke the round-robin scheme) by ensuring the first key of a new child is at distance \u2265 s_v/8 from any already visited key in that parent\u2019s scope and from keys outside the parent as well.\n- We only used one access per child-boundary per node; no double counting occurs because each such boundary occurs at a distinct global time.\n\nBST side: Wilber-1(T_ref) = O(n) and Tango upper bound\n\nWe select a static reference BST T_ref tailored to the decomposition.\n\nConstruction of T_ref. Recursively, for an interval I_v with children I_v(1)<I_v(2)<I_v(3)<I_v(4), make a BST node splitting I_v into L_v := I_v(1)\u222aI_v(2) and R_v := I_v(3)\u222aI_v(4) at the (unique) pivot separating L_v and R_v. Recurse on L_v and R_v. Fill to a full BST by any binary splits internal to the contiguous subintervals (these extra nodes may contribute at most O(1) alternations each; see below).\n\nLemma 4 (Alternations at decomposition splits). For any internal v, restricted to I_v, the left/right partition L_v vs R_v is visited in the order L_v, R_v, L_v, R_v (because the child order is 2,4,1,3), hence the alternation count contributed at this node is exactly 3.\nProof. S2\u2282L_v, S4\u2282R_v, S1\u2282L_v, S3\u2282R_v and no interleaving occurs across these four blocks at node v. \u220e\n\nLemma 5 (Total Wilber-1 bound). The sum of alternations over all nodes of T_ref is O(n).\nProof. Each internal decomposition split contributes exactly 3 by Lemma 4, and there are (4^h\u22121)/3 such splits, giving O(n). The additional filler nodes split contiguous segments that the sequence traverses monotonically (as a single block) at that scale, so each such node sees at most one alternation. The number of filler nodes is O(n), hence their total adds O(n). \u220e\n\nCorollary 6 (BST upper bound via Tango). The Tango tree achieves an O(log log n) approximation of Wilber-1, hence there is an explicit BST algorithm with cost O(W_1\u00b7log log n) = O(n log log n). Therefore\nOPT_BST(\u03c0_h) \u2264 O(n log log n).\n\nCombining with Theorem 3 yields the desired separation:\nOPT_BST(\u03c0_h) / UB(\u03c0_h) = O(log log n / log n) = o(1).\n\nExamples and sanity checks\n\n- h=1 (n=4). \u03c0_1 over blocks I1<I2<I3<I4 is the order I2, I4, I1, I3. There are three child-boundaries at the root; each first key of a child is its midpoint, so each boundary contributes UB_i \u2265 log(1 + 4/8) \u2265 1 (constant); the sum is \u0398(log 4)=2, consistent with \u0398(n log n)=\u0398(4\u00b72). Small-n constants are noisy, but the per-boundary mechanism is visible.\n- h=2 (n=16). The root contributes three terms of size \u2248 log(16/8)=log 2=1; its four children each contribute three terms of size \u2248 log(4/8)=0 (truncated at log 1 in exact arithmetic), showing that small blocks contribute little, while large blocks supply the logarithmic mass. As h grows, the sum over all internal nodes concentrates around levels where s_v is large, yielding \u0398(n log n).\n\nObstacles and discussion\n\n- The midpoint constraint must be enforced at every scale (we baked it into the recursion). Without it, adjacent-in-key siblings (e.g., 1 vs 2 at a node) could produce \u0394=O(1) witnesses and destroy the per-boundary lower bound.\n- The UB lower bound uses only O(n) carefully chosen steps (child-boundaries). This skirts the double-counting pitfall: while many \u201cfirst visits\u201d at different scales coincide, each global step i is associated with a unique deepest node v(i) where the child changes, and we charge that boundary only.\n- For the BST upper bound, I used Tango rather than Greedy. If one can show that Greedy (or a tailored algorithm) achieves O(n) on \u03c0_h (e.g., for permutations whose substitution decomposition uses only simple nodes of size \u22644), we would obtain the strong separation O(n) vs \u03a9(n log n). I do not claim that here; I instead rely on the standard O(log log n)-competitive guarantee of Tango w.r.t. Wilber-1.\n\nNext steps\n\n1) Strengthen the BST upper bound. Attempt to prove OPT_BST(\u03c0_h)=O(n). Two avenues: (a) prove that Greedy runs in O(n) on permutations whose substitution decomposition uses only 4-sized simple nodes (2413/3142); or (b) design an explicit rotation-on-search-path algorithm maintaining a decomposition-aware invariant that serves each boundary with O(1) amortized cost.\n2) Validate numerically. Compute UB(\u03c0_h)/(n log n) for h up to, say, 10 and measure Tango\u2019s cost in simulations to calibrate constants.\n3) DFS UB=O(n). Provide a clean proof or citation (e.g., charge log-gaps to subtree sizes along the traversal). This is orthogonal but useful for the broader landscape.\n4) Explore variants. The 2413 order is one choice; 3142 works similarly. Examine whether mixing these at nodes preserves UB=\u0398(n log n) and W_1=\u0398(n).\n\nSummary of proven contributions\n\n- Defined an explicit family \u03c0_h (n=4^h) via recursive 2413-inflation with midpoint-first children.\n- Proved UB(\u03c0_h) \u2265 c n log n by charging at child-boundary steps (Lemma 2 and Theorem 3).\n- Constructed a reference BST with Wilber-1(\u03c0_h)=O(n) (Lemmas 4\u20135), hence OPT_BST(\u03c0_h) \u2264 O(n log log n) via Tango.\n- This yields OPT_BST(\u03c0_h) = o(UB(\u03c0_h)), solving the separation task (not yet in the strongest O(n) form)."
}