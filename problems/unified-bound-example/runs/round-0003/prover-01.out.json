{
  "content": "# Overview\n\nWe correct and sharpen several key points, provide rigorous bounds where feasible, and isolate a flaw in the current UB lower-bound strategy for the 2413-inflation family. We also prove that random permutations have UB = \u2126(n log n) in expectation, clarifying what structural feature is needed to achieve large UB. Finally, we give a precise Wilber-1 = \u0398(n) bound for the tailored reference tree on the 2413-inflation family, which remains algorithmically promising but does not yet yield a UB = \u0398(n log n) lower bound.\n\n# Part I: UB lower bound via \u201cchild-boundaries\u201d only gives \u0398(n), not \u0398(n log n)\n\nSetup. Let n = 4^h. Consider the recursively defined 4-ary decomposition of [1..n] at each level into contiguous blocks A<B<C<D, with time order 2,4,1,3 at every node (2413-inflation). Impose the midpoint-first constraint inside each block: the first key in a child\u2019s restricted subsequence is the midpoint of that child\u2019s key interval.\n\nDefinition (child-boundary times). At any internal 4-ary node v with interval size s_v, the restricted sequence on v\u2019s keys is the concatenation (B,D,A,C), each a contiguous block. The three transitions 2\u21924, 4\u21921, 1\u21923 are the \u201cchild-boundary\u201d times at v.\n\nClaim A (midpoint separation at boundaries). At a boundary time i at node v (first access into the new child), all previous accesses lie outside that child. Since the accessed key is the child midpoint, its rank distance to any previous key is at least s_v/8. Hence UB_i \u2265 log(1 + s_v/8).\n\nThis part is correct. The counting step, however, has a crucial quantitative issue.\n\nFact B (disjointness and count). Each consecutive pair (x_{i\u22121}, x_i) has a unique lowest common ancestor (LCA) in the 4-ary decomposition; within that ancestor\u2019s restricted sequence, the pair appears at exactly one child-boundary. Thus the boundary times over all nodes are disjoint and number exactly n\u22121 (three per internal node, and the number of internal nodes is (n\u22121)/3).\n\nSummation. Summing Claim A over all boundaries gives\n\u2211_i UB_i \u2265 \u2211_{v internal} 3\u00b7log(1 + s_v/8) = \u0398(\u2211_{\u2113=0}^{h\u22121} 4^\u2113 \u00b7 (h\u2212\u2113)) = \u0398(n).\nIndeed, with s_v = 4^{h\u2212\u2113} and 4^\u2113 nodes at level \u2113,\n\u2211_{\u2113=0}^{h\u22121} 4^\u2113 (h\u2212\u2113) = 4^h \u2211_{t=1}^{h} t/4^t = \u0398(4^h) = \u0398(n).\n\nConclusion 1. The child-boundary charging yields UB(\u03c0) = \u2126(n), not \u2126(n log n). This matches the earlier warning that \u201cone first-arrival per block per scale\u201d only achieves O(n) total. Thus the UB = \u0398(n log n) claim from boundary events alone is incorrect.\n\n# Part II: A precise Wilber-1 = \u0398(n) bound for the tailored reference tree\n\nWe formalize the Wilber-1 bound for the above 2413-inflation family using a reference BST T_ref that mirrors the 4-ary decomposition with three binary splits per 4-ary node.\n\nConstruction of T_ref. For each 4-ary node v with children A<B<C<D:\n- Introduce a binary node u_v splitting L := A\u222aB vs R := C\u222aD.\n- In u_v\u2019s left subtree, add a node splitting A vs B; in the right subtree, add a node splitting C vs D.\n- Recurse inside each of A,B,C,D identically.\nThis yields a BST over [n] whose internal nodes are in bijection with the set of \u201cadjacent-block\u201d binary splits at every 4-ary node (three per 4-ary node).\n\nWilber-1 definition. For a fixed BST T_ref and access sequence, W_1(T_ref) is the sum, over all internal nodes w of T_ref, of the number of alternations between the left and right sides of w along the access sequence restricted to keys in w\u2019s subtree.\n\nLemma 2. For the 2413-inflation sequence,\n- At node u_v (split L vs R), the alternation count is exactly 3, because the restricted sequence at v is L,R,L,R (B,D,A,C), with each block contiguous.\n- At the A-vs-B split (left child of u_v), the restricted sequence is B then A, giving exactly 1 alternation.\n- Similarly at the C-vs-D split, the restricted sequence is D then C, giving exactly 1 alternation.\nRecursive independence: Within each child, the alternation count at these nodes is determined solely by the top-level block order at that node; deeper recursion does not create additional alternations at these nodes because within each child block all keys belong to the same side with respect to these splits.\n\nTherefore each 4-ary node contributes 3+1+1 = 5 alternations, independently of block size. There are (n\u22121)/3 internal 4-ary nodes, hence\nW_1(T_ref) = 5 \u00b7 (n\u22121)/3 = \u0398(n).\n\nCorollary 3. Tango trees achieve total cost O(W_1(T_ref) \u00b7 log log n) = O(n log log n) on this family. Consequently OPT_BST(\u03c0) \u2264 O(n log log n). This yields a nontrivial but non-strong separation only if we can show UB(\u03c0) = \u2126(n log n), which the boundary-only UB argument does not establish.\n\n# Part III: Random permutations have UB = \u2126(n log n) in expectation\n\nWe prove a clean, self-contained lower bound showing that for a uniform random permutation, the unified bound is \u2126(n log n) in expectation. This clarifies the mechanism needed for large UB: recent windows often contain no keys close to the current key in rank.\n\nLemma 4 (window emptiness around x_i with constant probability). Fix i \u2208 {\u230an/2\u230b,\u2026,n}. Let t := \u230a\u221an\u230b and r := \u230a\u03b1\u00b7n/t\u230b for a sufficiently small constant \u03b1 \u2208 (0,1/4). Condition on x_i. The previous t accesses x_{i\u22121},\u2026,x_{i\u2212t} are t distinct, uniformly random elements of [n]\\{x_i, other earlier positions}. Then\nPr[ for all 1 \u2264 j \u2264 t, |x_{i\u2212j} \u2212 x_i| \u2265 r ] \u2265 exp(\u2212\u0398(\u03b1)),\nby a standard occupancy/independence estimate: the window of size at most 2r around x_i contains at most 2r keys, and the probability that none of the t distinct uniformly random keys falls in this window is\n((n\u22121\u22122r) choose t)/((n\u22121) choose t) \u2265 (1 \u2212 2r/(n\u22121))^t \u2265 exp(\u22124\u03b1 + o(1)).\n\nLemma 5 (UB_i lower bound from window emptiness). On the event in Lemma 4, for all j \u2264 t we have \u0394_i(j) \u2265 r, hence j + \u0394_i(j) \u2265 r; for j > t we have j \u2265 t. Therefore min_j (j + \u0394_i(j)) \u2265 min{ r, t }.\nWith r = \u03b1\u00b7n/t and t = \u230a\u221an\u230b, we get min{ r, t } \u2265 c\u00b7\u221an for some constant c>0. Hence\nUB_i \u2265 log(1 + c\u00b7\u221an) \u2265 (1/2) log n \u2212 O(1).\n\nTheorem 6. For a uniform random permutation \u03c0 on [n], E[UB(\u03c0)] \u2265 c\u2032 n log n for some c\u2032>0.\nProof. For i from \u230an/2\u230b to n, Lemmas 4\u20135 give E[UB_i] \u2265 p \u00b7 ((1/2) log n \u2212 O(1)) with p a positive constant. Summing over \u0398(n) such i yields E[UB(\u03c0)] \u2265 c\u2032 n log n.\n\nRemark. This also implies that the maximum UB over permutations is at least \u2126(n log n). However, random permutations are hard for BSTs (Wilber lower bounds \u0398(n log n)), so they do not give a separation.\n\n# Part IV: Why the 2413-inflation family likely has only UB = \u0398(n)\n\nIntuition and obstruction. In the 2413-inflation family, each block at every level is visited contiguously in time. Consequently, for any i, the last t accesses for any t up to the number of prior accesses within the current block lie entirely within that block. Thus the \u201cnearby in time\u201d witnesses come from the same block. To force a UB_i \u2248 \u2126(log s) at scale s, we would need that every key among those last t (within the block) is far in key from x_i, uniformly over a window t \u2248 \u0398(s), for many i. But within the block, the order is highly structured (and, if preorder-like, it keeps producing closer and closer neighbors as recursion deepens). The boundary-only charging captures the earliest positions in each block (when no in-block predecessors exist) and yields only \u0398(n) total as established in Part I.\n\nConjecture 7 (to target). For any permutation \u03c0 that is a hierarchical contiguous concatenation at all scales (e.g., defined by a fixed finite simple inflation pattern like 2413), we have UB(\u03c0) = O(n). This would explain the failure of boundary-only approaches and aligns with the DFS UB intuition. A proof strategy would be to bound UB_i by log(2 + |x_i \u2212 x_{i\u22121}|) and show that \u2211 log(2 + |x_i \u2212 x_{i\u22121}|) = O(n) for such hierarchically concatenated orders by charging to block sizes across scales; we plan to formalize this next.\n\n# Part V: Next steps (precise, auditable)\n\n1) Formalize the Wilber-1 bound.\n   - Write the exact mapping from 4-ary nodes to the binary nodes in T_ref and prove Lemma 2 rigorously: alternations per node are exactly 3,1,1.\n   - Conclude W_1(T_ref) = 5\u00b7(n\u22121)/3.\n\n2) UB(\u03c0) = O(n) for hierarchical concatenations.\n   - Prove: If a permutation is obtained by recursively concatenating k constant-size blocks at each node, then \u2211_i log(2 + |x_i \u2212 x_{i\u22121}|) = O(n). Provide an explicit charging scheme to block sizes across levels. This gives UB(\u03c0) \u2264 O(n) and resolves the 2413-inflation family\u2019s UB claim.\n\n3) Random UB lower bound write-up.\n   - Move the Lemma 4\u20135 proof into proofs.md with precise constants and handle boundary effects (e.g., near x_i close to 1 or n) by ignoring O(1) endpoints.\n\n4) Search for a new candidate family.\n   - The \u201clow alternation at all scales\u201d condition appears incompatible with UB = \u0398(n log n). We should instead target a family where Wilber-1 is O(n) for some carefully chosen reference tree that may vary with the instance (still allowed for Tango with O(n log log n) overhead) but where within each time-contiguous block the order is \u201cspread-out\u201d enough to yield \u2126(s log s) UB per block. The obstacle is that internal nodes of T_ref inside a block will then incur many alternations, driving W_1 up; we need a principled way (or a new algorithm) to avoid this.\n\n5) DFS UB = O(n) proof.\n   - Provide a clean, rigorous proof (or a citation) that for preorder/postorder traversals, \u2211 log(2 + |x_i \u2212 x_{i\u22121}|) = O(n), by charging to subtree sizes. This will be carried out next round.\n\n# Summary\n\n- The child-boundary UB charging for the 2413-inflation family yields only UB = \u0398(n), not \u0398(n log n); we provided the exact summation demonstrating \u0398(n).\n- We established a precise W_1(T_ref) = \u0398(n) bound for a tailored static reference tree on the same family, implying a Tango cost O(n log log n).\n- We proved that random permutations satisfy E[UB] = \u2126(n log n) via a simple window-of-last-\u221an argument. This clarifies what \u201clarge UB\u201d structurally requires.\n- We conjecture that hierarchical contiguous concatenations (including 2413-inflation with midpoint-first) have UB = O(n), suggesting this path will not yield the desired strong separation. Next, we will (i) formalize W_1 and (ii) prove the DFS/hierarchical UB upper bounds rigorously, and (iii) pivot to constructing families that can simultaneously have large UB and small BST cost under a more sophisticated algorithmic analysis (or show incompatible constraints)."
}