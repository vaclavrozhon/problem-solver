Ideas

- We work with a recursively interleaved 2413-inflation family π_h on n = 4^h keys, with a midpoint-first constraint at every node. This avoids the adjacent-block previous-round witnesses that invalidated the round-robin construction.
- Goal this round: give clean, rigorous proofs of (i) a UB lower bound UB(π_h) = Θ(n log n) via charging only at child-boundary steps, and (ii) a Wilber-1 bound W1(π_h,T_ref) = O(n) for a fixed balanced reference BST that mirrors the 4-ary decomposition. Tango then gives OPT_BST(π_h) ≤ O(n log log n), yielding o(1) separation.

Formal setup: the permutation family

- Let n = 4^h. For any integer interval I = [a..b] with |I| = 4^t, define the four equal contiguous subintervals I(1) < I(2) < I(3) < I(4). Let m(I) := ⌊(a+b)/2⌋.
- Define F_0(I) = (a) (the single key).
- For t ≥ 1, define F_t(I) as the concatenation S2 ∘ S4 ∘ S1 ∘ S3, where Sk := F_{t−1}(I(k)), with the invariant that the first element of F_{t−1}(J) equals m(J) for any |J| = 4^{t−1} (this holds by induction). In particular, the first element of each Sk is m(I(k)).
- Define π_h := F_h([1..4^h]). This is a permutation of [n]. Every node in the 4-ary decomposition tree has size s_v = 4^t for some t; its children have size s_v/4 and appear contiguously in time in the order 2,4,1,3.

UB lower bound via child-boundaries

Lemma 1 (Midpoint separation). Let v be an internal node with interval I_v of size s_v = 4^t, and let k ∈ {1,2,3,4}. Let x be the first key of Sk = F_{t−1}(I_v(k)), which equals m(I_v(k)). For any key y ∉ I_v(k), we have |x − y| ≥ s_v/8.
Proof. The child interval I_v(k) has length s_v/4. Its midpoint x is at distance exactly s_v/8 from each boundary of I_v(k) (since s_v is a multiple of 4). Any y in an adjacent sibling lies beyond the boundary between I_v(k) and that sibling, hence |x−y| ≥ s_v/8. If y is in a nonadjacent sibling or outside I_v altogether, the nearest such y is no closer than the nearest boundary of I_v(k), yielding the same bound. ∎

Definition (child-boundary times). For an internal node v, its restricted sequence is S2 ∘ S4 ∘ S1 ∘ S3. Define the child-boundaries at v to be the global time indices i at which the sequence transitions S2→S4, S4→S1, S1→S3. Equivalently, at such i, x_i is the first element of F_{t−1}(I_v(k)) for k ∈ {4,1,3} respectively.

Lemma 2 (Per-boundary UB). If i is a child-boundary time at v, then
UB_i(π_h) = log(1 + min_{j≤i−1} ( j + |x_i − x_{i−j}| )) ≥ log(1 + s_v/8).
Proof. At time i, no earlier access lies in I_v(k), hence by Lemma 1 we have |x_i − x_{i−j}| ≥ s_v/8 for all j. Therefore j + |x_i − x_{i−j}| ≥ s_v/8 and the claim follows. ∎

Lemma 3 (Counting child-boundaries; LCA bijection). Let B_h be the set of all child-boundary times over all internal nodes of the 4-ary decomposition tree. Then |B_h| = n − 1, and the mapping φ: {2,…,n} → B_h that maps i to the pair (v, boundary) at v = LCA_4(x_{i−1}, x_i) (LCA in the 4-ary decomposition) is a bijection.
Proof. The restricted sequence at any node is a concatenation of four contiguous child-blocks, hence contributes exactly three child-boundaries. Let N_t be the number of internal nodes at height t; N_t = 4^{h−t} − 1 over three? More directly, each level ℓ has 4^ℓ nodes of size 4^{h−ℓ}, all internal for ℓ ≤ h−1, so total internal nodes is (4^h − 1)/3, thus |B_h| = 3·(4^h − 1)/3 = 4^h − 1 = n − 1.
Injectivity: For i ≥ 2, let v be the least (deepest) node whose children contain x_{i−1} and x_i in different children. Within v’s restricted sequence S2 ∘ S4 ∘ S1 ∘ S3, the two keys lie in consecutive child-blocks; since these blocks are contiguous in time, (x_{i−1}, x_i) is exactly the last element of one block followed by the first element of the next. Hence i is a child-boundary time at v. Different i have different ordered pairs (last of block, first of next), so different child-boundaries. Since both sets have cardinality n − 1, φ is bijective. ∎

Theorem 4 (UB lower bound). There exists c>0 such that UB(π_h) ≥ c · n · log n. In fact,
UB(π_h) ≥ ∑_{v internal} 3·log(1 + s_v/8) = Θ(n log n).
Proof. By Lemma 3 and Lemma 2, summing over all child-boundary times gives UB(π_h) ≥ ∑_{v internal} 3·log(1 + s_v/8). At level ℓ (0 = root), there are 4^ℓ nodes with s_v = 4^{h−ℓ}. For s_v ≥ 8, log(1+s_v/8) ≥ (1/2) log s_v − O(1); for s_v ∈ {4}, the term is a positive constant. Therefore the sum is Θ(∑_{ℓ=0}^{h−1} 4^ℓ · (h−ℓ)) = Θ(n h) = Θ(n log n). ∎

Corollary 5. UB(π_h) = Θ(n log n), since trivially UB(π_h) ≤ n log(1+n) = O(n log n).

Wilber-1 bound and a Tango upper bound for OPT_BST

Define T_ref to be the perfectly balanced BST on [n]. Equivalently, for each 4-ary node v with interval I_v and children I_v(1)<I_v(2)<I_v(3)<I_v(4), T_ref contains the binary node that splits L := I_v(1)∪I_v(2) vs R := I_v(3)∪I_v(4), and recursively inside L the node that splits I_v(1) vs I_v(2), and inside R the node that splits I_v(3) vs I_v(4), and so on. Thus T_ref has n−1 internal nodes.

Lemma 6 (Alternations at nodes of T_ref). For any 4-ary node v:
- At the split L := I_v(1)∪I_v(2) vs R := I_v(3)∪I_v(4), the side sequence along π_h is L,R,L,R, hence contributes exactly 3 alternations.
- At the split I_v(1) vs I_v(2), the side sequence is R,R,L,R (since keys in I_v(3),I_v(4) are on the same side as I_v(2)), contributing exactly 2 alternations. Similarly for the split I_v(3) vs I_v(4) (2 alternations).
Proof. The time order inside I_v is S2 (⊂ I_v(2)), S4 (⊂ I_v(4)), S1 (⊂ I_v(1)), S3 (⊂ I_v(3)), with no interleaving across these blocks. Classify each block by the side of the considered pivot; the claimed patterns follow immediately. Within each block the side is constant relative to that pivot. ∎

Proposition 7 (Wilber-1 is linear). Let W1(T_ref, π_h) denote Wilber’s first bound with respect to T_ref. Then
W1(T_ref, π_h) ≤ ∑_{v internal(4-ary)} (3 + 2 + 2) = 7·(4^h − 1)/3 = O(n).
Proof. Each internal node of T_ref corresponds to exactly one of the three splits at some 4-ary node v as above. By Lemma 6, its alternation count is at most 3 (macro split) or 2 (micro split). Summing over all such nodes yields the bound. ∎

Corollary 8 (Tango upper bound). Tango trees achieve cost O(W1 · log log n), so there is an explicit BST algorithm with cost O(n log log n) on π_h. In particular, OPT_BST(π_h) ≤ O(n log log n).

Conclusion. Combining Corollary 5 and Corollary 8 gives
OPT_BST(π_h) / UB(π_h) = O(log log n / log n) = o(1).

Examples (h=2). n=16. At the root, three boundary steps contribute ≈ log(1 + 16/8) = log 3 = Θ(1). At its four children, the three boundary steps per child contribute log(1 + 4/8) = log 1.5 = Θ(1). Summing across all nodes yields UB = Θ(16 · log 16) = Θ(64). T_ref at the root contributes 3 alternations; at the next level, each of the two splits contributes 2; deeper nodes contribute similarly, totaling O(16) alternations.

Obstacles

- Strong separation (OPT = O(n)) remains open here. A plausible route is to prove Greedy or a tailored rotation-on-search-path algorithm runs in O(n) on this 4-decomposable, midpoint-first family. We do not claim this yet.

Next steps

- Formalize a Greedy upper bound on this family (cite or prove O(n) for permutations with substitution decomposition using only simple nodes of size ≤4 and aligned midpoints).
- Empirically compute UB(π_h) and Tango costs up to h≈10 to calibrate constants.
- Provide a concise DFS UB = O(n) proof (for completeness of the landscape).